<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en" dir="ltr">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-script-type" content="text/javascript">
<meta http-equiv="content-style-type" content="text/css">
<link rel="Posql Project Page" lang="ja" href="http://sourceforge.jp/projects/posql/">
<link rel="Posql Project Page" lang="en" href="http://sourceforge.net/projects/posql/">
<link rel="Posql API Reference" href="posql.api.manual.html">
<link rel="Posql Source Document" href="posql.src.manual.html">
<link rel="Posql Develop Blog" href="http://polygon-blog.blogspot.com/">
<link rel="Posql Index Catalog List" href="http://feel.happy.nu/doc/posql/">
<link rel="author" title="polygon planet" href="http://feel.happy.nu/">
<title>Posql - Source Document - Generated from PHPDoc</title>
<style type="text/css" media="all">
<!--
/* basics */
*         {font-family : verdana,sans-serif;}
html,
body,td   {font-size   : 90%;
           color       : #333366;
           background  : #f8f8ff;}
h1,h2     {font-style  : normal;
           font-weight : bold;
           font-size   : 130%;}
h1 a      {font-size   : 145%;
           font-weight : bold;}
p         {word-break  : keep-all;
           margin      : 10px;}
hr        {border      : 1px dashed #333366;
           width       : 98%;
           height      : 1px;
           border-width: 1px 0 0 0;}
em        {font-style  : italic;
           color       : #333;
           background  : inherit;}
dl,dt     {margin      : 2px;}
dd        {margin      : 4px 6px 2px inherit;}
dt        {font-weight : normal;}
dt em     {font-weight : normal;}
samp,
code,
pre       {font-family : monospace;}
samp      {color       : #333399;
           background  : #fcfcff;}
code      {color       : #333366;
           background  : #fffffe;}
pre       {border      : 1px solid #6666cc;
           background  : #eeeeff;
           color       : #333333;
           padding     : 6px;
           margin      : 6px;
           font-family : monospace;}
dfn       {background  : transparent;
           color       : #330066;
           padding     : 2px;
           margin      : 2px;
           font-weight : normal;
           font-style  : normal;
           font-family : verdana;}
samp em,
code em,
pre em,
dfn em    {font-size   : 85%;
           background  : transparent;}
dt dfn,
dd dtn    {font-weight : bold;}

/* anchors */
a,
a *       {color       : #3333ff;}
a:link,
a:visited,
a:active  {text-decoration : underline;
           color           : #336699;}
a:link    {color           : #3333cc;}
a:hover   {text-decoration : none;
           color           : #0033ff;}

/* classes */
.footer   {text-align      : center;
           color           : #666;}
.rewind   {text-align      : right;
           margin          : 4px;
           font-size       : 80%;}
.result   {border          : 2px solid #999;
           background      : #fff;
           empty-cells     : show;
           border-collapse : collapse;
           color           : #333;}
.result,
.result td    {text-align  : left;
               border      : 2px solid #999;
               padding     : 2px;
               margin      : 1px;}
.result .cols {background  : #eee;
               color       : #333;
               font-weight : bold;}
.result .row  {background  : #fff;
               color       : #333;
               font-weight : normal;}
.note         {border      : 1px solid #6666cc;
               background  : #eeeeff;
               color       : #333366;
               padding     : 6px;
               margin      : 4px;
               font-weight : bold;
               font-style  : normal;}
.prose        {font-weight : normal;}
.note .prose  {font-weight : normal;}
.desc         {border      : 0 none;
               background  : transparent;
               margin      : 6px;}

/* vars */
var           {font-weight : normal;
               font-style  : normal;
               color       : #666;
               background  : transparent;}
var.unknown   {color       : #999999;}
var.int       {color       : #330066;}
var.bool      {color       : #000099;}
var.string    {color       : #cc3300;}
var.null      {color       : #666666;}
var.float     {color       : #006600;}
var.array     {color       : #0000cc;}
var.object    {color       : #996600;}

/* highlight */
.htmldocs     {color       : #333366;}
.strings,
.heredocs     {color       : #cc3300;}
.vars         {color       : #336699;}
.comments     {color       : #6699ff;}
.keywords     {color       : #0000ff;}
.funcs        {color       : #000099;}

/* other vars */
var.string em,
var.float em,
var.int em    {font-size   : 85%;
               color       : #999;}
pre var       {font-family : monospace;}
var.var       {color       : #336699;}
h2 a var      {font-size   : 120%;
               font-weight : bold;
               color       : #333;
               background  : transparent;}
-->
</style>
</head>
<body id="doc">
<script type="text/javascript">
<!--
/*
 * Posql utilities class on JavaScript, version 1.01
 */
function Posql(e, s, a){
  var d = document, t = typeof e;
  return s ? Posql.tag(e, s, a) :
     t == "string" ? d.getElementById(e) ||
             (e = d.getElementsByName(e)) && e[0] :
     t == "undefined" ? d : e;
};
Posql.extend = function(o, c){
  if (!c) {
    c = o;
    o = this;
  }
  if (o && c)
    for (var p in c)
      o[p] = c[p];
  return o;
};
(function(){
  Posql.extend({
    each: function(o, f, a){
      var i, l = o.length;
      if (!!o == !l)
        for (i in o)
          f.apply(o[i], a || [i, o[i]]);
      else
        for (i = 0; l > i; i++)
          if (f.apply(o[i], a || [i, o[i]]) === false)
            break;
      return o;
    },
    addEvent: function(e, t, f, c){
      if (e.addEventListener)
        e.addEventListener(t, f, c);
      else if (e.attachEvent)
        e.attachEvent("on" + t, f);
      else
        e["on" + t] = f;
    },
    removeEvent: function(e, t, f, c){
      if (e.removeEventListener)
        e.removeEventListener(t, f, c);
      else if (e.detachEvent)
        e.detachEvent("on" + t, f);
      else
        e["on" + t] = null;
    },
    toggle: function(o){
      var e = Posql(o), n = "none";
      with (e.style)
        display = display == n ? "" : n;
    },
    getElementsByClass: function(c, n, t){
      c = c ? "(?:^|\\s)" + c + "(?:\\s|$)" : "(?:)";
      n = n || Posql();
      t = t || "*";
      var i, j, r = [], e = n.getElementsByTagName(t), p = new RegExp(c);
      for (i = j = 0; i < e.length; i++)
        if (p.test(e[i].className))
          r[j++] = e[i];
      return r;
    },
    msie: !!window.ActiveXObject,
    trim: function(s){
      return (s || "").replace(/^\s+|\s+$/g, "");
    },
    nl: function(s, n){
      return (s || "").replace(/\x0D\x0A|\x0D|\x0A/g, n || "\n");
    },
    stripTags: function(s, t){
      var re = {
        simple: /<\/?[^>]+>/gi,
        assoc: /<(\w+)[^>]*>[\s\S]*?<\/\1>|<\w+[^>]*>/gi
      };
      return (s || "").replace(t ? re.assoc : re.simple, "");
    },
    escapeHTML: function(s){
      var d = Posql(), v = d.createElement("div");
      v.appendChild(d.createTextNode(s));
      return v.innerHTML;
    },
    unescapeHTML: function(s){
      var v = Posql().createElement("div");
      v.innerHTML = Posql.stripTags(s);
      return v.childNodes[0] ? v.childNodes[0].nodeValue : "";
    },
    escapeString: function(s){
      return (typeof s == "undefined" ? "" : s + "").
        replace(/([\\\"\'])/g, "\\$1").replace(/\u0000/g, "\\0");
    },
    isNumeric: function(n){
      return n === "" ? false : !isNaN(n - 0);
    },
    val: function(e, s){
      var a = arguments, l = a.length,
          v = typeof e.value == "undefined" ? "innerHTML" : "value";
      if (l == 2)
        e[v] = Posql.nl(s);
      return Posql.nl(e[v]);
    },
    attr: function(e, a){
      var r = [], s = " ";
      if (!a) {
        a = e;
        e = {};
      }
      Posql.each(a, function(k, v){
        try {
          e.setAttribute(k, v);
        } catch (x) {
          e[k] = v;
        }
        r.push(k + '="' + v + '"');
      });
      return s + r.join(s);
    },
    tag: function(a, b, c){
      var p, s = "", t = "<", d = ">";
      if (typeof c == "string") {
        p = c;
        c = b;
        b = p;
      }
      a = a || s;
      c = c ? Posql.attr(c) : s;
      b = b || s;
      return t + a + c + d + b + t + "/" + a + d;
    }
  });
})();

// Show the loading message
(function($){
  $.loading = true;
  var d = document, de = d.documentElement, db = d.body, mx, my, x, y;
  if ($.msie) {
    mx = de.clientWidth || db.clientWidth || db.scrollWidth;
    my = de.clientHeight|| db.clientHeight|| db.scrollHeight;
  } else {
    mx = innerWidth;
    my = innerHeight;
  }
  mx = mx || 800;
  my = my || 600;
  x = parseInt(mx / 2 * 0.86) + "px";
  y = parseInt(my / 2 * 0.82) + "px";
  var panel = d.createElement("div");
  with (panel.style) {
    position = "absolute";
    left = 0;
    top  = 0;
    width  = mx + "px";
    height = my + "px";
    zIndex = 998;
    backgroundColor = "#fff";
  }
  var text = d.createElement("div");
  with (text.style) {
    position = "absolute";
    left = x;
    top  = y;
    zIndex = 999;
    backgroundColor = "#fff";
    color = "#666";
    fontSize = "20px";
  }
  var msg = "Loading..";
  var dot = d.createElement("strong");
  dot.appendChild(d.createTextNode("."));
  var interval = 512;
  var blink = function(){
    if ($.loading) {
      $.toggle(dot);
      setTimeout(blink, interval);
    }
  };
  panel.id = "loading";
  text.innerHTML = $("strong", msg);
  text.appendChild(dot);
  panel.appendChild(text);
  $("doc").appendChild(panel);
  blink();
  $.addEvent(window, "load", function(){
    $("doc").removeChild( $("loading") );
    $.loading = false;
  });
})(Posql);
//-->
</script>

<!--************************* TOP *************************-->

<h1>
 <a name="top">Posql - Source Document - Generated from PHPDoc</a>
</h1>

<!--************************* INDEX *************************-->

<hr>
<h2 id="posql_doc_index">Index</h2>
<div>
 <ul>
  <li>
   <a href="#posql_overview">Posql Overview</a>
  </li>
  <li>
   <a href="#posql_src_doccument_navi">Generated from PHPDoc</a>
   <ul>
    <li>
     <a href="#index">Index of Source document</a>
    </li>
    <li>
     <a href="#phpdoc_source_index">Source document</a>
    </li>
   </ul>
  </li>
  <li>
   <a href="#other_document">Other documents and manuals</a>
   <ul>
    <li>
     <a href="#posql_sql_reference">Posql SQL Reference</a>
    </li>
    <li>
     <a href="#posql_api_reference">Posql API Reference</a>
    </li>
   </ul>
  </li>
 </ul>
</div>

<!--************************* OVERVIEW *************************-->

<h2 id="posql_overview">Posql Overview</h2>
<!--begin#overview-->
<p>
 Posql is the database class by pure PHP language it use only all-in-one file as the database.
 It operates regardless of the version of PHP.
 It is aimed to be able to handle more readily than SQLite.
 Posql is a design which conforms to SQL-92.
 PosqlAdmin (database manager) is included in the package which is able to operating the database with GUI.
 You can be operated the Posql by using PEAR::DB or PEAR::MDB2, and CakePHP framework with DBO driver.
 Posql implemented prepared-statements and bind mechanism that compatible with the PDO class.
</p>
<p>
 The PHP syntax can be used for the expression (i.e. WHERE clause etc.). 
 It is also possible to evaluate it by SQL syntax by using the function and the grammar of the SQL-92 standard.
 The evaluation of the expression can switch by
  the evaluation engine switch function according to the PHP mode, SQL mode, and that time.
</p>
<p>
 Posql does not use the global space dirty so as not to collide with other libraries and frameworks and be designed.
 Shall be defined only by a few individual classes, Posql* (Posql_Config, Posql_Utils, etc.) Defines a class of such.
</p>
<!--end#overview-->


<hr>
<h2 id="posql_src_doccument_navi">Generated from PHPDoc</h2>

<p>
 This document was generated from <strong>PHPDoc</strong> automatically.
 The source code of the class methods are output bare.
 It might be useful to understand an internal logic of Posql.
</p>
<p>
 As for this document,
  because the source code of all classes is included, the file size is very large.
 Be careful when loading this.
</p>

<!--************************* PHPDoc INDEX *************************-->

<hr>
<h2 id="index">Index of Source document</h2>
<!--Begin#IndexPoint-->
<ul>
<li class="block">
<ul>
<li><a href="#index">index</a>
</li>
</ul>
</li>
<li><a href="#p_class_posql_config_1">Posql_Config</a>
<ul>
<li><a href="#p_var_path_2">path</a>
</li>
<li><a href="#p_var_encoder_3">encoder</a>
</li>
<li><a href="#p_var_decoder_4">decoder</a>
</li>
<li><a href="#p_var_disablefuncs_5">disableFuncs</a>
</li>
<li><a href="#p_var_engine_6">engine</a>
</li>
<li><a href="#p_var_autovacuum_7">autoVacuum</a>
</li>
<li><a href="#p_var_autoassignequals_8">autoAssignEquals</a>
</li>
<li><a href="#p_var_auto_increment_9">auto_increment</a>
</li>
<li><a href="#p_var_autoincrement_10">autoIncrement</a>
</li>
<li><a href="#p_var_autolock_11">autoLock</a>
</li>
<li><a href="#p_var_defaultdatatype_12">defaultDataType</a>
</li>
<li><a href="#p_var_charset_13">charset</a>
</li>
<li><a href="#p_var_ext_14">ext</a>
</li>
<li><a href="#p_var_deadlocktimeout_15">deadLockTimeout</a>
</li>
<li><a href="#p_var_max_16">MAX</a>
</li>
<li><a href="#p_var_nl_17">NL</a>
</li>
<li><a href="#p_var_lock_none_18">LOCK_NONE</a>
</li>
<li><a href="#p_var_lock_sh_19">LOCK_SH</a>
</li>
<li><a href="#p_var_lock_ex_20">LOCK_EX</a>
</li>
<li><a href="#p_var_delim_table_21">DELIM_TABLE</a>
</li>
<li><a href="#p_var_delim_cache_22">DELIM_CACHE</a>
</li>
<li><a href="#p_var_delim_index_23">DELIM_INDEX</a>
</li>
<li><a href="#p_var_delim_view_24">DELIM_VIEW</a>
</li>
<li><a href="#p_var_udf_25">UDF</a>
</li>
<li><a href="#p_var_meta_26">meta</a>
</li>
<li><a href="#p_var_tablename_27">tableName</a>
</li>
<li><a href="#p_var_errors_28">errors</a>
</li>
<li><a href="#p_var_next_29">next</a>
</li>
<li><a href="#p_var_id_30">id</a>
</li>
<li><a href="#p_unknown_name_31">queryCacheMaxRows</a>
</li>
<li><a href="#p_var_querycachemaxrows_32">_inDelete</a>
</li>
<li><a href="#p_var__indelete_33">_curMeta</a>
</li>
<li><a href="#p_var__curmeta_34">_primaryKey</a>
</li>
<li><a href="#p_var__primarykey_35">_createQuery</a>
</li>
<li><a href="#p_var__createquery_36">_execExpr</a>
</li>
<li><a href="#p_var__execexpr_37">_checkOnlyExpr</a>
</li>
<li><a href="#p_var__checkonlyexpr_38">_extraJoinExpr</a>
</li>
<li><a href="#p_var__extrajoinexpr_39">_notInOp</a>
</li>
<li><a href="#p_var__notinop_40">_ifExistsClause</a>
</li>
<li><a href="#p_var__ifexistsclause_41">_caseCount</a>
</li>
<li><a href="#p_var__casecount_42">_selectExprCols</a>
</li>
<li><a href="#p_var__selectexprcols_43">_selectTableNames</a>
</li>
<li><a href="#p_var__selecttablenames_44">_selectTableAliases</a>
</li>
<li><a href="#p_var__selecttablealiases_45">_selectColumnAliases</a>
</li>
<li><a href="#p_var__selectcolumnaliases_46">_unionColNames</a>
</li>
<li><a href="#p_var__unioncolnames_47">_onParseAliases</a>
</li>
<li><a href="#p_var__onparsealiases_48">_isDualSelect</a>
</li>
<li><a href="#p_var__isdualselect_49">_onUnionSelect</a>
</li>
<li><a href="#p_var__onunionselect_50">_onCreate</a>
</li>
<li><a href="#p_var__oncreate_51">_onJoinParseExpr</a>
</li>
<li><a href="#p_var__onjoinparseexpr_52">_onMultiSelect</a>
</li>
<li><a href="#p_var__onmultiselect_53">_onHaving</a>
</li>
<li><a href="#p_var__onhaving_54">_correlationPrefix</a>
</li>
<li><a href="#p_var__correlationprefix_55">_uniqueColsByHaving</a>
</li>
<li><a href="#p_var__uniquecolsbyhaving_56">_fromStatement</a>
</li>
<li><a href="#p_var__fromstatement_57">_fromSubSelect</a>
</li>
<li><a href="#p_var__fromsubselect_58">_fromQueryCache</a>
</li>
<li><a href="#p_var__fromquerycache_59">_subSelectMeta</a>
</li>
<li><a href="#p_var__subselectmeta_60">_subSelectJoinInfo</a>
</li>
<li><a href="#p_var__subselectjoininfo_61">_subSelectJoinUniqueNames</a>
</li>
<li><a href="#p_var__subselectjoinuniquenames_62">_useQuery</a>
</li>
<li><a href="#p_var__usequery_63">_getMetaAll</a>
</li>
<li><a href="#p_var__getmetaall_64">_inTransaction</a>
</li>
<li><a href="#p_var__intransaction_65">_transactionName</a>
</li>
<li><a href="#p_var__transactionname_66">_lockedTables</a>
</li>
<li><a href="#p_var__lockedtables_67">_inited</a>
</li>
<li><a href="#p_var__inited_68">_registered</a>
</li>
<li><a href="#p_var__registered_69">_terminated</a>
</li>
<li><a href="#p_var__terminated_70">isWin</a>
</li>
<li><a href="#p_var_iswin_71">isPHP5</a>
</li>
<li><a href="#p_var_isphp5_72">lastMethod</a>
</li>
<li><a href="#p_var_lastmethod_73">lastQuery</a>
</li>
<li><a href="#p_var_lastquery_74">userAbort</a>
</li>
<li><a href="#p_var_userabort_75">math</a>
</li>
<li><a href="#p_var_math_76">ctype</a>
</li>
<li><a href="#p_var_ctype_77">pcharset</a>
</li>
<li><a href="#p_var_pcharset_78">unicode</a>
</li>
<li><a href="#p_var_unicode_79">ecma</a>
</li>
<li><a href="#p_var_ecma_80">archive</a>
</li>
<li><a href="#p_var_archive_81">method</a>
</li>
<li><a href="#p_var_method_82">version</a>
</li>
<li><a href="#p_var_version_83">getEncoder</a>
</li>
<li><a href="#p_function_getencoder_84">getDecoder</a>
</li>
<li><a href="#p_function_getdecoder_85">getExt</a>
</li>
<li><a href="#p_function_getext_86">getMax</a>
</li>
<li><a href="#p_function_getmax_87">getDeadLockTimeout</a>
</li>
<li><a href="#p_function_getdeadlocktimeout_88">setAutoVacuum</a>
</li>
<li><a href="#p_function_setautovacuum_89">getAutoVacuum</a>
</li>
<li><a href="#p_function_getautovacuum_90">setAutoAssignEquals</a>
</li>
<li><a href="#p_function_setautoassignequals_91">getAutoAssignEquals</a>
</li>
<li><a href="#p_function_getautoassignequals_92">getAutoIncrement</a>
</li>
<li><a href="#p_function_getautoincrement_93">getAutoLock</a>
</li>
<li><a href="#p_function_getautolock_94">setAutoLock</a>
</li>
<li><a href="#p_function_setautolock_95">getDefaultDataType</a>
</li>
<li><a href="#p_function_getdefaultdatatype_96">setCharset</a>
</li>
<li><a href="#p_function_setcharset_97">getCharset</a>
</li>
<li><a href="#p_function_getcharset_98">getLastMethod</a>
</li>
<li><a href="#p_function_getlastmethod_99">getLastQuery</a>
</li>
<li><a href="#p_function_getlastquery_100">setUseQueryCache</a>
</li>
<li><a href="#p_function_setusequerycache_101">getUseQueryCache</a>
</li>
<li><a href="#p_function_getusequerycache_102">setQueryCacheMaxRows</a>
</li>
<li><a href="#p_function_setquerycachemaxrows_103">getQueryCacheMaxRows</a>
</li>
</ul>
</li>
<li><a href="#p_function_getquerycachemaxrows_104">Posql_CType</a>
<ul>
<li><a href="#p_class_posql_ctype_105">hasCType</a>
</li>
<li><a href="#p_var_hasctype_106">Posql_CType</a>
</li>
<li><a href="#p_function_posql_ctype_107">isAlnum</a>
</li>
<li><a href="#p_function_isalnum_108">isAlpha</a>
</li>
<li><a href="#p_function_isalpha_109">isCntrl</a>
</li>
<li><a href="#p_function_iscntrl_110">isDigit</a>
</li>
<li><a href="#p_function_isdigit_111">isGraph</a>
</li>
<li><a href="#p_function_isgraph_112">isLower</a>
</li>
<li><a href="#p_function_islower_113">isPrint</a>
</li>
<li><a href="#p_function_isprint_114">isPunct</a>
</li>
<li><a href="#p_function_ispunct_115">isSpace</a>
</li>
<li><a href="#p_function_isspace_116">isUpper</a>
</li>
<li><a href="#p_function_isupper_117">isXdigit</a>
</li>
<li><a href="#p_function_isxdigit_118">isAscii</a>
</li>
<li><a href="#p_function_isascii_119">isBlank</a>
</li>
<li><a href="#p_function_isblank_120">isWord</a>
</li>
</ul>
</li>
<li><a href="#p_function_isword_121">Posql_Math</a>
<ul>
<li><a href="#p_class_posql_math_122">hasbc</a>
</li>
<li><a href="#p_var_hasbc_123">_innerCall</a>
</li>
<li><a href="#p_var__innercall_124">Posql_Math</a>
</li>
<li><a href="#p_function_posql_math_125">format</a>
</li>
<li><a href="#p_function_format_126">convertToBase</a>
</li>
<li><a href="#p_function_converttobase_127">hexdec</a>
</li>
<li><a href="#p_function_hexdec_128">isDec</a>
</li>
<li><a href="#p_function_isdec_129">isHex</a>
</li>
<li><a href="#p_function_ishex_130">toHex</a>
</li>
<li><a href="#p_function_tohex_131">getScale</a>
</li>
<li><a href="#p_function_getscale_132">add</a>
</li>
<li><a href="#p_function_add_133">sub</a>
</li>
<li><a href="#p_function_sub_134">mul</a>
</li>
<li><a href="#p_function_mul_135">div</a>
</li>
<li><a href="#p_function_div_136">mod</a>
</li>
<li><a href="#p_function_mod_137">pow</a>
</li>
<li><a href="#p_function_pow_138">comp</a>
</li>
<li><a href="#p_function_comp_139">sign</a>
</li>
<li><a href="#p_function_sign_140">sqrt</a>
</li>
<li><a href="#p_function_sqrt_141">abs</a>
</li>
<li><a href="#p_function_abs_142">round</a>
</li>
<li><a href="#p_function_round_143">rand</a>
</li>
</ul>
</li>
<li><a href="#p_function_rand_144">Posql_Charset</a>
<ul>
<li><a href="#p_class_posql_charset_145">hasMBString</a>
</li>
<li><a href="#p_var_hasmbstring_146">hasIConv</a>
</li>
<li><a href="#p_var_hasiconv_147">hasError</a>
</li>
<li><a href="#p_var_haserror_148">isPHP5</a>
</li>
<li><a href="#p_var_isphp5_149">charset</a>
</li>
<li><a href="#p_var_charset_150">Posql_Charset</a>
</li>
<li><a href="#p_function_posql_charset_151">__destruct</a>
</li>
<li><a href="#p_function___destruct_152">_referProperty</a>
</li>
<li><a href="#p_function__referproperty_153">getEncodingIndex</a>
</li>
<li><a href="#p_function_getencodingindex_154">getEncodingName</a>
</li>
<li><a href="#p_function_getencodingname_155">getAutoDetectOrder</a>
</li>
<li><a href="#p_function_getautodetectorder_156">convert</a>
</li>
<li><a href="#p_function_convert_157">detectEncoding</a>
</li>
<li><a href="#p_function_detectencoding_158">detectByMethod</a>
</li>
<li><a href="#p_function_detectbymethod_159">detectByMBString</a>
</li>
<li><a href="#p_function_detectbymbstring_160">detectByIConv</a>
</li>
<li><a href="#p_function_detectbyiconv_161">detectEncodingHelper</a>
</li>
<li><a href="#p_function_detectencodinghelper_162">iconvErrorHandler</a>
</li>
<li><a href="#p_function_iconverrorhandler_163">isString</a>
</li>
<li><a href="#p_function_isstring_164">isBinary</a>
</li>
<li><a href="#p_function_isbinary_165">isASCII</a>
</li>
<li><a href="#p_function_isascii_166">isLATIN1</a>
</li>
<li><a href="#p_function_islatin1_167">isJIS</a>
</li>
<li><a href="#p_function_isjis_168">isEUCJP</a>
</li>
<li><a href="#p_function_iseucjp_169">isSJIS</a>
</li>
<li><a href="#p_function_issjis_170">isUTF8</a>
</li>
<li><a href="#p_function_isutf8_171">isUTF16</a>
</li>
<li><a href="#p_function_isutf16_172">isUTF16BE</a>
</li>
<li><a href="#p_function_isutf16be_173">isUTF16LE</a>
</li>
<li><a href="#p_function_isutf16le_174">isUTF32</a>
</li>
<li><a href="#p_function_isutf32_175">isBIG5</a>
</li>
<li><a href="#p_function_isbig5_176">isGB</a>
</li>
<li><a href="#p_function_isgb_177">isEUCKR</a>
</li>
</ul>
</li>
<li><a href="#p_function_iseuckr_178">Posql_UTF8</a>
<ul>
<li><a href="#p_class_posql_utf8_179">hasMBString</a>
</li>
<li><a href="#p_var_hasmbstring_180">hasIConv</a>
</li>
<li><a href="#p_var_hasiconv_181">isPHP5</a>
</li>
<li><a href="#p_var_isphp5_182">isPHP520</a>
</li>
<li><a href="#p_var_isphp520_183">pcharset</a>
</li>
<li><a href="#p_var_pcharset_184">_inited</a>
</li>
<li><a href="#p_var__inited_185">prevMBStringEncoding</a>
</li>
<li><a href="#p_var_prevmbstringencoding_186">prevIConvEncoding</a>
</li>
<li><a href="#p_var_previconvencoding_187">_orgCharset</a>
</li>
<li><a href="#p_var__orgcharset_188">charset</a>
</li>
<li><a href="#p_var_charset_189">Posql_UTF8</a>
</li>
<li><a href="#p_function_posql_utf8_190">__destruct</a>
</li>
<li><a href="#p_function___destruct_191">_referProperty</a>
</li>
<li><a href="#p_function__referproperty_192">init</a>
</li>
<li><a href="#p_function_init_193">toUTF8</a>
</li>
<li><a href="#p_function_toutf8_194">fromUTF8</a>
</li>
<li><a href="#p_function_fromutf8_195">setEncoding</a>
</li>
<li><a href="#p_function_setencoding_196">restoreEncoding</a>
</li>
<li><a href="#p_function_restoreencoding_197">strlen</a>
</li>
<li><a href="#p_function_strlen_198">strpos</a>
</li>
<li><a href="#p_function_strpos_199">strrpos</a>
</li>
<li><a href="#p_function_strrpos_200">substr</a>
</li>
<li><a href="#p_function_substr_201">_strlen</a>
</li>
<li><a href="#p_function__strlen_202">_strpos</a>
</li>
<li><a href="#p_function__strpos_203">_strrpos</a>
</li>
<li><a href="#p_function__strrpos_204">_substr</a>
</li>
</ul>
</li>
<li><a href="#p_function__substr_205">Posql_Unicode</a>
<ul>
<li><a href="#p_class_posql_unicode_206">Posql_Unicode</a>
</li>
<li><a href="#p_function_posql_unicode_207">strcasecmp</a>
</li>
<li><a href="#p_function_strcasecmp_208">chr</a>
</li>
<li><a href="#p_function_chr_209">ord</a>
</li>
<li><a href="#p_function_ord_210">substr_replace</a>
</li>
<li><a href="#p_function_substr_replace_211">strrev</a>
</li>
<li><a href="#p_function_strrev_212">strtr</a>
</li>
<li><a href="#p_function_strtr_213">ucfirst</a>
</li>
<li><a href="#p_function_ucfirst_214">strtolower</a>
</li>
<li><a href="#p_function_strtolower_215">strtoupper</a>
</li>
<li><a href="#p_function_strtoupper_216">_strtolower</a>
</li>
<li><a href="#p_function__strtolower_217">_strtoupper</a>
</li>
<li><a href="#p_function__strtoupper_218">getCaseMaps</a>
</li>
<li><a href="#p_function_getcasemaps_219">toUnicode</a>
</li>
<li><a href="#p_function_tounicode_220">_toUnicode</a>
</li>
<li><a href="#p_function__tounicode_221">fromUnicode</a>
</li>
</ul>
</li>
<li><a href="#p_function_fromunicode_222">Posql_ECMA</a>
<ul>
<li><a href="#p_class_posql_ecma_223">NaN</a>
</li>
<li><a href="#p_var_nan_224">unicode</a>
</li>
<li><a href="#p_var_unicode_225">_inited</a>
</li>
<li><a href="#p_var__inited_226">Posql_ECMA</a>
</li>
<li><a href="#p_function_posql_ecma_227">__destruct</a>
</li>
<li><a href="#p_function___destruct_228">_referProperty</a>
</li>
<li><a href="#p_function__referproperty_229">_init</a>
</li>
<li><a href="#p_function__init_230">charAt</a>
</li>
<li><a href="#p_function_charat_231">charCodeAt</a>
</li>
<li><a href="#p_function_charcodeat_232">fromCharCode</a>
</li>
<li><a href="#p_function_fromcharcode_233">indexOf</a>
</li>
<li><a href="#p_function_indexof_234">lastIndexOf</a>
</li>
<li><a href="#p_function_lastindexof_235">length</a>
</li>
<li><a href="#p_function_length_236">slice</a>
</li>
<li><a href="#p_function_slice_237">split</a>
</li>
<li><a href="#p_function_split_238">substr</a>
</li>
<li><a href="#p_function_substr_239">substring</a>
</li>
<li><a href="#p_function_substring_240">toLowerCase</a>
</li>
<li><a href="#p_function_tolowercase_241">toUpperCase</a>
</li>
<li><a href="#p_function_touppercase_242">toString</a>
</li>
<li><a href="#p_function_tostring_243">escape</a>
</li>
<li><a href="#p_function_escape_244">unescape</a>
</li>
<li><a href="#p_function_unescape_245">_encode</a>
</li>
<li><a href="#p_function__encode_246">_decode</a>
</li>
<li><a href="#p_function__decode_247">_isHex</a>
</li>
<li><a href="#p_function__ishex_248">utf8ToOneUcs4Char</a>
</li>
<li><a href="#p_function_utf8tooneucs4char_249">_getURIReservedPlusPound</a>
</li>
<li><a href="#p_function__geturireservedpluspound_250">_getURIUnescaped</a>
</li>
<li><a href="#p_function__geturiunescaped_251">encodeURI</a>
</li>
<li><a href="#p_function_encodeuri_252">encodeURIComponent</a>
</li>
<li><a href="#p_function_encodeuricomponent_253">decodeURI</a>
</li>
<li><a href="#p_function_decodeuri_254">decodeURIComponent</a>
</li>
</ul>
</li>
<li><a href="#p_function_decodeuricomponent_255">Posql_Archive</a>
<ul>
<li><a href="#p_class_posql_archive_256">posql</a>
</li>
<li><a href="#p_var_posql_257">_inited</a>
</li>
<li><a href="#p_var__inited_258">Posql_Archive</a>
</li>
<li><a href="#p_function_posql_archive_259">__destruct</a>
</li>
<li><a href="#p_function___destruct_260">_referProperty</a>
</li>
<li><a href="#p_function__referproperty_261">_init</a>
</li>
<li><a href="#p_function__init_262">getAlphamericBase63</a>
</li>
<li><a href="#p_function_getalphamericbase63_263">encodeAlphamericString</a>
</li>
<li><a href="#p_function_encodealphamericstring_264">decodeAlphamericString</a>
</li>
</ul>
</li>
<li><a href="#p_function_decodealphamericstring_265">Posql_Method</a>
<ul>
<li><a href="#p_class_posql_method_266">hasMBString</a>
</li>
<li><a href="#p_var_hasmbstring_267">hasIConv</a>
</li>
<li><a href="#p_var_hasiconv_268">charset</a>
</li>
<li><a href="#p_var_charset_269">posql</a>
</li>
<li><a href="#p_var_posql_270">ctype</a>
</li>
<li><a href="#p_var_ctype_271">math</a>
</li>
<li><a href="#p_var_math_272">unicode</a>
</li>
<li><a href="#p_var_unicode_273">Posql_Method</a>
</li>
<li><a href="#p_function_posql_method_274">__destruct</a>
</li>
<li><a href="#p_function___destruct_275">_referObject</a>
</li>
<li><a href="#p_function__referobject_276">base64_encode</a>
</li>
<li><a href="#p_function_base64_encode_277">base64_decode</a>
</li>
<li><a href="#p_function_base64_decode_278">urlencode</a>
</li>
<li><a href="#p_function_urlencode_279">urldecode</a>
</li>
<li><a href="#p_function_urldecode_280">abs</a>
</li>
<li><a href="#p_function_abs_281">coalesce</a>
</li>
<li><a href="#p_function_coalesce_282">exists</a>
</li>
<li><a href="#p_function_exists_283">ifnull</a>
</li>
<li><a href="#p_function_ifnull_284">hex</a>
</li>
<li><a href="#p_function_hex_285">last_insert_rowid</a>
</li>
<li><a href="#p_function_last_insert_rowid_286">length</a>
</li>
<li><a href="#p_function_length_287">like</a>
</li>
<li><a href="#p_function_like_288">lower</a>
</li>
<li><a href="#p_function_lower_289">ltrim</a>
</li>
<li><a href="#p_function_ltrim_290">max</a>
</li>
<li><a href="#p_function_max_291">min</a>
</li>
<li><a href="#p_function_min_292">nullif</a>
</li>
<li><a href="#p_function_nullif_293">random</a>
</li>
<li><a href="#p_function_random_294">replace</a>
</li>
<li><a href="#p_function_replace_295">round</a>
</li>
<li><a href="#p_function_round_296">rtrim</a>
</li>
<li><a href="#p_function_rtrim_297">soundex</a>
</li>
<li><a href="#p_function_soundex_298">posql_version</a>
</li>
<li><a href="#p_function_posql_version_299">strftime</a>
</li>
<li><a href="#p_function_strftime_300">substr</a>
</li>
<li><a href="#p_function_substr_301">trim</a>
</li>
<li><a href="#p_function_trim_302">typeof</a>
</li>
<li><a href="#p_function_typeof_303">upper</a>
</li>
<li><a href="#p_function_upper_304">cast</a>
</li>
<li><a href="#p_function_cast_305">concat</a>
</li>
<li><a href="#p_function_concat_306">concatenate</a>
</li>
<li><a href="#p_function_concatenate_307">nvl</a>
</li>
<li><a href="#p_function_nvl_308">convert</a>
</li>
<li><a href="#p_function_convert_309">substring</a>
</li>
<li><a href="#p_function_substring_310">translate</a>
</li>
<li><a href="#p_function_translate_311">bit_length</a>
</li>
<li><a href="#p_function_bit_length_312">char_length</a>
</li>
<li><a href="#p_function_char_length_313">octet_length</a>
</li>
<li><a href="#p_function_octet_length_314">now</a>
</li>
<li><a href="#p_function_now_315">extract</a>
</li>
<li><a href="#p_function_extract_316">position</a>
</li>
</ul>
</li>
<li><a href="#p_function_position_317">Posql_Statement</a>
<ul>
<li><a href="#p_class_posql_statement_318">queryString</a>
</li>
<li><a href="#p_var_querystring_319">defaultFetchMode</a>
</li>
<li><a href="#p_var_defaultfetchmode_320">fetchMode</a>
</li>
<li><a href="#p_var_fetchmode_321">fetchInfo</a>
</li>
<li><a href="#p_var_fetchinfo_322">rows</a>
</li>
<li><a href="#p_var_rows_323">rowCount</a>
</li>
<li><a href="#p_var_rowcount_324">columnCount</a>
</li>
<li><a href="#p_var_columncount_325">affectedRows</a>
</li>
<li><a href="#p_var_affectedrows_326">columnNames</a>
</li>
<li><a href="#p_var_columnnames_327">bindParams</a>
</li>
<li><a href="#p_var_bindparams_328">bindColumns</a>
</li>
<li><a href="#p_var_bindcolumns_329">posql</a>
</li>
<li><a href="#p_var_posql_330">Posql_Statement</a>
</li>
<li><a href="#p_function_posql_statement_331">__destruct</a>
</li>
<li><a href="#p_function___destruct_332">_referObject</a>
</li>
<li><a href="#p_function__referobject_333">_setResultRows</a>
</li>
<li><a href="#p_function__setresultrows_334">execute</a>
</li>
<li><a href="#p_function_execute_335">bindValue</a>
</li>
<li><a href="#p_function_bindvalue_336">bindParam</a>
</li>
<li><a href="#p_function_bindparam_337">bindColumn</a>
</li>
<li><a href="#p_function_bindcolumn_338">_assignBindColumns</a>
</li>
<li><a href="#p_function__assignbindcolumns_339">getColumnNames</a>
</li>
<li><a href="#p_function_getcolumnnames_340">setFetchMode</a>
</li>
<li><a href="#p_function_setfetchmode_341">mapFetchMode</a>
</li>
<li><a href="#p_function_mapfetchmode_342">fetch</a>
</li>
<li><a href="#p_function_fetch_343">fetchRow</a>
</li>
<li><a href="#p_function_fetchrow_344">fetchAll</a>
</li>
<li><a href="#p_function_fetchall_345">fetchAllHTMLTable</a>
</li>
<li><a href="#p_function_fetchallhtmltable_346">fetchColumn</a>
</li>
<li><a href="#p_function_fetchcolumn_347">fetchObject</a>
</li>
<li><a href="#p_function_fetchobject_348">getTableNames</a>
</li>
<li><a href="#p_function_gettablenames_349">rowCount</a>
</li>
<li><a href="#p_function_rowcount_350">columnCount</a>
</li>
<li><a href="#p_function_columncount_351">numRows</a>
</li>
<li><a href="#p_function_numrows_352">numCols</a>
</li>
<li><a href="#p_function_numcols_353">hasRows</a>
</li>
<li><a href="#p_function_hasrows_354">affectedRows</a>
</li>
<li><a href="#p_function_affectedrows_355">free</a>
</li>
<li><a href="#p_function_free_356">closeCursor</a>
</li>
</ul>
</li>
<li><a href="#p_function_closecursor_357">Posql_Pager</a>
<ul>
<li><a href="#p_class_posql_pager_358">totalCount</a>
</li>
<li><a href="#p_var_totalcount_359">currentPage</a>
</li>
<li><a href="#p_var_currentpage_360">perPage</a>
</li>
<li><a href="#p_var_perpage_361">range</a>
</li>
<li><a href="#p_var_range_362">totalPages</a>
</li>
<li><a href="#p_var_totalpages_363">pages</a>
</li>
<li><a href="#p_var_pages_364">startPage</a>
</li>
<li><a href="#p_var_startpage_365">endPage</a>
</li>
<li><a href="#p_var_endpage_366">prev</a>
</li>
<li><a href="#p_var_prev_367">next</a>
</li>
<li><a href="#p_var_next_368">offset</a>
</li>
<li><a href="#p_var_offset_369">limit</a>
</li>
<li><a href="#p_var_limit_370">Posql_Pager</a>
</li>
<li><a href="#p_function_posql_pager_371">setPager</a>
</li>
</ul>
</li>
<li><a href="#p_function_setpager_372">Posql_Utils</a>
<ul>
<li><a href="#p_class_posql_utils_373">escape</a>
</li>
<li><a href="#p_function_escape_374">escapeString</a>
</li>
<li><a href="#p_function_escapestring_375">escapePattern</a>
</li>
<li><a href="#p_function_escapepattern_376">unescapeSQLString</a>
</li>
<li><a href="#p_function_unescapesqlstring_377">escapeHTML</a>
</li>
<li><a href="#p_function_escapehtml_378">truncatePad</a>
</li>
<li><a href="#p_function_truncatepad_379">stripTags</a>
</li>
<li><a href="#p_function_striptags_380">base16Encode</a>
</li>
<li><a href="#p_function_base16encode_381">isStringToken</a>
</li>
<li><a href="#p_function_isstringtoken_382">toStringToken</a>
</li>
<li><a href="#p_function_tostringtoken_383">concatStringTokens</a>
</li>
<li><a href="#p_function_concatstringtokens_384">trimExtra</a>
</li>
<li><a href="#p_function_trimextra_385">isWord</a>
</li>
<li><a href="#p_function_isword_386">isAlphaNum</a>
</li>
<li><a href="#p_function_isalphanum_387">isEnableName</a>
</li>
<li><a href="#p_function_isenablename_388">isExprToken</a>
</li>
<li><a href="#p_function_isexprtoken_389">getColumnAffinity</a>
</li>
<li><a href="#p_function_getcolumnaffinity_390">getMicrotime</a>
</li>
<li><a href="#p_function_getmicrotime_391">getValue</a>
</li>
<li><a href="#p_function_getvalue_392">hashValue</a>
</li>
<li><a href="#p_function_hashvalue_393">compareDefinedValue</a>
</li>
<li><a href="#p_function_comparedefinedvalue_394">sortByTemplate</a>
</li>
<li><a href="#p_function_sortbytemplate_395">split</a>
</li>
<li><a href="#p_function_split_396">splitEnableName</a>
</li>
<li><a href="#p_function_splitenablename_397">isAssoc</a>
</li>
<li><a href="#p_function_isassoc_398">cleanArray</a>
</li>
<li><a href="#p_function_cleanarray_399">flipArray</a>
</li>
<li><a href="#p_function_fliparray_400">toOneArray</a>
</li>
<li><a href="#p_function_toonearray_401">existsClass</a>
</li>
<li><a href="#p_function_existsclass_402">camelize</a>
</li>
<li><a href="#p_function_camelize_403">underscore</a>
</li>
<li><a href="#p_function_underscore_404">isContentPlainText</a>
</li>
</ul>
</li>
<li><a href="#p_function_iscontentplaintext_405">Posql_Error</a>
<ul>
<li><a href="#p_class_posql_error_406">errorHandler</a>
</li>
<li><a href="#p_function_errorhandler_407">pushError</a>
</li>
<li><a href="#p_function_pusherror_408">getDefaultBackTrace</a>
</li>
<li><a href="#p_function_getdefaultbacktrace_409">mapErrorObject</a>
</li>
<li><a href="#p_function_maperrorobject_410">popError</a>
</li>
<li><a href="#p_function_poperror_411">formatError</a>
</li>
<li><a href="#p_function_formaterror_412">lastError</a>
</li>
<li><a href="#p_function_lasterror_413">getErrors</a>
</li>
<li><a href="#p_function_geterrors_414">isError</a>
</li>
<li><a href="#p_function_iserror_415">hasError</a>
</li>
<li><a href="#p_function_haserror_416">numError</a>
</li>
</ul>
</li>
<li><a href="#p_function_numerror_417">Posql_File</a>
<ul>
<li><a href="#p_class_posql_file_418">fopen</a>
</li>
<li><a href="#p_function_fopen_419">isWriteMode</a>
</li>
<li><a href="#p_function_iswritemode_420">fgets</a>
</li>
<li><a href="#p_function_fgets_421">fputs</a>
</li>
<li><a href="#p_function_fputs_422">fseekLine</a>
</li>
<li><a href="#p_function_fseekline_423">appendFileLine</a>
</li>
<li><a href="#p_function_appendfileline_424">insertFileLine</a>
</li>
<li><a href="#p_function_insertfileline_425">replaceFileLine</a>
</li>
<li><a href="#p_function_replacefileline_426">_replaceFileLine</a>
</li>
<li><a href="#p_function__replacefileline_427">fgetcsv</a>
</li>
<li><a href="#p_function_fgetcsv_428">fullPath</a>
</li>
<li><a href="#p_function_fullpath_429">dirname</a>
</li>
<li><a href="#p_function_dirname_430">dirnameWith</a>
</li>
<li><a href="#p_function_dirnamewith_431">toExt</a>
</li>
<li><a href="#p_function_toext_432">getExtensionName</a>
</li>
<li><a href="#p_function_getextensionname_433">assignLockMode</a>
</li>
<li><a href="#p_function_assignlockmode_434">setResultStorage</a>
</li>
<li><a href="#p_function_setresultstorage_435">getUniqueFilename</a>
</li>
<li><a href="#p_function_getuniquefilename_436">getLockDirName</a>
</li>
<li><a href="#p_function_getlockdirname_437">canLockDatabase</a>
</li>
<li><a href="#p_function_canlockdatabase_438">lockDatabase</a>
</li>
<li><a href="#p_function_lockdatabase_439">unlockDatabase</a>
</li>
<li><a href="#p_function_unlockdatabase_440">isLock</a>
</li>
<li><a href="#p_function_islock_441">isLockEx</a>
</li>
<li><a href="#p_function_islockex_442">isLockSh</a>
</li>
<li><a href="#p_function_islocksh_443">isLockAll</a>
</li>
<li><a href="#p_function_islockall_444">isLockExAll</a>
</li>
<li><a href="#p_function_islockexall_445">isLockShAll</a>
</li>
<li><a href="#p_function_islockshall_446">lockAll</a>
</li>
<li><a href="#p_function_lockall_447">_lockAll</a>
</li>
<li><a href="#p_function__lockall_448">lockExAll</a>
</li>
<li><a href="#p_function_lockexall_449">lockShAll</a>
</li>
<li><a href="#p_function_lockshall_450">unlockAll</a>
</li>
<li><a href="#p_function_unlockall_451">_unlockAll</a>
</li>
<li><a href="#p_function__unlockall_452">lock</a>
</li>
<li><a href="#p_function_lock_453">_lock</a>
</li>
<li><a href="#p_function__lock_454">lockEx</a>
</li>
<li><a href="#p_function_lockex_455">lockSh</a>
</li>
<li><a href="#p_function_locksh_456">unlock</a>
</li>
<li><a href="#p_function_unlock_457">_unlock</a>
</li>
<li><a href="#p_function__unlock_458">lockAllTables</a>
</li>
<li><a href="#p_function_lockalltables_459">lockExAllTables</a>
</li>
<li><a href="#p_function_lockexalltables_460">lockShAllTables</a>
</li>
<li><a href="#p_function_lockshalltables_461">unlockAllTables</a>
</li>
<li><a href="#p_function_unlockalltables_462">getLockId</a>
</li>
<li><a href="#p_function_getlockid_463">getLockIdAll</a>
</li>
</ul>
</li>
<li><a href="#p_function_getlockidall_464">Posql_Parser</a>
<ul>
<li><a href="#p_class_posql_parser_465">isParsedExpr</a>
</li>
<li><a href="#p_function_isparsedexpr_466">getParsedMark</a>
</li>
<li><a href="#p_function_getparsedmark_467">addParsedMark</a>
</li>
<li><a href="#p_function_addparsedmark_468">removeParsedMark</a>
</li>
<li><a href="#p_function_removeparsedmark_469">splitSyntax</a>
</li>
<li><a href="#p_function_splitsyntax_470">getSupportedSyntax</a>
</li>
<li><a href="#p_function_getsupportedsyntax_471">getQueryCommand</a>
</li>
<li><a href="#p_function_getquerycommand_472">parseQueryImplements</a>
</li>
<li><a href="#p_function_parsequeryimplements_473">parseBasicQuery</a>
</li>
<li><a href="#p_function_parsebasicquery_474">parseSelectQuery</a>
</li>
<li><a href="#p_function_parseselectquery_475">parseSelectUnion</a>
</li>
<li><a href="#p_function_parseselectunion_476">parseInsertQuery</a>
</li>
<li><a href="#p_function_parseinsertquery_477">parseMultiQuery</a>
</li>
<li><a href="#p_function_parsemultiquery_478">assignNames</a>
</li>
<li><a href="#p_function_assignnames_479">parseCreateDatabaseQuery</a>
</li>
<li><a href="#p_function_parsecreatedatabasequery_480">parseDropQuery</a>
</li>
<li><a href="#p_function_parsedropquery_481">parseCreateTableQuery</a>
</li>
<li><a href="#p_function_parsecreatetablequery_482">parseCreateTableQuerySimple</a>
</li>
<li><a href="#p_function_parsecreatetablequerysimple_483">parseColumnDefinition</a>
</li>
<li><a href="#p_function_parsecolumndefinition_484">parseInsertValues</a>
</li>
<li><a href="#p_function_parseinsertvalues_485">parseUpdateSet</a>
</li>
<li><a href="#p_function_parseupdateset_486">parseSelectArguments</a>
</li>
<li><a href="#p_function_parseselectarguments_487">parseSubQuery</a>
</li>
<li><a href="#p_function_parsesubquery_488">getTableNameFromTokens</a>
</li>
<li><a href="#p_function_gettablenamefromtokens_489">isManip</a>
</li>
<li><a href="#p_function_ismanip_490">isMultiQuery</a>
</li>
<li><a href="#p_function_ismultiquery_491">isMultipleSelect</a>
</li>
<li><a href="#p_function_ismultipleselect_492">isSubSelectFrom</a>
</li>
<li><a href="#p_function_issubselectfrom_493">isSimpleCount</a>
</li>
<li><a href="#p_function_issimplecount_494">isSimpleLimitOnce</a>
</li>
<li><a href="#p_function_issimplelimitonce_495">isSimplePrimaryKeySpecify</a>
</li>
<li><a href="#p_function_issimpleprimarykeyspecify_496">isSimplePrimaryKeyCompareExpression</a>
</li>
<li><a href="#p_function_issimpleprimarykeycompareexpression_497">isDistinct</a>
</li>
<li><a href="#p_function_isdistinct_498">isSelectListAllClause</a>
</li>
<li><a href="#p_function_isselectlistallclause_499">isFunctionInStatement</a>
</li>
<li><a href="#p_function_isfunctioninstatement_500">hasCompoundOperator</a>
</li>
<li><a href="#p_function_hascompoundoperator_501">splitColumns</a>
</li>
<li><a href="#p_function_splitcolumns_502">parseColumns</a>
</li>
<li><a href="#p_function_parsecolumns_503">appendAliasToken</a>
</li>
<li><a href="#p_function_appendaliastoken_504">applyAliasNames</a>
</li>
<li><a href="#p_function_applyaliasnames_505">replaceTableAlias</a>
</li>
<li><a href="#p_function_replacetablealias_506">restoreAliasTokens</a>
</li>
<li><a href="#p_function_restorealiastokens_507">replaceAliasName</a>
</li>
<li><a href="#p_function_replacealiasname_508">replaceAliasNames</a>
</li>
<li><a href="#p_function_replacealiasnames_509">restoreTableAliasName</a>
</li>
<li><a href="#p_function_restoretablealiasname_510">findIdentifier</a>
</li>
<li><a href="#p_function_findidentifier_511">parseHaving</a>
</li>
<li><a href="#p_function_parsehaving_512">isEnableHavingInfo</a>
</li>
<li><a href="#p_function_isenablehavinginfo_513">replaceHavingTokens</a>
</li>
<li><a href="#p_function_replacehavingtokens_514">parseGroupBy</a>
</li>
<li><a href="#p_function_parsegroupby_515">parseOrderByTokens</a>
</li>
<li><a href="#p_function_parseorderbytokens_516">parseLimitTokens</a>
</li>
<li><a href="#p_function_parselimittokens_517">parseFromClause</a>
</li>
<li><a href="#p_function_parsefromclause_518">parseJoinTables</a>
</li>
<li><a href="#p_function_parsejointables_519">_setJoinTableTokens</a>
</li>
<li><a href="#p_function__setjointabletokens_520">assignJoinTables</a>
</li>
<li><a href="#p_function_assignjointables_521">removeBacktickToken</a>
</li>
<li><a href="#p_function_removebackticktoken_522">removeCorrelations</a>
</li>
<li><a href="#p_function_removecorrelations_523">removeCorrelationName</a>
</li>
<li><a href="#p_function_removecorrelationname_524">concatCorrelationToken</a>
</li>
<li><a href="#p_function_concatcorrelationtoken_525">splitCorrelationToken</a>
</li>
<li><a href="#p_function_splitcorrelationtoken_526">getRightOperandBySQL</a>
</li>
<li><a href="#p_function_getrightoperandbysql_527">getLeftOperandBySQL</a>
</li>
<li><a href="#p_function_getleftoperandbysql_528">replaceExprBySQL</a>
</li>
<li><a href="#p_function_replaceexprbysql_529">replaceTokenBySQL</a>
</li>
<li><a href="#p_function_replacetokenbysql_530">parseHTMLAttributes</a>
</li>
<li><a href="#p_function_parsehtmlattributes_531">parseCSV</a>
</li>
</ul>
</li>
<li><a href="#p_function_parsecsv_532">Posql_Builder</a>
<ul>
<li><a href="#p_class_posql_builder_533">toLikePattern</a>
</li>
<li><a href="#p_function_tolikepattern_534">toArrayResult</a>
</li>
<li><a href="#p_function_toarrayresult_535">toCorrelationName</a>
</li>
<li><a href="#p_function_tocorrelationname_536">joinWords</a>
</li>
<li><a href="#p_function_joinwords_537">joinCrossTable</a>
</li>
<li><a href="#p_function_joincrosstable_538">fixJoinCrossExpr</a>
</li>
<li><a href="#p_function_fixjoincrossexpr_539">joinLeftTable</a>
</li>
<li><a href="#p_function_joinlefttable_540">appendCorrelationPairs</a>
</li>
<li><a href="#p_function_appendcorrelationpairs_541">joinTables</a>
</li>
<li><a href="#p_function_jointables_542">applyJoinExpr</a>
</li>
<li><a href="#p_function_applyjoinexpr_543">buildQuery</a>
</li>
<li><a href="#p_function_buildquery_544">buildCreateQuery</a>
</li>
<li><a href="#p_function_buildcreatequery_545">buildDropQuery</a>
</li>
<li><a href="#p_function_builddropquery_546">buildInsertQuery</a>
</li>
<li><a href="#p_function_buildinsertquery_547">buildInsertSelectSubQuery</a>
</li>
<li><a href="#p_function_buildinsertselectsubquery_548">buildDeleteQuery</a>
</li>
<li><a href="#p_function_builddeletequery_549">buildUpdateQuery</a>
</li>
<li><a href="#p_function_buildupdatequery_550">buildSelectQuery</a>
</li>
<li><a href="#p_function_buildselectquery_551">buildSelectUnionQuery</a>
</li>
<li><a href="#p_function_buildselectunionquery_552">buildDescribeQuery</a>
</li>
<li><a href="#p_function_builddescribequery_553">unionAll</a>
</li>
<li><a href="#p_function_unionall_554">intersectAll</a>
</li>
<li><a href="#p_function_intersectall_555">exceptAll</a>
</li>
<li><a href="#p_function_exceptall_556">appendAggregateResult</a>
</li>
<li><a href="#p_function_appendaggregateresult_557">assignCols</a>
</li>
<li><a href="#p_function_assigncols_558">assignColsBySimpleCount</a>
</li>
<li><a href="#p_function_assigncolsbysimplecount_559">assignDualCols</a>
</li>
<li><a href="#p_function_assigndualcols_560">removeDuplicateRows</a>
</li>
<li><a href="#p_function_removeduplicaterows_561">diffColumns</a>
</li>
<li><a href="#p_function_diffcolumns_562">orderColumns</a>
</li>
<li><a href="#p_function_ordercolumns_563">assignColumnsOrder</a>
</li>
<li><a href="#p_function_assigncolumnsorder_564">applyDistinct</a>
</li>
<li><a href="#p_function_applydistinct_565">removeDistinctToken</a>
</li>
<li><a href="#p_function_removedistincttoken_566">removeSelectListAllClauseToken</a>
</li>
<li><a href="#p_function_removeselectlistallclausetoken_567">toHTMLTable</a>
</li>
</ul>
</li>
<li><a href="#p_function_tohtmltable_568">Posql_Expr</a>
<ul>
<li><a href="#p_class_posql_expr_569">isValidExpr</a>
</li>
<li><a href="#p_function_isvalidexpr_570">getValidMarks</a>
</li>
<li><a href="#p_function_getvalidmarks_571">addValidMarks</a>
</li>
<li><a href="#p_function_addvalidmarks_572">removeValidMarks</a>
</li>
<li><a href="#p_function_removevalidmarks_573">validCorrelationPrefix</a>
</li>
<li><a href="#p_function_validcorrelationprefix_574">callMethod</a>
</li>
<li><a href="#p_function_callmethod_575">isCallableMethod</a>
</li>
<li><a href="#p_function_iscallablemethod_576">createInstance</a>
</li>
<li><a href="#p_function_createinstance_577">expr</a>
</li>
<li><a href="#p_function_expr_578">checkExpr</a>
</li>
<li><a href="#p_function_checkexpr_579">safeExpr</a>
</li>
<li><a href="#p_function_safeexpr_580">_execSafeExpr</a>
</li>
<li><a href="#p_function__execsafeexpr_581">optimizeExpr</a>
</li>
<li><a href="#p_function_optimizeexpr_582">validExpr</a>
</li>
<li><a href="#p_function_validexpr_583">validExprBySQL</a>
</li>
<li><a href="#p_function_validexprbysql_584">validExprByPHP</a>
</li>
<li><a href="#p_function_validexprbyphp_585">execSubSelect</a>
</li>
<li><a href="#p_function_execsubselect_586">assignSubQuery</a>
</li>
<li><a href="#p_function_assignsubquery_587">execSubQueryFrom</a>
</li>
<li><a href="#p_function_execsubqueryfrom_588">execMultiSubQueryFrom</a>
</li>
<li><a href="#p_function_execmultisubqueryfrom_589">having</a>
</li>
<li><a href="#p_function_having_590">execHaving</a>
</li>
<li><a href="#p_function_exechaving_591">execInsertExpr</a>
</li>
<li><a href="#p_function_execinsertexpr_592">execUpdateExpr</a>
</li>
<li><a href="#p_function_execupdateexpr_593">execSelectExpr</a>
</li>
<li><a href="#p_function_execselectexpr_594">execAggregateFunction</a>
</li>
<li><a href="#p_function_execaggregatefunction_595">execAllAggregateFunction</a>
</li>
<li><a href="#p_function_execallaggregatefunction_596">execSimpleCountFunction</a>
</li>
</ul>
</li>
<li><a href="#p_function_execsimplecountfunction_597">Posql_Core</a>
<ul>
<li><a href="#p_class_posql_core_598">isDatabase</a>
</li>
<li><a href="#p_function_isdatabase_599">existsTable</a>
</li>
<li><a href="#p_function_existstable_600">getMeta</a>
</li>
<li><a href="#p_function_getmeta_601">getMetaData</a>
</li>
<li><a href="#p_function_getmetadata_602">getMetaAssoc</a>
</li>
<li><a href="#p_function_getmetaassoc_603">getCreateDefinitionMeta</a>
</li>
<li><a href="#p_function_getcreatedefinitionmeta_604">init</a>
</li>
<li><a href="#p_function_init_605">terminate</a>
</li>
<li><a href="#p_function_terminate_606">sleep</a>
</li>
<li><a href="#p_function_sleep_607">initCorrelationPrefix</a>
</li>
<li><a href="#p_function_initcorrelationprefix_608">getPath</a>
</li>
<li><a href="#p_function_getpath_609">setPath</a>
</li>
<li><a href="#p_function_setpath_610">getDatabaseName</a>
</li>
<li><a href="#p_function_getdatabasename_611">getTableNames</a>
</li>
<li><a href="#p_function_gettablenames_612">getTableAliasNames</a>
</li>
<li><a href="#p_function_gettablealiasnames_613">getColumnAliasNames</a>
</li>
<li><a href="#p_function_getcolumnaliasnames_614">getTableName</a>
</li>
<li><a href="#p_function_gettablename_615">getLastInsertId</a>
</li>
<li><a href="#p_function_getlastinsertid_616">getTableInfo</a>
</li>
<li><a href="#p_function_gettableinfo_617">_getTableInfo</a>
</li>
<li><a href="#p_function__gettableinfo_618">getLastMod</a>
</li>
<li><a href="#p_function_getlastmod_619">setLastMod</a>
</li>
<li><a href="#p_function_setlastmod_620">getNextId</a>
</li>
<li><a href="#p_function_getnextid_621">setNextId</a>
</li>
<li><a href="#p_function_setnextid_622">toUniqId</a>
</li>
<li><a href="#p_function_touniqid_623">getUniqId</a>
</li>
<li><a href="#p_function_getuniqid_624">getId</a>
</li>
<li><a href="#p_function_getid_625">isEnableId</a>
</li>
<li><a href="#p_function_isenableid_626">isStatementObject</a>
</li>
<li><a href="#p_function_isstatementobject_627">getClass</a>
</li>
<li><a href="#p_function_getclass_628">getClassName</a>
</li>
<li><a href="#p_function_getclassname_629">getClassKey</a>
</li>
<li><a href="#p_function_getclasskey_630">getTransactionKey</a>
</li>
<li><a href="#p_function_gettransactionkey_631">getVersion</a>
</li>
<li><a href="#p_function_getversion_632">getHeader</a>
</li>
<li><a href="#p_function_getheader_633">getTableDelimiters</a>
</li>
<li><a href="#p_function_gettabledelimiters_634">getExtraAliasMessage</a>
</li>
<li><a href="#p_function_getextraaliasmessage_635">getEngine</a>
</li>
<li><a href="#p_function_getengine_636">setEngine</a>
</li>
<li><a href="#p_function_setengine_637">setDeadLockTimeout</a>
</li>
<li><a href="#p_function_setdeadlocktimeout_638">setAutoIncrement</a>
</li>
<li><a href="#p_function_setautoincrement_639">setDefaultDataType</a>
</li>
<li><a href="#p_function_setdefaultdatatype_640">setExt</a>
</li>
<li><a href="#p_function_setext_641">setMax</a>
</li>
<li><a href="#p_function_setmax_642">setEncoder</a>
</li>
<li><a href="#p_function_setencoder_643">setDecoder</a>
</li>
<li><a href="#p_function_setdecoder_644">_setRegistered</a>
</li>
<li><a href="#p_function__setregistered_645">_getRegistered</a>
</li>
<li><a href="#p_function__getregistered_646">_setTerminated</a>
</li>
<li><a href="#p_function__setterminated_647">_getTerminated</a>
</li>
<li><a href="#p_function__getterminated_648">_setLockedTables</a>
</li>
<li><a href="#p_function__setlockedtables_649">_getLockedTables</a>
</li>
<li><a href="#p_function__getlockedtables_650">_addMap</a>
</li>
<li><a href="#p_function__addmap_651">_upMap</a>
</li>
<li><a href="#p_function__upmap_652">_upRestoreMap</a>
</li>
<li><a href="#p_function__uprestoremap_653">_queryFormatCallback</a>
</li>
<li><a href="#p_function__queryformatcallback_654">formatQueryString</a>
</li>
<li><a href="#p_function_formatquerystring_655">mergeDefaults</a>
</li>
<li><a href="#p_function_mergedefaults_656">encode</a>
</li>
<li><a href="#p_function_encode_657">decode</a>
</li>
<li><a href="#p_function_decode_658">encodeKey</a>
</li>
<li><a href="#p_function_encodekey_659">decodeKey</a>
</li>
<li><a href="#p_function_decodekey_660">getSelectDefaultArguments</a>
</li>
<li><a href="#p_function_getselectdefaultarguments_661">getAggregateDefaults</a>
</li>
<li><a href="#p_function_getaggregatedefaults_662">getAggregateExtract</a>
</li>
<li><a href="#p_function_getaggregateextract_663">aggregateAll</a>
</li>
<li><a href="#p_function_aggregateall_664">aggregateByGroups</a>
</li>
<li><a href="#p_function_aggregatebygroups_665">aggregateAssignByGroups</a>
</li>
<li><a href="#p_function_aggregateassignbygroups_666">formatAggregateFunction</a>
</li>
<li><a href="#p_function_formataggregatefunction_667">groupBy</a>
</li>
<li><a href="#p_function_groupby_668">_groupBy</a>
</li>
<li><a href="#p_function__groupby_669">_multiGroupBy</a>
</li>
<li><a href="#p_function__multigroupby_670">_groupByResolve</a>
</li>
<li><a href="#p_function__groupbyresolve_671">orderBy</a>
</li>
<li><a href="#p_function_orderby_672">assignLimitOffset</a>
</li>
<li><a href="#p_function_assignlimitoffset_673">_emitDisableFunctions</a>
</li>
<li><a href="#p_function__emitdisablefunctions_674">getDisableFunctions</a>
</li>
<li><a href="#p_function_getdisablefunctions_675">setDisableFunctions</a>
</li>
<li><a href="#p_function_setdisablefunctions_676">isDisableFunction</a>
</li>
<li><a href="#p_function_isdisablefunction_677">checkDisableFunctions</a>
</li>
</ul>
</li>
<li><a href="#p_function_checkdisablefunctions_678">Posql_Cache</a>
<ul>
<li><a href="#p_class_posql_cache_679">getQueryCacheTableName</a>
</li>
<li><a href="#p_function_getquerycachetablename_680">applyQueryCache</a>
</li>
<li><a href="#p_function_applyquerycache_681">clearQueryCache</a>
</li>
<li><a href="#p_function_clearquerycache_682">_validQueryCacheExpr</a>
</li>
<li><a href="#p_function__validquerycacheexpr_683">removeQueryCache</a>
</li>
<li><a href="#p_function_removequerycache_684">saveQueryCache</a>
</li>
<li><a href="#p_function_savequerycache_685">countQueryCache</a>
</li>
<li><a href="#p_function_countquerycache_686">loadQueryCache</a>
</li>
</ul>
</li>
<li><a href="#p_function_loadquerycache_687">Posql_Scan</a>
<ul>
<li><a href="#p_class_posql_scan_688">applyOptimizeExplan</a>
</li>
<li><a href="#p_function_applyoptimizeexplan_689">scanFullTables</a>
</li>
<li><a href="#p_function_scanfulltables_690">scanFullTablesOnce</a>
</li>
</ul>
</li>
<li><a href="#p_function_scanfulltablesonce_691">Posql</a>
<ul>
<li><a href="#p_class_posql_692">Posql</a>
</li>
<li><a href="#p_function_posql_693">__destruct</a>
</li>
<li><a href="#p_function___destruct_694">open</a>
</li>
<li><a href="#p_function_open_695">createDatabase</a>
</li>
<li><a href="#p_function_createdatabase_696">createTable</a>
</li>
<li><a href="#p_function_createtable_697">createFunction</a>
</li>
<li><a href="#p_function_createfunction_698">dropDatabase</a>
</li>
<li><a href="#p_function_dropdatabase_699">dropTable</a>
</li>
<li><a href="#p_function_droptable_700">alterTable</a>
</li>
<li><a href="#p_function_altertable_701">insert</a>
</li>
<li><a href="#p_function_insert_702">update</a>
</li>
<li><a href="#p_function_update_703">delete</a>
</li>
<li><a href="#p_function_delete_704">replace</a>
</li>
<li><a href="#p_function_replace_705">select</a>
</li>
<li><a href="#p_function_select_706">multiSelect</a>
</li>
<li><a href="#p_function_multiselect_707">subSelect</a>
</li>
<li><a href="#p_function_subselect_708">multiSubSelect</a>
</li>
<li><a href="#p_function_multisubselect_709">selectDual</a>
</li>
<li><a href="#p_function_selectdual_710">count</a>
</li>
<li><a href="#p_function_count_711">multiCount</a>
</li>
<li><a href="#p_function_multicount_712">vacuum</a>
</li>
<li><a href="#p_function_vacuum_713">describe</a>
</li>
<li><a href="#p_function_describe_714">exec</a>
</li>
<li><a href="#p_function_exec_715">query</a>
</li>
<li><a href="#p_function_query_716">queryf</a>
</li>
<li><a href="#p_function_queryf_717">multiQuery</a>
</li>
<li><a href="#p_function_multiquery_718">quote</a>
</li>
<li><a href="#p_function_quote_719">prepare</a>
</li>
<li><a href="#p_function_prepare_720">transaction</a>
</li>
<li><a href="#p_function_transaction_721">beginTransaction</a>
</li>
<li><a href="#p_function_begintransaction_722">commit</a>
</li>
<li><a href="#p_function_commit_723">rollBack</a>
</li>
<li><a href="#p_function_rollback_724">lastInsertId</a>
</li>
</ul>
</li>
</ul>
<!--End#IndexPoint-->
<hr>
<div id="block-0000"><h2 id="phpdoc_source_index">
Posql Source Document
</h2><div class="unknown"><div>
<pre class="desc">
 Posql:
   The tiny text-base database engine (DBMS) written by pure PHP
   that does not need any additional extension library,
   it is designed compatible with SQL-92,
   and only uses all-in-one file as database.
 Supports the basic SQL-92 and SQL-99 syntax.
 It is concluded by all one file as one database.
 The database logic design does not use the file quite temporarily.
 This database is inherited class from the MiniPod.
 PHP versions 4 and 5
</pre>
<dl>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
<dt>link</dt>
<dd><a href="http://sourceforge.jp/projects/posql/" target="_blank" title="open in blanks window">http://sourceforge.jp/projects/posql/</a></dd>
<dt>link</dt>
<dd><a href="http://sourceforge.net/projects/posql/" target="_blank" title="open in blanks window">http://sourceforge.net/projects/posql/</a></dd>
<dt>license</dt>
<dd>Dual licensed under the MIT and GPL licenses</dd>
<dt>copyright</dt>
<dd>Copyright (c) 2010 polygon planet</dd>
<dt>version</dt>
<dd>$Id: posql.config.php,v 2.17 2010/03/28 23:11:38 polygon Exp $</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0001"><h2>
<a name="p_class_posql_config_1">
<var class="class">Posql_Config</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 The class to configure the variables for Posql
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Config</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0002"><h2>
<a name="p_var_path_2">
<var class="var">path</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   maintains file path of database</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0003"><h2>
<a name="p_var_encoder_3">
<var class="var">encoder</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>mixed</em>    function name of serializer</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0004"><h2>
<a name="p_var_decoder_4">
<var class="var">decoder</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>mixed</em>    function name of unserializer</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0005"><h2>
<a name="p_var_disablefuncs_5">
<var class="var">disableFuncs</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    the default functions list of calls disable in expression</dd>
<dt>link</dt>
<dd><a href="http://www.phpbuilder.com/manual/features.safe-mode.functions.php" target="_blank" title="open in blanks window">http://www.phpbuilder.com/manual/features.safe-mode.functions.php</a></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0006"><h2>
<a name="p_var_engine_6">
<var class="var">engine</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   Operation mode of SQL Expression</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc">
  ------------------------------------------
  sql: standard SQL syntax support
  ------------------------------------------
  php: using PHP&#039;s syntax on all expression
  ------------------------------------------
</pre>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0007"><h2>
<a name="p_var_autovacuum_7">
<var class="var">autoVacuum</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  enables executes vacuum() calls automatic when shutdown</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0008"><h2>
<a name="p_var_autoassignequals_8">
<var class="var">autoAssignEquals</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  whether &quot;=&quot; to convert into &quot;==&quot; automatically or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc">
  e.g. &quot;SELECT ... WHERE foo = 1&quot;
        will convert to
       &quot;SELECT ... WHERE foo == 1&quot;
  when operating it in the PHP mode{@see $engine}, this is important
  (default = true : auto convert it)
</pre>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0009"><h2>
<a name="p_var_auto_increment_9">
<var class="var">auto_increment</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   enables auto increment &quot;rowid&quot; or number of that value</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0010"><h2>
<a name="p_var_autoincrement_10">
<var class="var">autoIncrement</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   alias of auto_increment</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0011"><h2>
<a name="p_var_autolock_11">
<var class="var">autoLock</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  enables exclusive lock to database.</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc">
                  This value will dynamically become TRUE
                  when colliding with other processes.
</pre>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0012"><h2>
<a name="p_var_defaultdatatype_12">
<var class="var">defaultDataType</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   the type for supplements which omitted data type</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc">
                  on CREATE TABLE command (e.g. &quot;CREATE TABLE t (a, b, c)&quot;)
</pre>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0013"><h2>
<a name="p_var_charset_13">
<var class="var">charset</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   internal character-code (default = UTF-8)</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0014"><h2>
<a name="p_var_ext_14">
<var class="var">ext</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   file extension as database</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0015"><h2>
<a name="p_var_deadlocktimeout_15">
<var class="var">deadLockTimeout</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   the maximal minutes as timeout for the dead lock</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc">
                  default = 10 minutes.
</pre>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0016"><h2>
<a name="p_var_max_16">
<var class="var">MAX</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   max size (bytes) of associable all</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc">
                  default = 0x7fffff00 (2147483392)
</pre>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0017"><h2>
<a name="p_var_nl_17">
<var class="var">NL</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   separator of row and row (LF: 0x0A)</dd>
<dt>access</dt>
<dd>private  **MUST NOT MODIFY**</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0018"><h2>
<a name="p_var_lock_none_18">
<var class="var">LOCK_NONE</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   the state of lock (not locked)</dd>
<dt>access</dt>
<dd>private  **MUST NOT MODIFY**</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0019"><h2>
<a name="p_var_lock_sh_19">
<var class="var">LOCK_SH</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   the state of lock (locked for reading)</dd>
<dt>access</dt>
<dd>private  **MUST NOT MODIFY**</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0020"><h2>
<a name="p_var_lock_ex_20">
<var class="var">LOCK_EX</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   the state of lock (locked for writing)</dd>
<dt>access</dt>
<dd>private  **MUST NOT MODIFY**</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0021"><h2>
<a name="p_var_delim_table_21">
<var class="var">DELIM_TABLE</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   the delimiter for table</dd>
<dt>access</dt>
<dd>private  **MUST NOT MODIFY**</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0022"><h2>
<a name="p_var_delim_cache_22">
<var class="var">DELIM_CACHE</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   the delimiter for query cache</dd>
<dt>access</dt>
<dd>private  **MUST NOT MODIFY**</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0023"><h2>
<a name="p_var_delim_index_23">
<var class="var">DELIM_INDEX</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   the delimiter for index</dd>
<dt>access</dt>
<dd>private  **MUST NOT MODIFY**</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0024"><h2>
<a name="p_var_delim_view_24">
<var class="var">DELIM_VIEW</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   the delimiter for view</dd>
<dt>access</dt>
<dd>private  **MUST NOT MODIFY**</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0025"><h2>
<a name="p_var_udf_25">
<var class="var">UDF</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    maintains the User Defined Function(UDF)s</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0026"><h2>
<a name="p_var_meta_26">
<var class="var">meta</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    cache of the memory</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0027"><h2>
<a name="p_var_tablename_27">
<var class="var">tableName</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   maintains current table name</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0028"><h2>
<a name="p_var_errors_28">
<var class="var">errors</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    storage of the error messages</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0029"><h2>
<a name="p_var_next_29">
<var class="var">next</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   maintains next row count</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0030"><h2>
<a name="p_var_id_30">
<var class="var">id</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   maintains the unique id of this object</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0032"><h2>
<a name="p_var_querycachemaxrows_32">
<var class="var">queryCacheMaxRows</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   maximum row number of the query cache.</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc">
                  (default = 1024).
                  (i.e. 1024 rows or less are used for cache.)
</pre>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0033"><h2>
<a name="p_var__indelete_33">
<var class="var">_inDelete</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  flag of delete() or update()</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0034"><h2>
<a name="p_var__curmeta_34">
<var class="var">_curMeta</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>mixed</em>    temporary variable for some methods</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0035"><h2>
<a name="p_var__primarykey_35">
<var class="var">_primaryKey</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   temporary variable for specifying the primary key</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0036"><h2>
<a name="p_var__createquery_36">
<var class="var">_createQuery</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   temporary variable for getting created definition</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0037"><h2>
<a name="p_var__execexpr_37">
<var class="var">_execExpr</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>mixed</em>    temporary variable for expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0038"><h2>
<a name="p_var__checkonlyexpr_38">
<var class="var">_checkOnlyExpr</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for checking expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0039"><h2>
<a name="p_var__extrajoinexpr_39">
<var class="var">_extraJoinExpr</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable for JOIN expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0040"><h2>
<a name="p_var__notinop_40">
<var class="var">_notInOp</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for IN operator</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0041"><h2>
<a name="p_var__ifexistsclause_41">
<var class="var">_ifExistsClause</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   temporary variable for &quot;IF [NOT] EXISTS&quot; clause</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc">
                  the maintained value is
                    &quot;if_not_exists&quot;, &quot;if_exists&quot; or NULL
</pre>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0042"><h2>
<a name="p_var__casecount_42">
<var class="var">_caseCount</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   temporary variable for CASE, WHEN, THEN, END expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0043"><h2>
<a name="p_var__selectexprcols_43">
<var class="var">_selectExprCols</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable for SELECT-List expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0044"><h2>
<a name="p_var__selecttablenames_44">
<var class="var">_selectTableNames</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>mixed</em>    storage for the tablename of the most recent result</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0045"><h2>
<a name="p_var__selecttablealiases_45">
<var class="var">_selectTableAliases</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable for alias names of FROM clause</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0046"><h2>
<a name="p_var__selectcolumnaliases_46">
<var class="var">_selectColumnAliases</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable for alias names of SELECT-List</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0047"><h2>
<a name="p_var__unioncolnames_47">
<var class="var">_unionColNames</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable for column names on SELECT using UNION</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0048"><h2>
<a name="p_var__onparsealiases_48">
<var class="var">_onParseAliases</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable to parse the alias names</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0049"><h2>
<a name="p_var__isdualselect_49">
<var class="var">_isDualSelect</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for SELECT command as Dual</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0050"><h2>
<a name="p_var__onunionselect_50">
<var class="var">_onUnionSelect</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for SELECT query using UNION</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0051"><h2>
<a name="p_var__oncreate_51">
<var class="var">_onCreate</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for CREATE command</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0052"><h2>
<a name="p_var__onjoinparseexpr_52">
<var class="var">_onJoinParseExpr</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for JOIN clause</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0053"><h2>
<a name="p_var__onmultiselect_53">
<var class="var">_onMultiSelect</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for multipartite SELECT command</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0054"><h2>
<a name="p_var__onhaving_54">
<var class="var">_onHaving</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for HAVING clause</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0055"><h2>
<a name="p_var__correlationprefix_55">
<var class="var">_correlationPrefix</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   maintains the internal correlation prefix for SELECT</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0056"><h2>
<a name="p_var__uniquecolsbyhaving_56">
<var class="var">_uniqueColsByHaving</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable for HAVING clause</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0057"><h2>
<a name="p_var__fromstatement_57">
<var class="var">_fromStatement</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for prepared-statements</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0058"><h2>
<a name="p_var__fromsubselect_58">
<var class="var">_fromSubSelect</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for sub-query</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0059"><h2>
<a name="p_var__fromquerycache_59">
<var class="var">_fromQueryCache</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for the query cache</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0060"><h2>
<a name="p_var__subselectmeta_60">
<var class="var">_subSelectMeta</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable for the list of subqueries table</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0061"><h2>
<a name="p_var__subselectjoininfo_61">
<var class="var">_subSelectJoinInfo</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable for subquery using JOIN</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0062"><h2>
<a name="p_var__subselectjoinuniquenames_62">
<var class="var">_subSelectJoinUniqueNames</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable for unique name of subquery using JOIN</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0063"><h2>
<a name="p_var__usequery_63">
<var class="var">_useQuery</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for distinction of the SQL statement</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0064"><h2>
<a name="p_var__getmetaall_64">
<var class="var">_getMetaAll</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for getting the meta data</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0065"><h2>
<a name="p_var__intransaction_65">
<var class="var">_inTransaction</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  temporary variable for transaction status</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0066"><h2>
<a name="p_var__transactionname_66">
<var class="var">_transactionName</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   temporary variable for transaction name</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0067"><h2>
<a name="p_var__lockedtables_67">
<var class="var">_lockedTables</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    temporary variable to lock the tables</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0068"><h2>
<a name="p_var__inited_68">
<var class="var">_inited</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  whether initialized or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0069"><h2>
<a name="p_var__registered_69">
<var class="var">_registered</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  whether the termination method was registered or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0070"><h2>
<a name="p_var__terminated_70">
<var class="var">_terminated</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  whether the termination method was called or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0071"><h2>
<a name="p_var_iswin_71">
<var class="var">isWin</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  whether OS is WINDOWS or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0072"><h2>
<a name="p_var_isphp5_72">
<var class="var">isPHP5</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  whether PHP VERSION is over 5 or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0073"><h2>
<a name="p_var_lastmethod_73">
<var class="var">lastMethod</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   maintains the method of last query</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0074"><h2>
<a name="p_var_lastquery_74">
<var class="var">lastQuery</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   maintains last SQL query</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0075"><h2>
<a name="p_var_userabort_75">
<var class="var">userAbort</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  maintains old value of ignore_user_abort()</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0076"><h2>
<a name="p_var_math_76">
<var class="var">math</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains instance of the Posql_Math class</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0077"><h2>
<a name="p_var_ctype_77">
<var class="var">ctype</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains instance of the Posql_CType class</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0078"><h2>
<a name="p_var_pcharset_78">
<var class="var">pcharset</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains instance of the Posql_Charset class</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0079"><h2>
<a name="p_var_unicode_79">
<var class="var">unicode</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains instance of the Posql_Unicode class</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0080"><h2>
<a name="p_var_ecma_80">
<var class="var">ecma</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains instance of the Posql_ECMA class</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0081"><h2>
<a name="p_var_archive_81">
<var class="var">archive</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains instance of the Posql_Archive class</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0082"><h2>
<a name="p_var_method_82">
<var class="var">method</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains instance of the Posql_Method class</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0083"><h2>
<a name="p_var_version_83">
<var class="var">version</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   versions of this class</dd>
<dt>access</dt>
<dd>public   **READ ONLY**</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0084"><h2>
<a name="p_function_getencoder_84">
<var class="function">getEncoder</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0084"> <var class="keywords">function</var> getEncoder(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;encoder;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0085"><h2>
<a name="p_function_getdecoder_85">
<var class="function">getDecoder</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0085"> <var class="keywords">function</var> getDecoder(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;decoder;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0086"><h2>
<a name="p_function_getext_86">
<var class="function">getExt</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0086"> <var class="keywords">function</var> getExt(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;ext;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0087"><h2>
<a name="p_function_getmax_87">
<var class="function">getMax</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0087"> <var class="keywords">function</var> getMax(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0088"><h2>
<a name="p_function_getdeadlocktimeout_88">
<var class="function">getDeadLockTimeout</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0088"> <var class="keywords">function</var> getDeadLockTimeout(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;deadLockTimeout;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0089"><h2>
<a name="p_function_setautovacuum_89">
<var class="function">setAutoVacuum</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0089"> <var class="keywords">function</var> setAutoVacuum(<var class="vars">$auto_vacuum</var>){
   <var class="vars">$this</var>-&gt;autoVacuum = (<var class="keywords">bool</var>) <var class="vars">$auto_vacuum</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0090"><h2>
<a name="p_function_getautovacuum_90">
<var class="function">getAutoVacuum</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0090"> <var class="keywords">function</var> getAutoVacuum(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;autoVacuum;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0091"><h2>
<a name="p_function_setautoassignequals_91">
<var class="function">setAutoAssignEquals</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0091"> <var class="keywords">function</var> setAutoAssignEquals(<var class="vars">$auto_assign_equals</var>){
   <var class="vars">$this</var>-&gt;autoAssignEquals = (<var class="keywords">bool</var>) <var class="vars">$auto_assign_equals</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0092"><h2>
<a name="p_function_getautoassignequals_92">
<var class="function">getAutoAssignEquals</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0092"> <var class="keywords">function</var> getAutoAssignEquals(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;autoAssignEquals;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0093"><h2>
<a name="p_function_getautoincrement_93">
<var class="function">getAutoIncrement</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0093"> <var class="keywords">function</var> getAutoIncrement(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;autoIncrement;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0094"><h2>
<a name="p_function_getautolock_94">
<var class="function">getAutoLock</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0094"> <var class="keywords">function</var> getAutoLock(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;autoLock;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0095"><h2>
<a name="p_function_setautolock_95">
<var class="function">setAutoLock</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em>   value whether to enable exclusive lock</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Set value whether to enable exclusive lock.
 This value will dynamically become TRUE
  when colliding with other processes.
 Note:
   autoLock should be enabled excluding Windows.
   Maybe, very slows when locking database by using mkdir() on Windows.
</pre>
</div></div><pre id="source-0095"> <var class="keywords">function</var> setAutoLock(<var class="vars">$auto_lock</var>){
   <var class="vars">$this</var>-&gt;autoLock = (<var class="keywords">bool</var>)<var class="vars">$auto_lock</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0096"><h2>
<a name="p_function_getdefaultdatatype_96">
<var class="function">getDefaultDataType</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0096"> <var class="keywords">function</var> getDefaultDataType(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;defaultDataType;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0097"><h2>
<a name="p_function_setcharset_97">
<var class="function">setCharset</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0097"> <var class="keywords">function</var> setCharset(<var class="vars">$charset</var>){
   <var class="vars">$this</var>-&gt;charset = (<var class="keywords">string</var>) <var class="vars">$charset</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0098"><h2>
<a name="p_function_getcharset_98">
<var class="function">getCharset</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0098"> <var class="keywords">function</var> getCharset(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;charset;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0099"><h2>
<a name="p_function_getlastmethod_99">
<var class="function">getLastMethod</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0099"> <var class="keywords">function</var> getLastMethod(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;lastMethod;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0100"><h2>
<a name="p_function_getlastquery_100">
<var class="function">getLastQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0100"> <var class="keywords">function</var> getLastQuery(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;lastQuery;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0101"><h2>
<a name="p_function_setusequerycache_101">
<var class="function">setUseQueryCache</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0101"> <var class="keywords">function</var> setUseQueryCache(<var class="vars">$use_query_cache</var>){
   <var class="vars">$this</var>-&gt;useQueryCache = (<var class="keywords">bool</var>)<var class="vars">$use_query_cache</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0102"><h2>
<a name="p_function_getusequerycache_102">
<var class="function">getUseQueryCache</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0102"> <var class="keywords">function</var> getUseQueryCache(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;useQueryCache;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0103"><h2>
<a name="p_function_setquerycachemaxrows_103">
<var class="function">setQueryCacheMaxRows</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0103"> <var class="keywords">function</var> setQueryCacheMaxRows(<var class="vars">$query_cache_max_rows</var>){
   <var class="vars">$this</var>-&gt;queryCacheMaxRows = <var class="vars">$query_cache_max_rows</var> - 0;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0104"><h2>
<a name="p_function_getquerycachemaxrows_104">
<var class="function">getQueryCacheMaxRows</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0104"> <var class="keywords">function</var> getQueryCacheMaxRows(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;queryCacheMaxRows;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0105"><h2>
<a name="p_class_posql_ctype_105">
<var class="class">Posql_CType</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 Compat ctype_*
 POSIX CHARACTER CLASSES
 This class emulate the &quot;character type&quot; extension,
   which is present in PHP first since version 4.3 bundled
 The default ctype extension that is behavior is different
   according to argument that are STRING and INTEGER
 -----
 Note:
 -------------------------------------------------------------------
   When called with an empty string
   the result will always be TRUE in PHP &lt; 5.1 and FALSE since 5.1.
 -------------------------------------------------------------------
 {@see <a href="http://www.php.net/manual/en/intro.ctype.php" target="_blank" title="open in blanks window">http://www.php.net/manual/en/intro.ctype.php</a>}
 To clarify this difference, this class handle only &quot;STRING&quot;
</pre>
<dl>
<dt>name</dt>
<dd>Posql_CType</dd>
<dt>link</dt>
<dd><a href="http://php.net/ctype" target="_blank" title="open in blanks window">http://php.net/ctype</a></dd>
<dt>link</dt>
<dd><a href="http://www.pcre.org/pcre.txt" target="_blank" title="open in blanks window">http://www.pcre.org/pcre.txt</a></dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0106"><h2>
<a name="p_var_hasctype_106">
<var class="var">hasCType</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   maintains ctype library can be use</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0107"><h2>
<a name="p_function_posql_ctype_107">
<var class="function">Posql_CType</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0107"> <var class="keywords">function</var> Posql_CType(){
   <var class="vars">$this</var>-&gt;hasCType = <var class="funcs">extension_loaded</var>(<var class="strings">'ctype'</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0108"><h2>
<a name="p_function_isalnum_108">
<var class="function">isAlnum</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> alnum    letters and digits</pre>
</div></div><pre id="source-0108"> <var class="keywords">function</var> isAlnum(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_alnum</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^alnum:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0109"><h2>
<a name="p_function_isalpha_109">
<var class="function">isAlpha</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> alpha    letters</pre>
</div></div><pre id="source-0109"> <var class="keywords">function</var> isAlpha(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_alpha</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^alpha:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0110"><h2>
<a name="p_function_iscntrl_110">
<var class="function">isCntrl</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> cntrl    control characters</pre>
</div></div><pre id="source-0110"> <var class="keywords">function</var> isCntrl(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_cntrl</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^cntrl:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0111"><h2>
<a name="p_function_isdigit_111">
<var class="function">isDigit</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> digit    decimal digits (same as \d)</pre>
</div></div><pre id="source-0111"> <var class="keywords">function</var> isDigit(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_digit</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^digit:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0112"><h2>
<a name="p_function_isgraph_112">
<var class="function">isGraph</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> graph    printing characters, excluding space</pre>
</div></div><pre id="source-0112"> <var class="keywords">function</var> isGraph(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_graph</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^graph:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0113"><h2>
<a name="p_function_islower_113">
<var class="function">isLower</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> lower    lower case letters</pre>
</div></div><pre id="source-0113"> <var class="keywords">function</var> isLower(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_lower</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^lower:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0114"><h2>
<a name="p_function_isprint_114">
<var class="function">isPrint</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> print    printing characters, including space</pre>
</div></div><pre id="source-0114"> <var class="keywords">function</var> isPrint(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_print</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^print:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0115"><h2>
<a name="p_function_ispunct_115">
<var class="function">isPunct</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> punct    printing characters, excluding letters and digits</pre>
</div></div><pre id="source-0115"> <var class="keywords">function</var> isPunct(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_punct</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^punct:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0116"><h2>
<a name="p_function_isspace_116">
<var class="function">isSpace</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> space    white space (not quite the same as \s)</pre>
</div></div><pre id="source-0116"> <var class="keywords">function</var> isSpace(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_space</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^space:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0117"><h2>
<a name="p_function_isupper_117">
<var class="function">isUpper</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> upper    upper case letters</pre>
</div></div><pre id="source-0117"> <var class="keywords">function</var> isUpper(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_upper</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^upper:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0118"><h2>
<a name="p_function_isxdigit_118">
<var class="function">isXdigit</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> xdigit   hexadecimal digits</pre>
</div></div><pre id="source-0118"> <var class="keywords">function</var> isXdigit(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasCType) {
       <var class="vars">$result</var> = <var class="funcs">ctype_xdigit</var>(<var class="vars">$text</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^xdigit:]]}'</var>, <var class="vars">$text</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0119"><h2>
<a name="p_function_isascii_119">
<var class="function">isAscii</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> ascii    character codes 0 - 127</pre>
</div></div><pre id="source-0119"> <var class="keywords">function</var> isAscii(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^ascii:]]}'</var>, <var class="vars">$text</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0120"><h2>
<a name="p_function_isblank_120">
<var class="function">isBlank</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> blank    space or tab only</pre>
</div></div><pre id="source-0120"> <var class="keywords">function</var> isBlank(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^blank:]]}'</var>, <var class="vars">$text</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0121"><h2>
<a name="p_function_isword_121">
<var class="function">isWord</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> word     &quot;word&quot; characters (same as \w)</pre>
</div></div><pre id="source-0121"> <var class="keywords">function</var> isWord(<var class="vars">$text</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$text</var>) &amp;&amp; <var class="vars">$text</var> !== <var class="strings">''</var>) {
     <var class="vars">$result</var> = !<var class="funcs">preg_match</var>(<var class="strings">'{[[:^word:]]}'</var>, <var class="vars">$text</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0122"><h2>
<a name="p_class_posql_math_122">
<var class="class">Posql_Math</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 The math operator class that to using for big integer
 If available it will use the BCMath library
 Will default to the standard PHP integer representation otherwise
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Math</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0123"><h2>
<a name="p_var_hasbc_123">
<var class="var">hasbc</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   maintains BCMath library can be use</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0124"><h2>
<a name="p_var__innercall_124">
<var class="var">_innerCall</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   temporary variable whether the function called at inside</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0125"><h2>
<a name="p_function_posql_math_125">
<var class="function">Posql_Math</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0125"> <var class="keywords">function</var> Posql_Math(){
   <var class="vars">$this</var>-&gt;hasbc = <var class="funcs">extension_loaded</var>(<var class="strings">'bcmath'</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0126"><h2>
<a name="p_function_format_126">
<var class="function">format</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  the number of target</dd>
<dt>param</dt>
<dd><em>number</em>  optionally, the number of digits for floating-point numbers</dd>
<dt>param</dt>
<dd><em>string</em>  optionally, to use sprintf()&#039;s format</dd>
<dt>return</dt>
<dd><em>number</em>  formatted numeric value</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Format the value for plain numbers
</pre>
</div></div><pre id="source-0126"> <var class="keywords">function</var> format(<var class="vars">$number</var>, <var class="vars">$float</var> = <var class="keywords">null</var>, <var class="vars">$sprintf</var> = <var class="keywords">null</var>){
   <var class="keywords">static</var> <var class="vars">$dot</var> = <var class="strings">'.'</var>, <var class="vars">$zero</var> = <var class="strings">'0'</var>, <var class="vars">$sups</var> = <var class="keywords">array</var>(<var class="strings">'0'</var>, <var class="strings">'0'</var>);
   <var class="vars">$result</var> = <var class="vars">$zero</var>;
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$number</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var> &gt; 0) {
     <var class="vars">$number</var> = <var class="funcs">trim</var>(<var class="vars">$number</var>);
     <var class="vars">$sign</var> = <var class="funcs">substr</var>(<var class="vars">$number</var>, 0, 1);
     <var class="keywords">if</var> (<var class="vars">$sign</var> === <var class="strings">'-'</var> || <var class="vars">$sign</var> === <var class="strings">'+'</var>) {
       <var class="vars">$number</var> = <var class="funcs">substr</var>(<var class="vars">$number</var>, 1);
       --<var class="vars">$length</var>;
       <var class="keywords">if</var> (<var class="vars">$sign</var> === <var class="strings">'+'</var>) {
         <var class="vars">$sign</var> = <var class="strings">''</var>;
       }
     } <var class="keywords">else</var> {
       <var class="vars">$sign</var> = <var class="strings">''</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isDec(<var class="vars">$number</var>)) {
       <var class="vars">$number</var> = (<var class="keywords">string</var>)<var class="vars">$number</var>;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isHex(<var class="vars">$number</var>)) {
       <var class="vars">$this</var>-&gt;_innerCall = <var class="keywords">true</var>;
       <var class="vars">$number</var> = <var class="vars">$this</var>-&gt;toHex(<var class="vars">$number</var>);
       <var class="vars">$number</var> = <var class="vars">$this</var>-&gt;convertToBase(<var class="vars">$number</var>, 16, 10);
       <var class="vars">$this</var>-&gt;_innerCall = <var class="keywords">null</var>;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$number</var>)) {
       <var class="vars">$number</var> = (<var class="keywords">string</var>)(<var class="vars">$number</var> - 0);
     } <var class="keywords">else</var> {
       <var class="vars">$number</var> = <var class="funcs">sprintf</var>(<var class="strings">'%.0f'</var>, <var class="vars">$number</var>);
     }
     <var class="keywords">if</var> (<var class="vars">$float</var> !== <var class="keywords">null</var> &amp;&amp; <var class="vars">$float</var> &gt; 0) {
       <var class="vars">$float</var> = (<var class="keywords">int</var>)<var class="vars">$float</var>;
       <var class="vars">$format</var> = <var class="strings">'%0'</var> . <var class="vars">$float</var> . <var class="vars">$dot</var> . <var class="vars">$float</var> . <var class="strings">'s'</var>;
       <var class="vars">$numbers</var> = <var class="funcs">explode</var>(<var class="vars">$dot</var>, <var class="vars">$number</var>) + <var class="vars">$sups</var>;
       <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$numbers</var>) &gt; 2) {
         <var class="vars">$numbers</var> = <var class="funcs">array_slice</var>(<var class="vars">$numbers</var>, 0, 2);
       }
       <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$numbers</var>[1])) {
         <var class="vars">$numbers</var>[1] = <var class="vars">$zero</var>;
       }
       <var class="vars">$numbers</var>[1] = <var class="funcs">sprintf</var>(<var class="vars">$format</var>, <var class="vars">$numbers</var>[1]);
       <var class="vars">$number</var> = <var class="funcs">implode</var>(<var class="vars">$dot</var>, <var class="vars">$numbers</var>);
     }
     <var class="vars">$result</var> = <var class="vars">$sign</var> . <var class="funcs">ltrim</var>(<var class="vars">$number</var>);
     <var class="keywords">if</var> (<var class="vars">$float</var> !== <var class="keywords">null</var>
      &amp;&amp; ((<var class="vars">$float</var> - 0) === 0) &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$result</var>, <var class="vars">$dot</var>) !== <var class="keywords">false</var>) {
       <var class="vars">$result</var> = <var class="funcs">rtrim</var>(<var class="vars">$result</var>, <var class="vars">$zero</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="vars">$result</var>, -1) === <var class="vars">$dot</var>) {
       <var class="vars">$result</var> = <var class="funcs">substr</var>(<var class="vars">$result</var>, 0, -1);
     }
   }
   <var class="keywords">if</var> (<var class="vars">$sprintf</var> != <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="vars">$sprintf</var>, <var class="vars">$result</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0127"><h2>
<a name="p_function_converttobase_127">
<var class="function">convertToBase</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  the numeric or alphameric value of target</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$func</var> = <var class="strings">&quot;convertToBase&quot;</var>;
 <var class="vars">$value</var> = <var class="strings">&quot;FFFFFFFF&quot;</var>; <var class="vars">$from</var> = 16; <var class="vars">$to</var> = 10;
 <var class="funcs">printf</var>(<var class="strings">&quot;&lt;p&gt;%s(&lt;em&gt;%s&lt;/em&gt;, %d, %d);&lt;br&gt; = %s&lt;/p&gt;&quot;</var>,
        <var class="vars">$func</var>, <var class="vars">$value</var>, <var class="vars">$from</var>, <var class="vars">$to</var>,
        Posql_Math::convertToBase(<var class="vars">$value</var>, <var class="vars">$from</var>, <var class="vars">$to</var>));
 <var class="vars">$value</var> = <var class="strings">&quot;9223372036854775807&quot;</var>; <var class="vars">$from</var> = 10; <var class="vars">$to</var> = 16;
 <var class="funcs">printf</var>(<var class="strings">&quot;&lt;p&gt;%s(&lt;em&gt;%s&lt;/em&gt;, %d, %d);&lt;br&gt; = %s&lt;/p&gt;&quot;</var>,
        <var class="vars">$func</var>, <var class="vars">$value</var>, <var class="vars">$from</var>, <var class="vars">$to</var>,
        Posql_Math::convertToBase(<var class="vars">$value</var>, <var class="vars">$from</var>, <var class="vars">$to</var>));
 <var class="vars">$value</var> = <var class="strings">&quot;1101010001001101101001110111110110011001101101100111001101&quot;</var>;
 <var class="vars">$from</var> = 2; <var class="vars">$to</var> = 62;
 <var class="funcs">printf</var>(<var class="strings">&quot;&lt;p&gt;%s(&lt;em&gt;%s&lt;/em&gt;, %d, %d);&lt;br&gt; = %s&lt;/p&gt;&quot;</var>,
        <var class="vars">$func</var>, <var class="vars">$value</var>, <var class="vars">$from</var>, <var class="vars">$to</var>,
        Posql_Math::convertToBase(<var class="vars">$value</var>, <var class="vars">$from</var>, <var class="vars">$to</var>));</pre></dd>
<dt>param</dt>
<dd><em>number</em>  the base number is in</dd>
<dt>param</dt>
<dd><em>number</em>  the base to convert number to</dd>
<dt>return</dt>
<dd><em>string</em>  the numbers of result which was converted to base to base</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> A handy function which was customized
  by base_convert() function for big scale integers.
 The maximum base number is 62.
 The base number &#039;0&#039; will be not converted.
 It is same as base_convert() function usage.
 </pre>
</div></div><pre id="source-0127"> <var class="keywords">function</var> convertToBase(<var class="vars">$number</var>, <var class="vars">$frombase</var>, <var class="vars">$tobase</var>){
   <var class="keywords">static</var> <var class="vars">$bases</var> =
   <var class="strings">'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'</var>;
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_innerCall)) {
     <var class="vars">$number</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$number</var>, 0);
   }
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$number</var>);
   <var class="vars">$frombase</var> = (<var class="keywords">int</var>)<var class="vars">$frombase</var>;
   <var class="vars">$tobase</var> = (<var class="keywords">int</var>)<var class="vars">$tobase</var>;
   <var class="keywords">if</var> (<var class="vars">$frombase</var> &gt; 0 &amp;&amp; <var class="vars">$frombase</var> &lt; 63
    &amp;&amp; <var class="vars">$tobase</var>   &gt; 0 &amp;&amp; <var class="vars">$tobase</var>   &lt; 63) {
     <var class="vars">$numbers</var> = <var class="keywords">array</var>();
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$bases</var>, <var class="funcs">substr</var>(<var class="vars">$number</var>, <var class="vars">$i</var>, 1));
       <var class="keywords">if</var> (<var class="vars">$pos</var> === <var class="keywords">false</var>) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       }
       <var class="vars">$numbers</var>[<var class="vars">$i</var>] = <var class="vars">$pos</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$result</var> !== <var class="keywords">false</var>) {
       <var class="keywords">do</var> {
         <var class="vars">$divide</var> = 0;
         <var class="vars">$index</var>  = 0;
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; ++<var class="vars">$i</var>) {
           <var class="vars">$divide</var> = <var class="vars">$divide</var> * <var class="vars">$frombase</var> + <var class="vars">$numbers</var>[<var class="vars">$i</var>];
           <var class="keywords">if</var> (<var class="vars">$divide</var> &gt;= <var class="vars">$tobase</var>) {
             <var class="vars">$numbers</var>[<var class="vars">$index</var>++] = (<var class="keywords">int</var>)(<var class="vars">$divide</var> / <var class="vars">$tobase</var>);
             <var class="vars">$divide</var> = <var class="vars">$divide</var> % <var class="vars">$tobase</var>;
           } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$index</var> &gt; 0) {
             <var class="vars">$numbers</var>[<var class="vars">$index</var>++] = 0;
           }
         }
         <var class="vars">$length</var> = <var class="vars">$index</var>;
         <var class="vars">$result</var> = <var class="funcs">substr</var>(<var class="vars">$bases</var>, <var class="vars">$divide</var>, 1) . <var class="vars">$result</var>;
       } <var class="keywords">while</var> (<var class="vars">$index</var> !== 0);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0128"><h2>
<a name="p_function_hexdec_128">
<var class="function">hexdec</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  the number of target</dd>
<dt>param</dt>
<dd><em>boolean</em> whether it is checked strictly as hexadecimal number</dd>
<dt>return</dt>
<dd><em>string</em>  the number of result as decimal numbers, or &#039;0&#039;</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Hexadecimal to decimal
 A handle hex to decimal converter.
 If bcmath library available, it will be use.
 Otherwise, it will be to use the precision of PHP floats.
</pre>
</div></div><pre id="source-0128"> <var class="keywords">function</var> <var class="funcs">hexdec</var>(<var class="vars">$number</var>, <var class="vars">$strict</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="strings">'0'</var>;
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$number</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var> &gt; 1
    &amp;&amp; (!<var class="vars">$strict</var> || <var class="vars">$this</var>-&gt;isHex(<var class="vars">$number</var>))) {
     <var class="keywords">if</var> (<var class="vars">$length</var> &gt;= 8) {
       <var class="vars">$dec</var> = 0;
       <var class="vars">$bit</var> = 1;
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
         <var class="keywords">for</var> (<var class="vars">$pos</var> = 1; <var class="vars">$pos</var> &lt;= <var class="vars">$length</var>; ++<var class="vars">$pos</var>) {
           <var class="vars">$sub</var> = <var class="funcs">substr</var>(<var class="vars">$number</var>, (-<var class="vars">$pos</var>), 1);
           <var class="vars">$dec</var> = <var class="funcs">bcadd</var>(<var class="vars">$dec</var>, <var class="funcs">bcmul</var>(<var class="funcs">hexdec</var>(<var class="vars">$sub</var>), <var class="vars">$bit</var>));
           <var class="vars">$bit</var> = <var class="funcs">bcmul</var>(<var class="vars">$bit</var>, 16);
         }
         <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s'</var>, <var class="vars">$dec</var>);
       } <var class="keywords">else</var> {
         <var class="keywords">for</var> (<var class="vars">$pos</var> = 1; <var class="vars">$pos</var> &lt;= <var class="vars">$length</var>; ++<var class="vars">$pos</var>) {
           <var class="vars">$sub</var> = <var class="funcs">substr</var>(<var class="vars">$number</var>, (-<var class="vars">$pos</var>), 1);
           <var class="vars">$dec</var> += <var class="funcs">hexdec</var>(<var class="vars">$sub</var>) * <var class="vars">$bit</var>;
           <var class="vars">$bit</var> *= 16;
         }
         <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="strings">'%.0f'</var>, <var class="vars">$dec</var>);
       }
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="strings">'%.0f'</var>, <var class="funcs">hexdec</var>(<var class="vars">$number</var>));
     }
     <var class="keywords">if</var> (<var class="funcs">ord</var>(<var class="vars">$result</var>) === 0x20) {
       <var class="vars">$result</var> = <var class="funcs">ltrim</var>(<var class="vars">$result</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0129"><h2>
<a name="p_function_isdec_129">
<var class="function">isDec</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  the number of target</dd>
<dt>return</dt>
<dd><em>boolean</em> whether the numbers had consisted of decimal number</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether the numbers of argument is consist of decimal number
</pre>
</div></div><pre id="source-0129"> <var class="keywords">function</var> isDec(<var class="vars">$number</var>){
   <var class="keywords">static</var> <var class="vars">$mask</var> = <var class="strings">'0123456789.'</var>;
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$number</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var> &gt; 0) {
     <var class="vars">$ord</var> = <var class="funcs">ord</var>(<var class="vars">$number</var>);
     <var class="keywords">if</var> (<var class="vars">$ord</var> === 0x2B    <var class="comments">// +  plus  sign</var>
      || <var class="vars">$ord</var> === 0x2D) { <var class="comments">// -  minus sign</var>
       <var class="vars">$number</var> = <var class="funcs">substr</var>(<var class="vars">$number</var>, 1);
       --<var class="vars">$length</var>;
     }
     <var class="keywords">if</var> (<var class="funcs">strspn</var>(<var class="vars">$number</var>, <var class="vars">$mask</var>) === <var class="vars">$length</var>) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0130"><h2>
<a name="p_function_ishex_130">
<var class="function">isHex</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  the number of target</dd>
<dt>return</dt>
<dd><em>boolean</em> whether the numbers had consisted of hexadecimal number</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether the numbers of argument is consist of hexadecimal number
</pre>
</div></div><pre id="source-0130"> <var class="keywords">function</var> isHex(<var class="vars">$number</var>){
   <var class="keywords">static</var> <var class="vars">$mask</var> = <var class="strings">'abcdef0123456789'</var>;
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$number</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var> &gt; 0) {
     <var class="vars">$number</var> = <var class="funcs">strtolower</var>(<var class="vars">$number</var>);
     <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$number</var>, <var class="strings">'x'</var>);
     <var class="keywords">if</var> (<var class="vars">$pos</var> !== <var class="keywords">false</var> &amp;&amp; <var class="vars">$pos</var> &gt;= 0 &amp;&amp; <var class="vars">$pos</var> &lt;= 2) {
       <var class="vars">$number</var> = <var class="funcs">substr</var>(<var class="vars">$number</var>, <var class="vars">$pos</var> + 1);
       <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$number</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">strspn</var>(<var class="vars">$number</var>, <var class="vars">$mask</var>) === <var class="vars">$length</var>) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0131"><h2>
<a name="p_function_tohex_131">
<var class="function">toHex</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>   the number of target</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether the result of all lowercase or all uppercase</dd>
<dt>return</dt>
<dd><em>string</em>   the hexadecimal numbers, or &#039;0&#039;</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return it if the given numerical value is a hexadecimal number
</pre>
</div></div><pre id="source-0131"> <var class="keywords">function</var> toHex(<var class="vars">$number</var>, <var class="vars">$tolower</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="strings">'0'</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isHex(<var class="vars">$number</var>)) {
     <var class="vars">$number</var> = <var class="funcs">strtoupper</var>(<var class="vars">$number</var>);
     <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$number</var>, <var class="strings">'X'</var>);
     <var class="keywords">if</var> (<var class="vars">$pos</var> !== <var class="keywords">false</var>) {
       <var class="vars">$number</var> = <var class="funcs">substr</var>(<var class="vars">$number</var>, <var class="vars">$pos</var> + 1);
     }
     <var class="keywords">if</var> (<var class="vars">$tolower</var>) {
       <var class="vars">$result</var> = <var class="funcs">strtolower</var>(<var class="vars">$number</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$number</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0132"><h2>
<a name="p_function_getscale_132">
<var class="function">getScale</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em> (...)  the one or some arguments of numbers</dd>
<dt>return</dt>
<dd><em>number</em>        the number of floating-point, or NULL</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the number of digits for floating-point numbers.
 If not found, NULL will be returned.
</pre>
</div></div><pre id="source-0132"> <var class="keywords">function</var> getScale(<var class="vars">$op</var>){
   <var class="keywords">static</var> <var class="vars">$dot</var> = <var class="strings">'.'</var>;
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var> &gt; 1) {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
     <var class="vars">$max_scale</var> = 0;
     <var class="keywords">foreach</var> (<var class="vars">$args</var> <var class="keywords">as</var> <var class="vars">$op</var>) {
       <var class="vars">$scale</var> = <var class="funcs">strstr</var>(<var class="vars">$op</var>, <var class="vars">$dot</var>);
       <var class="keywords">if</var> (<var class="vars">$scale</var> &amp;&amp; <var class="funcs">strlen</var>(<var class="vars">$scale</var>) &gt; <var class="vars">$max_scale</var>) {
         <var class="vars">$max_scale</var> = <var class="funcs">strlen</var>(<var class="vars">$scale</var>) - 1;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$max_scale</var> &gt; 0) {
       <var class="vars">$result</var> = <var class="vars">$max_scale</var>;
     }
   } <var class="keywords">else</var> {
     <var class="vars">$scale</var> = <var class="funcs">strstr</var>(<var class="vars">$op</var>, <var class="vars">$dot</var>);
     <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$scale</var>) &gt; 1) {
       <var class="vars">$result</var> = <var class="funcs">strlen</var>(<var class="vars">$scale</var>) - 1;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0133"><h2>
<a name="p_function_add_133">
<var class="function">add</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Add two numbers: $op1 + $op2
</pre>
</div></div><pre id="source-0133"> <var class="keywords">function</var> add(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>, <var class="vars">$op2</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$op2</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op2</var>, <var class="vars">$scale</var>);
     <var class="vars">$result</var> = <var class="funcs">bcadd</var>(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = (<var class="vars">$op1</var> - 0) + (<var class="vars">$op2</var> - 0);
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>, <var class="vars">$scale</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0134"><h2>
<a name="p_function_sub_134">
<var class="function">sub</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Substract two numbers: $op1 - $op2
</pre>
</div></div><pre id="source-0134"> <var class="keywords">function</var> sub(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>, <var class="vars">$op2</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$op2</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op2</var>, <var class="vars">$scale</var>);
     <var class="vars">$result</var> = <var class="funcs">bcsub</var>(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = (<var class="vars">$op1</var> - 0) - (<var class="vars">$op2</var> - 0);
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>, <var class="vars">$scale</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0135"><h2>
<a name="p_function_mul_135">
<var class="function">mul</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Multiply two numbers: $op1 * $op2
</pre>
</div></div><pre id="source-0135"> <var class="keywords">function</var> mul(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>, <var class="vars">$op2</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$op2</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op2</var>, <var class="vars">$scale</var>);
     <var class="vars">$result</var> = <var class="funcs">bcmul</var>(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = (<var class="vars">$op1</var> - 0) * (<var class="vars">$op2</var> - 0);
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>, <var class="vars">$scale</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0136"><h2>
<a name="p_function_div_136">
<var class="function">div</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Divide two numbers: $op1 / $op2
</pre>
</div></div><pre id="source-0136"> <var class="keywords">function</var> div(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>, <var class="vars">$op2</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$op2</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op2</var>, <var class="vars">$scale</var>);
     <var class="keywords">if</var> (<var class="vars">$op2</var> != 0) {
       <var class="vars">$result</var> = <var class="funcs">bcdiv</var>(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var>);
     }
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$op2</var> != 0) {
       <var class="vars">$result</var> = (<var class="vars">$op1</var> - 0) / (<var class="vars">$op2</var> - 0);
     }
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>, <var class="vars">$scale</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0137"><h2>
<a name="p_function_mod_137">
<var class="function">mod</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Calculate the modulus of $op1 and $op2: $op1 % $op2
</pre>
</div></div><pre id="source-0137"> <var class="keywords">function</var> mod(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>, <var class="vars">$op2</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$op2</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op2</var>, <var class="vars">$scale</var>);
     <var class="vars">$result</var> = <var class="funcs">bcmod</var>(<var class="vars">$op1</var>, <var class="vars">$op2</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = (<var class="vars">$op1</var> - 0) % (<var class="vars">$op2</var> - 0);
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0138"><h2>
<a name="p_function_pow_138">
<var class="function">pow</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Raise $op1 to the $op2 exponent: $op1 ^ $op2
</pre>
</div></div><pre id="source-0138"> <var class="keywords">function</var> <var class="funcs">pow</var>(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>, <var class="vars">$op2</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$op2</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op2</var>, <var class="vars">$scale</var>);
     <var class="vars">$result</var> = <var class="funcs">bcpow</var>(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="funcs">pow</var>(<var class="vars">$op1</var> - 0, <var class="vars">$op2</var> - 0);
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>, <var class="vars">$scale</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0139"><h2>
<a name="p_function_comp_139">
<var class="function">comp</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>return</dt>
<dd><em>int</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Compare two numbers
 -------------------
  $op1 &gt;  $op2 :  1
  $op1 == $op2 :  0
  $op1 &lt;  $op2 : -1
 -------------------
</pre>
</div></div><pre id="source-0139"> <var class="keywords">function</var> comp(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>, <var class="vars">$op2</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$op2</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op2</var>, <var class="vars">$scale</var>);
     <var class="vars">$result</var> = <var class="funcs">bccomp</var>(<var class="vars">$op1</var>, <var class="vars">$op2</var>, <var class="vars">$scale</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$op1</var> = <var class="vars">$op1</var> - 0;
     <var class="vars">$op2</var> = <var class="vars">$op2</var> - 0;
     <var class="keywords">if</var> (<var class="vars">$op1</var> &gt; <var class="vars">$op2</var>) {
       <var class="vars">$result</var> = 1;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$op1</var> &lt; <var class="vars">$op2</var>) {
       <var class="vars">$result</var> = -1;
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = 0;
     }
   }
   <var class="vars">$result</var> = (<var class="keywords">int</var>)<var class="vars">$result</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0140"><h2>
<a name="p_function_sign_140">
<var class="function">sign</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>return</dt>
<dd><em>int</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the sign of number
 ----------------
  $op1 &gt;  0 :  1
  $op1 == 0 :  0
  $op1 &lt;  0 : -1
 ----------------
</pre>
</div></div><pre id="source-0140"> <var class="keywords">function</var> sign(<var class="vars">$op1</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>);
   <var class="keywords">if</var> (<var class="vars">$op1</var> &gt; 0) {
     <var class="vars">$result</var> = 1;
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$op1</var> &lt; 0) {
     <var class="vars">$result</var> = -1;
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = 0;
   }
   <var class="vars">$result</var> = (<var class="keywords">int</var>)<var class="vars">$result</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0141"><h2>
<a name="p_function_sqrt_141">
<var class="function">sqrt</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the square root of number
</pre>
</div></div><pre id="source-0141"> <var class="keywords">function</var> <var class="funcs">sqrt</var>(<var class="vars">$op1</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>) {
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$result</var> = <var class="funcs">bcsqrt</var>(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="funcs">sqrt</var>(<var class="vars">$op1</var> - 0);
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>, <var class="vars">$scale</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0142"><h2>
<a name="p_function_abs_142">
<var class="function">abs</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the absolute value of number
</pre>
</div></div><pre id="source-0142"> <var class="keywords">function</var> <var class="funcs">abs</var>(<var class="vars">$op1</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$result</var> = <var class="funcs">ltrim</var>(<var class="vars">$op1</var>, <var class="strings">'+-'</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="funcs">abs</var>(<var class="vars">$op1</var> - 0);
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>, <var class="vars">$scale</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0143"><h2>
<a name="p_function_round_143">
<var class="function">round</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Rounds a float
</pre>
</div></div><pre id="source-0143"> <var class="keywords">function</var> <var class="funcs">round</var>(<var class="vars">$op1</var>, <var class="vars">$precision</var> = 0){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$precision</var> = (<var class="keywords">int</var>)<var class="vars">$precision</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$op1</var>);
     <var class="vars">$op1</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$op1</var>, <var class="vars">$scale</var>);
     <var class="vars">$pad</var> = <var class="strings">'0'</var>;
     <var class="vars">$abs</var> = <var class="vars">$this</var>-&gt;<var class="funcs">abs</var>(<var class="vars">$precision</var>);
     <var class="keywords">if</var> (<var class="vars">$abs</var> &gt; 0) {
       <var class="vars">$pad</var> = <var class="funcs">str_repeat</var>(<var class="vars">$pad</var>, <var class="vars">$abs</var>);
     }
     <var class="keywords">if</var> (<var class="vars">$precision</var> &lt; 0) {
       <var class="vars">$result</var> = <var class="funcs">round</var>(<var class="vars">$op1</var>, <var class="vars">$precision</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$precision</var> &gt; 0) {
         <var class="vars">$round</var> = <var class="funcs">sprintf</var>(<var class="strings">'0.%s5'</var>, <var class="vars">$pad</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$round</var> = <var class="strings">'0.5'</var>;
       }
       <var class="vars">$number</var> = <var class="funcs">bcadd</var>(<var class="vars">$op1</var>, <var class="vars">$round</var>, <var class="funcs">bcadd</var>(<var class="vars">$precision</var>, 1));
       <var class="vars">$result</var> = <var class="funcs">bcdiv</var>(<var class="vars">$number</var>, <var class="strings">'1.0'</var>, <var class="vars">$precision</var>);
     }
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="funcs">round</var>(<var class="vars">$op1</var> - 0, <var class="vars">$precision</var>);
     <var class="vars">$precision</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$result</var>);
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>, <var class="vars">$precision</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0144"><h2>
<a name="p_function_rand_144">
<var class="function">rand</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Generates random numbers
</pre>
</div></div><pre id="source-0144"> <var class="keywords">function</var> <var class="funcs">rand</var>(<var class="vars">$min</var> = <var class="keywords">null</var>, <var class="vars">$max</var> = <var class="keywords">null</var>, <var class="vars">$scale</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$scale</var> === <var class="keywords">null</var>) {
     <var class="vars">$scale</var> = <var class="vars">$this</var>-&gt;getScale(<var class="vars">$min</var>, <var class="vars">$max</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$min</var> &gt; <var class="vars">$max</var>) {
     <var class="vars">$tmp</var> = <var class="vars">$max</var>;
     <var class="vars">$max</var> = <var class="vars">$min</var>;
     <var class="vars">$min</var> = <var class="vars">$tmp</var>;
     <var class="keywords">unset</var>(<var class="vars">$tmp</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$min</var> == <var class="vars">$max</var>) {
     <var class="vars">$result</var> = <var class="vars">$min</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$randmax</var> = <var class="funcs">mt_getrandmax</var>();
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasbc) {
       <var class="keywords">if</var> (!<var class="vars">$max</var>) {
         <var class="vars">$max</var> = <var class="vars">$randmax</var>;
         <var class="vars">$min</var> = 0;
       }
       <var class="vars">$result</var> = <var class="funcs">bcadd</var>(
                   <var class="funcs">bcmul</var>(
                     <var class="funcs">bcdiv</var>(
                       <var class="funcs">mt_rand</var>(0, <var class="vars">$randmax</var>),
                       <var class="vars">$randmax</var>,
                       <var class="funcs">strlen</var>(<var class="vars">$max</var>)
                     ),
                     <var class="funcs">bcsub</var>(
                       <var class="funcs">bcadd</var>(
                         <var class="vars">$max</var>,
                         1
                       ),
                       <var class="vars">$min</var>
                     )
                   ),
                   <var class="vars">$min</var>
       );
       <var class="keywords">if</var> (<var class="vars">$scale</var> &gt; 0) {
         <var class="vars">$result</var> .= <var class="strings">'.'</var> . <var class="vars">$this</var>-&gt;<var class="funcs">rand</var>(0, <var class="funcs">str_repeat</var>(<var class="strings">'9'</var>, <var class="vars">$scale</var>));
       }
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (!<var class="vars">$max</var>) {
         <var class="vars">$max</var> = <var class="vars">$randmax</var>;
         <var class="vars">$min</var> = 0;
       }
       <var class="vars">$result</var> = <var class="funcs">mt_rand</var>(<var class="vars">$min</var> - 0, <var class="vars">$max</var> - 0);
     }
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;format(<var class="vars">$result</var>, <var class="vars">$scale</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0145"><h2>
<a name="p_class_posql_charset_145">
<var class="class">Posql_Charset</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class is a library to handle the character-code
 If the mbstring library is available, most functions will use it
 Or, when the iconv library is available, it will be used
 When it is both invalid, it distinguishes by PHP
 (In this case, the execution speed might be slow)
 The index keys and the encoding-list which can be handled in this class
 +----+---------------------
 | No.| Encoding
 +----+---------------------
 |  0 | ASCII
 |  1 | EUC-JP
 |  2 | SJIS
 |  3 | JIS (ISO-2022-JP)
 |  4 | ISO-8859-1
 |  5 | UTF-8
 |  6 | UTF-16
 |  7 | UTF-16BE
 |  8 | UTF-16LE
 |  9 | UTF-32
 | 10 | BIG5
 | 11 | EUC-CN (GB2312)
 | 12 | EUC-KR (KS-X-1001)
 | 13 | BINARY
 +----+----------------------
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Charset</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0146"><h2>
<a name="p_var_hasmbstring_146">
<var class="var">hasMBString</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   maintains mbstring library can be use</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0147"><h2>
<a name="p_var_hasiconv_147">
<var class="var">hasIConv</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   maintains iconv library can be use</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0148"><h2>
<a name="p_var_haserror_148">
<var class="var">hasError</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   temporary variable for the error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0149"><h2>
<a name="p_var_isphp5_149">
<var class="var">isPHP5</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   whether PHP VERSION is over 5 or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0150"><h2>
<a name="p_var_charset_150">
<var class="var">charset</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>    maintains reference to the Posql&#039;s property charset</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0151"><h2>
<a name="p_function_posql_charset_151">
<var class="function">Posql_Charset</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0151"> <var class="keywords">function</var> Posql_Charset(){
   <var class="vars">$this</var>-&gt;hasMBString = <var class="funcs">extension_loaded</var>(<var class="strings">'mbstring'</var>)
                     &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_detect_encoding'</var>);
   <var class="vars">$this</var>-&gt;hasIConv    = <var class="funcs">extension_loaded</var>(<var class="strings">'iconv'</var>);
   <var class="vars">$this</var>-&gt;isPHP5      = <var class="funcs">version_compare</var>(PHP_VERSION, 5, <var class="strings">'&gt;='</var>);
   <var class="vars">$this</var>-&gt;hasError    = <var class="keywords">false</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0152"><h2>
<a name="p_function___destruct_152">
<var class="function">__destruct</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://bugs.php.net/bug.php?id=33595" target="_blank" title="open in blanks window">http://bugs.php.net/bug.php?id=33595</a></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Destructor for PHP Version 5+
 Release the reference.
 Note:
  There is a leakage in the memory management of PHP.
  Bug #33595 recursive references leak memory
 Assumes access as &quot;public&quot; for all __destruct() functions,
  if you care about the zend memory table.
</pre>
</div></div><pre id="source-0152"> <var class="keywords">function</var> <var class="keywords">__destruct</var>(){
   <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;charset);
   <var class="keywords">foreach</var> (<var class="funcs">get_object_vars</var>(<var class="vars">$this</var>) <var class="keywords">as</var> <var class="vars">$prop</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">if</var> (<var class="vars">$prop</var> != <var class="keywords">null</var>) {
       <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;{<var class="vars">$prop</var>});
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0153"><h2>
<a name="p_function__referproperty_153">
<var class="function">_referProperty</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>object</em>  give of the Posql self</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Reference to the Posql, and its properties
</pre>
</div></div><pre id="source-0153"> <var class="keywords">function</var> _referProperty(&amp;<var class="vars">$posql</var>){
   <var class="vars">$this</var>-&gt;charset = &amp; <var class="vars">$posql</var>-&gt;charset;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0154"><h2>
<a name="p_function_getencodingindex_154">
<var class="function">getEncodingIndex</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the encoding name</dd>
<dt>return</dt>
<dd><em>number</em>   the key index number of encoding-list</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Mapping from the character-code name to
  the key index number of the encoding-list which can be used
 Given the argument as &quot;AUTO&quot;, it will be detected automatically
</pre>
</div></div><pre id="source-0154"> <var class="keywords">function</var> getEncodingIndex(<var class="vars">$encoding</var> = <var class="strings">'auto'</var>){
   <var class="keywords">static</var> <var class="vars">$marks</var> = <var class="keywords">array</var>(<var class="strings">'-'</var>, <var class="strings">'_'</var>, <var class="strings">'.'</var>, <var class="strings">':'</var>);
   <var class="vars">$result</var> = -1;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$encoding</var>)) {
     <var class="keywords">foreach</var> (<var class="vars">$marks</var> <var class="keywords">as</var> <var class="vars">$mark</var>) {
       <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$encoding</var>, <var class="vars">$mark</var>) !== <var class="keywords">false</var>) {
         <var class="vars">$split</var> = <var class="funcs">explode</var>(<var class="vars">$mark</var>, <var class="vars">$encoding</var>);
         <var class="vars">$encoding</var> = <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$split</var>);
       }
     }
     <var class="keywords">switch</var> (<var class="funcs">strtoupper</var>(<var class="funcs">trim</var>(<var class="vars">$encoding</var>))) {
       <var class="keywords">case</var> <var class="strings">'ANSIX341968'</var>:
       <var class="keywords">case</var> <var class="strings">'ANSIX341986'</var>:
       <var class="keywords">case</var> <var class="strings">'ASCII'</var>:
       <var class="keywords">case</var> <var class="strings">'CP367'</var>:
       <var class="keywords">case</var> <var class="strings">'CSASCII'</var>:
       <var class="keywords">case</var> <var class="strings">'IBM367'</var>:
       <var class="keywords">case</var> <var class="strings">'ISO646IRV1991'</var>:
       <var class="keywords">case</var> <var class="strings">'ISOIR6'</var>:
       <var class="keywords">case</var> <var class="strings">'ISO646'</var>:
       <var class="keywords">case</var> <var class="strings">'ISO646US'</var>:
       <var class="keywords">case</var> <var class="strings">'US'</var>:
       <var class="keywords">case</var> <var class="strings">'USASCII'</var>:
           <var class="vars">$result</var> = 0;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'EUC'</var>:
       <var class="keywords">case</var> <var class="strings">'EUCJP'</var>:
       <var class="keywords">case</var> <var class="strings">'EUCJPWIN'</var>:
       <var class="keywords">case</var> <var class="strings">'EUCJPMS'</var>:
       <var class="keywords">case</var> <var class="strings">'EUCJPOPEN'</var>:
       <var class="keywords">case</var> <var class="strings">'XEUCJP'</var>:
           <var class="vars">$result</var> = 1;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'CP932'</var>:
       <var class="keywords">case</var> <var class="strings">'MSKANJI'</var>:
       <var class="keywords">case</var> <var class="strings">'SJIS'</var>:
       <var class="keywords">case</var> <var class="strings">'SJISWIN'</var>:
       <var class="keywords">case</var> <var class="strings">'SJISOPEN'</var>:
       <var class="keywords">case</var> <var class="strings">'SHIFTJIS'</var>:
       <var class="keywords">case</var> <var class="strings">'WINDOWS31J'</var>:
       <var class="keywords">case</var> <var class="strings">'XSJIS'</var>:
           <var class="vars">$result</var> = 2;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'ISO2022JP'</var>:
       <var class="keywords">case</var> <var class="strings">'ISO2022JPMS'</var>:
       <var class="keywords">case</var> <var class="strings">'JIS'</var>:
           <var class="vars">$result</var> = 3;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'CP819'</var>:
       <var class="keywords">case</var> <var class="strings">'CSISOLATIN1'</var>:
       <var class="keywords">case</var> <var class="strings">'IBM819'</var>:
       <var class="keywords">case</var> <var class="strings">'ISO885911987'</var>:
       <var class="keywords">case</var> <var class="strings">'ISO88591'</var>:
       <var class="keywords">case</var> <var class="strings">'ISOIR100'</var>:
       <var class="keywords">case</var> <var class="strings">'L1'</var>:
       <var class="keywords">case</var> <var class="strings">'LATIN1'</var>:
           <var class="vars">$result</var> = 4;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'UTF8'</var>:
           <var class="vars">$result</var> = 5;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'UTF16'</var>:
           <var class="vars">$result</var> = 6;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'UTF16BE'</var>:
           <var class="vars">$result</var> = 7;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'UTF16LE'</var>:
           <var class="vars">$result</var> = 8;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'UTF32'</var>:
           <var class="vars">$result</var> = 9;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'CNBIG5'</var>:
       <var class="keywords">case</var> <var class="strings">'CP950'</var>:
       <var class="keywords">case</var> <var class="strings">'BIG5'</var>:
       <var class="keywords">case</var> <var class="strings">'BIGFIVE'</var>:
           <var class="vars">$result</var> = 10;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'CNGB'</var>:
       <var class="keywords">case</var> <var class="strings">'EUCCN'</var>:
       <var class="keywords">case</var> <var class="strings">'GB'</var>:
       <var class="keywords">case</var> <var class="strings">'GB2312'</var>:
       <var class="keywords">case</var> <var class="strings">'XEUCCN'</var>:
           <var class="vars">$result</var> = 11;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'EUCKR'</var>:
       <var class="keywords">case</var> <var class="strings">'KSX1001'</var>:
       <var class="keywords">case</var> <var class="strings">'KSC5601'</var>:
       <var class="keywords">case</var> <var class="strings">'XEUCKR'</var>:
           <var class="vars">$result</var> = 12;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'BIN'</var>:
       <var class="keywords">case</var> <var class="strings">'BINARY'</var>:
           <var class="vars">$result</var> = 13;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'AUTO'</var>:
       <var class="keywords">default</var>:
           <var class="vars">$result</var> = -1;
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0155"><h2>
<a name="p_function_getencodingname_155">
<var class="function">getEncodingName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>   the key index number of encoding</dd>
<dt>param</dt>
<dd><em>string</em>   the type of results</dd>
<dt>param</dt>
<dd><em>string</em>   optionally, the supplement encoding name</dd>
<dt>return</dt>
<dd><em>string</em>   the encoding name</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Mapping from the key index number of the encoding-list
  to the character-code name which can be used
 When the index key is over the range,
  and the second argument is given, it will be used
</pre>
</div></div><pre id="source-0155"> <var class="keywords">function</var> getEncodingName(<var class="vars">$index</var>, <var class="vars">$type</var> = <var class="keywords">null</var>, <var class="vars">$sub_encoding</var> = <var class="keywords">null</var>){
   <var class="keywords">if</var> (<var class="vars">$type</var> == <var class="keywords">null</var>) {
     <var class="vars">$type</var> = <var class="strings">'encoding'</var>;
   }
   <var class="vars">$default</var> = (<var class="keywords">string</var>)<var class="vars">$index</var>;
   <var class="vars">$sub</var> = (<var class="keywords">string</var>)<var class="vars">$sub_encoding</var>;
   <var class="keywords">if</var> (<var class="vars">$sub</var> != <var class="keywords">null</var>) {
     <var class="vars">$sub</var> = <var class="funcs">trim</var>(<var class="vars">$sub</var>);
   }
   <var class="vars">$result</var> = <var class="keywords">array</var>(
     <var class="strings">'encoding'</var> =&gt; <var class="vars">$sub</var>,
     <var class="strings">'method'</var>   =&gt; <var class="vars">$sub</var>,
     <var class="strings">'iconv'</var>    =&gt; <var class="vars">$sub</var>,
     <var class="strings">'mbstring'</var> =&gt; <var class="vars">$sub</var>
   );
   <var class="vars">$encoding</var> = &amp; <var class="vars">$result</var>[<var class="strings">'encoding'</var>];
   <var class="vars">$method</var>   = &amp; <var class="vars">$result</var>[<var class="strings">'method'</var>];
   <var class="vars">$iconv</var>    = &amp; <var class="vars">$result</var>[<var class="strings">'iconv'</var>];
   <var class="vars">$mbstring</var> = &amp; <var class="vars">$result</var>[<var class="strings">'mbstring'</var>];
   <var class="vars">$enc_index</var> = <var class="vars">$index</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$index</var>)) {
     <var class="vars">$enc_index</var> = <var class="vars">$this</var>-&gt;getEncodingIndex(<var class="vars">$index</var>);
   }
   <var class="keywords">switch</var> ((<var class="keywords">int</var>)<var class="vars">$enc_index</var>) {
     <var class="keywords">case</var> 0:
         <var class="vars">$encoding</var> = <var class="strings">'ASCII'</var>;
         <var class="vars">$method</var>   = <var class="strings">'ASCII'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'ASCII'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'ASCII'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 1:
         <var class="vars">$encoding</var> = <var class="strings">'EUC-JP'</var>;
         <var class="vars">$method</var>   = <var class="strings">'EUCJP'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'EUC-JP'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'eucJP-win'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 2:
         <var class="vars">$encoding</var> = <var class="strings">'SJIS'</var>;
         <var class="vars">$method</var>   = <var class="strings">'SJIS'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'CP932'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'SJIS-win'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 3:
         <var class="vars">$encoding</var> = <var class="strings">'JIS'</var>;
         <var class="vars">$method</var>   = <var class="strings">'JIS'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'ISO-2022-JP'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'JIS'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 4:
         <var class="vars">$encoding</var> = <var class="strings">'ISO-8859-1'</var>;
         <var class="vars">$method</var>   = <var class="strings">'LATIN1'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'ISO-8859-1'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'ISO-8859-1'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 5:
         <var class="vars">$encoding</var> = <var class="strings">'UTF-8'</var>;
         <var class="vars">$method</var>   = <var class="strings">'UTF8'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'UTF-8'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'UTF-8'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 6:
         <var class="vars">$encoding</var> = <var class="strings">'UTF-16'</var>;
         <var class="vars">$method</var>   = <var class="strings">'UTF16'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'UTF-16'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'UTF-16'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 7:
         <var class="vars">$encoding</var> = <var class="strings">'UTF-16BE'</var>;
         <var class="vars">$method</var>   = <var class="strings">'UTF16BE'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'UTF-16BE'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'UTF-16BE'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 8:
         <var class="vars">$encoding</var> = <var class="strings">'UTF-16LE'</var>;
         <var class="vars">$method</var>   = <var class="strings">'UTF16LE'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'UTF-16LE'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'UTF-16LE'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 9:
         <var class="vars">$encoding</var> = <var class="strings">'UTF-32'</var>;
         <var class="vars">$method</var>   = <var class="strings">'UTF32'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'UTF-32'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'UTF-32'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 10:
         <var class="vars">$encoding</var> = <var class="strings">'BIG5'</var>;
         <var class="vars">$method</var>   = <var class="strings">'BIG5'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'BIG5'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'BIG-5'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 11:
         <var class="vars">$encoding</var> = <var class="strings">'EUC-CN'</var>;
         <var class="vars">$method</var>   = <var class="strings">'GB'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'EUC-CN'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'EUC-CN'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 12:
         <var class="vars">$encoding</var> = <var class="strings">'EUC-KR'</var>;
         <var class="vars">$method</var>   = <var class="strings">'EUCKR'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'EUC-KR'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'EUC-KR'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 13:
         <var class="vars">$encoding</var> = <var class="strings">'Binary'</var>;
         <var class="vars">$method</var>   = <var class="strings">'Binary'</var>;
         <var class="vars">$iconv</var>    = <var class="strings">'Binary'</var>;
         <var class="vars">$mbstring</var> = <var class="strings">'Binary'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$encoding</var> = <var class="vars">$default</var>;
         <var class="vars">$method</var>   = <var class="vars">$default</var>;
         <var class="vars">$iconv</var>    = <var class="vars">$default</var>;
         <var class="vars">$mbstring</var> = <var class="vars">$default</var>;
         <var class="keywords">break</var>;
   }
   <var class="keywords">unset</var>(<var class="vars">$encoding</var>, <var class="vars">$method</var>, <var class="vars">$iconv</var>, <var class="vars">$mbstring</var>);
   <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$type</var>, <var class="vars">$result</var>)) {
     <var class="vars">$result</var> = <var class="vars">$result</var>[<var class="vars">$type</var>];
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0156"><h2>
<a name="p_function_getautodetectorder_156">
<var class="function">getAutoDetectOrder</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>array</em>   the orders of encoding-list</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Returns the order of encoding
  when the encoding detection was given as &quot;AUTO&quot;
</pre>
</div></div><pre id="source-0156"> <var class="keywords">function</var> getAutoDetectOrder(){
   <var class="keywords">static</var> <var class="vars">$orders</var> = <var class="keywords">array</var>(
     <var class="strings">'method'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'UTF32'</var>,
       <var class="strings">'UTF16'</var>,
       <var class="strings">'BINARY'</var>,
       <var class="strings">'ASCII'</var>,
       <var class="strings">'JIS'</var>,
       <var class="strings">'UTF-8'</var>,
       <var class="strings">'EUC-JP'</var>,
       <var class="strings">'SJIS'</var>,
       <var class="strings">'BIG5'</var>,
       <var class="strings">'EUC-KR'</var>,
       <var class="strings">'EUC-CN'</var>
     ),
     <var class="strings">'iconv'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'UTF-32'</var>,
       <var class="strings">'UTF-16'</var>,
       <var class="strings">'ASCII'</var>,
       <var class="strings">'JIS'</var>,
       <var class="strings">'UTF-8'</var>,
       <var class="strings">'EUC-JP'</var>,
       <var class="strings">'SJIS'</var>,
       <var class="strings">'BIG5'</var>,
       <var class="strings">'EUC-KR'</var>,
       <var class="strings">'EUC-CN'</var>,
       <var class="strings">'BINARY'</var>
     ),
     <var class="strings">'mbstring'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'UTF-32'</var>,
       <var class="strings">'UTF-16'</var>,
       <var class="strings">'ASCII'</var>,
       <var class="strings">'JIS'</var>,
       <var class="strings">'UTF-8'</var>,
       <var class="strings">'eucJP-win'</var>,
       <var class="strings">'SJIS-win'</var>,
       <var class="strings">'BIG-5'</var>,
       <var class="strings">'EUC-KR'</var>,
       <var class="strings">'EUC-CN'</var>,
       <var class="strings">'BINARY'</var>
     )
   );
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
     <var class="vars">$result</var> = <var class="vars">$orders</var>[<var class="strings">'mbstring'</var>];
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasIConv) {
     <var class="vars">$result</var> = <var class="vars">$orders</var>[<var class="strings">'iconv'</var>];
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="vars">$orders</var>[<var class="strings">'method'</var>];
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0157"><h2>
<a name="p_function_convert_157">
<var class="function">convert</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the string being converted</dd>
<dt>param</dt>
<dd><em>string</em>   the type of encoding that to be converted to</dd>
<dt>param</dt>
<dd><em>string</em>   the character code names before conversion</dd>
<dt>return</dt>
<dd><em>string</em>   the encoded string, or FALSE on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Convert character encoding
 Given the third argument as &quot;AUTO&quot;, it will be converted automatically
 The encoding-list of third argument order will be specified by array
  or comma separated list string
 If the mbstring library is available, it will be used for conversion
 Or, if the iconv library is available, it will be used for conversion
</pre>
</div></div><pre id="source-0157"> <var class="keywords">function</var> convert(<var class="vars">$string</var>, <var class="vars">$to</var> = <var class="strings">'UTF-8'</var>, <var class="vars">$from</var> = <var class="strings">'auto'</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$to</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$to</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>) <var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$to</var>, <var class="strings">'//'</var>) !== <var class="keywords">false</var>) {
       <var class="vars">$split</var> = <var class="funcs">explode</var>(<var class="strings">'//'</var>, <var class="vars">$to</var>);
       <var class="vars">$to</var> = <var class="funcs">array_shift</var>(<var class="vars">$split</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$from</var>)
      || (<var class="funcs">is_string</var>(<var class="vars">$from</var>) &amp;&amp; <var class="funcs">strcasecmp</var>(<var class="vars">$from</var>, <var class="strings">'auto'</var>) === 0)) {
       <var class="vars">$detect</var> = <var class="vars">$this</var>-&gt;detectEncoding(<var class="vars">$string</var>, <var class="vars">$from</var>);
       <var class="keywords">if</var> (<var class="vars">$detect</var> !== <var class="keywords">false</var>) {
         <var class="vars">$from</var> = <var class="vars">$detect</var>;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
       <var class="vars">$to</var> = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$to</var>, <var class="strings">'mbstring'</var>, <var class="vars">$to</var>);
       <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$from</var>, <var class="strings">'mbstring'</var>, <var class="vars">$from</var>);
       <var class="vars">$result</var> = <var class="funcs">mb_convert_encoding</var>(<var class="vars">$string</var>, <var class="vars">$to</var>, <var class="vars">$from</var>);
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasIConv) {
       <var class="vars">$to</var>  = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$to</var>, <var class="strings">'iconv'</var>, <var class="vars">$to</var>);
       <var class="vars">$to</var> .= <var class="strings">'//TRANSLIT//IGNORE'</var>;
       <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$from</var>, <var class="strings">'iconv'</var>, <var class="vars">$from</var>);
       <var class="vars">$result</var> = @<var class="funcs">iconv</var>(<var class="vars">$from</var>, <var class="vars">$to</var>, <var class="vars">$string</var>);
     }
     <var class="keywords">if</var> (!<var class="vars">$result</var>) {
       <var class="vars">$to</var> = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$to</var>, <var class="keywords">null</var>, <var class="vars">$to</var>);
       <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$from</var>, <var class="keywords">null</var>, <var class="vars">$from</var>);
       <var class="keywords">if</var> (<var class="funcs">strcasecmp</var>(<var class="vars">$to</var>, <var class="vars">$from</var>) === 0) {
         <var class="vars">$result</var> = <var class="vars">$string</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0158"><h2>
<a name="p_function_detectencoding_158">
<var class="function">detectEncoding</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the string being detected</dd>
<dt>param</dt>
<dd><em>mixed</em>    the encoding-list of character encoding</dd>
<dt>return</dt>
<dd><em>string</em>   the detected character encoding</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Detects character encoding
 Given the first argument as &quot;AUTO&quot;, it will be detected automatically
 the encoding-list of second argument order will be specified by array
  or comma separated list string
 If the Iconv library is effective, it will be used for detection
 If it is invalid, it will be detected by this class methods
</pre>
</div></div><pre id="source-0158"> <var class="keywords">function</var> detectEncoding(<var class="vars">$string</var>, <var class="vars">$encodings</var> = <var class="strings">'auto'</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$encodings</var>)) {
     <var class="vars">$encodings</var> = <var class="funcs">strtoupper</var>(<var class="funcs">trim</var>(<var class="vars">$encodings</var>));
     <var class="keywords">if</var> (<var class="vars">$encodings</var> === <var class="strings">'AUTO'</var>) {
       <var class="vars">$encodings</var> = <var class="vars">$this</var>-&gt;getAutoDetectOrder();
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$encodings</var>, <var class="strings">','</var>) !== <var class="keywords">false</var>) {
       <var class="vars">$encodings</var> = <var class="funcs">preg_split</var>(<var class="strings">'{\s*,\s*}'</var>, <var class="vars">$encodings</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$encodings</var> = <var class="funcs">trim</var>(<var class="vars">$encodings</var>);
     }
   }
   <var class="keywords">foreach</var> ((<var class="keywords">array</var>)<var class="vars">$encodings</var> <var class="keywords">as</var> <var class="vars">$encode</var>) {
     <var class="keywords">if</var> (<var class="vars">$encode</var> == <var class="keywords">null</var>) {
       <var class="keywords">continue</var>;
     }
     <var class="vars">$valid</var> = <var class="keywords">false</var>;
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;detectByMBString(<var class="vars">$encode</var>, <var class="vars">$string</var>)) {
         <var class="vars">$valid</var> = <var class="keywords">true</var>;
       }
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasIConv) {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;detectByIConv(<var class="vars">$encode</var>, <var class="vars">$string</var>)) {
         <var class="vars">$valid</var> = <var class="keywords">true</var>;
       }
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;detectByMethod(<var class="vars">$encode</var>, <var class="vars">$string</var>)) {
         <var class="vars">$valid</var> = <var class="keywords">true</var>;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$valid</var>) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$encode</var>);
       <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0159"><h2>
<a name="p_function_detectbymethod_159">
<var class="function">detectByMethod</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the encoding name, or the method name</dd>
<dt>param</dt>
<dd><em>string</em>  the string of target</dd>
<dt>return</dt>
<dd><em>boolean</em> the encoding was proper or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Calls the encoding detection function in this class
</pre>
</div></div><pre id="source-0159"> <var class="keywords">function</var> detectByMethod(<var class="vars">$encoding</var>, <var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$method</var> = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$encoding</var>, <var class="strings">'method'</var>, <var class="strings">'String'</var>);
   <var class="vars">$method</var> = <var class="funcs">sprintf</var>(<var class="strings">'is%s'</var>, <var class="vars">$method</var>);
   <var class="vars">$func</var> = <var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="vars">$method</var>);
   <var class="keywords">if</var> (<var class="funcs">is_callable</var>(<var class="vars">$func</var>)) {
     <var class="vars">$result</var> = <var class="funcs">call_user_func</var>(<var class="vars">$func</var>, <var class="vars">$string</var>);
   }
   <var class="keywords">unset</var>(<var class="vars">$func</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0160"><h2>
<a name="p_function_detectbymbstring_160">
<var class="function">detectByMBString</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the encoding name</dd>
<dt>param</dt>
<dd><em>string</em>  the string of target</dd>
<dt>return</dt>
<dd><em>boolean</em> the encoding was proper or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Detects the encoding to using the mbstring library
</pre>
</div></div><pre id="source-0160"> <var class="keywords">function</var> detectByMBString(<var class="vars">$encoding</var>, <var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$charset</var> = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$encoding</var>, <var class="strings">'mbstring'</var>);
   <var class="keywords">if</var> (0 !== <var class="funcs">strcasecmp</var>(<var class="vars">$charset</var>, <var class="strings">'BINARY'</var>)) {
     <var class="keywords">if</var> (<var class="vars">$charset</var> == <var class="keywords">null</var> &amp;&amp; <var class="vars">$encoding</var> != <var class="keywords">null</var>) {
       <var class="vars">$detect</var> = @<var class="funcs">mb_detect_encoding</var>(<var class="vars">$string</var>, <var class="vars">$encoding</var>, <var class="keywords">true</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$detect</var> = <var class="funcs">mb_detect_encoding</var>(<var class="vars">$string</var>, <var class="vars">$charset</var>, <var class="keywords">true</var>);
     }
     <var class="vars">$result</var> = <var class="funcs">is_string</var>(<var class="vars">$detect</var>) &amp;&amp; <var class="funcs">strlen</var>(<var class="vars">$detect</var>);
   }
   <var class="keywords">if</var> (!<var class="vars">$result</var>) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;detectEncodingHelper(<var class="vars">$charset</var>, <var class="vars">$string</var>, <var class="keywords">false</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0161"><h2>
<a name="p_function_detectbyiconv_161">
<var class="function">detectByIConv</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the encoding name</dd>
<dt>param</dt>
<dd><em>string</em>  the string of target</dd>
<dt>return</dt>
<dd><em>boolean</em> the encoding was proper or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Detects the encoding to using the iconv library
</pre>
</div></div><pre id="source-0161"> <var class="keywords">function</var> detectByIConv(<var class="vars">$encoding</var>, <var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$charset</var> = <var class="vars">$this</var>-&gt;getEncodingName(<var class="vars">$encoding</var>, <var class="strings">'iconv'</var>);
   <var class="keywords">if</var> (<var class="vars">$charset</var> == <var class="keywords">null</var>) {
     <var class="vars">$charset</var> = <var class="vars">$encoding</var>;
   }
   <var class="keywords">if</var> (<var class="vars">$charset</var> != <var class="keywords">null</var>) {
     <var class="vars">$this</var>-&gt;hasError = <var class="keywords">false</var>;
     <var class="keywords">if</var> (0 !== <var class="funcs">strcasecmp</var>(<var class="vars">$charset</var>, <var class="strings">'BINARY'</var>)) {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isPHP5) {
         <var class="funcs">set_error_handler</var>(<var class="keywords">array</var>(<var class="vars">$this</var>, <var class="strings">'iconvErrorHandler'</var>), E_ALL);
       } <var class="keywords">else</var> {
         <var class="funcs">set_error_handler</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'iconvErrorHandler'</var>));
       }
       <var class="funcs">iconv</var>(<var class="vars">$charset</var>, <var class="strings">'UTF-16'</var>, <var class="vars">$string</var>); <var class="comments">// maybe UTF-16 is proper</var>
       <var class="funcs">restore_error_handler</var>();
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;detectEncodingHelper(<var class="vars">$charset</var>, <var class="vars">$string</var>, <var class="keywords">true</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0162"><h2>
<a name="p_function_detectencodinghelper_162">
<var class="function">detectEncodingHelper</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> A helper function to detect encoding as strict
</pre>
</div></div><pre id="source-0162"> <var class="keywords">function</var> detectEncodingHelper(<var class="vars">$charset</var>, <var class="vars">$string</var>, <var class="vars">$default</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">switch</var> (<var class="funcs">strtoupper</var>(<var class="vars">$charset</var>)) {
     <var class="keywords">case</var> <var class="strings">'ASCII'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isASCII(<var class="vars">$string</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'JIS'</var>:
     <var class="keywords">case</var> <var class="strings">'ISO-2022-JP'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isJIS(<var class="vars">$string</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'UTF-16'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isUTF16(<var class="vars">$string</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'UTF-16BE'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isUTF16BE(<var class="vars">$string</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'UTF-16LE'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isUTF16LE(<var class="vars">$string</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'UTF-32'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isUTF32(<var class="vars">$string</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'BINARY'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isBinary(<var class="vars">$string</var>);
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$result</var> = <var class="vars">$default</var>;
         <var class="keywords">break</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0163"><h2>
<a name="p_function_iconverrorhandler_163">
<var class="function">iconvErrorHandler</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> A handle to detect character-code by using iconv
</pre>
</div></div><pre id="source-0163"> <var class="keywords">function</var> iconvErrorHandler(<var class="vars">$no</var>, <var class="vars">$msg</var>, <var class="vars">$file</var>, <var class="vars">$line</var>){
   <var class="keywords">if</var> (<var class="vars">$no</var> === E_NOTICE) {
     <var class="vars">$this</var>-&gt;hasError = <var class="keywords">true</var>;
   }
   <var class="comments">//return true;</var>
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0164"><h2>
<a name="p_function_isstring_164">
<var class="function">isString</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> An insignificantly function</pre>
</div></div><pre id="source-0164"> <var class="keywords">function</var> isString(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>) || <var class="vars">$string</var> === <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0165"><h2>
<a name="p_function_isbinary_165">
<var class="function">isBinary</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Binary (exe, images, so, etc.)
 Note:
   This function is not considered for Unicode</pre>
</div></div><pre id="source-0165"> <var class="keywords">function</var> isBinary(<var class="vars">$string</var>){
   <var class="keywords">static</var> <var class="vars">$bin_chars</var> = <var class="keywords">array</var>(
     <var class="strings">&quot;\x00&quot;</var>, <var class="strings">&quot;\x01&quot;</var>, <var class="strings">&quot;\x02&quot;</var>, <var class="strings">&quot;\x03&quot;</var>, <var class="strings">&quot;\x04&quot;</var>,
     <var class="strings">&quot;\x05&quot;</var>, <var class="strings">&quot;\x06&quot;</var>, <var class="strings">&quot;\x07&quot;</var>, <var class="strings">&quot;\xFF&quot;</var>
   );
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="keywords">foreach</var> (<var class="vars">$bin_chars</var> <var class="keywords">as</var> <var class="vars">$char</var>) {
       <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="vars">$char</var>) !== <var class="keywords">false</var>) {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
         <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0166"><h2>
<a name="p_function_isascii_166">
<var class="function">isASCII</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> ASCII (ISO-646)</pre>
</div></div><pre id="source-0166"> <var class="keywords">function</var> isASCII(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">preg_match</var>(<var class="strings">'{[\x80-\xFF]}'</var>, <var class="vars">$string</var>)) {
     <var class="vars">$result</var> = <var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="strings">&quot;\x1B&quot;</var>) === <var class="keywords">false</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0167"><h2>
<a name="p_function_islatin1_167">
<var class="function">isLATIN1</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>link</dt>
<dd><a href="http://www.rfc-editor.org/rfc/rfc1554.txt" target="_blank" title="open in blanks window">http://www.rfc-editor.org/rfc/rfc1554.txt</a></dd>
<dt>link</dt>
<dd><a href="http://www.alanwood.net/demos/charsetdiffs.html" target="_blank" title="open in blanks window">http://www.alanwood.net/demos/charsetdiffs.html</a></dd>
</dl>
<pre class="desc"> Latin-1 (ISO/IEC 8859-1)
</pre>
</div></div><pre id="source-0167"> <var class="keywords">function</var> isLATIN1(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">true</var>;
   <var class="vars">$string</var> = <var class="funcs">array_values</var>((<var class="keywords">array</var>)<var class="funcs">unpack</var>(<var class="strings">'C*'</var>, <var class="vars">$string</var>));
   <var class="vars">$bytes</var> = &amp; <var class="vars">$string</var>;
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$bytes</var>);
   <var class="vars">$i</var> = 0;
   <var class="keywords">for</var> (; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; ++<var class="vars">$i</var>) {
     <var class="keywords">if</var> ((<var class="vars">$bytes</var>[<var class="vars">$i</var>] === 0x09 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] === 0x0A
      ||  <var class="vars">$bytes</var>[<var class="vars">$i</var>] === 0x0D || <var class="vars">$bytes</var>[<var class="vars">$i</var>] === 0x20)
      || (<var class="vars">$bytes</var>[<var class="vars">$i</var>]  &gt;  0x20 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>]  &lt;  0x7F)
      || (<var class="vars">$bytes</var>[<var class="vars">$i</var>]  &gt;  0xA0 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>]  &lt;  0xFF)) {
       <var class="keywords">continue</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">break</var>;
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$bytes</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0168"><h2>
<a name="p_function_isjis_168">
<var class="function">isJIS</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> ISO-2022-JP (JIS)</pre>
</div></div><pre id="source-0168"> <var class="keywords">function</var> isJIS(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">preg_match</var>(<var class="strings">'{[\x80-\xFF]}'</var>, <var class="vars">$string</var>)) {
     <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="strings">&quot;\x1B&quot;</var>);
     <var class="keywords">if</var> (<var class="vars">$pos</var> !== <var class="keywords">false</var>) {
       <var class="vars">$esc</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$pos</var> + 1, 2);
       <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$esc</var>) === 2) {
         <var class="vars">$esc1</var> = <var class="funcs">ord</var>(<var class="vars">$esc</var>);
         <var class="vars">$esc2</var> = <var class="funcs">ord</var>(<var class="funcs">substr</var>(<var class="vars">$esc</var>, 1));
         <var class="keywords">if</var> (<var class="vars">$esc1</var> === 0x24) {
           <var class="keywords">if</var> (<var class="vars">$esc2</var> === 0x28    <var class="comments">// JIS X 0208-1990</var>
            || <var class="vars">$esc2</var> === 0x40    <var class="comments">// JIS X 0208-1978</var>
            || <var class="vars">$esc2</var> === 0x42) { <var class="comments">// JIS X 0208-1983</var>
             <var class="vars">$result</var> = <var class="keywords">true</var>;
           }
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$esc1</var> === 0x26 <var class="comments">// JIS X 0208-1990</var>
                &amp;&amp;  <var class="vars">$esc2</var> === 0x40) {
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0169"><h2>
<a name="p_function_iseucjp_169">
<var class="function">isEUCJP</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> EUC-JP</pre>
</div></div><pre id="source-0169"> <var class="keywords">function</var> isEUCJP(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">true</var>;
   <var class="vars">$string</var> = <var class="funcs">array_values</var>((<var class="keywords">array</var>)<var class="funcs">unpack</var>(<var class="strings">'C*'</var>, <var class="vars">$string</var>));
   <var class="vars">$bytes</var> = &amp; <var class="vars">$string</var>;
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$bytes</var>);
   <var class="vars">$i</var> = 0;
   <var class="keywords">while</var> (<var class="vars">$i</var> &lt; <var class="vars">$length</var> &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>++] &gt; 0x80);
   <var class="keywords">for</var> (; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; ++<var class="vars">$i</var>) {
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x80) {
       <var class="keywords">continue</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x8E) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">break</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] === 0x8E) {
       <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
        || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0xA1 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xDF)) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       }
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt;= 0xA1 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt;= 0xFE) {
       <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
        || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0xA1 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xFE)) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       }
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">break</var>;
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$bytes</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0170"><h2>
<a name="p_function_issjis_170">
<var class="function">isSJIS</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Shift-JIS (SJIS)</pre>
</div></div><pre id="source-0170"> <var class="keywords">function</var> isSJIS(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">true</var>;
   <var class="vars">$string</var> = <var class="funcs">array_values</var>((<var class="keywords">array</var>)<var class="funcs">unpack</var>(<var class="strings">'C*'</var>, <var class="vars">$string</var>));
   <var class="vars">$bytes</var> = &amp; <var class="vars">$string</var>;
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$bytes</var>);
   <var class="vars">$i</var> = 0;
   <var class="keywords">while</var> (<var class="vars">$i</var> &lt; <var class="vars">$length</var> &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>++] &gt; 0x80);
   <var class="keywords">for</var> (; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; ++<var class="vars">$i</var>) {
     <var class="keywords">if</var> ((<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt;= 0x80)
      || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt;= 0xA1 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt;= 0xDF)) {
       <var class="keywords">continue</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] === 0xA0 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xEF) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">break</var>;
     }
     <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
      || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x40 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] === 0x7F || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xFC)) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">break</var>;
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$bytes</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0171"><h2>
<a name="p_function_isutf8_171">
<var class="function">isUTF8</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> UTF-8</pre>
</div></div><pre id="source-0171"> <var class="keywords">function</var> isUTF8(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">true</var>;
   <var class="vars">$string</var> = <var class="funcs">array_values</var>((<var class="keywords">array</var>)<var class="funcs">unpack</var>(<var class="strings">'C*'</var>, <var class="vars">$string</var>));
   <var class="vars">$bytes</var> = &amp; <var class="vars">$string</var>;
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$bytes</var>);
   <var class="vars">$bom</var> = <var class="funcs">array_slice</var>(<var class="vars">$bytes</var>, 0, 3);
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$bytes</var>[0], <var class="vars">$bytes</var>[1], <var class="vars">$bytes</var>[2])
    &amp;&amp; <var class="vars">$bytes</var>[0] === 0xEF &amp;&amp; <var class="vars">$bytes</var>[1] === 0xBB &amp;&amp; <var class="vars">$bytes</var>[2] === 0xBF) {
     <var class="vars">$result</var> = <var class="keywords">true</var>; <var class="comments">// BOM</var>
   } <var class="keywords">else</var> {
     <var class="vars">$i</var> = 0;
     <var class="keywords">while</var> (<var class="vars">$i</var> &lt; <var class="vars">$length</var> &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>++] &gt; 0x80);
     <var class="keywords">for</var> (; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; ++<var class="vars">$i</var>) {
       <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x80) {
         <var class="keywords">continue</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt;= 0xC0 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt;= 0xDF) {
         <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
          || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x80 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xEF)) {
           <var class="vars">$result</var> = <var class="keywords">false</var>;
           <var class="keywords">break</var>;
         }
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt;= 0xE0 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt;= 0xEF) {
         <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
          || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x80 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xBF)
          || !<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
          || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x80 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xBF)) {
           <var class="vars">$result</var> = <var class="keywords">false</var>;
           <var class="keywords">break</var>;
         }
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$bytes</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0172"><h2>
<a name="p_function_isutf16_172">
<var class="function">isUTF16</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>link</dt>
<dd><a href="http://www.ietf.org/rfc/rfc2781.txt" target="_blank" title="open in blanks window">http://www.ietf.org/rfc/rfc2781.txt</a></dd>
</dl>
<pre class="desc"> UTF-16 (LE or BE)
 RFC2781: UTF-16, an encoding of ISO 10646
 Must be labelled BOM
</pre>
</div></div><pre id="source-0172"> <var class="keywords">function</var> isUTF16(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$string</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var> &gt;= 2) {
     <var class="vars">$byte1</var> = <var class="funcs">ord</var>(<var class="vars">$string</var>);
     <var class="vars">$byte2</var> = <var class="funcs">ord</var>(<var class="funcs">substr</var>(<var class="vars">$string</var>, 1, 1));
     <var class="keywords">if</var> (<var class="vars">$byte1</var> === 0xFF <var class="comments">// BOM (little-endian)</var>
      &amp;&amp; <var class="vars">$byte2</var> === 0xFE) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$byte1</var> === 0xFE <var class="comments">// BOM (big-endian)</var>
            &amp;&amp;  <var class="vars">$byte2</var> === 0xFF) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$null</var> = <var class="funcs">chr</var>(0x00);
       <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="vars">$null</var>);
       <var class="keywords">if</var> (<var class="vars">$pos</var> === <var class="keywords">false</var>) {
         <var class="vars">$result</var> = <var class="keywords">false</var>; <var class="comments">// Non ASCII (omit)</var>
       } <var class="keywords">else</var> {
         <var class="vars">$next</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$pos</var> + 1, 1); <var class="comments">// BE</var>
         <var class="vars">$prev</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$pos</var> - 1, 1); <var class="comments">// LE</var>
         <var class="keywords">if</var> ((<var class="funcs">strlen</var>(<var class="vars">$next</var>) &gt; 0 &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$next</var>) &gt; 0x00 &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$next</var>) &lt; 0x80)
          || (<var class="funcs">strlen</var>(<var class="vars">$prev</var>) &gt; 0 &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$prev</var>) &gt; 0x00 &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$prev</var>) &lt; 0x80)) {
           <var class="vars">$pos</var> = <var class="funcs">strlen</var>(<var class="vars">$string</var>) - 1;
           <var class="vars">$next</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$pos</var> + 1, 1); <var class="comments">// BE</var>
           <var class="vars">$prev</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$pos</var> - 1, 1); <var class="comments">// LE</var>
           <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$next</var>) &gt; 0) {
             <var class="keywords">if</var> (<var class="funcs">ord</var>(<var class="vars">$next</var>) &gt; 0x00 &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$next</var>) &lt; 0x80) {
               <var class="vars">$result</var> = <var class="keywords">true</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$result</var> = <var class="keywords">false</var>;
             }
           } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$prev</var>) &gt; 0) {
             <var class="keywords">if</var> (<var class="funcs">ord</var>(<var class="vars">$prev</var>) &gt; 0x00 &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$prev</var>) &lt; 0x80) {
               <var class="vars">$result</var> = <var class="keywords">true</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$result</var> = <var class="keywords">false</var>;
             }
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0173"><h2>
<a name="p_function_isutf16be_173">
<var class="function">isUTF16BE</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>link</dt>
<dd><a href="http://www.ietf.org/rfc/rfc2781.txt" target="_blank" title="open in blanks window">http://www.ietf.org/rfc/rfc2781.txt</a></dd>
</dl>
<pre class="desc"> UTF-16BE (big-endian)
 RFC 2781 4.3 Interpreting text labelled as UTF-16
 Text labelled &quot;UTF-16BE&quot; can always be interpreted as being big-endian
  when BOM does not founds (SHOULD)
</pre>
</div></div><pre id="source-0173"> <var class="keywords">function</var> isUTF16BE(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$string</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var> &gt;= 2) {
     <var class="vars">$byte1</var> = <var class="funcs">ord</var>(<var class="vars">$string</var>);
     <var class="vars">$byte2</var> = <var class="funcs">ord</var>(<var class="funcs">substr</var>(<var class="vars">$string</var>, 1, 1));
     <var class="keywords">if</var> (<var class="vars">$byte1</var> === 0xFE <var class="comments">// BOM</var>
      &amp;&amp; <var class="vars">$byte2</var> === 0xFF) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="funcs">chr</var>(0x00));
       <var class="keywords">if</var> (<var class="vars">$pos</var> === <var class="keywords">false</var>) {
         <var class="vars">$result</var> = <var class="keywords">false</var>; <var class="comments">// Non ASCII..</var>
       } <var class="keywords">else</var> {
         <var class="vars">$byte</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$pos</var> + 1, 1);
         <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$byte</var>) &gt; 0 &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$byte</var>) &lt; 0x80) {
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0174"><h2>
<a name="p_function_isutf16le_174">
<var class="function">isUTF16LE</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>isUTF16BE</dd>
</dl>
<pre class="desc"> UTF-16LE (little-endian)
</pre>
</div></div><pre id="source-0174"> <var class="keywords">function</var> isUTF16LE(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$string</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var> &gt;= 2) {
     <var class="vars">$byte1</var> = <var class="funcs">ord</var>(<var class="vars">$string</var>);
     <var class="vars">$byte2</var> = <var class="funcs">ord</var>(<var class="funcs">substr</var>(<var class="vars">$string</var>, 1, 1));
     <var class="keywords">if</var> (<var class="vars">$byte1</var> === 0xFF <var class="comments">// BOM</var>
      &amp;&amp; <var class="vars">$byte2</var> === 0xFE) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="funcs">chr</var>(0x00));
       <var class="keywords">if</var> (<var class="vars">$pos</var> === <var class="keywords">false</var>) {
         <var class="vars">$result</var> = <var class="keywords">false</var>; <var class="comments">// There is no ASCII in string</var>
       } <var class="keywords">else</var> {
         <var class="vars">$byte</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$pos</var> - 1, 1);
         <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$byte</var>) &gt; 0 &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$byte</var>) &lt; 0x80) {
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0175"><h2>
<a name="p_function_isutf32_175">
<var class="function">isUTF32</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>link</dt>
<dd><a href="http://www.iana.org/assignments/charset-reg/UTF-32" target="_blank" title="open in blanks window">http://www.iana.org/assignments/charset-reg/UTF-32</a></dd>
<dt>link</dt>
<dd><a href="http://www.unicode.org/reports/tr19/tr19-9.html" target="_blank" title="open in blanks window">http://www.unicode.org/reports/tr19/tr19-9.html</a></dd>
</dl>
<pre class="desc"> UTF-32
 Unicode 3.2.0: Unicode Standard Annex #19
</pre>
</div></div><pre id="source-0175"> <var class="keywords">function</var> isUTF32(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$string</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var> &gt;= 4) {
     <var class="vars">$byte1</var> = <var class="funcs">ord</var>(<var class="vars">$string</var>);
     <var class="vars">$byte2</var> = <var class="funcs">ord</var>(<var class="funcs">substr</var>(<var class="vars">$string</var>, 1, 1));
     <var class="vars">$byte3</var> = <var class="funcs">ord</var>(<var class="funcs">substr</var>(<var class="vars">$string</var>, 2, 1));
     <var class="vars">$byte4</var> = <var class="funcs">ord</var>(<var class="funcs">substr</var>(<var class="vars">$string</var>, 3, 1));
     <var class="keywords">if</var> (<var class="vars">$byte1</var> === 0x00 &amp;&amp; <var class="vars">$byte2</var> === 0x00 <var class="comments">// BOM (big-endian)</var>
      &amp;&amp; <var class="vars">$byte3</var> === 0xFE &amp;&amp; <var class="vars">$byte4</var> === 0xFF) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$byte1</var> === 0xFF &amp;&amp; <var class="vars">$byte2</var> === 0xFE <var class="comments">// BOM (little-endian)</var>
            &amp;&amp;  <var class="vars">$byte3</var> === 0x00 &amp;&amp; <var class="vars">$byte4</var> === 0x00) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="funcs">chr</var>(0x00));
       <var class="keywords">if</var> (<var class="vars">$pos</var> === <var class="keywords">false</var>) {
         <var class="vars">$result</var> = <var class="keywords">false</var>; <var class="comments">// Non ASCII (omit)</var>
       } <var class="keywords">else</var> {
         <var class="vars">$next</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$pos</var>, 4); <var class="comments">// Must be (BE)</var>
         <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$next</var>) === 4) {
           <var class="vars">$bytes</var> = <var class="funcs">array_values</var>(<var class="funcs">unpack</var>(<var class="strings">'C4'</var>, <var class="vars">$next</var>));
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$bytes</var>[0], <var class="vars">$bytes</var>[1], <var class="vars">$bytes</var>[2], <var class="vars">$bytes</var>[3])) {
             <var class="keywords">if</var> (<var class="vars">$bytes</var>[0] === 0x00 &amp;&amp; <var class="vars">$bytes</var>[1] === 0x00) {
               <var class="keywords">if</var> (<var class="vars">$bytes</var>[2] === 0x00) {
                 <var class="vars">$result</var> = <var class="vars">$bytes</var>[3] &gt;= 0x09 &amp;&amp; <var class="vars">$bytes</var>[3] &lt;= 0x7F;
               } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$bytes</var>[2] &gt; 0x00 &amp;&amp; <var class="vars">$bytes</var>[2] &lt; 0xFF) {
                 <var class="vars">$result</var> = <var class="vars">$bytes</var>[3] &gt; 0x00 &amp;&amp; <var class="vars">$bytes</var>[3] &lt;= 0xFF;
               }
             }
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0176"><h2>
<a name="p_function_isbig5_176">
<var class="function">isBIG5</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Big5 (Traditional Chinese)</pre>
</div></div><pre id="source-0176"> <var class="keywords">function</var> isBIG5(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">true</var>;
   <var class="vars">$string</var> = <var class="funcs">array_values</var>((<var class="keywords">array</var>)<var class="funcs">unpack</var>(<var class="strings">'C*'</var>, <var class="vars">$string</var>));
   <var class="vars">$bytes</var> = &amp; <var class="vars">$string</var>;
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$bytes</var>);
   <var class="vars">$i</var> = 0;
   <var class="keywords">while</var> (<var class="vars">$i</var> &lt; <var class="vars">$length</var> &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>++] &gt; 0x80);
   <var class="keywords">for</var> (; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; ++<var class="vars">$i</var>) {
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x80) {
       <var class="keywords">continue</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt;= 0x81 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt;= 0xFE) {
       <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
        || ((<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x40 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0x7E)
        &amp;&amp;  (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0xA1 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xFE))) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       }
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">break</var>;
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$bytes</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0177"><h2>
<a name="p_function_isgb_177">
<var class="function">isGB</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> EUC-CN (GB2312) (Simplified Chinese)</pre>
</div></div><pre id="source-0177"> <var class="keywords">function</var> isGB(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">true</var>;
   <var class="vars">$string</var> = <var class="funcs">array_values</var>((<var class="keywords">array</var>)<var class="funcs">unpack</var>(<var class="strings">'C*'</var>, <var class="vars">$string</var>));
   <var class="vars">$bytes</var> = &amp; <var class="vars">$string</var>;
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$bytes</var>);
   <var class="vars">$i</var> = 0;
   <var class="keywords">while</var> (<var class="vars">$i</var> &lt; <var class="vars">$length</var> &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>++] &gt; 0x80);
   <var class="keywords">for</var> (; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; ++<var class="vars">$i</var>) {
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x80) {
       <var class="keywords">continue</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt;= 0x81 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt;= 0xFE) {
       <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
        || ((<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x40 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0x7E)
        &amp;&amp;  (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x80 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xFE))) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt;= 0x30 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt;= 0x39) {
         <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
          || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x81 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0xFE)
          || !<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
          || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x30 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0x39)) {
           <var class="vars">$result</var> = <var class="keywords">false</var>;
           <var class="keywords">break</var>;
         }
       }
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">break</var>;
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$bytes</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0178"><h2>
<a name="p_function_iseuckr_178">
<var class="function">isEUCKR</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> EUC-KR (KS X 1001) RFC1557</pre>
</div></div><pre id="source-0178"> <var class="keywords">function</var> isEUCKR(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">true</var>;
   <var class="vars">$string</var> = <var class="funcs">array_values</var>((<var class="keywords">array</var>)<var class="funcs">unpack</var>(<var class="strings">'C*'</var>, <var class="vars">$string</var>));
   <var class="vars">$bytes</var> = &amp; <var class="vars">$string</var>;
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$bytes</var>);
   <var class="vars">$i</var> = 0;
   <var class="keywords">while</var> (<var class="vars">$i</var> &lt; <var class="vars">$length</var> &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>++] &gt; 0x80);
   <var class="keywords">for</var> (; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; ++<var class="vars">$i</var>) {
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0x80) {
       <var class="keywords">continue</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt;= 0xA1 &amp;&amp; <var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt;= 0xFE) {
       <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$bytes</var>[++<var class="vars">$i</var>])
        || (<var class="vars">$bytes</var>[<var class="vars">$i</var>] &lt; 0xA1 || <var class="vars">$bytes</var>[<var class="vars">$i</var>] &gt; 0x7E)) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       }
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">break</var>;
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$bytes</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0179"><h2>
<a name="p_class_posql_utf8_179">
<var class="class">Posql_UTF8</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class is a library to handle the basic string functions as UTF-8
 If the mbstring library is available, most functions will use it
 Or, when the iconv library is available, it will be used
 When it is both invalid, it distinguishes by PHP,
  which uses PCRE RegExp&#039;s with &#039;u&#039; flag
  (In this case, the execution speed might be slow)
</pre>
<dl>
<dt>name</dt>
<dd>Posql_UTF8</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0180"><h2>
<a name="p_var_hasmbstring_180">
<var class="var">hasMBString</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   maintains mbstring library can be use</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0181"><h2>
<a name="p_var_hasiconv_181">
<var class="var">hasIConv</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   maintains iconv library can be use</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0182"><h2>
<a name="p_var_isphp5_182">
<var class="var">isPHP5</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   whether PHP VERSION is over 5 or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0183"><h2>
<a name="p_var_isphp520_183">
<var class="var">isPHP520</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   whether PHP VERSION is over 5.2.0 or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0184"><h2>
<a name="p_var_pcharset_184">
<var class="var">pcharset</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>    maintains instance of the Posql_Charset class</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0185"><h2>
<a name="p_var__inited_185">
<var class="var">_inited</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   whether initialized or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0186"><h2>
<a name="p_var_prevmbstringencoding_186">
<var class="var">prevMBStringEncoding</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>mixed</em>     maintains the previous mbstring settings</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0187"><h2>
<a name="p_var_previconvencoding_187">
<var class="var">prevIConvEncoding</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>mixed</em>     maintains the previous iconv settings</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0188"><h2>
<a name="p_var__orgcharset_188">
<var class="var">_orgCharset</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>mixed</em>     maintains the previous encoding</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0189"><h2>
<a name="p_var_charset_189">
<var class="var">charset</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>    maintains reference to the Posql&#039;s property charset</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0190"><h2>
<a name="p_function_posql_utf8_190">
<var class="function">Posql_UTF8</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0190"> <var class="keywords">function</var> Posql_UTF8(){
   <var class="vars">$this</var>-&gt;init();
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0191"><h2>
<a name="p_function___destruct_191">
<var class="function">__destruct</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Destructor for PHP Version 5+
 Release all referenced properties
</pre>
</div></div><pre id="source-0191"> <var class="keywords">function</var> <var class="keywords">__destruct</var>(){
   <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;pcharset, <var class="vars">$this</var>-&gt;charset);
   <var class="keywords">foreach</var> (<var class="funcs">get_object_vars</var>(<var class="vars">$this</var>) <var class="keywords">as</var> <var class="vars">$prop</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">if</var> (<var class="vars">$prop</var> != <var class="keywords">null</var>) {
       <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;{<var class="vars">$prop</var>});
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0192"><h2>
<a name="p_function__referproperty_192">
<var class="function">_referProperty</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>object</em>  give of the Posql self</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Reference to the Posql, and its properties
</pre>
</div></div><pre id="source-0192"> <var class="keywords">function</var> _referProperty(&amp;<var class="vars">$posql</var>){
   <var class="vars">$this</var>-&gt;charset  = &amp; <var class="vars">$posql</var>-&gt;charset;
   <var class="vars">$this</var>-&gt;pcharset = &amp; <var class="vars">$posql</var>-&gt;pcharset;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0193"><h2>
<a name="p_function_init_193">
<var class="function">init</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Initializes class variables
</pre>
</div></div><pre id="source-0193"> <var class="keywords">function</var> init(){
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inited)) {
     <var class="vars">$this</var>-&gt;hasMBString = <var class="keywords">false</var>;
     <var class="vars">$this</var>-&gt;hasIConv    = <var class="keywords">false</var>;
     <var class="vars">$this</var>-&gt;isPHP5      = <var class="funcs">version_compare</var>(PHP_VERSION, 5, <var class="strings">'&gt;='</var>);
     <var class="vars">$this</var>-&gt;isPHP520    = <var class="funcs">version_compare</var>(PHP_VERSION, <var class="strings">'5.2.0'</var>, <var class="strings">'&gt;='</var>);
     <var class="keywords">if</var> (<var class="funcs">extension_loaded</var>(<var class="strings">'mbstring'</var>) &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_strlen'</var>)
      &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_strpos'</var>) &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_strrpos'</var>)
      &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_substr'</var>) &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_strtolower'</var>)
      &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_strtoupper'</var>)
      &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_internal_encoding'</var>)) {
       <var class="vars">$this</var>-&gt;hasMBString = <var class="keywords">true</var>;
     }
     <var class="keywords">if</var> (<var class="funcs">extension_loaded</var>(<var class="strings">'iconv'</var>) &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'iconv_strlen'</var>)
      &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'iconv_strpos'</var>) &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'iconv_strrpos'</var>)
      &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'iconv_get_encoding'</var>)
      &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'iconv_set_encoding'</var>) &amp;&amp; <var class="vars">$this</var>-&gt;isPHP5) {
       <var class="comments">// Not uses iconv_substr() for Bug {@see substr}</var>
       <var class="vars">$this</var>-&gt;hasIConv = <var class="keywords">true</var>;
     }
     <var class="vars">$this</var>-&gt;_inited = <var class="keywords">true</var>;
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0194"><h2>
<a name="p_function_toutf8_194">
<var class="function">toUTF8</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the string of target</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether the original encoding to preserved or not</dd>
<dt>return</dt>
<dd><em>string</em>   the validated string as UTF-8</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Convert the given string to valid as UTF-8
</pre>
</div></div><pre id="source-0194"> <var class="keywords">function</var> toUTF8(<var class="vars">$string</var>, <var class="vars">$save_org</var> = <var class="keywords">false</var>){
   <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; !<var class="funcs">is_numeric</var>(<var class="vars">$string</var>)) {
     <var class="vars">$to</var> = <var class="strings">'UTF-8'</var>;
     <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;pcharset-&gt;detectEncoding(<var class="vars">$string</var>);
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;pcharset-&gt;convert(<var class="vars">$string</var>, <var class="vars">$to</var>, <var class="vars">$from</var>);
     <var class="keywords">if</var> (<var class="vars">$save_org</var>) {
       <var class="vars">$this</var>-&gt;_orgCharset = <var class="vars">$from</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0195"><h2>
<a name="p_function_fromutf8_195">
<var class="function">fromUTF8</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the string of target as UTF-8</dd>
<dt>param</dt>
<dd><em>string</em>   optionally, the encoding before the string to converted</dd>
<dt>return</dt>
<dd><em>string</em>   the encoded string as original encoding</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Restore the given string to original encoding from UTF-8
</pre>
</div></div><pre id="source-0195"> <var class="keywords">function</var> fromUTF8(<var class="vars">$string</var>, <var class="vars">$before</var> = <var class="keywords">null</var>){
   <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; !<var class="funcs">is_numeric</var>(<var class="vars">$string</var>)) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_orgCharset)
      || !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;charset) || <var class="vars">$before</var> != <var class="keywords">null</var>) {
       <var class="keywords">if</var> (<var class="vars">$before</var> == <var class="keywords">null</var>) {
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_orgCharset)) {
           <var class="vars">$to</var> = <var class="vars">$this</var>-&gt;_orgCharset;
         } <var class="keywords">else</var> {
           <var class="vars">$to</var> = <var class="vars">$this</var>-&gt;charset;
         }
       } <var class="keywords">else</var> {
         <var class="vars">$to</var> = <var class="vars">$before</var>;
       }
       <var class="vars">$from</var> = <var class="strings">'UTF-8'</var>;
       <var class="keywords">if</var> (<var class="vars">$to</var> !== <var class="vars">$from</var>) {
         <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;pcharset-&gt;convert(<var class="vars">$string</var>, <var class="vars">$to</var>, <var class="vars">$from</var>);
       }
       <var class="comments">//XXX: Fixed(?) Bug: Cannot restore encoding in array</var>
       <var class="comments">/*
       if ($before == null) {
         $this-&gt;_orgCharset = null;
       }
       */</var>
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0196"><h2>
<a name="p_function_setencoding_196">
<var class="function">setEncoding</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Sets the libraries internal encoding to UTF-8
</pre>
</div></div><pre id="source-0196"> <var class="keywords">function</var> setEncoding(){
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
     <var class="vars">$this</var>-&gt;prevMBStringEncoding = <var class="funcs">mb_internal_encoding</var>();
     <var class="funcs">mb_internal_encoding</var>(<var class="strings">'UTF-8'</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasIConv) {
     <var class="vars">$this</var>-&gt;prevIConvEncoding = <var class="funcs">iconv_get_encoding</var>(<var class="strings">'internal_encoding'</var>);
     <var class="funcs">iconv_set_encoding</var>(<var class="strings">'internal_encoding'</var>, <var class="strings">'UTF-8'</var>);
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0197"><h2>
<a name="p_function_restoreencoding_197">
<var class="function">restoreEncoding</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Restores the libraries internal encoding to previous settings
</pre>
</div></div><pre id="source-0197"> <var class="keywords">function</var> restoreEncoding(){
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString &amp;&amp; <var class="vars">$this</var>-&gt;prevMBStringEncoding != <var class="keywords">null</var>) {
     <var class="funcs">mb_internal_encoding</var>(<var class="vars">$this</var>-&gt;prevMBStringEncoding);
     <var class="vars">$this</var>-&gt;prevMBStringEncoding = <var class="keywords">null</var>;
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasIConv &amp;&amp; <var class="vars">$this</var>-&gt;prevIConvEncoding != <var class="keywords">null</var>) {
     <var class="funcs">iconv_set_encoding</var>(<var class="strings">'internal_encoding'</var>, <var class="vars">$this</var>-&gt;prevIConvEncoding);
     <var class="vars">$this</var>-&gt;prevIConvEncoding = <var class="keywords">null</var>;
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0198"><h2>
<a name="p_function_strlen_198">
<var class="function">strlen</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>strlen</dd>
<dt>param</dt>
<dd><em>string</em>  the string of target</dd>
<dt>return</dt>
<dd><em>number</em>  the length of the string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of strlen() as UTF-8 in Unicode
 Returns the length of the string as UTF-8
</pre>
</div></div><pre id="source-0198"> <var class="keywords">function</var> <var class="funcs">strlen</var>(<var class="vars">$string</var>){
   <var class="vars">$result</var> = 0;
   <var class="vars">$this</var>-&gt;setEncoding();
   <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUTF8(<var class="vars">$string</var>);
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_strlen(<var class="vars">$string</var>);
   <var class="vars">$this</var>-&gt;restoreEncoding();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0199"><h2>
<a name="p_function_strpos_199">
<var class="function">strpos</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>strpos</dd>
<dt>param</dt>
<dd><em>string</em>  the entire string</dd>
<dt>param</dt>
<dd><em>string</em>  the searched substring</dd>
<dt>param</dt>
<dd><em>number</em>  optionally, the offset of the search position</dd>
<dt>return</dt>
<dd><em>number</em>  the numeric position of the first occurrence, or FALSE</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of strpos() as UTF-8
 Find position of first occurrence of a string
 If the searched substring is not found then return as FALSE
</pre>
</div></div><pre id="source-0199"> <var class="keywords">function</var> <var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var> = 0){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;setEncoding();
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$search</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$offset</var> &gt;= 0) {
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUTF8(<var class="vars">$string</var>);
     <var class="vars">$search</var> = <var class="vars">$this</var>-&gt;toUTF8(<var class="vars">$search</var>);
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_strpos(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var>);
   }
   <var class="vars">$this</var>-&gt;restoreEncoding();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0200"><h2>
<a name="p_function_strrpos_200">
<var class="function">strrpos</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>strrpos</dd>
<dt>param</dt>
<dd><em>string</em>   the entire string.</dd>
<dt>param</dt>
<dd><em>string</em>   the searched substring.</dd>
<dt>param</dt>
<dd><em>number</em>   optionally, the offset of the search position from the end</dd>
<dt>return</dt>
<dd><em>number</em>   the numeric position of the first occurrence, or FALSE</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of strrpos() as UTF-8
 Find position of last occurrence of a substring in a string
 If the searched substring is not found then return as FALSE
</pre>
</div></div><pre id="source-0200"> <var class="keywords">function</var> <var class="funcs">strrpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;setEncoding();
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$search</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$offset</var> &gt;= 0) {
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUTF8(<var class="vars">$string</var>);
     <var class="vars">$search</var> = <var class="vars">$this</var>-&gt;toUTF8(<var class="vars">$search</var>);
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_strrpos(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var>);
   }
   <var class="vars">$this</var>-&gt;restoreEncoding();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0201"><h2>
<a name="p_function_substr_201">
<var class="function">substr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://bugs.php.net/bug.php?id=37773" target="_blank" title="open in blanks window">http://bugs.php.net/bug.php?id=37773</a></dd>
<dt>see</dt>
<dd><a href="http://bugs.php.net/bug.php?id=34757" target="_blank" title="open in blanks window">http://bugs.php.net/bug.php?id=34757</a></dd>
<dt>see</dt>
<dd>substr</dd>
<dt>param</dt>
<dd><em>string</em>  the original string</dd>
<dt>param</dt>
<dd><em>number</em>  the numeric position of offset</dd>
<dt>param</dt>
<dd><em>number</em>  optionally, the numeric length from offset</dd>
<dt>return</dt>
<dd><em>string</em>  a cut part of the substring, or the empty string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of substr() as UTF-8
 Cut out part of a string
 Notes:
   uses PCRE RegExp&#039;s with &#039;u&#039; flag
   PCRE only supports repetitions of less than 65536
   It will return an empty string(&#039;&#039;) instead
 Notes:
   Should not use it because there are some bugs in the iconv_substr()
   Bug #37773 iconv_substr() gives &quot;Unknown error&quot;
                             when string length = 1
   Bug #34757 iconv_substr() gives &quot;Unknown error&quot;
                             when offset &gt; string length = 1
</pre>
</div></div><pre id="source-0201"> <var class="keywords">function</var> <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$offset</var>, <var class="vars">$length</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$this</var>-&gt;setEncoding();
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$length</var> !== 0) {
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUTF8((<var class="keywords">string</var>)<var class="vars">$string</var>, <var class="keywords">true</var>);
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_substr(<var class="vars">$string</var>, <var class="vars">$offset</var>, <var class="vars">$length</var>);
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;fromUTF8(<var class="vars">$result</var>);
   }
   <var class="vars">$this</var>-&gt;restoreEncoding();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0202"><h2>
<a name="p_function__strlen_202">
<var class="function">_strlen</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> this function usage internal only
</pre>
</div></div><pre id="source-0202"> <var class="keywords">function</var> _strlen(<var class="vars">$string</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
     <var class="vars">$result</var> = <var class="funcs">mb_strlen</var>(<var class="vars">$string</var>);
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasIConv) {
     <var class="vars">$result</var> = <var class="funcs">iconv_strlen</var>(<var class="vars">$string</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="funcs">strlen</var>(<var class="funcs">utf8_decode</var>(<var class="vars">$string</var>));
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0203"><h2>
<a name="p_function__strpos_203">
<var class="function">_strpos</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> this function usage internal only
</pre>
</div></div><pre id="source-0203"> <var class="keywords">function</var> _strpos(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var> = 0){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$search</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$offset</var> &gt;= 0) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
       <var class="keywords">if</var> (<var class="vars">$offset</var> - 0 === 0) {
         <var class="vars">$result</var> = <var class="funcs">mb_strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="funcs">mb_strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var>);
       }
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasIConv) {
       <var class="keywords">if</var> (<var class="vars">$offset</var> - 0 === 0) {
         <var class="vars">$result</var> = <var class="funcs">iconv_strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="funcs">iconv_strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var>);
       }
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$offset</var> - 0 === 0) {
         <var class="vars">$string</var> = <var class="funcs">explode</var>(<var class="vars">$search</var>, <var class="vars">$string</var>, 2);
         <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$string</var>) &gt; 1 &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$string</var>[0])) {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_strlen(<var class="vars">$string</var>[0]);
         }
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$offset</var>) &amp;&amp; <var class="vars">$offset</var> &gt;= 0) {
           <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;_substr(<var class="vars">$string</var>, <var class="vars">$offset</var>);
           <var class="vars">$pos</var> = <var class="vars">$this</var>-&gt;_strpos(<var class="vars">$string</var>, <var class="vars">$search</var>);
           <var class="keywords">if</var> (<var class="vars">$pos</var> !== <var class="keywords">false</var>) {
             <var class="vars">$result</var> = <var class="vars">$pos</var> + <var class="vars">$offset</var>;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0204"><h2>
<a name="p_function__strrpos_204">
<var class="function">_strrpos</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> this function usage internal only
</pre>
</div></div><pre id="source-0204"> <var class="keywords">function</var> _strrpos(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$search</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$offset</var> &gt;= 0) {
     <var class="keywords">if</var> (<var class="vars">$offset</var> - 0 !== 0) {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString &amp;&amp; <var class="vars">$this</var>-&gt;isPHP520) {
         <var class="vars">$result</var> = <var class="funcs">mb_strrpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var>);
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$offset</var>) &amp;&amp; <var class="vars">$offset</var> &gt;= 0) {
           <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;_substr(<var class="vars">$string</var>, <var class="vars">$offset</var>);
           <var class="vars">$pos</var> = <var class="vars">$this</var>-&gt;_strrpos(<var class="vars">$string</var>, <var class="vars">$search</var>);
           <var class="keywords">if</var> (<var class="vars">$pos</var> !== <var class="keywords">false</var>) {
             <var class="vars">$result</var> = <var class="vars">$pos</var> + <var class="vars">$offset</var>;
           }
         }
       }
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
         <var class="vars">$result</var> = <var class="funcs">mb_strrpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>);
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasIConv) {
         <var class="vars">$result</var> = <var class="funcs">iconv_strrpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$string</var> = <var class="funcs">explode</var>(<var class="vars">$search</var>, <var class="vars">$string</var>);
         <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$string</var>) &gt; 1) {
           <var class="funcs">array_pop</var>(<var class="vars">$string</var>);
           <var class="vars">$string</var> = <var class="funcs">implode</var>(<var class="vars">$search</var>, <var class="vars">$string</var>);
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_strlen(<var class="vars">$string</var>);
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0205"><h2>
<a name="p_function__substr_205">
<var class="function">_substr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> this function usage internal only
</pre>
</div></div><pre id="source-0205"> <var class="keywords">function</var> _substr(<var class="vars">$string</var>, <var class="vars">$offset</var>, <var class="vars">$length</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$length</var> !== 0) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
       <var class="keywords">if</var> (<var class="vars">$length</var> === <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="funcs">mb_substr</var>(<var class="vars">$string</var>, <var class="vars">$offset</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="funcs">mb_substr</var>(<var class="vars">$string</var>, <var class="vars">$offset</var>, <var class="vars">$length</var>);
       }
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$length</var> === <var class="keywords">null</var> &amp;&amp; ((<var class="vars">$offset</var> - 0) === 0)) {
       <var class="vars">$result</var> = <var class="vars">$string</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$offset</var> = (<var class="keywords">int</var>)<var class="vars">$offset</var>;
       <var class="keywords">if</var> (<var class="vars">$length</var> !== <var class="keywords">null</var>) {
         <var class="vars">$length</var> = (<var class="keywords">int</var>)<var class="vars">$length</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$offset</var> &lt; 0 &amp;&amp; <var class="vars">$length</var> &lt; 0 &amp;&amp; <var class="vars">$length</var> &lt; <var class="vars">$offset</var>) {
         <var class="vars">$result</var> = <var class="strings">''</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$offset_pattern</var> = <var class="strings">''</var>;
         <var class="vars">$length_pattern</var> = <var class="strings">''</var>;
         <var class="keywords">if</var> (<var class="vars">$offset</var> &lt; 0) {
           <var class="vars">$strlen</var> = <var class="vars">$this</var>-&gt;_strlen(<var class="vars">$string</var>);
           <var class="vars">$offset</var> = <var class="vars">$strlen</var> + <var class="vars">$offset</var>;
           <var class="keywords">if</var> (<var class="vars">$offset</var> &lt; 0) {
             <var class="vars">$offset</var> = 0;
           }
         }
         <var class="keywords">if</var> (<var class="vars">$offset</var> &gt; 0) {
           <var class="vars">$offset_x</var> = (<var class="keywords">int</var>)(<var class="vars">$offset</var> / 65535);
           <var class="vars">$offset_y</var> = <var class="vars">$offset</var> % 65535;
           <var class="keywords">if</var> (<var class="vars">$offset_x</var>) {
             <var class="vars">$offset_pattern</var> = <var class="strings">'(?:.{65535}){'</var> . <var class="vars">$offset_x</var> . <var class="strings">'}'</var>;
           }
           <var class="vars">$offset_pattern</var> = <var class="strings">'^(?:'</var> . <var class="vars">$offset_pattern</var>
                           . <var class="strings">'.{'</var> . <var class="vars">$offset_y</var> . <var class="strings">'})'</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$offset_pattern</var> = <var class="strings">'^'</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$length</var> === <var class="keywords">null</var>) {
           <var class="vars">$length_pattern</var> = <var class="strings">'(.*)$'</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$strlen</var>)) {
             <var class="vars">$strlen</var> = <var class="vars">$this</var>-&gt;_strlen(<var class="vars">$string</var>);
           }
           <var class="keywords">if</var> (<var class="vars">$offset</var> &gt; <var class="vars">$strlen</var>) {
             <var class="vars">$result</var> = <var class="strings">''</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$length</var> &gt; 0) {
               <var class="vars">$minlen</var> = <var class="vars">$strlen</var> - <var class="vars">$offset</var>;
               <var class="keywords">if</var> (<var class="vars">$minlen</var> &gt; <var class="vars">$length</var>) {
                 <var class="vars">$minlen</var> = <var class="vars">$length</var>;
               }
               <var class="vars">$length</var> = <var class="vars">$minlen</var>;
               <var class="vars">$len_x</var> = (<var class="keywords">int</var>)(<var class="vars">$length</var> / 65535);
               <var class="vars">$len_y</var> = <var class="vars">$length</var> % 65535;
               <var class="keywords">if</var> (<var class="vars">$len_x</var>) {
                 <var class="vars">$length_pattern</var> = <var class="strings">'(?:.{65535}){'</var> . <var class="vars">$len_x</var> . <var class="strings">'}'</var>;
               }
               <var class="vars">$length_pattern</var> = <var class="strings">'('</var> . <var class="vars">$length_pattern</var>
                               . <var class="strings">'.{'</var> . <var class="vars">$len_y</var> . <var class="strings">'})'</var>;
             } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$length</var> &lt; 0) {
               <var class="keywords">if</var> (<var class="vars">$length</var> &lt; (<var class="vars">$offset</var> - <var class="vars">$strlen</var>)) {
                 <var class="vars">$result</var> = <var class="strings">''</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$len_x</var> = (<var class="keywords">int</var>)((-<var class="vars">$length</var>) / 65535);
                 <var class="vars">$len_y</var> = (-<var class="vars">$length</var>) % 65535;
                 <var class="keywords">if</var> (<var class="vars">$len_x</var>) {
                   <var class="vars">$length_pattern</var> = <var class="strings">'(?:.{65535}){'</var> . <var class="vars">$len_x</var> . <var class="strings">'}'</var>;
                 }
                 <var class="vars">$length_pattern</var> = <var class="strings">'(.*)(?:'</var> . <var class="vars">$length_pattern</var>
                                 . <var class="strings">'.{'</var> . <var class="vars">$len_y</var> . <var class="strings">'})$'</var>;
               }
             }
           }
         }
         <var class="vars">$pattern</var> = <var class="strings">'&lt;'</var> . <var class="vars">$offset_pattern</var> . <var class="vars">$length_pattern</var> . <var class="strings">'&gt;us'</var>;
         <var class="keywords">if</var> (<var class="funcs">preg_match</var>(<var class="vars">$pattern</var>, <var class="vars">$string</var>, <var class="vars">$match</var>)) {
           <var class="vars">$result</var> = <var class="vars">$match</var>[1];
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0206"><h2>
<a name="p_class_posql_unicode_206">
<var class="class">Posql_Unicode</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class is a library to handle the basic string functions as Unicode
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Unicode</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0207"><h2>
<a name="p_function_posql_unicode_207">
<var class="function">Posql_Unicode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0207"> <var class="keywords">function</var> Posql_Unicode(){
   <var class="vars">$this</var>-&gt;init();
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0208"><h2>
<a name="p_function_strcasecmp_208">
<var class="function">strcasecmp</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>strcasecmp</dd>
<dt>param</dt>
<dd><em>string</em>  the first string</dd>
<dt>param</dt>
<dd><em>string</em>  the second string</dd>
<dt>return</dt>
<dd><em>number</em>  0 or 1 or -1, if they are equal, it will be returned as 0</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of strcasecmp() as Unicode
 Binary safe case-insensitive string comparison
</pre>
</div></div><pre id="source-0208"> <var class="keywords">function</var> <var class="funcs">strcasecmp</var>(<var class="vars">$string1</var>, <var class="vars">$string2</var>){
   <var class="keywords">if</var> (<var class="vars">$string1</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$string2</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$string1</var> != <var class="vars">$string2</var>) {
     <var class="vars">$string1</var> = <var class="vars">$this</var>-&gt;<var class="funcs">strtolower</var>(<var class="vars">$string1</var>);
     <var class="vars">$string2</var> = <var class="vars">$this</var>-&gt;<var class="funcs">strtolower</var>(<var class="vars">$string2</var>);
   }
   <var class="keywords">return</var> <var class="funcs">strcmp</var>(<var class="vars">$string1</var>, <var class="vars">$string2</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0209"><h2>
<a name="p_function_chr_209">
<var class="function">chr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>chr</dd>
<dt>param</dt>
<dd><em>number</em>  the numbers of Unicode to be contained</dd>
<dt>return</dt>
<dd><em>string</em>  the one-character string as Unicode</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of chr() as Unicode
 This function works like so-called String.fromCharCode()
 Returns one-character string as Unicode from the numbers
</pre>
</div></div><pre id="source-0209"> <var class="keywords">function</var> <var class="funcs">chr</var>(<var class="vars">$number</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var> &gt; 0) {
     <var class="vars">$i</var> = 0;
     <var class="keywords">while</var> (--<var class="vars">$argn</var> &gt;= 0) {
       <var class="vars">$arg</var> = (<var class="keywords">int</var>)<var class="vars">$args</var>[<var class="vars">$i</var>++];
       <var class="keywords">if</var> (<var class="vars">$arg</var> &lt; 0) {
         <var class="vars">$chr</var> = <var class="strings">''</var>;
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="vars">$arg</var> &lt;= 0xFF) {
           <var class="vars">$chr</var> = <var class="funcs">chr</var>(<var class="vars">$arg</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$chr</var> = <var class="vars">$this</var>-&gt;fromUnicode(<var class="keywords">array</var>(<var class="vars">$arg</var>));
         }
         <var class="keywords">if</var> (<var class="vars">$chr</var> == <var class="keywords">null</var>) {
           <var class="vars">$chr</var> = <var class="strings">''</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$chr</var> = (<var class="keywords">string</var>)<var class="vars">$chr</var>;
         }
       }
       <var class="vars">$result</var> .= <var class="vars">$chr</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0210"><h2>
<a name="p_function_ord_210">
<var class="function">ord</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>ord</dd>
<dt>param</dt>
<dd><em>string</em>  the string of target as Unicode</dd>
<dt>return</dt>
<dd><em>number</em>  the numbers of Unicode to be contained</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of ord() as Unicode
 Returns the number from the head of string as Unicode
</pre>
</div></div><pre id="source-0210"> <var class="keywords">function</var> <var class="funcs">ord</var>(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, 0, 1);
   <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUnicode(<var class="vars">$string</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$string</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$string</var>)) {
     <var class="vars">$result</var> = <var class="funcs">array_shift</var>(<var class="vars">$string</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0211"><h2>
<a name="p_function_substr_replace_211">
<var class="function">substr_replace</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>substr_replace</dd>
<dt>param</dt>
<dd><em>string</em>  the input string</dd>
<dt>param</dt>
<dd><em>string</em>  the replacement string</dd>
<dt>param</dt>
<dd><em>number</em>  the numeric position of offset</dd>
<dt>param</dt>
<dd><em>number</em>  optionally, the numeric length from offset</dd>
<dt>return</dt>
<dd><em>string</em>  the replaced substring, or the empty string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of substr_replace() as Unicode
 Replace text within a portion of a string
</pre>
</div></div><pre id="source-0211"> <var class="keywords">function</var> <var class="funcs">substr_replace</var>(<var class="vars">$string</var>, <var class="vars">$replace</var>, <var class="vars">$start</var>, <var class="vars">$length</var> = 0){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> ((<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)  || <var class="vars">$string</var>  === <var class="keywords">null</var>)
    &amp;&amp; (<var class="funcs">is_scalar</var>(<var class="vars">$replace</var>) || <var class="vars">$replace</var> === <var class="keywords">null</var>)) {
     <var class="keywords">if</var> (<var class="vars">$start</var> &gt; 0) {
       <var class="vars">$result</var> .= <var class="vars">$this</var>-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, 0, <var class="vars">$start</var>);
     }
     <var class="vars">$result</var> .= <var class="vars">$this</var>-&gt;<var class="funcs">substr</var>(<var class="vars">$replace</var>, 0);
     <var class="vars">$result</var> .= <var class="vars">$this</var>-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$start</var> + <var class="vars">$length</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0212"><h2>
<a name="p_function_strrev_212">
<var class="function">strrev</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>strrev</dd>
<dt>param</dt>
<dd><em>string</em>  the string to be reversed</dd>
<dt>return</dt>
<dd><em>string</em>  returns the reversed string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of strrev() as Unicode
 Reverse a string
</pre>
</div></div><pre id="source-0212"> <var class="keywords">function</var> <var class="funcs">strrev</var>(<var class="vars">$string</var>){
   <var class="vars">$this</var>-&gt;setEncoding();
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">strlen</var>(<var class="vars">$string</var>) &gt; 1) {
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUTF8(<var class="vars">$string</var>, <var class="keywords">true</var>);
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;_toUnicode(<var class="vars">$string</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$string</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$string</var>)) {
       <var class="vars">$string</var> = <var class="funcs">array_reverse</var>(<var class="vars">$string</var>);
       <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;fromUnicode(<var class="vars">$string</var>);
     }
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;fromUTF8(<var class="vars">$string</var>);
   }
   <var class="vars">$this</var>-&gt;restoreEncoding();
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0213"><h2>
<a name="p_function_strtr_213">
<var class="function">strtr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the string being translated</dd>
<dt>param</dt>
<dd><em>string</em>  the string being translated to</dd>
<dt>param</dt>
<dd><em>string</em>  the string replacing from</dd>
<dt>return</dt>
<dd><em>string</em>  the copy of string,</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Translate certain characters as Unicode
                 translating all occurrences of each character in
                 from to the corresponding character
</pre>
</div></div><pre id="source-0213"> <var class="keywords">function</var> <var class="funcs">strtr</var>(<var class="vars">$string</var>, <var class="vars">$from</var>, <var class="vars">$to</var> = <var class="keywords">null</var>){
   <var class="vars">$this</var>-&gt;setEncoding();
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$to</var> === <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$from</var>)
      &amp;&amp; <var class="funcs">is_string</var>(<var class="funcs">reset</var>(<var class="vars">$from</var>)) &amp;&amp; <var class="funcs">is_string</var>(<var class="funcs">key</var>(<var class="vars">$from</var>))) {
       <var class="vars">$string</var> = <var class="funcs">strtr</var>(<var class="vars">$string</var>, <var class="vars">$from</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;toUnicode(<var class="vars">$from</var>);
       <var class="vars">$to</var> = <var class="vars">$this</var>-&gt;toUnicode(<var class="vars">$to</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$from</var>) &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$to</var>)
        &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$from</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$to</var>)
        &amp;&amp; <var class="funcs">count</var>(<var class="vars">$from</var>) === <var class="funcs">count</var>(<var class="vars">$to</var>)) {
         <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUTF8(<var class="vars">$string</var>, <var class="keywords">true</var>);
         <var class="vars">$parts</var> = <var class="keywords">array</var>();
         <var class="vars">$count</var> = <var class="funcs">count</var>(<var class="vars">$to</var>);
         <var class="keywords">while</var> (--<var class="vars">$count</var> &gt;= 0) {
           <var class="vars">$key</var> = <var class="funcs">array_shift</var>(<var class="vars">$from</var>);
           <var class="vars">$val</var> = <var class="funcs">array_shift</var>(<var class="vars">$to</var>);
           <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$key</var>) &amp;&amp; <var class="funcs">is_int</var>(<var class="vars">$val</var>)) {
             <var class="vars">$parts</var>[ <var class="vars">$this</var>-&gt;<var class="funcs">chr</var>(<var class="vars">$key</var>) ] = <var class="vars">$this</var>-&gt;<var class="funcs">chr</var>(<var class="vars">$val</var>);
           }
         }
         <var class="vars">$string</var> = <var class="funcs">strtr</var>(<var class="vars">$string</var>, <var class="vars">$parts</var>);
         <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;fromUTF8(<var class="vars">$string</var>);
       }
     }
   }
   <var class="vars">$this</var>-&gt;restoreEncoding();
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0214"><h2>
<a name="p_function_ucfirst_214">
<var class="function">ucfirst</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>ucfirst</dd>
<dt>param</dt>
<dd><em>string</em>  the input string</dd>
<dt>return</dt>
<dd><em>string</em>  returns the resulting string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of ucfirst() as Unicode
 Make a string&#039;s first character uppercase
</pre>
</div></div><pre id="source-0214"> <var class="keywords">function</var> <var class="funcs">ucfirst</var>(<var class="vars">$string</var>){
   <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="keywords">switch</var> (<var class="vars">$this</var>-&gt;<var class="funcs">strlen</var>(<var class="vars">$string</var>)) {
       <var class="keywords">case</var> 0:
           <var class="vars">$string</var> = <var class="strings">''</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> 1:
           <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;<var class="funcs">strtoupper</var>(<var class="vars">$string</var>);
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$first</var> = <var class="vars">$this</var>-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, 0, 1);
           <var class="vars">$first</var> = <var class="vars">$this</var>-&gt;<var class="funcs">strtoupper</var>(<var class="vars">$string</var>);
           <var class="vars">$string</var> = <var class="vars">$first</var> . <var class="vars">$this</var>-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, 1);
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0215"><h2>
<a name="p_function_strtolower_215">
<var class="function">strtolower</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://www.unicode.org/reports/tr21/tr21-5.html" target="_blank" title="open in blanks window">http://www.unicode.org/reports/tr21/tr21-5.html</a></dd>
<dt>see</dt>
<dd>strtolower</dd>
<dt>param</dt>
<dd><em>string</em>  the input string</dd>
<dt>return</dt>
<dd><em>string</em>  returns the lowercased string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of strtolower() as Unicode
 Returns string with all alphabetic characters converted to lowercase
 Note:
 Unicode Standard Annex #21: Case Mappings
 The concept of a characters &quot;case&quot; only exists is some alphabets
  such as Latin, Greek, Cyrillic, Armenian and archaic Georgian,
  and Japanese alphabets
 It does not exist in the Chinese alphabet
</pre>
</div></div><pre id="source-0215"> <var class="keywords">function</var> <var class="funcs">strtolower</var>(<var class="vars">$string</var>){
   <var class="vars">$this</var>-&gt;setEncoding();
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUTF8(<var class="vars">$string</var>, <var class="keywords">true</var>);
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;_strtolower(<var class="vars">$string</var>);
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;fromUTF8(<var class="vars">$string</var>);
   }
   <var class="vars">$this</var>-&gt;restoreEncoding();
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0216"><h2>
<a name="p_function_strtoupper_216">
<var class="function">strtoupper</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://www.unicode.org/reports/tr21/tr21-5.html" target="_blank" title="open in blanks window">http://www.unicode.org/reports/tr21/tr21-5.html</a></dd>
<dt>see</dt>
<dd>strtoupper</dd>
<dt>param</dt>
<dd><em>string</em>  the input string</dd>
<dt>return</dt>
<dd><em>string</em>  returns the uppercased string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The handle of strtoupper() as Unicode
 Returns string with all alphabetic characters converted to uppercase
 Note:
 Unicode Standard Annex #21: Case Mappings
 The concept of a characters &quot;case&quot; only exists is some alphabets
  such as Latin, Greek, Cyrillic, Armenian and archaic Georgian,
  and Japanese alphabets
 It does not exist in the Chinese alphabet
</pre>
</div></div><pre id="source-0216"> <var class="keywords">function</var> <var class="funcs">strtoupper</var>(<var class="vars">$string</var>){
   <var class="vars">$this</var>-&gt;setEncoding();
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUTF8(<var class="vars">$string</var>, <var class="keywords">true</var>);
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;_strtoupper(<var class="vars">$string</var>);
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;fromUTF8(<var class="vars">$string</var>);
   }
   <var class="vars">$this</var>-&gt;restoreEncoding();
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0217"><h2>
<a name="p_function__strtolower_217">
<var class="function">_strtolower</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> this function usage internal only
</pre>
</div></div><pre id="source-0217"> <var class="keywords">function</var> _strtolower(<var class="vars">$string</var>){
   <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
       <var class="vars">$string</var> = <var class="funcs">mb_strtolower</var>(<var class="vars">$string</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUnicode(<var class="vars">$string</var>);
       <var class="vars">$maps</var> = <var class="vars">$this</var>-&gt;getCaseMaps(<var class="strings">'L'</var>);
       <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$maps</var>)) {
         <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$string</var>);
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$maps</var>[ <var class="vars">$string</var>[<var class="vars">$i</var>] ])) {
             <var class="vars">$string</var>[<var class="vars">$i</var>] = <var class="vars">$maps</var>[ <var class="vars">$string</var>[<var class="vars">$i</var>] ];
           }
         }
         <var class="keywords">unset</var>(<var class="vars">$maps</var>);
       }
       <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;fromUnicode(<var class="vars">$string</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0218"><h2>
<a name="p_function__strtoupper_218">
<var class="function">_strtoupper</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> this function usage internal only
</pre>
</div></div><pre id="source-0218"> <var class="keywords">function</var> _strtoupper(<var class="vars">$string</var>){
   <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasMBString) {
       <var class="vars">$string</var> = <var class="funcs">mb_strtoupper</var>(<var class="vars">$string</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUnicode(<var class="vars">$string</var>);
       <var class="vars">$maps</var> = <var class="vars">$this</var>-&gt;getCaseMaps(<var class="strings">'U'</var>);
       <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$maps</var>)) {
         <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$string</var>);
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$maps</var>[ <var class="vars">$string</var>[<var class="vars">$i</var>] ])) {
             <var class="vars">$string</var>[<var class="vars">$i</var>] = <var class="vars">$maps</var>[ <var class="vars">$string</var>[<var class="vars">$i</var>] ];
           }
         }
         <var class="keywords">unset</var>(<var class="vars">$maps</var>);
       }
       <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;fromUnicode(<var class="vars">$string</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0219"><h2>
<a name="p_function_getcasemaps_219">
<var class="function">getCaseMaps</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://www.unicode.org/reports/tr21/tr21-5.html" target="_blank" title="open in blanks window">http://www.unicode.org/reports/tr21/tr21-5.html</a></dd>
<dt>param</dt>
<dd><em>mixed</em>   either of LOWER or UPPER (e.g. &#039;lower&#039;)</dd>
<dt>return</dt>
<dd><em>array</em>   the case mappings as an associate array</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Unicode Standard Annex #21: Case Mappings
 Note:
 The concept of a characters &quot;case&quot; only exists is some alphabets
  such as Latin, Greek, Cyrillic, Armenian and archaic Georgian,
  and Japanese alphabets
 It does not exist in the Chinese alphabet
</pre>
</div></div><pre id="source-0219"> <var class="keywords">function</var> getCaseMaps(<var class="vars">$lower</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$inited</var> = <var class="keywords">false</var>, <var class="vars">$casemaps</var> = <var class="keywords">array</var>(
   0x0041=&gt;0x0061,0x03A6=&gt;0x03C6,0x0162=&gt;0x0163,0x00C5=&gt;0x00E5,0x0042=&gt;0x0062,
   0x0139=&gt;0x013A,0x00C1=&gt;0x00E1,0x0141=&gt;0x0142,0x038E=&gt;0x03CD,0x0100=&gt;0x0101,
   0x0490=&gt;0x0491,0x0394=&gt;0x03B4,0x015A=&gt;0x015B,0x0044=&gt;0x0064,0x0393=&gt;0x03B3,
   0x00D4=&gt;0x00F4,0x042A=&gt;0x044A,0x0419=&gt;0x0439,0x0112=&gt;0x0113,0x041C=&gt;0x043C,
   0x015E=&gt;0x015F,0x0143=&gt;0x0144,0x00CE=&gt;0x00EE,0x040E=&gt;0x045E,0x042F=&gt;0x044F,
   0x039A=&gt;0x03BA,0x0154=&gt;0x0155,0x0049=&gt;0x0069,0x0053=&gt;0x0073,0x1E1E=&gt;0x1E1F,
   0x0134=&gt;0x0135,0x0427=&gt;0x0447,0x03A0=&gt;0x03C0,0x0418=&gt;0x0438,0x00D3=&gt;0x00F3,
   0x0420=&gt;0x0440,0x0404=&gt;0x0454,0x0415=&gt;0x0435,0x0429=&gt;0x0449,0x014A=&gt;0x014B,
   0x0411=&gt;0x0431,0x0409=&gt;0x0459,0x1E02=&gt;0x1E03,0x00D6=&gt;0x00F6,0x00D9=&gt;0x00F9,
   0x004E=&gt;0x006E,0x0401=&gt;0x0451,0x03A4=&gt;0x03C4,0x0423=&gt;0x0443,0x015C=&gt;0x015D,
   0x0403=&gt;0x0453,0x03A8=&gt;0x03C8,0x0158=&gt;0x0159,0x0047=&gt;0x0067,0x00C4=&gt;0x00E4,
   0x0386=&gt;0x03AC,0x0389=&gt;0x03AE,0x0166=&gt;0x0167,0x039E=&gt;0x03BE,0x0164=&gt;0x0165,
   0x0116=&gt;0x0117,0x0108=&gt;0x0109,0x0056=&gt;0x0076,0x00DE=&gt;0x00FE,0x0156=&gt;0x0157,
   0x00DA=&gt;0x00FA,0x1E60=&gt;0x1E61,0x1E82=&gt;0x1E83,0x00C2=&gt;0x00E2,0x0118=&gt;0x0119,
   0x0145=&gt;0x0146,0x0050=&gt;0x0070,0x0150=&gt;0x0151,0x042E=&gt;0x044E,0x0128=&gt;0x0129,
   0x03A7=&gt;0x03C7,0x013D=&gt;0x013E,0x0422=&gt;0x0442,0x005A=&gt;0x007A,0x0428=&gt;0x0448,
   0x03A1=&gt;0x03C1,0x1E80=&gt;0x1E81,0x016C=&gt;0x016D,0x00D5=&gt;0x00F5,0x0055=&gt;0x0075,
   0x0176=&gt;0x0177,0x00DC=&gt;0x00FC,0x1E56=&gt;0x1E57,0x03A3=&gt;0x03C3,0x041A=&gt;0x043A,
   0x004D=&gt;0x006D,0x016A=&gt;0x016B,0x0170=&gt;0x0171,0x0424=&gt;0x0444,0x00CC=&gt;0x00EC,
   0x0168=&gt;0x0169,0x039F=&gt;0x03BF,0x004B=&gt;0x006B,0x00D2=&gt;0x00F2,0x00C0=&gt;0x00E0,
   0x0414=&gt;0x0434,0x03A9=&gt;0x03C9,0x1E6A=&gt;0x1E6B,0x00C3=&gt;0x00E3,0x042D=&gt;0x044D,
   0x0416=&gt;0x0436,0x01A0=&gt;0x01A1,0x010C=&gt;0x010D,0x011C=&gt;0x011D,0x00D0=&gt;0x00F0,
   0x013B=&gt;0x013C,0x040F=&gt;0x045F,0x040A=&gt;0x045A,0x00C8=&gt;0x00E8,0x03A5=&gt;0x03C5,
   0x0046=&gt;0x0066,0x00DD=&gt;0x00FD,0x0043=&gt;0x0063,0x021A=&gt;0x021B,0x00CA=&gt;0x00EA,
   0x0399=&gt;0x03B9,0x0179=&gt;0x017A,0x00CF=&gt;0x00EF,0x01AF=&gt;0x01B0,0x0045=&gt;0x0065,
   0x039B=&gt;0x03BB,0x0398=&gt;0x03B8,0x039C=&gt;0x03BC,0x040C=&gt;0x045C,0x041F=&gt;0x043F,
   0x042C=&gt;0x044C,0x00DE=&gt;0x00FE,0x00D0=&gt;0x00F0,0x1EF2=&gt;0x1EF3,0x0048=&gt;0x0068,
   0x00CB=&gt;0x00EB,0x0110=&gt;0x0111,0x0413=&gt;0x0433,0x012E=&gt;0x012F,0x00C6=&gt;0x00E6,
   0x0058=&gt;0x0078,0x0160=&gt;0x0161,0x016E=&gt;0x016F,0x0391=&gt;0x03B1,0x0407=&gt;0x0457,
   0x0172=&gt;0x0173,0x0178=&gt;0x00FF,0x004F=&gt;0x006F,0x041B=&gt;0x043B,0x0395=&gt;0x03B5,
   0x0425=&gt;0x0445,0x0120=&gt;0x0121,0x017D=&gt;0x017E,0x017B=&gt;0x017C,0x0396=&gt;0x03B6,
   0x0392=&gt;0x03B2,0x0388=&gt;0x03AD,0x1E84=&gt;0x1E85,0x0174=&gt;0x0175,0x0051=&gt;0x0071,
   0x0417=&gt;0x0437,0x1E0A=&gt;0x1E0B,0x0147=&gt;0x0148,0x0104=&gt;0x0105,0x0408=&gt;0x0458,
   0x014C=&gt;0x014D,0x00CD=&gt;0x00ED,0x0059=&gt;0x0079,0x010A=&gt;0x010B,0x038F=&gt;0x03CE,
   0x0052=&gt;0x0072,0x0410=&gt;0x0430,0x0405=&gt;0x0455,0x0402=&gt;0x0452,0x0126=&gt;0x0127,
   0x0136=&gt;0x0137,0x012A=&gt;0x012B,0x038A=&gt;0x03AF,0x042B=&gt;0x044B,0x004C=&gt;0x006C,
   0x0397=&gt;0x03B7,0x0124=&gt;0x0125,0x0218=&gt;0x0219,0x00DB=&gt;0x00FB,0x011E=&gt;0x011F,
   0x041E=&gt;0x043E,0x1E40=&gt;0x1E41,0x039D=&gt;0x03BD,0x0106=&gt;0x0107,0x03AB=&gt;0x03CB,
   0x0426=&gt;0x0446,0x00DE=&gt;0x00FE,0x00C7=&gt;0x00E7,0x03AA=&gt;0x03CA,0x0421=&gt;0x0441,
   0x0412=&gt;0x0432,0x010E=&gt;0x010F,0x00D8=&gt;0x00F8,0x0057=&gt;0x0077,0x011A=&gt;0x011B,
   0x0054=&gt;0x0074,0x004A=&gt;0x006A,0x040B=&gt;0x045B,0x0406=&gt;0x0456,0x0102=&gt;0x0103,
   0x039B=&gt;0x03BB,0x00D1=&gt;0x00F1,0x041D=&gt;0x043D,0x038C=&gt;0x03CC,0x00C9=&gt;0x00E9,
   0x00D0=&gt;0x00F0,0x0407=&gt;0x0457,0x0122=&gt;0x0123,0xFF21=&gt;0xFF41,0xFF22=&gt;0xFF42,
   0xFF23=&gt;0xFF43,0xFF24=&gt;0xFF44,0xFF25=&gt;0xFF45,0xFF26=&gt;0xFF46,0xFF27=&gt;0xFF47,
   0xFF28=&gt;0xFF48,0xFF29=&gt;0xFF49,0xFF2A=&gt;0xFF4A,0xFF2B=&gt;0xFF4B,0xFF2C=&gt;0xFF4C,
   0xFF2D=&gt;0xFF4D,0xFF2E=&gt;0xFF4E,0xFF2F=&gt;0xFF4F,0xFF30=&gt;0xFF50,0xFF31=&gt;0xFF51,
   0xFF32=&gt;0xFF52,0xFF33=&gt;0xFF53,0xFF34=&gt;0xFF54,0xFF35=&gt;0xFF55,0xFF36=&gt;0xFF56,
   0xFF37=&gt;0xFF57,0xFF38=&gt;0xFF58,0xFF39=&gt;0xFF59,0xFF3A=&gt;0xFF5A);
   <var class="keywords">if</var> (!<var class="vars">$inited</var>) {
     <var class="vars">$casemaps</var> = <var class="keywords">array</var>(
       <var class="strings">'lower'</var> =&gt; <var class="vars">$casemaps</var>,
       <var class="strings">'upper'</var> =&gt; <var class="funcs">array_flip</var>(<var class="vars">$casemaps</var>)
     );
     <var class="vars">$inited</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">switch</var> (<var class="funcs">ord</var>((<var class="keywords">string</var>)<var class="vars">$lower</var>) | 0x20) {
     <var class="keywords">case</var> 0x21:
     <var class="keywords">case</var> 0x75:
         <var class="vars">$type</var> = <var class="strings">'upper'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 0x20:
     <var class="keywords">case</var> 0x6C:
     <var class="keywords">default</var>:
         <var class="vars">$type</var> = <var class="strings">'lower'</var>;
         <var class="keywords">break</var>;
   }
   <var class="keywords">return</var> <var class="vars">$casemaps</var>[<var class="vars">$type</var>];
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0220"><h2>
<a name="p_function_tounicode_220">
<var class="function">toUnicode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the string of target, which should be UTF-8</dd>
<dt>return</dt>
<dd><em>array</em>   an array which has the values of integers</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Takes an UTF-8 string
  and returns an array of integers representing the Unicode characters.
 Astral planes are supported
  (i.e. the integers in the output can be &gt; 0xFFFF).
 Occurrences of the BOM are ignored.
 Surrogates are not allowed.
 Returns FALSE if the input string isn&#039;t a valid UTF-8 octet sequence.
 the original C++ source code
 <a href="http://lxr.mozilla.org/seamonkey/source/intl/uconv/src/nsUTF8ToUnicode.cpp" target="_blank" title="open in blanks window">http://lxr.mozilla.org/seamonkey/source/intl/uconv/src/nsUTF8ToUnicode.cpp</a>
 <a href="http://lxr.mozilla.org/seamonkey/source/intl/uconv/src/nsUnicodeToUTF8.cpp" target="_blank" title="open in blanks window">http://lxr.mozilla.org/seamonkey/source/intl/uconv/src/nsUnicodeToUTF8.cpp</a>
                  that structured the Unicode characters.
                 Or FALSE by invalid character.
</pre>
</div></div><pre id="source-0220"> <var class="keywords">function</var> toUnicode(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;setEncoding();
   <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;toUTF8((<var class="keywords">string</var>)<var class="vars">$string</var>);
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_toUnicode(<var class="vars">$string</var>);
   <var class="keywords">unset</var>(<var class="vars">$string</var>);
   <var class="vars">$this</var>-&gt;restoreEncoding();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0221"><h2>
<a name="p_function__tounicode_221">
<var class="function">_toUnicode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> this function usage internal only
</pre>
</div></div><pre id="source-0221"> <var class="keywords">function</var> _toUnicode(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$state</var> = 0;
     <var class="vars">$ucs4</var>  = 0;
     <var class="vars">$bytes</var> = 1;
     <var class="vars">$string</var> = <var class="funcs">array_values</var>((<var class="keywords">array</var>)<var class="funcs">unpack</var>(<var class="strings">'C*'</var>, (<var class="keywords">string</var>)<var class="vars">$string</var>));
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$string</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; ++<var class="vars">$i</var>) {
       <var class="vars">$byte</var> = <var class="vars">$string</var>[<var class="vars">$i</var>];
       <var class="keywords">if</var> (<var class="vars">$state</var> === 0) {
         <var class="keywords">if</var> ((<var class="vars">$byte</var> &amp; 0x80) === 0) {
           <var class="vars">$result</var>[] = <var class="vars">$byte</var>;
           <var class="vars">$bytes</var> = 1;
         } <var class="keywords">else</var> <var class="keywords">if</var> ((<var class="vars">$byte</var> &amp; 0xE0) === 0xC0) {
           <var class="vars">$ucs4</var> = <var class="vars">$byte</var>;
           <var class="vars">$ucs4</var> = (<var class="vars">$ucs4</var> &amp; 0x1F) &lt;&lt; 6;
           <var class="vars">$state</var> = 1;
           <var class="vars">$bytes</var> = 2;
         } <var class="keywords">else</var> <var class="keywords">if</var> ((<var class="vars">$byte</var> &amp; 0xF0) === 0xE0) {
           <var class="vars">$ucs4</var> = <var class="vars">$byte</var>;
           <var class="vars">$ucs4</var> = (<var class="vars">$ucs4</var> &amp; 0x0F) &lt;&lt; 12;
           <var class="vars">$state</var> = 2;
           <var class="vars">$bytes</var> = 3;
         } <var class="keywords">else</var> <var class="keywords">if</var> ((<var class="vars">$byte</var> &amp; 0xF8) === 0xF0) {
           <var class="vars">$ucs4</var> = <var class="vars">$byte</var>;
           <var class="vars">$ucs4</var> = (<var class="vars">$ucs4</var> &amp; 0x07) &lt;&lt; 18;
           <var class="vars">$state</var> = 3;
           <var class="vars">$bytes</var> = 4;
         } <var class="keywords">else</var> <var class="keywords">if</var> ((<var class="vars">$byte</var> &amp; 0xFC) === 0xF8) {
           <var class="vars">$ucs4</var> = <var class="vars">$byte</var>;
           <var class="vars">$ucs4</var> = (<var class="vars">$ucs4</var> &amp; 0x03) &lt;&lt; 24;
           <var class="vars">$state</var> = 4;
           <var class="vars">$bytes</var> = 5;
         } <var class="keywords">else</var> <var class="keywords">if</var> ((<var class="vars">$byte</var> &amp; 0xFE) === 0xFC) {
           <var class="vars">$ucs4</var> = <var class="vars">$byte</var>;
           <var class="vars">$ucs4</var> = (<var class="vars">$ucs4</var> &amp; 1) &lt;&lt; 30;
           <var class="vars">$state</var> = 5;
           <var class="vars">$bytes</var> = 6;
         } <var class="keywords">else</var> {
           <var class="vars">$result</var> = <var class="keywords">false</var>;
           <var class="keywords">break</var>;
         }
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> ((<var class="vars">$byte</var> &amp; 0xC0) === 0x80) {
           <var class="vars">$shift</var> = (<var class="vars">$state</var> - 1) * 6;
           <var class="vars">$tmp</var> = <var class="vars">$byte</var>;
           <var class="vars">$tmp</var> = (<var class="vars">$tmp</var> &amp; 0x0000003F) &lt;&lt; <var class="vars">$shift</var>;
           <var class="vars">$ucs4</var> |= <var class="vars">$tmp</var>;
           <var class="keywords">if</var> (--<var class="vars">$state</var> === 0) {
             <var class="keywords">if</var> ((<var class="vars">$bytes</var> === 2 &amp;&amp; <var class="vars">$ucs4</var> &lt; 0x0080)
              || (<var class="vars">$bytes</var> === 3 &amp;&amp; <var class="vars">$ucs4</var> &lt; 0x0800)
              || (<var class="vars">$bytes</var> === 4 &amp;&amp; <var class="vars">$ucs4</var> &lt; 0x10000)
              || (<var class="vars">$bytes</var> &gt; 4)
              || ((<var class="vars">$ucs4</var> &amp; 0xFFFFF800) === 0xD800)
              || (<var class="vars">$ucs4</var> &gt; 0x10FFFF)) {
               <var class="vars">$result</var> = <var class="keywords">false</var>; <var class="comments">// illegal sequence or codepoint</var>
               <var class="keywords">break</var>;
             }
             <var class="keywords">if</var> (<var class="vars">$ucs4</var> !== 0xFEFF) {
               <var class="vars">$result</var>[] = <var class="vars">$ucs4</var>;
             }
             <var class="vars">$state</var> = 0;
             <var class="vars">$ucs4</var>  = 0;
             <var class="vars">$bytes</var> = 1;
           }
         } <var class="keywords">else</var> {
           <var class="vars">$result</var> = <var class="keywords">false</var>; <var class="comments">// incomplete multi-octet sequence</var>
           <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0222"><h2>
<a name="p_function_fromunicode_222">
<var class="function">fromUnicode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   an array of target, which should be Unicode characters</dd>
<dt>return</dt>
<dd><em>string</em>  a string which contained as valid UTF-8, or FALSE on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Takes an array of integers representing the Unicode characters
  and returns a UTF-8 string.
 Astral planes are supported
  (i.e. the integers in the input can be &gt; 0xFFFF).
 Occurrences of the BOM are ignored.
 Surrogates are not allowed.
 Returns FALSE if the input array contains integers
  that represent surrogates or are outside the Unicode range.
</pre>
</div></div><pre id="source-0222"> <var class="keywords">function</var> fromUnicode(<var class="vars">$uni</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$uni</var>)) {
     <var class="vars">$uni</var> = <var class="funcs">array_values</var>(<var class="vars">$uni</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$uni</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="keywords">if</var> (<var class="vars">$uni</var>[<var class="vars">$i</var>] &gt;= 0x00 &amp;&amp; <var class="vars">$uni</var>[<var class="vars">$i</var>] &lt;= 0x7F) {
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(<var class="vars">$uni</var>[<var class="vars">$i</var>]);
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$uni</var>[<var class="vars">$i</var>] &lt;= 0x7FF) {
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(0xC0 | (<var class="vars">$uni</var>[<var class="vars">$i</var>] &gt;&gt; 6));
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(0x80 | (<var class="vars">$uni</var>[<var class="vars">$i</var>] &amp; 0x3F));
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$uni</var>[<var class="vars">$i</var>] === 0xFEFF) {
         <var class="keywords">continue</var>;
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$uni</var>[<var class="vars">$i</var>] &gt;= 0xD800 &amp;&amp; <var class="vars">$uni</var>[<var class="vars">$i</var>] &lt;= 0xDFFF) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$uni</var>[<var class="vars">$i</var>] &lt;= 0xFFFF) {
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(0xE0 | (<var class="vars">$uni</var>[<var class="vars">$i</var>]  &gt;&gt; 12));
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(0x80 | ((<var class="vars">$uni</var>[<var class="vars">$i</var>] &gt;&gt;  6) &amp; 0x3F));
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(0x80 | (<var class="vars">$uni</var>[<var class="vars">$i</var>] &amp; 0x3F));
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$uni</var>[<var class="vars">$i</var>] &lt;= 0x10FFFF) {
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(0xF0 | (<var class="vars">$uni</var>[<var class="vars">$i</var>]  &gt;&gt; 18));
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(0x80 | ((<var class="vars">$uni</var>[<var class="vars">$i</var>] &gt;&gt; 12) &amp; 0x3F));
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(0x80 | ((<var class="vars">$uni</var>[<var class="vars">$i</var>] &gt;&gt;  6) &amp; 0x3F));
         <var class="vars">$result</var> .= <var class="funcs">chr</var>(0x80 | (<var class="vars">$uni</var>[<var class="vars">$i</var>] &amp; 0x3F));
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0223"><h2>
<a name="p_class_posql_ecma_223">
<var class="class">Posql_ECMA</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class emulates ECMAScript/JavaScript functions as ECMA-262 3rd edition
</pre>
<dl>
<dt>name</dt>
<dd>Posql_ECMA</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0224"><h2>
<a name="p_var_nan_224">
<var class="var">NaN</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>float</em>     constant value as NaN</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0225"><h2>
<a name="p_var_unicode_225">
<var class="var">unicode</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>    maintains instance of the Posql_Unicode class</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0226"><h2>
<a name="p_var__inited_226">
<var class="var">_inited</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   whether initialized or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0227"><h2>
<a name="p_function_posql_ecma_227">
<var class="function">Posql_ECMA</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0227"> <var class="keywords">function</var> Posql_ECMA(){
   <var class="vars">$this</var>-&gt;_init();
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0228"><h2>
<a name="p_function___destruct_228">
<var class="function">__destruct</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Destructor for PHP Version 5+
 Release all referenced properties
</pre>
</div></div><pre id="source-0228"> <var class="keywords">function</var> <var class="keywords">__destruct</var>(){
   <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;NaN, <var class="vars">$this</var>-&gt;unicode, <var class="vars">$this</var>-&gt;_inited);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0229"><h2>
<a name="p_function__referproperty_229">
<var class="function">_referProperty</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>object</em>  give of the Posql self</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Reference to the Posql, and its properties
</pre>
</div></div><pre id="source-0229"> <var class="keywords">function</var> _referProperty(&amp;<var class="vars">$posql</var>){
   <var class="vars">$this</var>-&gt;unicode = &amp; <var class="vars">$posql</var>-&gt;unicode;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0230"><h2>
<a name="p_function__init_230">
<var class="function">_init</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Initializes class variables
</pre>
</div></div><pre id="source-0230"> <var class="keywords">function</var> _init(){
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inited)) {
     <var class="vars">$this</var>-&gt;NaN = <var class="funcs">acos</var>(1.01);
     <var class="vars">$this</var>-&gt;_inited = <var class="keywords">true</var>;
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0231"><h2>
<a name="p_function_charat_231">
<var class="function">charAt</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>param</dt>
<dd><em>number</em>  the specified index</dd>
<dt>return</dt>
<dd><em>string</em>  the character at the specified index</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the character at the specified index
</pre>
</div></div><pre id="source-0231"> <var class="keywords">function</var> charAt(<var class="vars">$string</var>, <var class="vars">$index</var> = 0){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="vars">$index</var>  = (<var class="keywords">int</var>)<var class="vars">$index</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$index</var> &gt;= 0) {
       <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;unicode-&gt;toUnicode(<var class="vars">$string</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$string</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$string</var>)
        &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$index</var>, <var class="vars">$string</var>)) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;fromUnicode(<var class="keywords">array</var>(<var class="vars">$string</var>[<var class="vars">$index</var>]));
         <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$result</var>)) {
           <var class="vars">$result</var> = <var class="strings">''</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0232"><h2>
<a name="p_function_charcodeat_232">
<var class="function">charCodeAt</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>param</dt>
<dd><em>number</em>  an integer between 0 and string length (default = 0)</dd>
<dt>return</dt>
<dd><em>number</em>  a number indicating the Unicode value</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns a number indicating the Unicode value
  of the character at the given index.
</pre>
</div></div><pre id="source-0232"> <var class="keywords">function</var> charCodeAt(<var class="vars">$string</var>, <var class="vars">$index</var> = 0){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;NaN;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="vars">$index</var>  = (<var class="keywords">int</var>)<var class="vars">$index</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$index</var> &gt;= 0) {
       <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;unicode-&gt;toUnicode(<var class="vars">$string</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$string</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$string</var>)
        &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$index</var>, <var class="vars">$string</var>)) {
         <var class="vars">$result</var> = <var class="vars">$string</var>[<var class="vars">$index</var>];
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0233"><h2>
<a name="p_function_fromcharcode_233">
<var class="function">fromCharCode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em> (...)  a sequence of numbers that are Unicode values</dd>
<dt>return</dt>
<dd><em>string</em>        created string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns a string created by using the specified sequence of Unicode values
</pre>
</div></div><pre id="source-0233"> <var class="keywords">function</var> fromCharCode(){
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>-&gt;unicode, <var class="strings">'chr'</var>), <var class="vars">$args</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0234"><h2>
<a name="p_function_indexof_234">
<var class="function">indexOf</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#970" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#970</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>param</dt>
<dd><em>string</em>  a string representing the value to search for</dd>
<dt>param</dt>
<dd><em>number</em>  the location within the string to</dd>
<dt>return</dt>
<dd><em>number</em>  the index within string, or -1 if not found</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the index within the string of
  the first occurrence of the specified value, or -1 if not found.
                 start the search from (default = 0)
</pre>
</div></div><pre id="source-0234"> <var class="keywords">function</var> indexOf(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = -1;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="vars">$offset</var> = (<var class="keywords">int</var>)<var class="vars">$offset</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> === <var class="vars">$search</var>) {
       <var class="vars">$result</var> = 0;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
       <var class="keywords">if</var> (<var class="vars">$offset</var> === <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>);
         <var class="keywords">if</var> (<var class="vars">$result</var> === <var class="keywords">false</var>) {
           <var class="vars">$result</var> = -1;
         }
       } <var class="keywords">else</var> {
         <var class="vars">$offset</var> = (<var class="keywords">int</var>)<var class="vars">$offset</var>;
         <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;<var class="funcs">split</var>(<var class="vars">$string</var>);
         <var class="vars">$search</var> = <var class="vars">$this</var>-&gt;<var class="funcs">split</var>(<var class="vars">$search</var>);
         <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$string</var>);
         <var class="vars">$sublen</var> = <var class="funcs">count</var>(<var class="vars">$search</var>);
         <var class="keywords">if</var> (<var class="vars">$offset</var> &lt; 0) {
           <var class="vars">$i</var> = 0;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$offset</var> &gt; <var class="vars">$length</var>) {
           <var class="vars">$i</var> = <var class="vars">$length</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$i</var> = <var class="vars">$offset</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$sublen</var> === 0) {
           <var class="vars">$result</var> = <var class="vars">$i</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$index</var> = -1;
           <var class="vars">$j</var> = 0;
           <var class="keywords">while</var> (<var class="vars">$i</var> + <var class="vars">$j</var> &lt; <var class="vars">$length</var>) {
             <var class="keywords">if</var> (<var class="vars">$string</var>[<var class="vars">$i</var> + <var class="vars">$j</var>] === <var class="vars">$search</var>[<var class="vars">$j</var>]) {
               <var class="keywords">if</var> (++<var class="vars">$j</var> === <var class="vars">$sublen</var>) {
                 <var class="vars">$index</var> = <var class="vars">$i</var>;
                 <var class="keywords">break</var>;
               }
             } <var class="keywords">else</var> {
               <var class="vars">$i</var>++;
               <var class="vars">$j</var> = 0;
             }
           }
           <var class="vars">$result</var> = <var class="vars">$index</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0235"><h2>
<a name="p_function_lastindexof_235">
<var class="function">lastIndexOf</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#1045" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#1045</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>param</dt>
<dd><em>string</em>  a string representing the value to search for</dd>
<dt>param</dt>
<dd><em>number</em>  the location within the string to</dd>
<dt>return</dt>
<dd><em>number</em>  the index within string, or -1 if not found</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the index within the string of
  the last occurrence of the specified value, or -1 if not found.
                 start the search from (default = 0)
</pre>
</div></div><pre id="source-0235"> <var class="keywords">function</var> lastIndexOf(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$offset</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = -1;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="vars">$search</var> = (<var class="keywords">string</var>)<var class="vars">$search</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> === <var class="vars">$search</var>) {
       <var class="vars">$result</var> = 0;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
       <var class="keywords">if</var> (<var class="vars">$offset</var> === <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strrpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>);
         <var class="keywords">if</var> (<var class="vars">$result</var> === <var class="keywords">false</var>) {
           <var class="vars">$result</var> = -1;
         }
       } <var class="keywords">else</var> {
         <var class="vars">$offset</var> = (<var class="keywords">int</var>)<var class="vars">$offset</var>;
         <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;<var class="funcs">split</var>(<var class="vars">$string</var>);
         <var class="vars">$search</var> = <var class="vars">$this</var>-&gt;<var class="funcs">split</var>(<var class="vars">$search</var>);
         <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$string</var>);
         <var class="vars">$sublen</var> = <var class="funcs">count</var>(<var class="vars">$search</var>);
         <var class="keywords">if</var> (<var class="vars">$offset</var> &lt; 0) {
           <var class="vars">$i</var> = 0;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$offset</var> &gt; <var class="vars">$length</var>) {
           <var class="vars">$i</var> = <var class="vars">$length</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$i</var> = <var class="vars">$offset</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$sublen</var> === 0) {
           <var class="vars">$result</var> = <var class="vars">$i</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$j</var> = 0;
           <var class="keywords">while</var> (<var class="vars">$i</var> &gt;= 0) {
             <var class="keywords">if</var> (<var class="vars">$i</var> + <var class="vars">$j</var> &lt; <var class="vars">$length</var>
              &amp;&amp; <var class="vars">$string</var>[<var class="vars">$i</var> + <var class="vars">$j</var>] === <var class="vars">$search</var>[<var class="vars">$j</var>]) {
               <var class="keywords">if</var> (++<var class="vars">$j</var> === <var class="vars">$sublen</var>) {
                 <var class="keywords">break</var>;
               }
             } <var class="keywords">else</var> {
               <var class="vars">$i</var>--;
               <var class="vars">$j</var> = 0;
             }
           }
           <var class="vars">$result</var> = <var class="vars">$i</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0236"><h2>
<a name="p_function_length_236">
<var class="function">length</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>return</dt>
<dd><em>number</em>  the length of the string as Unicode</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Reflects the length of the string as Unicode
</pre>
</div></div><pre id="source-0236"> <var class="keywords">function</var> length(<var class="vars">$string</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strlen</var>(<var class="vars">$string</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0237"><h2>
<a name="p_function_slice_237">
<var class="function">slice</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#1971" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#1971</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>param</dt>
<dd><em>number</em>  the zero-based index at which to begin extraction</dd>
<dt>param</dt>
<dd><em>number</em>  the zero-based index at which to end extraction.</dd>
<dt>return</dt>
<dd><em>string</em>  extracted string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Extracts a section of a string and returns a new string
                 if omitted, extracts to the end of the string.
</pre>
</div></div><pre id="source-0237"> <var class="keywords">function</var> slice(<var class="vars">$string</var>, <var class="vars">$begin</var>, <var class="vars">$end</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$end</var> !== 0) {
       <var class="vars">$begin</var> = (<var class="keywords">int</var>)<var class="vars">$begin</var>;
       <var class="keywords">if</var> (<var class="vars">$end</var> === <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$begin</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$end</var> = (<var class="keywords">int</var>)<var class="vars">$end</var>;
         <var class="vars">$length</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strlen</var>(<var class="vars">$string</var>);
         <var class="keywords">if</var> (<var class="vars">$begin</var> &lt; 0) {
           <var class="vars">$begin</var> += <var class="vars">$length</var>;
           <var class="keywords">if</var> (<var class="vars">$begin</var> &lt; 0) {
             <var class="vars">$begin</var> = 0;
           }
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$begin</var> &gt; <var class="vars">$length</var>) {
           <var class="vars">$begin</var> = <var class="vars">$length</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$end</var> &lt; 0) {
           <var class="vars">$end</var> += <var class="vars">$length</var>;
           <var class="keywords">if</var> (<var class="vars">$end</var> &lt; 0) {
             <var class="vars">$end</var> = 0;
           }
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$end</var> &gt; <var class="vars">$length</var>) {
           <var class="vars">$end</var> = <var class="vars">$length</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$end</var> &lt; <var class="vars">$begin</var>) {
           <var class="vars">$end</var> = <var class="vars">$begin</var>;
         }
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$begin</var>, <var class="vars">$end</var> - <var class="vars">$begin</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0238"><h2>
<a name="p_function_split_238">
<var class="function">split</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>param</dt>
<dd><em>string</em>  specifies the character to use for separating the string</dd>
<dt>param</dt>
<dd><em>number</em>  integer specifying a limit on the number of</dd>
<dt>return</dt>
<dd><em>array</em>   split array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Splits a string into an array of strings by
  separating the string into substrings.
                 splits to be found
</pre>
</div></div><pre id="source-0238"> <var class="keywords">function</var> <var class="funcs">split</var>(<var class="vars">$string</var>, <var class="vars">$separator</var> = <var class="strings">''</var>, <var class="vars">$limit</var> = -1){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>) &amp;&amp; <var class="funcs">is_scalar</var>(<var class="vars">$separator</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="vars">$separator</var> = (<var class="keywords">string</var>)<var class="vars">$separator</var>;
     <var class="keywords">if</var> (<var class="vars">$separator</var> == <var class="keywords">null</var>) {
       <var class="vars">$this</var>-&gt;unicode-&gt;setEncoding();
       <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;unicode-&gt;toUTF8(<var class="vars">$string</var>, <var class="keywords">true</var>);
       <var class="vars">$result</var> = <var class="funcs">preg_split</var>(<var class="strings">'|(.{1})|su'</var>, <var class="vars">$string</var>, -1,
                   PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE);
       <var class="vars">$result</var> = <var class="funcs">array_map</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>-&gt;unicode, <var class="strings">'fromUTF8'</var>), <var class="vars">$result</var>);
       <var class="vars">$this</var>-&gt;unicode-&gt;restoreEncoding();
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="funcs">explode</var>(<var class="vars">$separator</var>, <var class="vars">$string</var>);
     }
     <var class="vars">$limit</var> = (<var class="keywords">int</var>)<var class="vars">$limit</var>;
     <var class="keywords">if</var> (<var class="vars">$limit</var> === 0) {
       <var class="vars">$result</var> = <var class="keywords">array</var>();
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$limit</var> &gt; 0) {
       <var class="vars">$result</var> = <var class="funcs">array_slice</var>(<var class="vars">$result</var>, 0, <var class="vars">$limit</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0239"><h2>
<a name="p_function_substr_239">
<var class="function">substr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#1894" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#1894</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>param</dt>
<dd><em>number</em>  location at which to begin extracting characters</dd>
<dt>param</dt>
<dd><em>number</em>  The number of characters to extract</dd>
<dt>return</dt>
<dd><em>string</em>  extracted string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return the characters in string beginning at the specified
  location through the specified number of characters.
</pre>
</div></div><pre id="source-0239"> <var class="keywords">function</var> <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$start</var>, <var class="vars">$length</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var> &amp;&amp; <var class="vars">$length</var> !== 0) {
       <var class="vars">$start</var> = (<var class="keywords">int</var>)<var class="vars">$start</var>;
       <var class="keywords">if</var> (<var class="vars">$length</var> === <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$start</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$strlen</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strlen</var>(<var class="vars">$string</var>);
         <var class="keywords">if</var> (<var class="vars">$start</var> &lt; 0) {
           <var class="vars">$start</var> += <var class="vars">$strlen</var>;
           <var class="keywords">if</var> (<var class="vars">$start</var> &lt; 0) {
             <var class="vars">$start</var> = 0;
           }
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$start</var> &gt; <var class="vars">$strlen</var>) {
           <var class="vars">$start</var> = <var class="vars">$strlen</var>;
         }
         <var class="vars">$length</var> = (<var class="keywords">int</var>)<var class="vars">$length</var>;
         <var class="keywords">if</var> (<var class="vars">$length</var> &lt; 0) {
            <var class="vars">$length</var> = 0;
         }
         <var class="vars">$length</var> += <var class="vars">$start</var>;
         <var class="keywords">if</var> (<var class="vars">$length</var> &gt; <var class="vars">$strlen</var>) {
           <var class="vars">$length</var> = <var class="vars">$strlen</var>;
         }
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$start</var>, <var class="vars">$length</var> - <var class="vars">$start</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0240"><h2>
<a name="p_function_substring_240">
<var class="function">substring</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#703" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/source/js/src/jsstr.c#703</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>param</dt>
<dd><em>number</em>  first index between 0 and string length</dd>
<dt>param</dt>
<dd><em>number</em>  (optional) next index between 0 and string length</dd>
<dt>return</dt>
<dd><em>string</em>  extracted string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the characters in a string between two indexes into the string
</pre>
</div></div><pre id="source-0240"> <var class="keywords">function</var> substring(<var class="vars">$string</var>, <var class="vars">$begin</var>, <var class="vars">$end</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var>) {
       <var class="vars">$length</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strlen</var>(<var class="vars">$string</var>);
       <var class="vars">$begin</var> = (<var class="keywords">int</var>)<var class="vars">$begin</var>;
       <var class="keywords">if</var> (<var class="vars">$begin</var> &lt; 0) {
         <var class="vars">$begin</var> = 0;
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$begin</var> &gt; <var class="vars">$length</var>) {
         <var class="vars">$begin</var> = <var class="vars">$length</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$end</var> === <var class="keywords">null</var>) {
         <var class="vars">$end</var> = <var class="vars">$length</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$end</var> = (<var class="keywords">int</var>)<var class="vars">$end</var>;
         <var class="keywords">if</var> (<var class="vars">$end</var> &lt; 0) {
           <var class="vars">$end</var> = 0;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$end</var> &gt; <var class="vars">$length</var>) {
           <var class="vars">$end</var> = <var class="vars">$length</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$end</var> &lt; <var class="vars">$begin</var>) {
           <var class="vars">$tmp</var> = <var class="vars">$begin</var>;
           <var class="vars">$begin</var> = <var class="vars">$end</var>;
           <var class="vars">$end</var> = <var class="vars">$tmp</var>;
         }
       }
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$begin</var>, <var class="vars">$end</var> - <var class="vars">$begin</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0241"><h2>
<a name="p_function_tolowercase_241">
<var class="function">toLowerCase</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>return</dt>
<dd><em>string</em>  converted string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return the string that converted to lowercase
</pre>
</div></div><pre id="source-0241"> <var class="keywords">function</var> toLowerCase(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var>) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strtolower</var>(<var class="vars">$string</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0242"><h2>
<a name="p_function_touppercase_242">
<var class="function">toUpperCase</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>return</dt>
<dd><em>string</em>  converted string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return the string that converted to uppercase
</pre>
</div></div><pre id="source-0242"> <var class="keywords">function</var> toUpperCase(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="strings">''</var>) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strtoupper</var>(<var class="vars">$string</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0243"><h2>
<a name="p_function_tostring_243">
<var class="function">toString</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   subject object</dd>
<dt>return</dt>
<dd><em>string</em>  a string representing the specified object</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return a string representing the specified object
</pre>
</div></div><pre id="source-0243"> <var class="keywords">function</var> toString(<var class="vars">$object</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">switch</var> (<var class="keywords">true</var>) {
     <var class="keywords">case</var> <var class="funcs">is_int</var>(<var class="vars">$object</var>):
     <var class="keywords">case</var> <var class="funcs">is_float</var>(<var class="vars">$object</var>):
     <var class="keywords">case</var> <var class="funcs">is_string</var>(<var class="vars">$object</var>):
     <var class="keywords">case</var> <var class="funcs">is_resource</var>(<var class="vars">$object</var>):
         <var class="vars">$result</var> = (<var class="keywords">string</var>)<var class="vars">$object</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="funcs">is_bool</var>(<var class="vars">$object</var>):
         <var class="vars">$result</var> = <var class="vars">$object</var> ? <var class="strings">'true'</var> : <var class="strings">'false'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="funcs">is_null</var>(<var class="vars">$object</var>):
         <var class="vars">$result</var> = <var class="strings">'null'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="funcs">is_object</var>(<var class="vars">$object</var>):
         <var class="keywords">foreach</var> (<var class="keywords">array</var>(<var class="strings">'toString'</var>, <var class="strings">'__toString'</var>) <var class="keywords">as</var> <var class="vars">$method</var>) {
           <var class="vars">$func</var> = <var class="keywords">array</var>(<var class="vars">$object</var>, <var class="vars">$method</var>);
           <var class="keywords">if</var> (<var class="funcs">is_callable</var>(<var class="vars">$func</var>)) {
             <var class="vars">$result</var> = @<var class="funcs">call_user_func</var>(<var class="vars">$func</var>);
             <var class="keywords">break</var> 2;
           }
         }
     <var class="keywords">case</var> <var class="funcs">is_array</var>(<var class="vars">$object</var>):
         <var class="funcs">ob_start</var>();
         <var class="funcs">var_export</var>(<var class="vars">$object</var>);
         <var class="vars">$result</var> = <var class="funcs">ob_get_contents</var>();
         <var class="funcs">ob_end_clean</var>();
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$result</var> = <var class="strings">''</var>;
         <var class="keywords">break</var>;
   }
   <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$result</var>)) {
     <var class="vars">$result</var> = <var class="strings">''</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0244"><h2>
<a name="p_function_escape_244">
<var class="function">escape</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/ident?i=js_str_escape" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/ident?i=js_str_escape</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>return</dt>
<dd><em>string</em>  escaped string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Encodes a string,
 replacing certain characters with a hexadecimal escape sequence.
 Note:
  Not part of any standard.
  Mentioned in a non-normative section of ECMA-262.
 See ECMA-262 Edition 3 B.2.1
 This method handles any encoding with Unicode,
 and it is different on JavaScript.
</pre>
</div></div><pre id="source-0244"> <var class="keywords">function</var> escape(<var class="vars">$string</var>){
   <var class="keywords">static</var> <var class="vars">$digits</var> = <var class="keywords">array</var>(<var class="strings">'0'</var>, <var class="strings">'1'</var>, <var class="strings">'2'</var>, <var class="strings">'3'</var>, <var class="strings">'4'</var>, <var class="strings">'5'</var>, <var class="strings">'6'</var>, <var class="strings">'7'</var>,
                          <var class="strings">'8'</var>, <var class="strings">'9'</var>, <var class="strings">'A'</var>, <var class="strings">'B'</var>, <var class="strings">'C'</var>, <var class="strings">'D'</var>, <var class="strings">'E'</var>, <var class="strings">'F'</var>),
   <var class="vars">$url_char_types</var> = <var class="keywords">array</var>(
   <var class="comments">//      Bit 0         xalpha          -- the alphas</var>
   <var class="comments">//      Bit 1         xpalpha         -- as xalpha but</var>
   <var class="comments">//                           converts spaces to plus and plus to %20</var>
   <var class="comments">//      Bit 2 ...     path            -- as xalphas but doesn't escape '/'
   //
   //   0 1 2 3 4 5 6 7 8 9 A B C D E F
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,       // 0x
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,       // 1x
        0,0,0,0,0,0,0,0,0,0,7,4,0,7,7,4,       // 2x   !"#$%&amp;'()*+,-./</var>
        7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,       <var class="comments">// 3x  0123456789:;&lt;=&gt;?</var>
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,       <var class="comments">// 4x  @ABCDEFGHIJKLMNO</var>
        7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,7,       <var class="comments">// 5X  PQRSTUVWXYZ[\]^_</var>
        0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,       <var class="comments">// 6x  `abcdefghijklmno</var>
        7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,       <var class="comments">// 7X  pqrstuvwxyz{\}~  DEL</var>
        0
   );
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$url_xalphas</var>  = 1;
   <var class="vars">$url_xpalphas</var> = 2;
   <var class="vars">$url_path</var>     = 4;
   <var class="vars">$mask</var> = <var class="vars">$url_xalphas</var> | <var class="vars">$url_xpalphas</var> | <var class="vars">$url_path</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="strings">''</var>;
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;unicode-&gt;toUnicode(<var class="vars">$string</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$string</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$string</var>)) {
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$string</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
         <var class="vars">$ch</var> = <var class="vars">$string</var>[<var class="vars">$i</var>];
         <var class="keywords">if</var> (<var class="vars">$ch</var> &lt; 128 &amp;&amp; (<var class="vars">$url_char_types</var>[<var class="vars">$ch</var>] &amp; <var class="vars">$mask</var>)) {
           <var class="vars">$result</var> .= <var class="funcs">chr</var>(<var class="vars">$ch</var>);
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$ch</var> &lt; 256) {
           <var class="keywords">if</var> (<var class="vars">$mask</var> === <var class="vars">$url_xpalphas</var> &amp;&amp; <var class="vars">$ch</var> === <var class="strings">' '</var>) {
             <var class="vars">$result</var> .= <var class="strings">'+'</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$result</var> .= <var class="strings">'%'</var> . <var class="vars">$digits</var>[<var class="vars">$ch</var> &gt;&gt; 4] . <var class="vars">$digits</var>[<var class="vars">$ch</var> &amp; 0xF];
           }
         } <var class="keywords">else</var> {
           <var class="vars">$result</var> .= <var class="strings">'%u'</var> . <var class="vars">$digits</var>[<var class="vars">$ch</var> &gt;&gt; 12]
                           . <var class="vars">$digits</var>[(<var class="vars">$ch</var> &amp; 0xF00) &gt;&gt; 8]
                           . <var class="vars">$digits</var>[(<var class="vars">$ch</var> &amp; 0xF0) &gt;&gt; 4]
                           . <var class="vars">$digits</var>[<var class="vars">$ch</var> &amp; 0xF];
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0245"><h2>
<a name="p_function_unescape_245">
<var class="function">unescape</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/ident?i=str_unescape" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/ident?i=str_unescape</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>return</dt>
<dd><em>string</em>  decoded string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Decodes a value that has been encoded in hexadecimal (e.g., a cookie).
 Note:
  Not part of any standard.
  Mentioned in a non-normative section of ECMA-262.
 See ECMA-262 Edition 3 B.2.2
 This method handles any encoding with Unicode,
 and it is different on JavaScript.
</pre>
</div></div><pre id="source-0245"> <var class="keywords">function</var> unescape(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="vars">$i</var> = 0;
     <var class="vars">$chars</var> = <var class="keywords">array</var>();
     <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$string</var>);
     <var class="keywords">while</var> (<var class="vars">$i</var> &lt; <var class="vars">$length</var>) {
       <var class="vars">$ch</var> = <var class="vars">$string</var>[<var class="vars">$i</var>++];
       <var class="keywords">if</var> (<var class="vars">$ch</var> === <var class="strings">'%'</var>) {
         <var class="keywords">if</var> (<var class="vars">$i</var> + 1 &lt; <var class="vars">$length</var>
          &amp;&amp; <var class="vars">$this</var>-&gt;_isHex(<var class="vars">$string</var>[<var class="vars">$i</var>])
          &amp;&amp; <var class="vars">$this</var>-&gt;_isHex(<var class="vars">$string</var>[<var class="vars">$i</var> + 1])) {
           <var class="vars">$ch</var> = (<var class="funcs">hexdec</var>(<var class="vars">$string</var>[<var class="vars">$i</var>]) &lt;&lt; 4) + <var class="funcs">hexdec</var>(<var class="vars">$string</var>[<var class="vars">$i</var> + 1]);
           <var class="vars">$i</var> += 2;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$i</var> + 4 &lt; <var class="vars">$length</var> &amp;&amp; <var class="vars">$string</var>[<var class="vars">$i</var>] === <var class="strings">'u'</var>
                 &amp;&amp; <var class="vars">$this</var>-&gt;_isHex(<var class="vars">$string</var>[<var class="vars">$i</var> + 1])
                 &amp;&amp; <var class="vars">$this</var>-&gt;_isHex(<var class="vars">$string</var>[<var class="vars">$i</var> + 2])
                 &amp;&amp; <var class="vars">$this</var>-&gt;_isHex(<var class="vars">$string</var>[<var class="vars">$i</var> + 3])
                 &amp;&amp; <var class="vars">$this</var>-&gt;_isHex(<var class="vars">$string</var>[<var class="vars">$i</var> + 4])) {
           <var class="vars">$ch</var> = (((((<var class="funcs">hexdec</var>(<var class="vars">$string</var>[<var class="vars">$i</var> + 1])  &lt;&lt; 4)
                    + <var class="funcs">hexdec</var>(<var class="vars">$string</var>[<var class="vars">$i</var> + 2])) &lt;&lt; 4)
                    + <var class="funcs">hexdec</var>(<var class="vars">$string</var>[<var class="vars">$i</var> + 3])) &lt;&lt; 4)
                    + <var class="funcs">hexdec</var>(<var class="vars">$string</var>[<var class="vars">$i</var> + 4]);
           <var class="vars">$i</var> += 5;
         }
       }
       <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$ch</var>)) {
         <var class="vars">$ch</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$ch</var>);
       }
       <var class="vars">$result</var> .= <var class="vars">$ch</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0246"><h2>
<a name="p_function__encode_246">
<var class="function">_encode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> ECMA 3, 15.1.3 URI Handling Function Properties
 The following are implementations of the algorithms
 given in the ECMA specification for the hidden functions
 &#039;Encode&#039; and &#039;Decode&#039;.
</pre>
</div></div><pre id="source-0246"> <var class="keywords">function</var> _encode(<var class="vars">$string</var>, <var class="vars">$unescaped_set</var> = <var class="keywords">null</var>, <var class="vars">$unescaped_set2</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="vars">$chars</var> = <var class="vars">$this</var>-&gt;unicode-&gt;toUnicode(<var class="vars">$string</var>);
     <var class="keywords">unset</var>(<var class="vars">$string</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$chars</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$chars</var>)) {
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$chars</var>);
       <var class="vars">$hex_buf</var> = <var class="keywords">array</var>(<var class="strings">'%'</var>);
       <var class="keywords">for</var> (<var class="vars">$k</var> = 0; <var class="vars">$k</var> &lt; <var class="vars">$length</var>; <var class="vars">$k</var>++) {
         <var class="vars">$c</var> = <var class="vars">$chars</var>[<var class="vars">$k</var>];
         <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$unescaped_set</var>[<var class="vars">$c</var>])
          || <var class="keywords">isset</var>(<var class="vars">$unescaped_set2</var>, <var class="vars">$unescaped_set2</var>[<var class="vars">$c</var>])) {
           <var class="vars">$result</var> .= <var class="funcs">chr</var>(<var class="vars">$c</var>);
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$c</var> &gt;= 0xDC00 &amp;&amp; <var class="vars">$c</var> &lt;= 0xDFFF) {
             <var class="vars">$result</var> = <var class="strings">''</var>;
             <var class="keywords">break</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$c</var> &lt; 0xD800 || <var class="vars">$c</var> &gt; 0xDBFF) {
             <var class="vars">$v</var> = <var class="vars">$c</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$k</var>++;
             <var class="keywords">if</var> (<var class="vars">$k</var> === <var class="vars">$length</var>) {
               <var class="vars">$result</var> = <var class="strings">''</var>;
               <var class="keywords">break</var>;
             }
             <var class="vars">$c2</var> = <var class="vars">$chars</var>[<var class="vars">$k</var>];
             <var class="keywords">if</var> (<var class="vars">$c2</var> &lt; 0xDC00 || <var class="vars">$c2</var> &gt; 0xDFFF) {
               <var class="vars">$result</var> = <var class="strings">''</var>;
               <var class="keywords">break</var>;
             }
             <var class="vars">$v</var> = ((<var class="vars">$c</var> - 0xD800) &lt;&lt; 10) + (<var class="vars">$c2</var> - 0xDC00) + 0x10000;
           }
           <var class="comments">// convert code into a UTF-8 buffer</var>
           <var class="comments">// which must be at least 6 bytes long.</var>
           <var class="comments">// rawurlencode() is a shortcut for process.</var>
           <var class="vars">$result</var> .= <var class="funcs">rawurlencode</var>(<var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$v</var>));
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0247"><h2>
<a name="p_function__decode_247">
<var class="function">_decode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0247"> <var class="keywords">function</var> _decode(<var class="vars">$string</var>, <var class="vars">$reserved_set</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="vars">$chars</var> = <var class="vars">$this</var>-&gt;unicode-&gt;toUnicode(<var class="vars">$string</var>);
     <var class="keywords">unset</var>(<var class="vars">$string</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$chars</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$chars</var>)) {
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$chars</var>);
       <var class="vars">$percent</var> = <var class="funcs">ord</var>(<var class="strings">'%'</var>);
       <var class="keywords">for</var> (<var class="vars">$k</var> = 0; <var class="vars">$k</var> &lt; <var class="vars">$length</var>; <var class="vars">$k</var>++) {
         <var class="vars">$c</var> = <var class="vars">$chars</var>[<var class="vars">$k</var>];
         <var class="keywords">if</var> (<var class="vars">$c</var> === <var class="vars">$percent</var>) {
           <var class="vars">$start</var> = <var class="vars">$k</var>;
           <var class="keywords">if</var> (<var class="vars">$k</var> + 2 &gt;= <var class="vars">$length</var>) {
             <var class="vars">$result</var> = <var class="strings">''</var>;
             <var class="keywords">break</var>;
           }
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;_isHex(<var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$chars</var>[<var class="vars">$k</var> + 1]))
            || !<var class="vars">$this</var>-&gt;_isHex(<var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$chars</var>[<var class="vars">$k</var> + 2]))) {
             <var class="vars">$result</var> = <var class="strings">''</var>;
             <var class="keywords">break</var>;
           }
           <var class="vars">$b</var> = (<var class="funcs">hexdec</var>(<var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$chars</var>[<var class="vars">$k</var> + 1])) &lt;&lt; 4)
              +  <var class="funcs">hexdec</var>(<var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$chars</var>[<var class="vars">$k</var> + 2]));
           <var class="vars">$k</var> += 2;
           <var class="keywords">if</var> (!(<var class="vars">$b</var> &amp; 0x80)) {
             <var class="vars">$c</var> = <var class="vars">$b</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$n</var> = 1;
             <var class="keywords">while</var> (<var class="vars">$b</var> &amp; (0x80 &gt;&gt; <var class="vars">$n</var>)) {
               <var class="vars">$n</var>++;
             }
             <var class="keywords">if</var> (<var class="vars">$n</var> === 1 || <var class="vars">$n</var> &gt; 6) {
               <var class="vars">$result</var> = <var class="strings">''</var>;
               <var class="keywords">break</var>;
             }
             <var class="vars">$octets</var> = <var class="keywords">array</var>(<var class="vars">$b</var>);
             <var class="keywords">if</var> (<var class="vars">$k</var> + 3 * (<var class="vars">$n</var> - 1) &gt;= <var class="vars">$length</var>) {
               <var class="vars">$result</var> = <var class="strings">''</var>;
               <var class="keywords">break</var>;
             }
             <var class="keywords">for</var> (<var class="vars">$j</var> = 1; <var class="vars">$j</var> &lt; <var class="vars">$n</var>; <var class="vars">$j</var>++) {
               <var class="vars">$k</var>++;
               <var class="keywords">if</var> (<var class="vars">$chars</var>[<var class="vars">$k</var>] !== <var class="vars">$percent</var>) {
                 <var class="vars">$result</var> = <var class="strings">''</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;_isHex(<var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$chars</var>[<var class="vars">$k</var> + 1]))
                || !<var class="vars">$this</var>-&gt;_isHex(<var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$chars</var>[<var class="vars">$k</var> + 2]))) {
                 <var class="vars">$result</var> = <var class="strings">''</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="vars">$b</var> = (<var class="funcs">hexdec</var>(<var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$chars</var>[<var class="vars">$k</var> + 1])) &lt;&lt; 4)
                  +  <var class="funcs">hexdec</var>(<var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$chars</var>[<var class="vars">$k</var> + 2]));
               <var class="keywords">if</var> ((<var class="vars">$b</var> &amp; 0xC0) !== 0x80) {
                 <var class="vars">$result</var> = <var class="strings">''</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="vars">$k</var> += 2;
               <var class="vars">$octets</var>[<var class="vars">$j</var>] = <var class="vars">$b</var>;
             }
             <var class="vars">$v</var> = <var class="vars">$this</var>-&gt;utf8ToOneUcs4Char(<var class="vars">$octets</var>, <var class="vars">$n</var>);
             <var class="keywords">if</var> (<var class="vars">$v</var> &gt;= 0x10000) {
               <var class="vars">$v</var> -= 0x10000;
               <var class="keywords">if</var> (<var class="vars">$v</var> &gt; 0xFFFFF) {
                 <var class="vars">$result</var> = <var class="strings">''</var>;
                 <var class="keywords">break</var>;
               }
               <var class="vars">$c</var> = ((<var class="vars">$v</var> &amp; 0x3FF) + 0xDC00);
               <var class="vars">$h</var> = ((<var class="vars">$v</var> &gt;&gt; 10) + 0xD800);
               <var class="vars">$result</var> .= <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$h</var>);
             } <var class="keywords">else</var> {
               <var class="vars">$c</var> = <var class="vars">$v</var>;
             }
           }
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$reserved_set</var>, <var class="vars">$reserved_set</var>[<var class="vars">$c</var>])) {
             <var class="vars">$len</var> = <var class="vars">$k</var> - <var class="vars">$start</var> + 1;
             <var class="vars">$idx</var> = <var class="vars">$start</var>;
             <var class="keywords">while</var> (--<var class="vars">$len</var> &gt;= 0) {
               <var class="vars">$result</var> .= <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$chars</var>[<var class="vars">$idx</var>++]);
             }
           } <var class="keywords">else</var> {
             <var class="vars">$result</var> .= <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$c</var>);
           }
         } <var class="keywords">else</var> {
           <var class="vars">$result</var> .= <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">chr</var>(<var class="vars">$c</var>);
         }
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$result</var> != <var class="keywords">null</var>) {
     <var class="comments">//</var>
     <var class="comments">// Note: Using $posql-&gt;charset for not UTF-8 encoding</var>
     <var class="comments">//</var>
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;fromUTF8(<var class="vars">$result</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0248"><h2>
<a name="p_function__ishex_248">
<var class="function">_isHex</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0248"> <var class="keywords">function</var> _isHex(<var class="vars">$x</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$x</var>) === 1) {
     <var class="keywords">if</var> ((<var class="vars">$x</var> &gt;= <var class="strings">'0'</var> &amp;&amp; <var class="vars">$x</var> &lt;= <var class="strings">'9'</var>)
      || (<var class="vars">$x</var> &gt;= <var class="strings">'A'</var> &amp;&amp; <var class="vars">$x</var> &lt;= <var class="strings">'F'</var>)
      || (<var class="vars">$x</var> &gt;= <var class="strings">'a'</var> &amp;&amp; <var class="vars">$x</var> &lt;= <var class="strings">'f'</var>)) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0249"><h2>
<a name="p_function_utf8tooneucs4char_249">
<var class="function">utf8ToOneUcs4Char</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Convert a utf8 character sequence into a UCS-4 character and return that
 character.  It is assumed that the caller already checked that the sequence
 is valid.
</pre>
</div></div><pre id="source-0249"> <var class="keywords">function</var> utf8ToOneUcs4Char(<var class="vars">$utf8_buffer</var>, <var class="vars">$utf8_length</var>){
   <var class="comments">// from Unicode 3.1, non-shortest form is illegal</var>
   <var class="keywords">static</var> <var class="vars">$minucs4_tables</var> = <var class="keywords">array</var>(
     0x00000080, 0x00000800, 0x0001000, 0x0020000, 0x0400000
   );
   <var class="vars">$i</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$utf8_length</var> === 1) {
     <var class="vars">$ucs4_char</var> = <var class="vars">$utf8_buffer</var>[<var class="vars">$i</var>];
   } <var class="keywords">else</var> {
     <var class="vars">$ucs4_char</var> = <var class="vars">$utf8_buffer</var>[<var class="vars">$i</var>++] &amp; ((1 &lt;&lt; (7 - <var class="vars">$utf8_length</var>)) - 1);
     <var class="vars">$minucs4_char</var> = <var class="vars">$minucs4_tables</var>[<var class="vars">$utf8_length</var> - 2];
     <var class="keywords">while</var> (--<var class="vars">$utf8_length</var>) {
       <var class="vars">$ucs4_char</var> = <var class="vars">$ucs4_char</var> &lt;&lt; 6 | (<var class="vars">$utf8_buffer</var>[<var class="vars">$i</var>++] &amp; 0x3F);
     }
     <var class="keywords">if</var> (<var class="vars">$ucs4_char</var> &lt; <var class="vars">$minucs4_char</var>
      || <var class="vars">$ucs4_char</var> === 0xFFFE || <var class="vars">$ucs4_char</var> === 0xFFFF) {
       <var class="vars">$ucs4_char</var> = 0xFFFD;
     }
   }
   <var class="keywords">return</var> <var class="vars">$ucs4_char</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0250"><h2>
<a name="p_function__geturireservedpluspound_250">
<var class="function">_getURIReservedPlusPound</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> URI reserved plus pound
</pre>
</div></div><pre id="source-0250"> <var class="keywords">function</var> _getURIReservedPlusPound(){
   <var class="keywords">static</var> <var class="vars">$inited</var> = <var class="keywords">false</var>, <var class="vars">$uri_reserved_plus_pounds</var> = <var class="keywords">array</var>(
     <var class="strings">';'</var>, <var class="strings">'/'</var>, <var class="strings">'?'</var>, <var class="strings">':'</var>, <var class="strings">'@'</var>, <var class="strings">'&amp;'</var>, <var class="strings">'='</var>, <var class="strings">'+'</var>, <var class="strings">'$'</var>, <var class="strings">','</var>, <var class="strings">'#'</var>
   );
   <var class="keywords">if</var> (!<var class="vars">$inited</var>) {
     <var class="vars">$uri_reserved_plus_pounds</var> = <var class="funcs">array_flip</var>(
       <var class="funcs">array_map</var>(<var class="strings">'ord'</var>, <var class="vars">$uri_reserved_plus_pounds</var>)
     );
     <var class="vars">$inited</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$uri_reserved_plus_pounds</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0251"><h2>
<a name="p_function__geturiunescaped_251">
<var class="function">_getURIUnescaped</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> URI unescaped
</pre>
</div></div><pre id="source-0251"> <var class="keywords">function</var> _getURIUnescaped(){
   <var class="keywords">static</var> <var class="vars">$inited</var> = <var class="keywords">false</var>, <var class="vars">$uri_unescaped</var> = <var class="keywords">array</var>(
     <var class="strings">'0'</var>, <var class="strings">'1'</var>, <var class="strings">'2'</var>, <var class="strings">'3'</var>, <var class="strings">'4'</var>, <var class="strings">'5'</var>, <var class="strings">'6'</var>, <var class="strings">'7'</var>, <var class="strings">'8'</var>, <var class="strings">'9'</var>,
     <var class="strings">'A'</var>, <var class="strings">'B'</var>, <var class="strings">'C'</var>, <var class="strings">'D'</var>, <var class="strings">'E'</var>, <var class="strings">'F'</var>, <var class="strings">'G'</var>, <var class="strings">'H'</var>, <var class="strings">'I'</var>, <var class="strings">'J'</var>, <var class="strings">'K'</var>, <var class="strings">'L'</var>, <var class="strings">'M'</var>,
     <var class="strings">'N'</var>, <var class="strings">'O'</var>, <var class="strings">'P'</var>, <var class="strings">'Q'</var>, <var class="strings">'R'</var>, <var class="strings">'S'</var>, <var class="strings">'T'</var>, <var class="strings">'U'</var>, <var class="strings">'V'</var>, <var class="strings">'W'</var>, <var class="strings">'X'</var>, <var class="strings">'Y'</var>, <var class="strings">'Z'</var>,
     <var class="strings">'a'</var>, <var class="strings">'b'</var>, <var class="strings">'c'</var>, <var class="strings">'d'</var>, <var class="strings">'e'</var>, <var class="strings">'f'</var>, <var class="strings">'g'</var>, <var class="strings">'h'</var>, <var class="strings">'i'</var>, <var class="strings">'j'</var>, <var class="strings">'k'</var>, <var class="strings">'l'</var>, <var class="strings">'m'</var>,
     <var class="strings">'n'</var>, <var class="strings">'o'</var>, <var class="strings">'p'</var>, <var class="strings">'q'</var>, <var class="strings">'r'</var>, <var class="strings">'s'</var>, <var class="strings">'t'</var>, <var class="strings">'u'</var>, <var class="strings">'v'</var>, <var class="strings">'w'</var>, <var class="strings">'x'</var>, <var class="strings">'y'</var>, <var class="strings">'z'</var>,
     <var class="strings">'-'</var>, <var class="strings">'_'</var>, <var class="strings">'.'</var>, <var class="strings">'!'</var>, <var class="strings">'~'</var>, <var class="strings">'*'</var>, <var class="strings">'\''</var>, <var class="strings">'('</var>, <var class="strings">')'</var>
   );
   <var class="keywords">if</var> (!<var class="vars">$inited</var>) {
     <var class="vars">$uri_unescaped</var> = <var class="funcs">array_flip</var>(<var class="funcs">array_map</var>(<var class="strings">'ord'</var>, <var class="vars">$uri_unescaped</var>));
     <var class="vars">$inited</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$uri_unescaped</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0252"><h2>
<a name="p_function_encodeuri_252">
<var class="function">encodeURI</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/ident?i=str_encodeURI" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/ident?i=str_encodeURI</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>return</dt>
<dd><em>string</em>  encoded string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Encodes a Uniform Resource Identifier (URI) by replacing each
 instance of certain characters by one, two, three, or
 four escape sequences representing the UTF-8 encoding of the character
 (will only be four escape sequences for characters composed of two
  &quot;surrogate&quot; characters).
 Assumes that the URI is a complete URI, so does not encode reserved
 characters that have special meaning in the URI.
 Compatibility with UTF-8.
</pre>
</div></div><pre id="source-0252"> <var class="keywords">function</var> encodeURI(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_encode(<var class="vars">$string</var>, <var class="vars">$this</var>-&gt;_getURIReservedPlusPound(),
                                     <var class="vars">$this</var>-&gt;_getURIUnescaped());
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0253"><h2>
<a name="p_function_encodeuricomponent_253">
<var class="function">encodeURIComponent</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/ident?i=str_encodeURI_Component" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/ident?i=str_encodeURI_Component</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>return</dt>
<dd><em>string</em>  encoded string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Encodes a Uniform Resource Identifier (URI) component by replacing each
 instance of certain characters by one, two, three, or four escape
 sequences representing the UTF-8 encoding of the character
 (will only be four escape sequences for characters composed of two
  &quot;surrogate&quot; characters).
 encodeURIComponent escapes all characters except the following:
 alphabetic, decimal digits, - _ . ! ~ * &#039; ( )
 Compatibility with UTF-8.
</pre>
</div></div><pre id="source-0253"> <var class="keywords">function</var> encodeURIComponent(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_encode(<var class="vars">$string</var>, <var class="vars">$this</var>-&gt;_getURIUnescaped());
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0254"><h2>
<a name="p_function_decodeuri_254">
<var class="function">decodeURI</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/ident?i=str_decodeURI" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/ident?i=str_decodeURI</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>return</dt>
<dd><em>string</em>  decoded string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Decodes a Uniform Resource Identifier (URI) previously
 created by encodeURI or by a similar routine.
 Replaces each escape sequence in the encoded URI
 with the character that it represents.
 Does not decode escape sequences that could not have
 been introduced by encodeURI.
 Compatibility with UTF-8.
</pre>
</div></div><pre id="source-0254"> <var class="keywords">function</var> decodeURI(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_decode(<var class="vars">$string</var>, <var class="vars">$this</var>-&gt;_getURIReservedPlusPound());
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0255"><h2>
<a name="p_function_decodeuricomponent_255">
<var class="function">decodeURIComponent</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://mxr.mozilla.org/mozilla/ident?i=str_decodeURI_Component" target="_blank" title="open in blanks window">http://mxr.mozilla.org/mozilla/ident?i=str_decodeURI_Component</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>return</dt>
<dd><em>string</em>  decoded string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Decodes a Uniform Resource Identifier (URI) component previously
 created by encodeURIComponent or by a similar routine.
 Replaces each escape sequence in the encoded URI component with
 the character that it represents.
 Compatibility with UTF-8.
</pre>
</div></div><pre id="source-0255"> <var class="keywords">function</var> decodeURIComponent(<var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_decode(<var class="vars">$string</var>, <var class="keywords">null</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0256"><h2>
<a name="p_class_posql_archive_256">
<var class="class">Posql_Archive</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class implements compression and the archive methods
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Archive</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0257"><h2>
<a name="p_var_posql_257">
<var class="var">posql</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>    maintains reference of the Posql class instance</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0258"><h2>
<a name="p_var__inited_258">
<var class="var">_inited</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>   whether initialized or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0259"><h2>
<a name="p_function_posql_archive_259">
<var class="function">Posql_Archive</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0259"> <var class="keywords">function</var> Posql_Archive(){
   <var class="vars">$this</var>-&gt;_init();
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0260"><h2>
<a name="p_function___destruct_260">
<var class="function">__destruct</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Destructor for PHP Version 5+
 Release all referenced properties
</pre>
</div></div><pre id="source-0260"> <var class="keywords">function</var> <var class="keywords">__destruct</var>(){
   <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;posql);
   <var class="keywords">foreach</var> (<var class="funcs">get_object_vars</var>(<var class="vars">$this</var>) <var class="keywords">as</var> <var class="vars">$prop</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">if</var> (<var class="vars">$prop</var> != <var class="keywords">null</var>) {
       <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;{<var class="vars">$prop</var>});
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0261"><h2>
<a name="p_function__referproperty_261">
<var class="function">_referProperty</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>object</em>  give of the Posql self</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Reference to the Posql, and its properties
</pre>
</div></div><pre id="source-0261"> <var class="keywords">function</var> _referProperty(&amp;<var class="vars">$posql</var>){
   <var class="vars">$this</var>-&gt;posql = &amp; <var class="vars">$posql</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0262"><h2>
<a name="p_function__init_262">
<var class="function">_init</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Initializes class variables
</pre>
</div></div><pre id="source-0262"> <var class="keywords">function</var> _init(){
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inited)) {
     <var class="vars">$this</var>-&gt;_inited = <var class="keywords">true</var>;
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0263"><h2>
<a name="p_function_getalphamericbase63_263">
<var class="function">getAlphamericBase63</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  constant character string as alphameric base 63</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Get the constant character string as alphameric base 63
 Alphameric base 63 equels RegExp: [0-9A-Za-z_]
</pre>
</div></div><pre id="source-0263"> <var class="keywords">function</var> getAlphamericBase63(){
   <var class="keywords">static</var> <var class="vars">$base63</var> =
   <var class="strings">'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_'</var>;
   <var class="keywords">return</var> <var class="vars">$base63</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0264"><h2>
<a name="p_function_encodealphamericstring_264">
<var class="function">encodeAlphamericString</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://nurucom-archives.hp.infoseek.co.jp/digital/Alphameric-HTML.html" target="_blank" title="open in blanks window">http://nurucom-archives.hp.infoseek.co.jp/digital/Alphameric-HTML.html</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string to compress</dd>
<dt>return</dt>
<dd><em>string</em>  encoded and compressed string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Encode the character string into the composition only of
 the alphanumeric 63 based characters, and it compressed by
 the Lz77 algorithm.
 This function transplanted for PHP which is implemented on JavaScript.
</pre>
</div></div><pre id="source-0264"> <var class="keywords">function</var> encodeAlphamericString(<var class="vars">$s</var>){
   <var class="keywords">static</var> <var class="vars">$b</var> = <var class="keywords">null</var>;
   <var class="vars">$js</var> = &amp; <var class="vars">$this</var>-&gt;posql-&gt;ecma;
   <var class="keywords">if</var> (<var class="vars">$b</var> === <var class="keywords">null</var>) {
     <var class="vars">$b</var> = <var class="vars">$js</var>-&gt;<var class="funcs">split</var>(<var class="vars">$this</var>-&gt;getAlphamericBase63(), <var class="strings">''</var>);
   }
   <var class="vars">$a</var> = <var class="strings">''</var>;
   <var class="vars">$c</var> = <var class="keywords">null</var>;
   <var class="vars">$j</var> = <var class="keywords">null</var>;
   <var class="vars">$o</var> = <var class="keywords">null</var>;
   <var class="vars">$k</var> = <var class="keywords">null</var>;
   <var class="vars">$h</var> = <var class="keywords">null</var>;
   <var class="vars">$p</var> = <var class="keywords">null</var>;
   <var class="vars">$x</var> = <var class="keywords">null</var>;
   <var class="vars">$i</var> = 1014;
   <var class="vars">$l</var> = -1;
   <var class="vars">$t</var> = <var class="strings">' '</var>;
   <var class="keywords">for</var> (; <var class="vars">$i</var> &lt; 1024; <var class="vars">$i</var>++) {
     <var class="vars">$t</var> .= <var class="vars">$t</var>;
   }
   <var class="vars">$t</var> .= <var class="vars">$s</var>;
   <var class="keywords">while</var> (<var class="keywords">true</var>) {
     <var class="vars">$p</var> = <var class="vars">$js</var>-&gt;<var class="funcs">substr</var>(<var class="vars">$t</var>, <var class="vars">$i</var>, 64);
     <var class="keywords">if</var> (<var class="vars">$p</var> == <var class="keywords">null</var>) {
       <var class="keywords">break</var>;
     }
     <var class="vars">$n</var> = <var class="vars">$js</var>-&gt;length(<var class="vars">$p</var>);
     <var class="keywords">for</var> (<var class="vars">$j</var> = 2; <var class="vars">$j</var> &lt;= <var class="vars">$n</var>; <var class="vars">$j</var>++) {
       <var class="vars">$k</var> = <var class="vars">$js</var>-&gt;lastIndexOf(
         <var class="vars">$js</var>-&gt;substring(<var class="vars">$t</var>, <var class="vars">$i</var> - 819, <var class="vars">$i</var> + <var class="vars">$j</var> - 1),
         <var class="vars">$js</var>-&gt;substring(<var class="vars">$p</var>, 0, <var class="vars">$j</var>)
       );
       <var class="keywords">if</var> (-1 === <var class="vars">$k</var>) {
         <var class="keywords">break</var>;
       }
       <var class="vars">$o</var> = <var class="vars">$k</var>;
     }
     <var class="keywords">if</var> (2 === <var class="vars">$j</var> || 3 === <var class="vars">$j</var> &amp;&amp; <var class="vars">$h</var> === <var class="vars">$l</var>) {
       <var class="vars">$h</var> = <var class="vars">$l</var>;
       <var class="vars">$c</var> = <var class="vars">$js</var>-&gt;charCodeAt(<var class="vars">$t</var>, <var class="vars">$i</var>);
       <var class="vars">$i</var>++;
       <var class="keywords">if</var> (<var class="vars">$c</var> &lt; 128) {
         <var class="vars">$x</var> = <var class="vars">$c</var>;
         <var class="vars">$l</var> = (<var class="vars">$x</var> - (<var class="vars">$c</var> %= 32)) / 32 + 64;
         <var class="keywords">if</var> (<var class="vars">$h</var> !== <var class="vars">$l</var>) {
           <var class="vars">$a</var> .= <var class="vars">$b</var>[<var class="vars">$l</var> - 32];
         }
         <var class="vars">$a</var> .= <var class="vars">$b</var>[<var class="vars">$c</var>];
       } <var class="keywords">else</var> <var class="keywords">if</var> (12288 &lt;= <var class="vars">$c</var> &amp;&amp; <var class="vars">$c</var> &lt; 12544) {
         <var class="vars">$l</var> = ((<var class="vars">$c</var> -= 12288) - (<var class="vars">$c</var> %= 32)) / 32 + 68;
         <var class="keywords">if</var> (<var class="vars">$h</var> !== <var class="vars">$l</var>) {
           <var class="vars">$a</var> .= <var class="vars">$b</var>[<var class="vars">$l</var> - 32];
         }
         <var class="vars">$a</var> .= <var class="vars">$b</var>[<var class="vars">$c</var>];
       } <var class="keywords">else</var> <var class="keywords">if</var> (65280 &lt;= <var class="vars">$c</var> &amp;&amp; <var class="vars">$c</var> &lt; 65440) {
         <var class="vars">$l</var> = ((<var class="vars">$c</var> -= 65280) - (<var class="vars">$c</var> %= 32)) / 32 + 76;
         <var class="keywords">if</var> (<var class="vars">$h</var> !== <var class="vars">$l</var>) {
           <var class="vars">$a</var> .= <var class="vars">$b</var>[<var class="vars">$l</var> - 32];
         }
         <var class="vars">$a</var> .= <var class="vars">$b</var>[<var class="vars">$c</var>];
       } <var class="keywords">else</var> {
         <var class="vars">$x</var> = <var class="vars">$c</var>;
         <var class="vars">$l</var> = (<var class="vars">$x</var> - (<var class="vars">$c</var> %= 1984)) / 1984;
         <var class="keywords">if</var> (<var class="vars">$h</var> !== <var class="vars">$l</var>) {
           <var class="vars">$a</var> .= <var class="strings">'n'</var> . <var class="vars">$b</var>[<var class="vars">$l</var>];
         }
         <var class="vars">$x</var> = <var class="vars">$c</var>;
         <var class="vars">$a</var> .= <var class="vars">$b</var>[(<var class="vars">$x</var> - (<var class="vars">$c</var> %= 62)) / 62] . <var class="vars">$b</var>[<var class="vars">$c</var>];
       }
     } <var class="keywords">else</var> {
       <var class="vars">$x</var> = <var class="vars">$o</var>;
       <var class="vars">$a</var> .= <var class="vars">$b</var>[(<var class="vars">$x</var> - (<var class="vars">$o</var> %= 63)) / 63 + 50] . <var class="vars">$b</var>[<var class="vars">$o</var>] . <var class="vars">$b</var>[<var class="vars">$j</var> - 3];
       <var class="vars">$i</var> += <var class="vars">$j</var> - 1;
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$js</var>);
   <var class="keywords">return</var> <var class="vars">$a</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0265"><h2>
<a name="p_function_decodealphamericstring_265">
<var class="function">decodeAlphamericString</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd><a href="http://nurucom-archives.hp.infoseek.co.jp/digital/Alphameric-HTML.html" target="_blank" title="open in blanks window">http://nurucom-archives.hp.infoseek.co.jp/digital/Alphameric-HTML.html</a></dd>
<dt>param</dt>
<dd><em>string</em>  subject string to decode</dd>
<dt>return</dt>
<dd><em>string</em>  decoded and uncompressed string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Decode the character string converted by
 the encodeAlphamericString() method.
 This function transplanted for PHP which is implemented on JavaScript.
</pre>
</div></div><pre id="source-0265"> <var class="keywords">function</var> decodeAlphamericString(<var class="vars">$a</var>){
   <var class="keywords">static</var> <var class="vars">$o</var> = <var class="keywords">null</var>;
   <var class="vars">$js</var> = &amp; <var class="vars">$this</var>-&gt;posql-&gt;ecma;
   <var class="keywords">if</var> (<var class="vars">$o</var> === <var class="keywords">null</var>) {
     <var class="vars">$o</var> = <var class="keywords">array</var>();
     <var class="vars">$b</var> = <var class="vars">$this</var>-&gt;getAlphamericBase63();
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; 63; <var class="vars">$i</var>++) {
       <var class="vars">$o</var>[<var class="vars">$js</var>-&gt;charAt(<var class="vars">$b</var>, <var class="vars">$i</var>)] = <var class="vars">$i</var>;
     }
   }
   <var class="vars">$c</var> = <var class="keywords">null</var>;
   <var class="vars">$j</var> = <var class="keywords">null</var>;
   <var class="vars">$k</var> = <var class="keywords">null</var>;
   <var class="vars">$l</var> = <var class="keywords">null</var>;
   <var class="vars">$m</var> = <var class="keywords">null</var>;
   <var class="vars">$p</var> = <var class="keywords">null</var>;
   <var class="vars">$w</var> = <var class="keywords">null</var>;
   <var class="vars">$t</var> = <var class="keywords">null</var>;
   <var class="vars">$s</var> = <var class="strings">'    '</var>;
   <var class="vars">$i</var> = 63;
   <var class="keywords">while</var> (<var class="vars">$i</var> -= 7) {
     <var class="vars">$s</var> .= <var class="vars">$s</var>;
   }
   <var class="keywords">while</var> (<var class="keywords">true</var>) {
     <var class="vars">$t</var> = <var class="vars">$js</var>-&gt;charAt(<var class="vars">$a</var>, <var class="vars">$i</var>);
     <var class="vars">$i</var>++;
     <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$o</var>[<var class="vars">$t</var>])) {
       <var class="keywords">break</var>;
     }
     <var class="vars">$c</var> = <var class="vars">$o</var>[<var class="vars">$t</var>];
     <var class="keywords">if</var> (<var class="vars">$c</var> &gt;= 63) {
       <var class="keywords">break</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$c</var> &lt; 32) {
       <var class="vars">$s</var> .= <var class="vars">$js</var>-&gt;fromCharCode(
         <var class="vars">$m</var> ?  <var class="vars">$l</var> * 32 + <var class="vars">$c</var>
            : (<var class="vars">$l</var> * 32 + <var class="vars">$c</var>) * 62 + <var class="vars">$o</var>[<var class="vars">$js</var>-&gt;charAt(<var class="vars">$a</var>, <var class="vars">$i</var>++)]
       );
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$c</var> &lt; 49) {
       <var class="vars">$l</var> = (<var class="vars">$c</var> &lt; 36 ? <var class="vars">$c</var> - 32  :
            (<var class="vars">$c</var> &lt; 44 ? <var class="vars">$c</var> + 348 : <var class="vars">$c</var> + 1996));
       <var class="vars">$m</var> = 1;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$c</var> &lt; 50) {
       <var class="vars">$l</var> = <var class="vars">$o</var>[<var class="vars">$js</var>-&gt;charAt(<var class="vars">$a</var>, <var class="vars">$i</var>++)];
       <var class="vars">$m</var> = 0;
     } <var class="keywords">else</var> {
       <var class="vars">$w</var> = <var class="vars">$js</var>-&gt;slice(<var class="vars">$s</var>, -819);
       <var class="vars">$k</var> = (<var class="vars">$c</var> - 50) * 63 + <var class="vars">$o</var>[<var class="vars">$js</var>-&gt;charAt(<var class="vars">$a</var>, <var class="vars">$i</var>++)];
       <var class="vars">$j</var> = <var class="vars">$k</var> + <var class="vars">$o</var>[<var class="vars">$js</var>-&gt;charAt(<var class="vars">$a</var>, <var class="vars">$i</var>++)] + 2;
       <var class="vars">$p</var> = <var class="vars">$js</var>-&gt;substring(<var class="vars">$w</var>, <var class="vars">$k</var>, <var class="vars">$j</var>);
       <var class="keywords">if</var> (<var class="vars">$p</var> != <var class="keywords">null</var>) {
         <var class="keywords">while</var> (<var class="vars">$js</var>-&gt;length(<var class="vars">$w</var>) &lt; <var class="vars">$j</var>) {
           <var class="vars">$w</var> .= <var class="vars">$p</var>;
         }
       }
       <var class="vars">$s</var> .= <var class="vars">$js</var>-&gt;substring(<var class="vars">$w</var>, <var class="vars">$k</var>, <var class="vars">$j</var>);
     }
   }
   <var class="vars">$s</var> = <var class="vars">$js</var>-&gt;slice(<var class="vars">$s</var>, 1024);
   <var class="keywords">unset</var>(<var class="vars">$js</var>);
   <var class="keywords">return</var> <var class="vars">$s</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0266"><h2>
<a name="p_class_posql_method_266">
<var class="class">Posql_Method</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class provides standard SQL92-99 functions on SQL mode
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Method</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0267"><h2>
<a name="p_var_hasmbstring_267">
<var class="var">hasMBString</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  maintains mbstring library that can be use</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0268"><h2>
<a name="p_var_hasiconv_268">
<var class="var">hasIConv</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>boolean</em>  maintains iconv library that can be use</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0269"><h2>
<a name="p_var_charset_269">
<var class="var">charset</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   maintains reference to the Posql&#039;s property charset</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0270"><h2>
<a name="p_var_posql_270">
<var class="var">posql</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains reference of the Posql class</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0271"><h2>
<a name="p_var_ctype_271">
<var class="var">ctype</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains reference of the Posql_CType class</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0272"><h2>
<a name="p_var_math_272">
<var class="var">math</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains reference of the Posql_Math class</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0273"><h2>
<a name="p_var_unicode_273">
<var class="var">unicode</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains reference of the Posql_Unicode class</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0274"><h2>
<a name="p_function_posql_method_274">
<var class="function">Posql_Method</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0274"> <var class="keywords">function</var> Posql_Method(){}</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0275"><h2>
<a name="p_function___destruct_275">
<var class="function">__destruct</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Destructor for PHP Version 5+
 Release all referenced properties
</pre>
</div></div><pre id="source-0275"> <var class="keywords">function</var> <var class="keywords">__destruct</var>(){
   <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;charset, <var class="vars">$this</var>-&gt;hasIConv, <var class="vars">$this</var>-&gt;hasMBString);
   <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;unicode, <var class="vars">$this</var>-&gt;math, <var class="vars">$this</var>-&gt;ctype);
   <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;posql);
   <var class="keywords">foreach</var> (<var class="funcs">get_object_vars</var>(<var class="vars">$this</var>) <var class="keywords">as</var> <var class="vars">$prop</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">if</var> (<var class="vars">$prop</var> != <var class="keywords">null</var>) {
       <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;{<var class="vars">$prop</var>});
     }
   }
 }
<var class="comments">/*
 {{{   Internal functions
*/</var></pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0276"><h2>
<a name="p_function__referobject_276">
<var class="function">_referObject</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>object</em>  give of the Posql self</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Reference to the Posql, and its properties
</pre>
</div></div><pre id="source-0276"> <var class="keywords">function</var> _referObject(&amp;<var class="vars">$posql</var>){
   <var class="vars">$this</var>-&gt;posql       = &amp; <var class="vars">$posql</var>;
   <var class="vars">$this</var>-&gt;ctype       = &amp; <var class="vars">$posql</var>-&gt;ctype;
   <var class="vars">$this</var>-&gt;math        = &amp; <var class="vars">$posql</var>-&gt;math;
   <var class="vars">$this</var>-&gt;unicode     = &amp; <var class="vars">$posql</var>-&gt;unicode;
   <var class="vars">$this</var>-&gt;hasMBString = &amp; <var class="vars">$posql</var>-&gt;unicode-&gt;hasMBString;
   <var class="vars">$this</var>-&gt;hasIConv    = &amp; <var class="vars">$posql</var>-&gt;unicode-&gt;hasIConv;
   <var class="vars">$this</var>-&gt;charset     = &amp; <var class="vars">$posql</var>-&gt;charset;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0277"><h2>
<a name="p_function_base64_encode_277">
<var class="function">base64_encode</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> A handle for encoding as base64</pre>
</div></div><pre id="source-0277"> <var class="keywords">function</var> <var class="funcs">base64_encode</var>(<var class="vars">$value</var>){
   <var class="vars">$result</var> = <var class="funcs">base64_encode</var>(<var class="vars">$value</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0278"><h2>
<a name="p_function_base64_decode_278">
<var class="function">base64_decode</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> A handle for decoding as base64</pre>
</div></div><pre id="source-0278"> <var class="keywords">function</var> <var class="funcs">base64_decode</var>(<var class="vars">$value</var>){
   <var class="vars">$result</var> = <var class="funcs">base64_decode</var>(<var class="vars">$value</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0279"><h2>
<a name="p_function_urlencode_279">
<var class="function">urlencode</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> A handle for encoding as URL</pre>
</div></div><pre id="source-0279"> <var class="keywords">function</var> <var class="funcs">urlencode</var>(<var class="vars">$value</var>){
   <var class="vars">$result</var> = <var class="funcs">urlencode</var>(<var class="vars">$value</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0280"><h2>
<a name="p_function_urldecode_280">
<var class="function">urldecode</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> A handle for decoding as URL</pre>
</div></div><pre id="source-0280"> <var class="keywords">function</var> <var class="funcs">urldecode</var>(<var class="vars">$value</var>){
   <var class="vars">$result</var> = <var class="funcs">urldecode</var>(<var class="vars">$value</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
<var class="comments">/*
 }}}   Internal functions
*/</var>
<var class="comments">/*
 {{{   Interchangeability with built-in function of SQLite
*/</var></pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0281"><h2>
<a name="p_function_abs_281">
<var class="function">abs</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return the absolute value of the numeric argument.
 Return NULL if argument is NULL.
 Return 0 if argument is not a numeric value.</pre>
</div></div><pre id="source-0281"> <var class="keywords">function</var> <var class="funcs">abs</var>(<var class="vars">$value</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$value</var> === <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="keywords">null</var>;
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$value</var>)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;<var class="funcs">abs</var>(<var class="vars">$value</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = 0;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0282"><h2>
<a name="p_function_coalesce_282">
<var class="function">coalesce</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> NULL is returned when the first non-NULL value of
  the list is returned or there is no non-NULL value.</pre>
</div></div><pre id="source-0282"> <var class="keywords">function</var> coalesce(){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var>) {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
     <var class="keywords">while</var> (--<var class="vars">$argn</var> &gt;= 0) {
       <var class="vars">$arg</var> = <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
       <var class="keywords">if</var> (<var class="vars">$arg</var> !== <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="vars">$arg</var>;
         <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0283"><h2>
<a name="p_function_exists_283">
<var class="function">exists</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return NULL when the value is NULL.
 Return TRUE when the expression is exist.
 Return FALSE when the expression is not exist.</pre>
</div></div><pre id="source-0283"> <var class="keywords">function</var> exists(<var class="vars">$expr</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$expr</var> !== <var class="keywords">null</var>) {
     <var class="vars">$result</var> = (<var class="keywords">bool</var>)<var class="vars">$expr</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0284"><h2>
<a name="p_function_ifnull_284">
<var class="function">ifnull</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return a copy of the first non-NULL argument.
 If both arguments are NULL then NULL is returned.
 The ifnull() functions and coalesce()
  with two arguments are interchangeable.</pre>
</div></div><pre id="source-0284"> <var class="keywords">function</var> ifnull(<var class="vars">$expr1</var> = <var class="keywords">null</var>, <var class="vars">$expr2</var> = <var class="keywords">null</var>){
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(<var class="vars">$this</var>, <var class="strings">'coalesce'</var>), <var class="vars">$args</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0285"><h2>
<a name="p_function_hex_285">
<var class="function">hex</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> The argument is interpreted as a BLOB.
 The result is a hexadecimal rendering of the content of that blob.</pre>
</div></div><pre id="source-0285"> <var class="keywords">function</var> hex(<var class="vars">$value</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$value</var> !== <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$value</var> === <var class="strings">''</var>) {
       <var class="vars">$result</var> = <var class="strings">''</var>;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$value</var> == <var class="keywords">null</var>) {
       <var class="vars">$result</var> = <var class="strings">'0'</var>;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;math-&gt;isDec(<var class="vars">$value</var>)) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;convertToBase(<var class="vars">$value</var>, 10, 16);
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;math-&gt;isHex(<var class="vars">$value</var>)) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;toHex(<var class="vars">$value</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="funcs">strtoupper</var>(<var class="funcs">bin2hex</var>(<var class="vars">$value</var>));
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$value</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0286"><h2>
<a name="p_function_last_insert_rowid_286">
<var class="function">last_insert_rowid</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return the &quot;rowid&quot; of the last row insert
  from this connection to the database.</pre>
</div></div><pre id="source-0286"> <var class="keywords">function</var> last_insert_rowid(){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;posql-&gt;<var class="funcs">next</var>)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;sub(<var class="vars">$this</var>-&gt;posql-&gt;<var class="funcs">next</var>, 1);
     <var class="keywords">if</var> (<var class="vars">$result</var> &lt; 0) {
       <var class="vars">$result</var> = <var class="strings">'0'</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0287"><h2>
<a name="p_function_length_287">
<var class="function">length</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return the string length in characters.
 This function corresponds to Unicode
  (i.e. multibytes characters are counted as one character).</pre>
</div></div><pre id="source-0287"> <var class="keywords">function</var> length(<var class="vars">$value</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$value</var> !== <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$value</var> == <var class="keywords">null</var>) {
       <var class="vars">$result</var> = 0;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;posql-&gt;pcharset-&gt;isBinary(<var class="vars">$value</var>)) {
         <var class="vars">$result</var> = <var class="funcs">strlen</var>(<var class="vars">$value</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strlen</var>(<var class="vars">$value</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0288"><h2>
<a name="p_function_like_288">
<var class="function">like</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> This function is used to implement
  the &quot;subject LIKE pattern [ESCAPE escape]&quot; syntax of SQL.
 If the optional ESCAPE clause is present,
  then the user-function is invoked with three arguments.
 Otherwise, it is invoked with two arguments only.
 The result will be a logical value
  whether the subject was matched in the pattern.</pre>
</div></div><pre id="source-0288"> <var class="keywords">function</var> like(<var class="vars">$pattern</var> = <var class="keywords">null</var>, <var class="vars">$subject</var> = <var class="keywords">null</var>, <var class="vars">$escape</var> = <var class="strings">'\\'</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var> &amp;&amp; <var class="vars">$pattern</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$subject</var> != <var class="keywords">null</var>) {
     <var class="vars">$pattern</var> = <var class="vars">$this</var>-&gt;posql-&gt;toLikePattern(<var class="vars">$pattern</var>, <var class="vars">$escape</var>);
     <var class="keywords">if</var> (<var class="funcs">preg_match</var>(<var class="vars">$pattern</var> . <var class="strings">'A'</var>, <var class="vars">$subject</var>)) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0289"><h2>
<a name="p_function_lower_289">
<var class="function">lower</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return a copy of input string that converted to all lower-case letters.
 This function corresponds to Unicode.</pre>
</div></div><pre id="source-0289"> <var class="keywords">function</var> lower(<var class="vars">$string</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strtolower</var>(<var class="vars">$string</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0290"><h2>
<a name="p_function_ltrim_290">
<var class="function">ltrim</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return a string formed by removing any and all characters that appear
  in second argument from the left side of first argument.
 If the second argument is omitted, spaces are removed.</pre>
</div></div><pre id="source-0290"> <var class="keywords">function</var> <var class="funcs">ltrim</var>(<var class="vars">$string</var> = <var class="keywords">null</var>, <var class="vars">$chars</var> = <var class="keywords">null</var>){
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$chars</var> === <var class="keywords">null</var>) {
       <var class="vars">$string</var> = <var class="funcs">ltrim</var>(<var class="vars">$string</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$string</var> = <var class="funcs">ltrim</var>(<var class="vars">$string</var>, <var class="vars">$chars</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0291"><h2>
<a name="p_function_max_291">
<var class="function">max</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return the argument with the maximum value.</pre>
</div></div><pre id="source-0291"> <var class="keywords">function</var> <var class="funcs">max</var>(<var class="vars">$expr1</var> = <var class="keywords">null</var>, <var class="vars">$expr2</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">switch</var> (<var class="vars">$argn</var>) {
     <var class="keywords">case</var> 0:
         <var class="vars">$result</var> = <var class="keywords">null</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 1:
         <var class="vars">$result</var> = <var class="vars">$expr1</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 2:
         <var class="vars">$result</var> = <var class="vars">$expr1</var> &gt; <var class="vars">$expr2</var> ? <var class="vars">$expr1</var> : <var class="vars">$expr2</var>;
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
         <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="strings">'max'</var>, <var class="vars">$args</var>);
         <var class="keywords">break</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0292"><h2>
<a name="p_function_min_292">
<var class="function">min</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return the argument with the minimum value.</pre>
</div></div><pre id="source-0292"> <var class="keywords">function</var> <var class="funcs">min</var>(<var class="vars">$expr1</var> = <var class="keywords">null</var>, <var class="vars">$expr2</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">switch</var> (<var class="vars">$argn</var>) {
     <var class="keywords">case</var> 0:
         <var class="vars">$result</var> = <var class="keywords">null</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 1:
         <var class="vars">$result</var> = <var class="vars">$expr1</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 2:
         <var class="vars">$result</var> = <var class="vars">$expr1</var> &gt; <var class="vars">$expr2</var> ? <var class="vars">$expr2</var> : <var class="vars">$expr1</var>;
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
         <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="strings">'min'</var>, <var class="vars">$args</var>);
         <var class="keywords">break</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0293"><h2>
<a name="p_function_nullif_293">
<var class="function">nullif</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return the first argument if the arguments are different,
  otherwise return NULL.</pre>
</div></div><pre id="source-0293"> <var class="keywords">function</var> nullif(<var class="vars">$expr1</var> = <var class="keywords">null</var>, <var class="vars">$expr2</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$expr1</var> != <var class="vars">$expr2</var>) {
     <var class="vars">$result</var> = <var class="vars">$expr1</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0294"><h2>
<a name="p_function_random_294">
<var class="function">random</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return a pseudo-random integer.
 Give the minimum value as the first argument,
  and give the maximum value as the 2nd argument.
 If the argument is omitted,
  the number between -9999999999 and +9999999999 will be returned.</pre>
</div></div><pre id="source-0294"> <var class="keywords">function</var> random(<var class="vars">$min</var> = <var class="strings">'-9999999999'</var>, <var class="vars">$max</var> = <var class="strings">'9999999999'</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;<var class="funcs">rand</var>(<var class="vars">$min</var>, <var class="vars">$max</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0295"><h2>
<a name="p_function_replace_295">
<var class="function">replace</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return a string formed by substituting string third argument
  for every occurrence of string second argument in string first argument.
 The BINARY collating sequence is used for comparisons.
 If second argument is an empty string then return first argument unchanged.</pre>
</div></div><pre id="source-0295"> <var class="keywords">function</var> replace(<var class="vars">$string</var> = <var class="keywords">null</var>, <var class="vars">$search</var> = <var class="keywords">null</var>, <var class="vars">$replace</var> = <var class="keywords">null</var>){
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$search</var> != <var class="keywords">null</var>) {
     <var class="vars">$string</var> = <var class="funcs">str_replace</var>(<var class="vars">$search</var>, <var class="vars">$replace</var>, <var class="vars">$string</var>);
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0296"><h2>
<a name="p_function_round_296">
<var class="function">round</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Round off the number of first argument
  to the second argument digits to the right of the decimal point.
 If the first argument is omitted, 0 is assumed.</pre>
</div></div><pre id="source-0296"> <var class="keywords">function</var> <var class="funcs">round</var>(<var class="vars">$value</var> = <var class="keywords">null</var>, <var class="vars">$scale</var> = 0){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$value</var> !== <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;<var class="funcs">round</var>(<var class="vars">$value</var>, <var class="vars">$scale</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0297"><h2>
<a name="p_function_rtrim_297">
<var class="function">rtrim</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return a string formed by removing any and all characters
  that appear in second argument from the right side of forst argument.
 If the second argument is omitted, spaces are removed.</pre>
</div></div><pre id="source-0297"> <var class="keywords">function</var> <var class="funcs">rtrim</var>(<var class="vars">$string</var> = <var class="keywords">null</var>, <var class="vars">$chars</var> = <var class="keywords">null</var>){
   <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$chars</var> === <var class="keywords">null</var>) {
       <var class="vars">$string</var> = <var class="funcs">rtrim</var>(<var class="vars">$string</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$string</var> = <var class="funcs">rtrim</var>(<var class="vars">$string</var>, <var class="vars">$chars</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0298"><h2>
<a name="p_function_soundex_298">
<var class="function">soundex</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Compute the soundex encoding of the string.</pre>
</div></div><pre id="source-0298"> <var class="keywords">function</var> <var class="funcs">soundex</var>(<var class="vars">$string</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">'?000'</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="keywords">null</var>) {
     <var class="vars">$soundex</var> = @<var class="funcs">soundex</var>(<var class="vars">$string</var>);
     <var class="keywords">if</var> (<var class="vars">$soundex</var> != <var class="keywords">null</var>) {
       <var class="vars">$result</var> = <var class="vars">$soundex</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0299"><h2>
<a name="p_function_posql_version_299">
<var class="function">posql_version</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return the version string for the Posql library that is running.</pre>
</div></div><pre id="source-0299"> <var class="keywords">function</var> posql_version(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;posql-&gt;getVersion();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0300"><h2>
<a name="p_function_strftime_300">
<var class="function">strftime</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>link</dt>
<dd><a href="http://php.net/manual/function.strftime" target="_blank" title="open in blanks window">http://php.net/manual/function.strftime</a></dd>
</dl>
<pre class="desc"> Return format part from subject timestamp string
</pre>
</div></div><pre id="source-0300"> <var class="keywords">function</var> <var class="funcs">strftime</var>(<var class="vars">$format</var> = <var class="keywords">null</var>, <var class="vars">$time</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$format</var> !== <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$time</var> === <var class="keywords">null</var>) {
       <var class="vars">$result</var> = @<var class="funcs">strftime</var>(<var class="vars">$format</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = @(<var class="funcs">strftime</var>(<var class="vars">$format</var>, <var class="funcs">strtotime</var>(<var class="vars">$time</var>)));
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0301"><h2>
<a name="p_function_substr_301">
<var class="function">substr</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return a substring of input string.
 If length is omitted then all character through
  the end of the string are returned.
 The left-most substring is number 1.
 If length is negative the the first character of the substring is found
  by counting from the right rather than the left.
 If substring is string then characters indices refer
  to actual UTF-8 characters.
 If the input string is a BLOB then the indices refer to bytes.</pre>
</div></div><pre id="source-0301"> <var class="keywords">function</var> <var class="funcs">substr</var>(<var class="vars">$string</var> = <var class="keywords">null</var>, <var class="vars">$offset</var> = 0, <var class="vars">$length</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="keywords">null</var>) {
     <var class="vars">$offset</var> = (<var class="keywords">int</var>)<var class="vars">$offset</var>;
     <var class="keywords">if</var> (<var class="vars">$offset</var> &gt; 0) {
       <var class="vars">$offset</var>--;
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;posql-&gt;pcharset-&gt;isBinary(<var class="vars">$string</var>)) {
       <var class="keywords">if</var> (<var class="vars">$length</var> - 0 === 0) {
         <var class="vars">$result</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$offset</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$offset</var>, <var class="vars">$length</var>);
       }
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$length</var> - 0 === 0) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$offset</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">substr</var>(<var class="vars">$string</var>, <var class="vars">$offset</var>, <var class="vars">$length</var>);
       }
     }
     <var class="keywords">unset</var>(<var class="vars">$string</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0302"><h2>
<a name="p_function_trim_302">
<var class="function">trim</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> The TRIM function removes leading spaces, trailing characters,
  or both from a specified character string.
 This function also removes other types of characters
  from a specified character string.
 The default function is to trim the specified character
  from both sides of the character string.
 If no removal string is specified, TRIM removes spaces by default.
 This function is used to implement the
  &quot;TRIM ([[{LEADING | TRAILING | BOTH}]
         [removal_string] FROM]
         target_string)&quot;
  syntax of SQL.</pre>
</div></div><pre id="source-0302"> <var class="keywords">function</var> <var class="funcs">trim</var>(<var class="vars">$direction</var> = <var class="strings">'both'</var>, <var class="vars">$chars</var> = <var class="strings">' '</var>,
               <var class="vars">$string</var> = <var class="keywords">null</var>, <var class="vars">$collation</var> = <var class="keywords">null</var>){
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var> &lt;= 2) {
     <var class="vars">$string</var> = <var class="vars">$direction</var>;
     <var class="keywords">if</var> (<var class="vars">$argn</var> === 1) {
       <var class="vars">$string</var> = <var class="funcs">trim</var>(<var class="vars">$string</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$string</var> = <var class="funcs">trim</var>(<var class="vars">$string</var>, <var class="vars">$chars</var>);
     }
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$chars</var> == <var class="keywords">null</var>) {
       <var class="vars">$chars</var> = <var class="strings">'\s'</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$chars</var> = <var class="funcs">preg_quote</var>(<var class="vars">$chars</var>, <var class="strings">'~'</var>);
     }
     <var class="vars">$pattern</var> = <var class="funcs">sprintf</var>(<var class="strings">'(?:%s){1,}'</var>, <var class="vars">$chars</var>);
     <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$direction</var>)) {
       <var class="keywords">case</var> <var class="strings">'leading'</var>:
           <var class="vars">$pattern</var> = <var class="funcs">sprintf</var>(<var class="strings">'~^%s~i'</var>, <var class="vars">$pattern</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'trailing'</var>:
           <var class="vars">$pattern</var> = <var class="funcs">sprintf</var>(<var class="strings">'~%s$~i'</var>, <var class="vars">$pattern</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'both'</var>:
       <var class="keywords">default</var>:
           <var class="vars">$pattern</var> = <var class="funcs">sprintf</var>(<var class="strings">'~^%1$s|%1$s$~i'</var>, <var class="vars">$pattern</var>);
           <var class="keywords">break</var>;
     }
     <var class="vars">$string</var> = <var class="funcs">preg_replace</var>(<var class="vars">$pattern</var>, <var class="strings">''</var>, <var class="vars">$string</var>);
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0303"><h2>
<a name="p_function_typeof_303">
<var class="function">typeof</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return the datatype of the expression.
 The only return values are below:
 -----------------------------------------------
  null    : the value is NULL
  boolean : the value is TRUE, or FALSE
  number  : the numeric value
  text    : the textable (i.e. readable) value
  blob    : the binary data
 -----------------------------------------------</pre>
</div></div><pre id="source-0303"> <var class="keywords">function</var> typeof(<var class="vars">$value</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="strings">'null'</var>;
   <var class="keywords">if</var> (<var class="vars">$value</var> !== <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="funcs">is_bool</var>(<var class="vars">$value</var>)) {
       <var class="vars">$result</var> = <var class="strings">'boolean'</var>;
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$value</var>)) {
       <var class="vars">$result</var> = <var class="strings">'number'</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$value</var> != <var class="keywords">null</var>
        &amp;&amp; <var class="vars">$this</var>-&gt;posql-&gt;pcharset-&gt;isBinary(<var class="vars">$value</var>)) {
         <var class="vars">$result</var> = <var class="strings">'blob'</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="strings">'text'</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0304"><h2>
<a name="p_function_upper_304">
<var class="function">upper</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Return a copy of input string that converted to all upper-case letters.
 This function corresponds to Unicode.</pre>
</div></div><pre id="source-0304"> <var class="keywords">function</var> upper(<var class="vars">$string</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strtoupper</var>(<var class="vars">$string</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
<var class="comments">/*
 }}} Interchangeability with built-in function of SQLite
*/</var>
<var class="comments">/*
 {{{  general functions and SQL92-99 syntaxes
*/</var></pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0305"><h2>
<a name="p_function_cast_305">
<var class="function">cast</var>
</a>
</h2><div class="function"><div>
<pre class="desc">
 The available types are below:
 -----------------------------------------------
  null    : the value is NULL
  boolean : the value is TRUE, or FALSE
  number  : the numeric value
  text    : the textable (i.e. readable) value
  blob    : the binary data
 -----------------------------------------------</pre>
</div></div><pre id="source-0305"> <var class="keywords">function</var> cast(<var class="vars">$value</var> = <var class="keywords">null</var>, <var class="vars">$type</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$type</var>)) {
     <var class="keywords">case</var> <var class="strings">'boolean'</var>:
         <var class="vars">$result</var> = (<var class="keywords">bool</var>)<var class="vars">$value</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'number'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;format(<var class="vars">$value</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'blob'</var>:
     <var class="keywords">case</var> <var class="strings">'text'</var>:
         <var class="vars">$result</var> = (<var class="keywords">string</var>)<var class="vars">$value</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'null'</var>:
         <var class="vars">$result</var> = <var class="keywords">null</var>;
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$affinity</var> = <var class="vars">$this</var>-&gt;posql-&gt;getColumnAffinity(<var class="vars">$type</var>);
         <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$affinity</var>)) {
           <var class="keywords">case</var> <var class="strings">'string'</var>:
               <var class="vars">$result</var> = (<var class="keywords">string</var>)<var class="vars">$value</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'number'</var>:
               <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;format(<var class="vars">$value</var>);
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'null'</var>:
           <var class="keywords">default</var>:
               <var class="vars">$result</var> = <var class="keywords">null</var>;
               <var class="keywords">break</var>;
         }
         <var class="keywords">break</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0306"><h2>
<a name="p_function_concat_306">
<var class="function">concat</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>  (...) the values</dd>
<dt>return</dt>
<dd><em>string</em>       the concatenated value as string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Appends two or more literal expressions, column values,
  or variables together into one string
 If any of the concatenation values are null,
  the entire returned string is null
 Also, if a numeric value is concatenated,
  it is implicitly converted to a character string
</pre>
</div></div><pre id="source-0306"> <var class="keywords">function</var> concat(){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var>) {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
     <var class="vars">$result</var> = <var class="strings">''</var>;
     <var class="keywords">while</var> (--<var class="vars">$argn</var> &gt;= 0) {
       <var class="vars">$val</var> = <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
       <var class="keywords">if</var> (<var class="vars">$val</var> === <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="keywords">null</var>;
         <var class="keywords">break</var>;
       }
       <var class="vars">$result</var> .= (<var class="keywords">string</var>) <var class="vars">$val</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0307"><h2>
<a name="p_function_concatenate_307">
<var class="function">concatenate</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> SQL99 Syntax
 CONCATENATE ( &#039;string1&#039; || &#039;string2&#039; )
 Appends two or more literal expressions, column values,
  or variables together into one string.</pre>
</div></div><pre id="source-0307"> <var class="keywords">function</var> concatenate(<var class="vars">$string</var> = <var class="keywords">null</var>){
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(<var class="vars">$this</var>, <var class="strings">'concat'</var>), <var class="vars">$args</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0308"><h2>
<a name="p_function_nvl_308">
<var class="function">nvl</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> If expression expr1 is NULL, that will returns the value of expr2
 Abbreviation of &quot;Null Value Logic&quot;
</pre>
</div></div><pre id="source-0308"> <var class="keywords">function</var> nvl(<var class="vars">$expr1</var> = <var class="keywords">null</var>, <var class="vars">$expr2</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$expr1</var> === <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="vars">$expr2</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="vars">$expr1</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0309"><h2>
<a name="p_function_convert_309">
<var class="function">convert</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> The CONVERT function alters the representation of a character string
  within its character set and collation.
 Give the string of the first argument which should be to convert.
 Specify the output character-code
  which will be to convert as the second argument.
 Optionally, give the input character-code  as the third argument.
 If the third argument is omitted,
  it will be detect the encoding automatically.
 Return the converted string specifically.</pre>
</div></div><pre id="source-0309"> <var class="keywords">function</var> convert(<var class="vars">$string</var> = <var class="keywords">null</var>, <var class="vars">$to_charset</var> = <var class="keywords">null</var>, <var class="vars">$from_charset</var> = <var class="keywords">null</var>){
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="keywords">null</var>) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$to_charset</var> != <var class="keywords">null</var>) {
       <var class="vars">$pchar</var> = &amp; <var class="vars">$this</var>-&gt;posql-&gt;pcharset;
       <var class="keywords">if</var> (<var class="vars">$from_charset</var> == <var class="keywords">null</var>) {
         <var class="vars">$string</var> = <var class="vars">$pchar</var>-&gt;convert(<var class="vars">$string</var>, <var class="vars">$to_charset</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$string</var> = <var class="vars">$pchar</var>-&gt;convert(<var class="vars">$string</var>, <var class="vars">$to_charset</var>, <var class="vars">$from_charset</var>);
       }
       <var class="keywords">unset</var>(<var class="vars">$pchar</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0310"><h2>
<a name="p_function_substring_310">
<var class="function">substring</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>substr</dd>
</dl>
<pre class="desc"> Alias of SUBSTR
</pre>
</div></div><pre id="source-0310"> <var class="keywords">function</var> substring(){
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'substr'</var>), <var class="vars">$args</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0311"><h2>
<a name="p_function_translate_311">
<var class="function">translate</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> SQL99 Syntax
 TRANSLATE(char_value target_char_set USING translation_name)
 alters the character set of a string value
  from one base-character set to another.</pre>
</div></div><pre id="source-0311"> <var class="keywords">function</var> translate(<var class="vars">$string</var> = <var class="keywords">null</var>, <var class="vars">$from</var> = <var class="keywords">null</var>, <var class="vars">$to</var> = <var class="keywords">null</var>){
   <var class="keywords">if</var> (<var class="vars">$string</var> !== <var class="keywords">null</var>) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$from</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$to</var> != <var class="keywords">null</var>) {
       <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$from</var>) &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$to</var>)) {
         <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strtr</var>(<var class="vars">$string</var>, <var class="vars">$from</var>, <var class="vars">$to</var>);
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$from</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$to</var>)) {
         <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;posql-&gt;toOneArray(<var class="vars">$from</var>);
         <var class="vars">$to</var> = <var class="vars">$this</var>-&gt;posql-&gt;toOneArray(<var class="vars">$to</var>);
         <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$from</var>) === <var class="funcs">count</var>(<var class="vars">$to</var>)) {
           <var class="vars">$pairs</var> = <var class="keywords">array</var>();
           <var class="keywords">do</var> {
             <var class="vars">$pairs</var>[ <var class="funcs">array_shift</var>(<var class="vars">$from</var>) ] = <var class="funcs">array_shift</var>(<var class="vars">$to</var>);
           } <var class="keywords">while</var> (!<var class="keywords">empty</var>(<var class="vars">$from</var>));
           <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strtr</var>(<var class="vars">$string</var>, <var class="vars">$pairs</var>);
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0312"><h2>
<a name="p_function_bit_length_312">
<var class="function">bit_length</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Returns an integer value representing the number of bits in an expression</pre>
</div></div><pre id="source-0312"> <var class="keywords">function</var> bit_length(<var class="vars">$value</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$value</var> !== <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="funcs">strlen</var>(<var class="vars">$value</var>) &lt;&lt; 3;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0313"><h2>
<a name="p_function_char_length_313">
<var class="function">char_length</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Returns an integer value representing the number
  of characters in an expression</pre>
</div></div><pre id="source-0313"> <var class="keywords">function</var> char_length(<var class="vars">$value</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'length'</var>), <var class="vars">$args</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0314"><h2>
<a name="p_function_octet_length_314">
<var class="function">octet_length</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Returns an integer value representing the number
  of octets in an expression.
 This value is the same as BIT_LENGTH/8.</pre>
</div></div><pre id="source-0314"> <var class="keywords">function</var> octet_length(<var class="vars">$value</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$value</var> !== <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="funcs">strlen</var>(<var class="vars">$value</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0315"><h2>
<a name="p_function_now_315">
<var class="function">now</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The function NOW returns the current date and time.
</pre>
</div></div><pre id="source-0315"> <var class="keywords">function</var> now(<var class="vars">$time</var> = <var class="keywords">null</var>){
   <var class="keywords">static</var> <var class="vars">$format</var> = <var class="strings">'Y-m-d H:i:s'</var>;
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$time</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_numeric</var>(<var class="vars">$time</var>)) {
     <var class="vars">$result</var> = @<var class="funcs">date</var>(<var class="vars">$format</var>, <var class="vars">$time</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="funcs">date</var>(<var class="vars">$format</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0316"><h2>
<a name="p_function_extract_316">
<var class="function">extract</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Allows the datepart to be extracted (as follows) from an expression.
 ---------------------------------------------------------------------------
 Type value     Meaning                         Expected format
 ---------------------------------------------------------------------------
 SECOND         Seconds                         SECONDS
 MINUTE         Minutes                         MINUTES
 HOUR           Hours                           HOURS
 DAY            Days                            DAYS
 MONTH          Months                          MONTHS
 YEAR           Years                           YEARS
 MINUTE_SECOND  Minutes and seconds             &quot;MINUTES:SECONDS&quot;
 HOUR_MINUTE    Hours and minutes               &quot;HOURS:MINUTES&quot;
 DAY_HOUR       Days and hours                  &quot;DAYS HOURS&quot;
 YEAR_MONTH     Years and months                &quot;YEARS-MONTHS&quot;
 HOUR_SECOND    Hours, minutes, seconds         &quot;HOURS:MINUTES:SECONDS&quot;
 DAY_MINUTE     Days, hours, minutes            &quot;DAYS HOURS:MINUTES&quot;
 DAY_SECOND     Days, hours, minutes, seconds   &quot;DAYS HOURS:MINUTES:SECONDS&quot;
 ---------------------------------------------------------------------------</pre>
</div></div><pre id="source-0316"> <var class="keywords">function</var> <var class="funcs">extract</var>(<var class="vars">$datetime</var> = <var class="keywords">null</var>, <var class="vars">$value</var> = <var class="keywords">null</var>){
   <var class="vars">$format</var> = <var class="strings">'%Y-%m-%d %H:%M:%S'</var>;
   <var class="keywords">switch</var> (<var class="funcs">strtoupper</var>(<var class="vars">$datetime</var>)) {
     <var class="keywords">case</var> <var class="strings">'SECOND'</var>:
         <var class="vars">$format</var> = <var class="strings">'%S'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'MINUTE'</var>:
         <var class="vars">$format</var> = <var class="strings">'%M'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'HOUR'</var>:
         <var class="vars">$format</var> = <var class="strings">'%H'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'DAY'</var>:
         <var class="vars">$format</var> = <var class="strings">'%d'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'MONTH'</var>:
         <var class="vars">$format</var> = <var class="strings">'%m'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'YEAR'</var>:
         <var class="vars">$format</var> = <var class="strings">'%Y'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'MINUTE_SECOND'</var>:
         <var class="vars">$format</var> = <var class="strings">'%M:%S'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'HOUR_MINUTE'</var>:
         <var class="vars">$format</var> = <var class="strings">'%H:%M'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'DAY_HOUR'</var>:
         <var class="vars">$format</var> = <var class="strings">'%d %H'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'YEAR_MONTH'</var>:
         <var class="vars">$format</var> = <var class="strings">'%Y-%m'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'HOUR_SECOND'</var>:
         <var class="vars">$format</var> = <var class="strings">'%H:%M:%S'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'DAY_MINUTE'</var>:
         <var class="vars">$format</var> = <var class="strings">'%d %H:%M'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'DAY_SECOND'</var>:
         <var class="vars">$format</var> = <var class="strings">'%d %H:%M:%S'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="keywords">break</var>;
   }
   <var class="keywords">if</var> (<var class="vars">$value</var> !== <var class="keywords">null</var>) {
     <var class="vars">$value</var> = <var class="vars">$this</var>-&gt;<var class="funcs">strftime</var>(<var class="vars">$format</var>, <var class="vars">$value</var>);
   }
   <var class="keywords">return</var> <var class="vars">$value</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0317"><h2>
<a name="p_function_position_317">
<var class="function">position</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> SQL99 Syntax
 POSITION ( substring IN target_string )
 Returns an integer value representing the starting position
  of a string within the search string.</pre>
</div></div><pre id="source-0317"> <var class="keywords">function</var> position(<var class="vars">$search</var> = <var class="keywords">null</var>, <var class="vars">$string</var> = <var class="keywords">null</var>, <var class="vars">$index</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = 0;
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var> &amp;&amp; <var class="vars">$string</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$search</var> != <var class="keywords">null</var>) {
     <var class="vars">$search</var> = (<var class="keywords">string</var>)<var class="vars">$search</var>;
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;posql-&gt;pcharset-&gt;isBinary(<var class="vars">$search</var>)
      || <var class="vars">$this</var>-&gt;posql-&gt;pcharset-&gt;isBinary(<var class="vars">$string</var>)) {
       <var class="keywords">if</var> (<var class="vars">$argn</var> &lt;= 2) {
         <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$index</var>);
       }
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$argn</var> &lt;= 2) {
         <var class="vars">$pos</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$pos</var> = <var class="vars">$this</var>-&gt;unicode-&gt;<var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="vars">$search</var>, <var class="vars">$index</var>);
       }
     }
     <var class="keywords">if</var> (<var class="vars">$pos</var> === <var class="keywords">false</var>) {
       <var class="vars">$result</var> = 0;
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$pos</var> + 1;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
<var class="comments">/*
 }}}  general functions and SQL92-99 syntaxes
*/</var>
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0318"><h2>
<a name="p_class_posql_statement_318">
<var class="class">Posql_Statement</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 The result storage and statement handle class for Posql result objects
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Statement</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0319"><h2>
<a name="p_var_querystring_319">
<var class="var">queryString</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   maintains the string of the last SQL statement</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0320"><h2>
<a name="p_var_defaultfetchmode_320">
<var class="var">defaultFetchMode</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   the default fetch mode as string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0321"><h2>
<a name="p_var_fetchmode_321">
<var class="var">fetchMode</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>string</em>   maintains fetch mode as string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0322"><h2>
<a name="p_var_fetchinfo_322">
<var class="var">fetchInfo</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    maintains options of fetch mode as array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0323"><h2>
<a name="p_var_rows_323">
<var class="var">rows</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    maintains result rows as array</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0324"><h2>
<a name="p_var_rowcount_324">
<var class="var">rowCount</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   maintains count of result rows</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0325"><h2>
<a name="p_var_columncount_325">
<var class="var">columnCount</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   maintains count of results columns</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0326"><h2>
<a name="p_var_affectedrows_326">
<var class="var">affectedRows</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>   maintains the number of rows ware affected</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0327"><h2>
<a name="p_var_columnnames_327">
<var class="var">columnNames</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    maintains column names as associate array</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0328"><h2>
<a name="p_var_bindparams_328">
<var class="var">bindParams</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    maintains parameters to bind placeholder</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0329"><h2>
<a name="p_var_bindcolumns_329">
<var class="var">bindColumns</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>    maintains columns to bind on rows</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0330"><h2>
<a name="p_var_posql_330">
<var class="var">posql</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>object</em>   maintains reference of the Posql instance</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0331"><h2>
<a name="p_function_posql_statement_331">
<var class="function">Posql_Statement</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>object</em>  give of the Posql self</dd>
<dt>param</dt>
<dd><em>array</em>   the result rows as array</dd>
<dt>param</dt>
<dd><em>string</em>  the last SQL statement</dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0331"> <var class="keywords">function</var> Posql_Statement(&amp;<var class="vars">$posql</var>, <var class="vars">$rows</var> = <var class="keywords">array</var>(), <var class="vars">$query</var> = <var class="keywords">null</var>){
   <var class="vars">$this</var>-&gt;rows = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;fetchMode = <var class="vars">$this</var>-&gt;defaultFetchMode;
   <var class="vars">$this</var>-&gt;_referObject(<var class="vars">$posql</var>);
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$query</var>)) {
     <var class="vars">$this</var>-&gt;queryString = <var class="vars">$query</var>;
   }
   <var class="vars">$this</var>-&gt;_setResultRows(<var class="vars">$rows</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0332"><h2>
<a name="p_function___destruct_332">
<var class="function">__destruct</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Destructor for PHP Version 5+
 Release all referenced properties
</pre>
</div></div><pre id="source-0332"> <var class="keywords">function</var> <var class="keywords">__destruct</var>(){
   <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;posql);
   <var class="keywords">foreach</var> (<var class="funcs">get_object_vars</var>(<var class="vars">$this</var>) <var class="keywords">as</var> <var class="vars">$prop</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">if</var> (<var class="vars">$prop</var> != <var class="keywords">null</var>) {
       <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;{<var class="vars">$prop</var>});
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0333"><h2>
<a name="p_function__referobject_333">
<var class="function">_referObject</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>object</em>  give of the Posql self</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Reference to the instance of Posql
</pre>
</div></div><pre id="source-0333"> <var class="keywords">function</var> _referObject(&amp;<var class="vars">$posql</var>){
   <var class="vars">$this</var>-&gt;posql = &amp; <var class="vars">$posql</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0334"><h2>
<a name="p_function__setresultrows_334">
<var class="function">_setResultRows</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the result rows</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Set the result rows and the informations to internal properties
</pre>
</div></div><pre id="source-0334"> <var class="keywords">function</var> _setResultRows(<var class="vars">$rows</var>){
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
     <var class="vars">$this</var>-&gt;rows = <var class="vars">$rows</var>;
     <var class="vars">$this</var>-&gt;rowCount = <var class="funcs">count</var>(<var class="vars">$this</var>-&gt;rows);
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$this</var>-&gt;rows))) {
       <var class="vars">$this</var>-&gt;columnCount = <var class="funcs">count</var>(<var class="funcs">current</var>(<var class="vars">$this</var>-&gt;rows));
       <var class="vars">$this</var>-&gt;columnNames = <var class="funcs">array_flip</var>(<var class="funcs">array_keys</var>(<var class="funcs">current</var>(<var class="vars">$this</var>-&gt;rows)));
     }
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$rows</var>)) {
       <var class="vars">$this</var>-&gt;affectedRows = (<var class="keywords">int</var>)<var class="vars">$rows</var>;
       <var class="vars">$this</var>-&gt;rowCount = <var class="vars">$this</var>-&gt;affectedRows;
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0335"><h2>
<a name="p_function_execute_335">
<var class="function">execute</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    an array of values with as many elements</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Executes a prepared statement
                   as there are bound parameters
                   in the SQL statement being executed.
</pre>
</div></div><pre id="source-0335"> <var class="keywords">function</var> execute(<var class="vars">$params</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;posql-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$params</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$params</var>)) {
       <var class="vars">$increment</var> = 0;
       <var class="funcs">reset</var>(<var class="vars">$params</var>);
       <var class="keywords">if</var> (<var class="funcs">key</var>(<var class="vars">$params</var>) === 0) {
         <var class="vars">$increment</var>++;
       }
       <var class="keywords">foreach</var> (<var class="vars">$params</var> <var class="keywords">as</var> <var class="vars">$param</var> =&gt; <var class="vars">$value</var>) {
         <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$param</var>)) {
           <var class="vars">$param</var> += <var class="vars">$increment</var>;
         }
         <var class="vars">$this</var>-&gt;bindValue(<var class="vars">$param</var>, <var class="vars">$value</var>);
       }
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;queryString) &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$this</var>-&gt;queryString)) {
       <var class="vars">$args</var> = <var class="keywords">array</var>();
       <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;queryString;
       <var class="vars">$is_manip</var> = <var class="vars">$this</var>-&gt;posql-&gt;isManip(<var class="vars">$query</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;bindParams) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;bindParams)) {
         <var class="vars">$identifier</var> = <var class="strings">' %a '</var>;
         <var class="vars">$index</var> = 1;
         <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;posql-&gt;splitSyntax(<var class="vars">$query</var>);
         <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
           <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
           <var class="vars">$next</var> = <var class="vars">$this</var>-&gt;posql-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$j</var>);
           <var class="keywords">switch</var> (<var class="vars">$token</var>) {
             <var class="keywords">case</var> <var class="strings">'?'</var>:
                 <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$index</var>, <var class="vars">$this</var>-&gt;bindParams)) {
                   <var class="vars">$args</var>[] = <var class="vars">$this</var>-&gt;bindParams[<var class="vars">$index</var>++];
                   <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="vars">$identifier</var>;
                 }
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">':'</var>:
                 <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var>
                  &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$next</var>, <var class="vars">$this</var>-&gt;bindParams)) {
                   <var class="vars">$args</var>[] = <var class="vars">$this</var>-&gt;bindParams[<var class="vars">$next</var>];
                   <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="strings">''</var>;
                   <var class="vars">$tokens</var>[<var class="vars">$j</var>] = <var class="vars">$identifier</var>;
                 }
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'%'</var>:
                 <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="strings">'%%'</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">default</var>:
                 <var class="keywords">break</var>;
           }
         }
         <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;posql-&gt;joinWords(<var class="vars">$tokens</var>);
       }
       <var class="vars">$rows</var> = <var class="keywords">array</var>();
       <var class="vars">$this</var>-&gt;posql-&gt;_fromStatement = <var class="keywords">true</var>;
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$args</var>)) {
         <var class="keywords">if</var> (<var class="vars">$is_manip</var>) {
           <var class="vars">$rows</var> = <var class="vars">$this</var>-&gt;posql-&gt;<var class="funcs">exec</var>(<var class="vars">$query</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$rows</var> = <var class="vars">$this</var>-&gt;posql-&gt;query(<var class="vars">$query</var>);
         }
       } <var class="keywords">else</var> {
         <var class="funcs">array_unshift</var>(<var class="vars">$args</var>, <var class="vars">$query</var>);
         <var class="vars">$rows</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>-&gt;posql,
                                            <var class="strings">'queryf'</var>), <var class="vars">$args</var>);
       }
       <var class="vars">$this</var>-&gt;posql-&gt;_fromStatement = <var class="keywords">null</var>;
       <var class="vars">$this</var>-&gt;_setResultRows(<var class="vars">$rows</var>);
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;posql-&gt;hasError()) {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0336"><h2>
<a name="p_function_bindvalue_336">
<var class="function">bindValue</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>bindParam, bindColumn</dd>
<dt>param</dt>
<dd><em>mixed</em>    parameter identifier (e.g. &#039;?&#039; or &#039;:xxx&#039;)</dd>
<dt>param</dt>
<dd><em>mixed</em>    variable reference</dd>
<dt>param</dt>
<dd><em>mixed</em>    specifies the type of the field</dd>
<dt>param</dt>
<dd><em>number</em>   reflected the length of the data type</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc">  Binds a value to a parameter
 For a prepared statement using named placeholders,
  this will be a parameter name of the form :name.
 For a prepared statement using question mark placeholders,
  this will be the 1-indexed  position of the parameter.
</pre>
</div></div><pre id="source-0336"> <var class="keywords">function</var> bindValue(<var class="vars">$param</var>, <var class="vars">$value</var>, <var class="vars">$type</var> = <var class="keywords">null</var>, <var class="vars">$length</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$param</var>)) {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$param</var>)) {
       <var class="vars">$param</var> = <var class="funcs">ltrim</var>(<var class="vars">$param</var>, <var class="strings">':'</var>);
     }
     <var class="vars">$this</var>-&gt;bindParams[<var class="vars">$param</var>] = <var class="vars">$value</var>;
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0337"><h2>
<a name="p_function_bindparam_337">
<var class="function">bindParam</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>bindValue, bindColumn</dd>
<dt>param</dt>
<dd><em>mixed</em>    parameter identifier (e.g. &#039;?&#039; or &#039;:xxx&#039;)</dd>
<dt>param</dt>
<dd><em>mixed</em>    variable reference</dd>
<dt>param</dt>
<dd><em>mixed</em>    specifies the type of the field</dd>
<dt>param</dt>
<dd><em>number</em>   reflected the length of the data type</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Binds a parameter to the specified variable name
</pre>
</div></div><pre id="source-0337"> <var class="keywords">function</var> bindParam(<var class="vars">$param</var>, &amp;<var class="vars">$var</var>, <var class="vars">$type</var> = <var class="keywords">null</var>, <var class="vars">$length</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$param</var>)) {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$param</var>)) {
       <var class="vars">$param</var> = <var class="funcs">ltrim</var>(<var class="vars">$param</var>, <var class="strings">':'</var>);
     }
     <var class="vars">$this</var>-&gt;bindParams[<var class="vars">$param</var>] = &amp; <var class="vars">$var</var>;
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0338"><h2>
<a name="p_function_bindcolumn_338">
<var class="function">bindColumn</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>bindValue, bindParam</dd>
<dt>param</dt>
<dd><em>mixed</em>    column number or name</dd>
<dt>param</dt>
<dd><em>mixed</em>    variable reference</dd>
<dt>param</dt>
<dd><em>mixed</em>    specifies the type of the field</dd>
<dt>param</dt>
<dd><em>number</em>   reflected the maximum value</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Bind a column to a PHP variable
 About the first argument(column):
   Number of the column (1-indexed)
    or name of the column in the result set.
   If using the column name,
    be aware that the name should match the case of the column.
</pre>
</div></div><pre id="source-0338"> <var class="keywords">function</var> bindColumn(<var class="vars">$column</var>, &amp;<var class="vars">$var</var>, <var class="vars">$type</var> = <var class="keywords">null</var>, <var class="vars">$maxlen</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$column</var>)) {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$column</var>)) {
       <var class="vars">$column</var> = <var class="funcs">ltrim</var>(<var class="vars">$column</var>, <var class="strings">':'</var>);
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$column</var>)) {
       <var class="vars">$column</var>--;
       <var class="keywords">if</var> (<var class="vars">$column</var> &lt; 0) {
         <var class="vars">$column</var>++;
       }
     }
     <var class="vars">$this</var>-&gt;bindColumns[<var class="vars">$column</var>] = &amp; <var class="vars">$var</var>;
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0339"><h2>
<a name="p_function__assignbindcolumns_339">
<var class="function">_assignBindColumns</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    optionally, the row to fetched</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Bind and assign to PHP variable to a value in the result row
</pre>
</div></div><pre id="source-0339"> <var class="keywords">function</var> _assignBindColumns(<var class="vars">$row</var> = <var class="keywords">array</var>()){
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;bindColumns) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;bindColumns)) {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$row</var>)) {
       <var class="vars">$row</var> = <var class="funcs">end</var>(<var class="vars">$this</var>-&gt;rows);
       <var class="funcs">reset</var>(<var class="vars">$this</var>-&gt;rows);
     }
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$row</var>)) {
       <var class="vars">$index</var> = 0;
       <var class="keywords">foreach</var> (<var class="vars">$row</var> <var class="keywords">as</var> <var class="vars">$column</var> =&gt; <var class="vars">$value</var>) {
         <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$column</var>, <var class="vars">$this</var>-&gt;bindColumns)) {
           <var class="vars">$this</var>-&gt;bindColumns[<var class="vars">$column</var>] = <var class="vars">$value</var>;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$index</var>, <var class="vars">$this</var>-&gt;bindColumns)) {
           <var class="vars">$this</var>-&gt;bindColumns[<var class="vars">$index</var>] = <var class="vars">$value</var>;
         }
         <var class="vars">$index</var>++;
       }
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0340"><h2>
<a name="p_function_getcolumnnames_340">
<var class="function">getColumnNames</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em>  whether flip the key and the index</dd>
<dt>return</dt>
<dd><em>array</em>    the names of columns as associate array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return the names of columns by the query result or from the cache.
 The result names are associate array(column =&gt; index).
</pre>
</div></div><pre id="source-0340"> <var class="keywords">function</var> getColumnNames(<var class="vars">$flip</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;columnNames)) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;rows)
      &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;rows) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">current</var>(<var class="vars">$this</var>-&gt;rows))) {
       <var class="vars">$this</var>-&gt;columnNames = <var class="funcs">array_flip</var>(<var class="funcs">array_keys</var>(<var class="funcs">current</var>(<var class="vars">$this</var>-&gt;rows)));
     } <var class="keywords">else</var> {
       <var class="vars">$this</var>-&gt;columnNames = <var class="keywords">array</var>();
     }
   }
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;columnNames) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;columnNames)) {
     <var class="keywords">if</var> (<var class="vars">$flip</var>) {
       <var class="vars">$result</var> = <var class="funcs">array_flip</var>(<var class="vars">$this</var>-&gt;columnNames);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;columnNames;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0341"><h2>
<a name="p_function_setfetchmode_341">
<var class="function">setFetchMode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the fetch mode of numerical value or string</dd>
<dt>param</dt>
<dd><em>string</em>  the class name of the object to be returned</dd>
<dt>param</dt>
<dd><em>array</em>   the arguments which will be passed class constructor</dd>
<dt>return</dt>
<dd><em>boolean</em> success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Sets the fetch mode
 This mode should be used by default on queries on this connection.
</pre>
</div></div><pre id="source-0341"> <var class="keywords">function</var> setFetchMode(<var class="vars">$fetch_mode</var> = <var class="keywords">null</var>, <var class="vars">$args_1</var> = <var class="keywords">null</var>, <var class="vars">$args_2</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$mode</var> = <var class="vars">$this</var>-&gt;mapFetchMode(<var class="vars">$fetch_mode</var>, <var class="keywords">true</var>);
   <var class="keywords">switch</var> (<var class="vars">$mode</var>) {
     <var class="keywords">case</var> <var class="strings">'class'</var>:
         <var class="vars">$class_name</var> = <var class="vars">$args_1</var>;
         <var class="vars">$class_args</var> = <var class="vars">$args_2</var>;
         <var class="keywords">if</var> (<var class="vars">$class_name</var> === <var class="keywords">null</var>) {
           <var class="vars">$class_name</var> = <var class="strings">'stdClass'</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$class_args</var> === <var class="keywords">null</var>) {
           <var class="vars">$class_args</var> = <var class="keywords">array</var>();
         }
         <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$class_name</var>)
          || !<var class="vars">$this</var>-&gt;posql-&gt;existsClass(<var class="vars">$class_name</var>)) {
           <var class="vars">$error</var> = (<var class="keywords">string</var>)<var class="vars">$class_name</var>;
           <var class="vars">$this</var>-&gt;posql-&gt;pushError(<var class="strings">'Not exists class(%s)'</var>, <var class="vars">$error</var>);
         } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$class_args</var>)) {
           <var class="vars">$this</var>-&gt;posql-&gt;pushError(<var class="strings">'Only array type is enabled as arguments'</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;fetchInfo[<var class="strings">'class_name'</var>] = <var class="vars">$class_name</var>;
           <var class="vars">$this</var>-&gt;fetchInfo[<var class="strings">'class_args'</var>] = <var class="vars">$class_args</var>;
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'column'</var>:
         <var class="vars">$column_key</var> = <var class="vars">$args_1</var>;
         <var class="keywords">if</var> (<var class="vars">$column_key</var> === <var class="keywords">null</var>) {
           <var class="vars">$column_key</var> = 0;
         }
         <var class="keywords">if</var> (!<var class="funcs">is_scalar</var>(<var class="vars">$column_key</var>)) {
           <var class="vars">$this</var>-&gt;posql-&gt;pushError(<var class="strings">'Should be given'</var>
                                .  <var class="strings">' the scalar type as arguments'</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;fetchInfo[<var class="strings">'column_key'</var>] = <var class="vars">$column_key</var>;
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'lazy'</var>:
     <var class="keywords">case</var> <var class="strings">'bound'</var>:
     <var class="keywords">case</var> <var class="strings">'into'</var>:
     <var class="keywords">case</var> <var class="strings">'single'</var>:
     <var class="keywords">case</var> <var class="strings">'string'</var>:
     <var class="keywords">case</var> <var class="strings">'integer'</var>:
     <var class="keywords">case</var> <var class="strings">'int'</var>:
     <var class="keywords">case</var> <var class="strings">'htmlentity'</var>:
     <var class="comments">//case 'htmltable':</var>
     <var class="keywords">case</var> <var class="strings">'join'</var>:
     <var class="keywords">case</var> <var class="strings">'export'</var>:
     <var class="keywords">case</var> <var class="strings">'serialize'</var>:
     <var class="keywords">case</var> <var class="strings">'httpquery'</var>:
         <var class="vars">$this</var>-&gt;posql-&gt;pushError(<var class="strings">'Not supported the fetch mode(%s)'</var>, <var class="vars">$mode</var>);
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$result</var> = <var class="keywords">true</var>;
         <var class="keywords">break</var>;
   }
   <var class="keywords">if</var> (<var class="vars">$result</var>) {
     <var class="vars">$this</var>-&gt;fetchMode = <var class="vars">$mode</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0342"><h2>
<a name="p_function_mapfetchmode_342">
<var class="function">mapFetchMode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the fetch mode of numerical value or string</dd>
<dt>param</dt>
<dd><em>boolean</em> whether get the fetch mode as string</dd>
<dt>return</dt>
<dd><em>mixed</em>   the value to mapped of fetch mode</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Mapping the fetch mode by specified type
</pre>
</div></div><pre id="source-0342"> <var class="keywords">function</var> mapFetchMode(<var class="vars">$fetch_mode</var>, <var class="vars">$as_string</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$marks</var>, <var class="vars">$flip_maps</var>, <var class="vars">$maps</var> = <var class="keywords">array</var>(
     <var class="strings">'lazy'</var>   =&gt; 1,
     <var class="strings">'assoc'</var>  =&gt; 2,
     <var class="strings">'number'</var> =&gt; 3,
     <var class="strings">'num'</var>    =&gt; 3,
     <var class="strings">'both'</var>   =&gt; 4,
     <var class="strings">'object'</var> =&gt; 5,
     <var class="strings">'obj'</var>    =&gt; 5,
     <var class="strings">'bound'</var>  =&gt; 6,
     <var class="strings">'column'</var> =&gt; 7,
     <var class="strings">'class'</var>  =&gt; 8,
     <var class="strings">'into'</var>   =&gt; 9,
     <var class="comments">//'tablenames' =&gt; 14,</var>
     <var class="strings">'single'</var>   =&gt; 100,
     <var class="strings">'string'</var>   =&gt; 101,
     <var class="strings">'integer'</var>  =&gt; 102,
     <var class="strings">'int'</var>      =&gt; 102,
     <var class="strings">'htmlentity'</var> =&gt; 110,
     <var class="strings">'htmltable'</var>  =&gt; 111,
     <var class="strings">'join'</var>       =&gt; 112,
     <var class="strings">'export'</var>     =&gt; 113,
     <var class="strings">'serialize'</var>  =&gt; 114,
     <var class="strings">'httpquery'</var>  =&gt; 115
   );
   <var class="keywords">if</var> (!<var class="vars">$marks</var>) {
     <var class="vars">$marks</var> = <var class="keywords">array</var>(<var class="strings">'_'</var>, <var class="strings">'-'</var>, <var class="strings">':'</var>, <var class="strings">'.'</var>);
     <var class="vars">$flip_maps</var> = <var class="funcs">array_flip</var>(<var class="vars">$maps</var>);
   }
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$mode</var> = <var class="vars">$fetch_mode</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_scalar</var>(<var class="vars">$mode</var>)) {
     <var class="vars">$mode</var> = <var class="keywords">null</var>;
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$mode</var>)) {
     <var class="vars">$mode</var> = (<var class="keywords">int</var>)<var class="vars">$mode</var>;
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$mode</var>)) {
     <var class="vars">$mode</var> = <var class="funcs">strtolower</var>(<var class="vars">$mode</var>);
     <var class="keywords">foreach</var> (<var class="vars">$marks</var> <var class="keywords">as</var> <var class="vars">$mark</var>) {
       <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$mode</var>, <var class="vars">$mark</var>) !== <var class="keywords">false</var>) {
         <var class="vars">$split</var> = <var class="funcs">explode</var>(<var class="vars">$mark</var>, <var class="vars">$mode</var>);
         <var class="vars">$mode</var> = <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$split</var>);
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$mode</var> !== <var class="keywords">null</var>
    &amp;&amp; (<var class="funcs">is_string</var>(<var class="vars">$mode</var>) || <var class="funcs">is_int</var>(<var class="vars">$mode</var>))) {
     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$mode</var>, <var class="vars">$maps</var>)) {
       <var class="vars">$result</var> = <var class="vars">$maps</var>[<var class="vars">$mode</var>];
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$mode</var>, <var class="vars">$flip_maps</var>)) {
       <var class="vars">$result</var> = <var class="vars">$mode</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$mode</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$mode</var>)) {
         <var class="keywords">foreach</var> (<var class="vars">$maps</var> <var class="keywords">as</var> <var class="vars">$map</var> =&gt; <var class="vars">$index</var>) {
           <var class="keywords">if</var> (<var class="funcs">strncasecmp</var>(<var class="vars">$map</var>, <var class="vars">$mode</var>, 4) === 0) {
             <var class="vars">$result</var> = <var class="vars">$index</var>;
             <var class="keywords">break</var>;
           }
         }
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$mode</var>) &amp;&amp; !<var class="funcs">array_key_exists</var>(<var class="vars">$mode</var>, <var class="vars">$flip_maps</var>)) {
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt;= 10; <var class="vars">$i</var>++) {
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$flip_maps</var>)) {
             <var class="vars">$mode_name</var> = <var class="vars">$flip_maps</var>[<var class="vars">$i</var>];
             <var class="vars">$pdo_const</var> = <var class="funcs">sprintf</var>(<var class="strings">'PDO::FETCH_%s'</var>, <var class="vars">$mode_name</var>);
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$maps</var>[<var class="vars">$flip_maps</var>[<var class="vars">$i</var>]])
              &amp;&amp; <var class="vars">$this</var>-&gt;posql-&gt;compareDefinedValue(<var class="vars">$pdo_const</var>, <var class="vars">$mode</var>, <var class="keywords">true</var>)) {
               <var class="vars">$result</var> = <var class="vars">$maps</var>[<var class="vars">$flip_maps</var>[<var class="vars">$i</var>]];
               <var class="keywords">break</var>;
             }
           }
         }
       }
     }
   }
   <var class="keywords">if</var> (!<var class="funcs">is_int</var>(<var class="vars">$result</var>)) {
     <var class="vars">$result</var> = <var class="vars">$maps</var>[<var class="vars">$this</var>-&gt;defaultFetchMode];
   }
   <var class="keywords">if</var> (<var class="vars">$as_string</var>) {
     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$result</var>, <var class="vars">$flip_maps</var>)) {
       <var class="vars">$result</var> = <var class="vars">$flip_maps</var>[<var class="vars">$result</var>];
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;defaultFetchMode;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0343"><h2>
<a name="p_function_fetch_343">
<var class="function">fetch</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the fetch mode of numerical value or string</dd>
<dt>param</dt>
<dd><em>mixed</em>   the value of the first argument</dd>
<dt>param</dt>
<dd><em>array</em>   the value of the second argument</dd>
<dt>return</dt>
<dd><em>mixed</em>   the value that was fetched</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Fetches next row by specified fetch mode
 This method is able to use the constant PDO::*
</pre>
</div></div><pre id="source-0343"> <var class="keywords">function</var> fetch(<var class="vars">$fetch_mode</var> = <var class="keywords">null</var>, <var class="vars">$args_1</var> = <var class="keywords">null</var>, <var class="vars">$args_2</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$row</var> = <var class="funcs">array_shift</var>(<var class="vars">$this</var>-&gt;rows);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$row</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$row</var>)) {
     <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
     <var class="vars">$mode</var> = <var class="keywords">null</var>;
     <var class="keywords">if</var> (<var class="vars">$argn</var> === 0
      || <var class="vars">$this</var>-&gt;setFetchMode(<var class="vars">$fetch_mode</var>, <var class="vars">$args_1</var>, <var class="vars">$args_2</var>)) {
       <var class="vars">$mode</var> = <var class="vars">$this</var>-&gt;fetchMode;
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;posql-&gt;hasError()) {
       <var class="vars">$this</var>-&gt;_assignBindColumns(<var class="vars">$row</var>);
       <var class="keywords">switch</var> (<var class="vars">$mode</var>) {
         <var class="keywords">case</var> <var class="strings">'assoc'</var>:
             <var class="vars">$result</var> = <var class="vars">$row</var>;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'number'</var>:
         <var class="keywords">case</var> <var class="strings">'num'</var>:
             <var class="vars">$result</var> = <var class="funcs">array_values</var>(<var class="vars">$row</var>);
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'both'</var>:
             <var class="vars">$result</var> = <var class="vars">$row</var> + <var class="funcs">array_values</var>(<var class="vars">$row</var>);
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'object'</var>:
         <var class="keywords">case</var> <var class="strings">'obj'</var>:
             <var class="vars">$result</var> = (<var class="keywords">object</var>)<var class="vars">$row</var>;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'column'</var>:
             <var class="vars">$column_key</var> = <var class="vars">$this</var>-&gt;fetchInfo[<var class="strings">'column_key'</var>];
             <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$column_key</var>, <var class="vars">$row</var>)) {
               <var class="vars">$result</var> = <var class="vars">$row</var>[<var class="vars">$column_key</var>];
             } <var class="keywords">else</var> {
               <var class="vars">$keys</var> = <var class="funcs">array_keys</var>(<var class="vars">$row</var>);
               <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$column_key</var>, <var class="vars">$keys</var>)) {
                 <var class="vars">$result</var> = <var class="vars">$row</var>[<var class="vars">$keys</var>[<var class="vars">$column_key</var>]];
               } <var class="keywords">else</var> {
                 <var class="vars">$error</var> = (<var class="keywords">string</var>)<var class="vars">$column_key</var>;
                 <var class="vars">$this</var>-&gt;posql-&gt;pushError(<var class="strings">'Invalid column index(%s)'</var>,
                                         <var class="vars">$error</var>);
                 <var class="vars">$result</var> = <var class="keywords">false</var>;
               }
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'class'</var>:
             <var class="vars">$class</var> = <var class="vars">$this</var>-&gt;fetchInfo[<var class="strings">'class_name'</var>];
             <var class="vars">$args</var>  = <var class="vars">$this</var>-&gt;fetchInfo[<var class="strings">'class_args'</var>];
             <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
               <var class="vars">$args</var> = <var class="keywords">array</var>();
             }
             <var class="funcs">array_unshift</var>(<var class="vars">$args</var>, <var class="vars">$class</var>);
             <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>-&gt;posql,
                                                  <var class="strings">'createInstance'</var>), <var class="vars">$args</var>);
             <var class="keywords">if</var> (!<var class="funcs">is_object</var>(<var class="vars">$result</var>)) {
               <var class="vars">$class</var> = (<var class="keywords">string</var>)<var class="vars">$class</var>;
               <var class="vars">$this</var>-&gt;posql-&gt;pushError(<var class="strings">'Unable to create'</var>
                                    .  <var class="strings">' instance of class(%s)'</var>, <var class="vars">$class</var>);
               <var class="vars">$result</var> = <var class="keywords">false</var>;
             } <var class="keywords">else</var> {
               <var class="keywords">foreach</var> (<var class="vars">$row</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
                 <var class="vars">$result</var>-&gt;{<var class="vars">$key</var>} = <var class="vars">$val</var>;
               }
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'lazy'</var>:
         <var class="keywords">case</var> <var class="strings">'bound'</var>:
         <var class="keywords">case</var> <var class="strings">'into'</var>:
         <var class="keywords">case</var> <var class="strings">'single'</var>:
         <var class="keywords">case</var> <var class="strings">'string'</var>:
         <var class="keywords">case</var> <var class="strings">'integer'</var>:
         <var class="keywords">case</var> <var class="strings">'int'</var>:
         <var class="keywords">case</var> <var class="strings">'htmlentity'</var>:
         <var class="keywords">case</var> <var class="strings">'htmltable'</var>:
         <var class="keywords">case</var> <var class="strings">'join'</var>:
         <var class="keywords">case</var> <var class="strings">'export'</var>:
         <var class="keywords">case</var> <var class="strings">'serialize'</var>:
         <var class="keywords">case</var> <var class="strings">'httpquery'</var>:
         <var class="keywords">default</var>:
             <var class="vars">$this</var>-&gt;posql-&gt;pushError(<var class="strings">'Not supported the fetch mode(%s)'</var>,
                                     <var class="vars">$mode</var>);
             <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0344"><h2>
<a name="p_function_fetchrow_344">
<var class="function">fetchRow</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>fetch</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Alias of fetch()
</pre>
</div></div><pre id="source-0344"> <var class="keywords">function</var> fetchRow(){
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'fetch'</var>), <var class="vars">$args</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0345"><h2>
<a name="p_function_fetchall_345">
<var class="function">fetchAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the fetch mode of numerical value or string</dd>
<dt>param</dt>
<dd><em>mixed</em>   the value of the first argument</dd>
<dt>param</dt>
<dd><em>array</em>   the value of the second argument</dd>
<dt>return</dt>
<dd><em>array</em>   the all rows which to fetched</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return and fetch the all result rows by specified fetch mode as array
</pre>
</div></div><pre id="source-0345"> <var class="keywords">function</var> fetchAll(<var class="vars">$fetch_mode</var> = <var class="keywords">null</var>, <var class="vars">$args_1</var> = <var class="keywords">null</var>, <var class="vars">$args_2</var> = <var class="keywords">null</var>) {
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="vars">$mode</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$argn</var> === 0
    || <var class="vars">$this</var>-&gt;setFetchMode(<var class="vars">$fetch_mode</var>, <var class="vars">$args_1</var>, <var class="vars">$args_2</var>)) {
     <var class="vars">$mode</var> = <var class="vars">$this</var>-&gt;fetchMode;
   }
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;rows) || !<var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;rows)) {
     <var class="keywords">switch</var> (<var class="vars">$mode</var>) {
       <var class="keywords">case</var> <var class="strings">'column'</var>:
           <var class="vars">$result</var> = <var class="keywords">null</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'htmltable'</var>:
           <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
           <var class="funcs">array_unshift</var>(<var class="vars">$args</var>, <var class="vars">$this</var>-&gt;rows);
           <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>-&gt;posql,
                                                <var class="strings">'toHTMLTable'</var>), <var class="vars">$args</var>);
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$result</var> = <var class="keywords">array</var>();
           <var class="keywords">break</var>;
     }
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;posql-&gt;hasError()) {
       <var class="vars">$this</var>-&gt;_assignBindColumns();
       <var class="keywords">switch</var> (<var class="vars">$mode</var>) {
         <var class="keywords">case</var> <var class="strings">'assoc'</var>:
             <var class="vars">$result</var> = <var class="funcs">array_splice</var>(<var class="vars">$this</var>-&gt;rows, 0);
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'number'</var>:
         <var class="keywords">case</var> <var class="strings">'num'</var>:
             <var class="vars">$result</var> = <var class="funcs">array_splice</var>(<var class="vars">$this</var>-&gt;rows, 0);
             <var class="vars">$result</var> = <var class="funcs">array_map</var>(<var class="strings">'array_values'</var>, <var class="vars">$result</var>);
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'both'</var>:
             <var class="vars">$this</var>-&gt;rows = <var class="funcs">array_values</var>(<var class="vars">$this</var>-&gt;rows);
             <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$this</var>-&gt;rows);
             <var class="vars">$i</var> = 0;
             <var class="keywords">while</var> (--<var class="vars">$row_count</var> &gt;= 0) {
               <var class="vars">$row</var> = <var class="vars">$this</var>-&gt;rows[<var class="vars">$i</var>];
               <var class="vars">$this</var>-&gt;rows[<var class="vars">$i</var>] = <var class="keywords">null</var>;
               <var class="vars">$result</var>[] = <var class="vars">$row</var> + <var class="funcs">array_values</var>(<var class="vars">$row</var>);
               <var class="vars">$i</var>++;
             }
             <var class="vars">$this</var>-&gt;rows = <var class="keywords">array</var>();
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'object'</var>:
         <var class="keywords">case</var> <var class="strings">'obj'</var>:
             <var class="vars">$this</var>-&gt;rows = <var class="funcs">array_values</var>(<var class="vars">$this</var>-&gt;rows);
             <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$this</var>-&gt;rows);
             <var class="vars">$i</var> = 0;
             <var class="keywords">while</var> (--<var class="vars">$row_count</var> &gt;= 0) {
               <var class="vars">$row</var> = <var class="vars">$this</var>-&gt;rows[<var class="vars">$i</var>];
               <var class="vars">$this</var>-&gt;rows[<var class="vars">$i</var>] = <var class="keywords">null</var>;
               <var class="vars">$result</var>[] = (<var class="keywords">object</var>)<var class="vars">$row</var>;
               <var class="vars">$i</var>++;
             }
             <var class="vars">$this</var>-&gt;rows = <var class="keywords">array</var>();
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'column'</var>:
             <var class="vars">$column_key</var> = <var class="vars">$this</var>-&gt;fetchInfo[<var class="strings">'column_key'</var>];
             <var class="vars">$this</var>-&gt;rows = <var class="funcs">array_values</var>(<var class="vars">$this</var>-&gt;rows);
             <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$this</var>-&gt;rows);
             <var class="vars">$i</var> = 0;
             <var class="keywords">while</var> (--<var class="vars">$row_count</var> &gt;= 0) {
               <var class="vars">$row</var> = <var class="vars">$this</var>-&gt;rows[<var class="vars">$i</var>];
               <var class="vars">$this</var>-&gt;rows[<var class="vars">$i</var>] = <var class="keywords">null</var>;
               <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$column_key</var>, <var class="vars">$row</var>)) {
                 <var class="vars">$result</var>[] = <var class="vars">$row</var>[<var class="vars">$column_key</var>];
               } <var class="keywords">else</var> {
                 <var class="vars">$keys</var> = <var class="funcs">array_keys</var>(<var class="vars">$row</var>);
                 <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$column_key</var>, <var class="vars">$keys</var>)) {
                   <var class="vars">$result</var>[] = <var class="vars">$row</var>[<var class="vars">$keys</var>[<var class="vars">$column_key</var>]];
                 } <var class="keywords">else</var> {
                   <var class="vars">$error</var> = (<var class="keywords">string</var>)<var class="vars">$column_key</var>;
                   <var class="vars">$this</var>-&gt;posql-&gt;pushError(<var class="strings">'Invalid column index(%s)'</var>,
                                           <var class="vars">$error</var>);
                   <var class="vars">$result</var> = <var class="keywords">array</var>();
                   <var class="keywords">break</var>;
                 }
               }
               <var class="vars">$i</var>++;
             }
             <var class="vars">$this</var>-&gt;rows = <var class="keywords">array</var>();
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'class'</var>:
             <var class="keywords">while</var> (<var class="vars">$row</var> = <var class="vars">$this</var>-&gt;fetch(<var class="vars">$fetch_mode</var>, <var class="vars">$args_1</var>, <var class="vars">$args_2</var>)) {
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;posql-&gt;hasError()) {
                 <var class="keywords">break</var>;
               }
               <var class="vars">$result</var>[] = <var class="vars">$row</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'htmltable'</var>:
             <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
             <var class="funcs">array_unshift</var>(<var class="vars">$args</var>, <var class="vars">$this</var>-&gt;rows);
             <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>-&gt;posql,
                                                  <var class="strings">'toHTMLTable'</var>), <var class="vars">$args</var>);
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'lazy'</var>:
         <var class="keywords">case</var> <var class="strings">'bound'</var>:
         <var class="keywords">case</var> <var class="strings">'into'</var>:
         <var class="keywords">case</var> <var class="strings">'single'</var>:
         <var class="keywords">case</var> <var class="strings">'string'</var>:
         <var class="keywords">case</var> <var class="strings">'integer'</var>:
         <var class="keywords">case</var> <var class="strings">'int'</var>:
         <var class="keywords">case</var> <var class="strings">'htmlentity'</var>:
         <var class="keywords">case</var> <var class="strings">'join'</var>:
         <var class="keywords">case</var> <var class="strings">'export'</var>:
         <var class="keywords">case</var> <var class="strings">'serialize'</var>:
         <var class="keywords">case</var> <var class="strings">'httpquery'</var>:
         <var class="keywords">default</var>:
             <var class="vars">$this</var>-&gt;posql-&gt;pushError(<var class="strings">'Not supported the fetch mode(%s)'</var>,
                                     <var class="vars">$mode</var>);
             <var class="keywords">break</var>;
       }
     }
   }
   <var class="vars">$this</var>-&gt;rows = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;posql-&gt;hasError()) {
     <var class="keywords">switch</var> (<var class="vars">$mode</var>) {
       <var class="keywords">case</var> <var class="strings">'column'</var>:
           <var class="vars">$result</var> = <var class="keywords">null</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'htmltable'</var>:
           <var class="vars">$result</var> = (<var class="keywords">string</var>)<var class="keywords">null</var>;
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$result</var> = <var class="keywords">array</var>();
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0346"><h2>
<a name="p_function_fetchallhtmltable_346">
<var class="function">fetchAllHTMLTable</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   optionally, the caption, or the table attributes</dd>
<dt>param</dt>
<dd><em>mixed</em>   optionally, the table attributes, or the caption</dd>
<dt>return</dt>
<dd><em>string</em>  created HTML TABLE element</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Fetches all rows and returns it as a HTML table element
</pre>
</div></div><pre id="source-0346"> <var class="keywords">function</var> fetchAllHTMLTable(<var class="vars">$caption</var> = <var class="keywords">null</var>, <var class="vars">$attr</var> = <var class="keywords">array</var>(<var class="strings">'border'</var> =&gt; 1)){
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="funcs">array_unshift</var>(<var class="vars">$args</var>, <var class="strings">'htmltable'</var>);
   <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'fetchAll'</var>), <var class="vars">$args</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0347"><h2>
<a name="p_function_fetchcolumn_347">
<var class="function">fetchColumn</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>  target column index or column name</dd>
<dt>return</dt>
<dd><em>mixed</em>  value of corresponding column</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns a single column from the next row of a result set
  or FALSE if there are no more rows.
</pre>
</div></div><pre id="source-0347"> <var class="keywords">function</var> fetchColumn(<var class="vars">$column_key</var> = 0){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;fetch(<var class="strings">'column'</var>, <var class="vars">$column_key</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0348"><h2>
<a name="p_function_fetchobject_348">
<var class="function">fetchObject</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  name of the created class, defaults to &quot;stdClass&quot;</dd>
<dt>param</dt>
<dd><em>array</em>   elements of this array are passed to the constructor</dd>
<dt>return</dt>
<dd><em>object</em>  instance of the required class, or FALSE on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Fetches the next row and returns it as an object
</pre>
</div></div><pre id="source-0348"> <var class="keywords">function</var> fetchObject(<var class="vars">$class_name</var> = <var class="keywords">null</var>, <var class="vars">$class_args</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">func_num_args</var>()) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;fetch(<var class="strings">'class'</var>, <var class="vars">$class_name</var>, <var class="vars">$class_args</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;fetch(<var class="strings">'object'</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0349"><h2>
<a name="p_function_gettablenames_349">
<var class="function">getTableNames</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  the number of target column (e.g. 0, 1, ..)</dd>
<dt>return</dt>
<dd><em>array</em>   the field name which correlated by dot(.), or FALSE</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return the field name which correlated the table with the column by the dot
</pre>
</div></div><pre id="source-0349"> <var class="keywords">function</var> getTableNames(<var class="vars">$key</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$column_names</var> = <var class="vars">$this</var>-&gt;getColumnNames();
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$column_names</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$column_names</var>)) {
     <var class="vars">$tables</var> = <var class="keywords">null</var>;
     <var class="vars">$last_method</var> = <var class="vars">$this</var>-&gt;posql-&gt;getLastMethod();
     <var class="keywords">if</var> (<var class="funcs">strtolower</var>(<var class="vars">$last_method</var>) === <var class="strings">'select'</var>) {
       <var class="vars">$tables</var> = <var class="vars">$this</var>-&gt;posql-&gt;getTableNames();
       <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tables</var>)) {
         <var class="vars">$tables</var> = <var class="keywords">array</var>(<var class="vars">$tables</var> =&gt; <var class="keywords">null</var>);
       }
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$tables</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$tables</var>)) {
         <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;posql-&gt;getMetaData();
         <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
           <var class="vars">$meta</var> = <var class="keywords">array</var>(<var class="keywords">array</var>());
         }
         <var class="vars">$as_columns</var> = <var class="vars">$this</var>-&gt;posql-&gt;getColumnAliasNames();
         <var class="vars">$as_columns</var> = <var class="vars">$this</var>-&gt;posql-&gt;flipArray(<var class="vars">$as_columns</var>);
         <var class="vars">$result</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$column_names</var> <var class="keywords">as</var> <var class="vars">$name</var> =&gt; <var class="vars">$index</var>) {
           <var class="vars">$table_name</var> = <var class="keywords">null</var>;
           <var class="vars">$org_name</var> = <var class="vars">$name</var>;
           <var class="vars">$use_func</var> = <var class="keywords">false</var>;
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$as_columns</var>[<var class="vars">$name</var>])) {
             <var class="vars">$org_name</var> = <var class="vars">$as_columns</var>[<var class="vars">$name</var>];
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$org_name</var>, <var class="strings">'.'</var>) &gt; 0) {
               <var class="keywords">list</var>(<var class="vars">$left_name</var>) = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$org_name</var>);
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;posql-&gt;isEnableName(<var class="vars">$left_name</var>)) {
                 <var class="vars">$table_name</var> = <var class="vars">$left_name</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$use_func</var> = <var class="keywords">true</var>;
               }
             }
           }
           <var class="keywords">if</var> (!<var class="vars">$use_func</var> &amp;&amp; <var class="vars">$table_name</var> == <var class="keywords">null</var>) {
             <var class="keywords">foreach</var> (<var class="vars">$tables</var> <var class="keywords">as</var> <var class="vars">$org_table</var> =&gt; <var class="vars">$as_name</var>) {
               <var class="vars">$metadata</var> = <var class="vars">$this</var>-&gt;posql-&gt;getMetaData(<var class="vars">$org_table</var>);
               <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$metadata</var>)
                &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$org_name</var>, <var class="vars">$metadata</var>)) {
                 <var class="vars">$table_name</var> = <var class="vars">$as_name</var>;
                 <var class="keywords">break</var>;
               }
             }
             <var class="keywords">if</var> (<var class="vars">$table_name</var> == <var class="keywords">null</var>) {
               <var class="keywords">foreach</var> (<var class="vars">$meta</var> <var class="keywords">as</var> <var class="vars">$meta_table</var> =&gt; <var class="vars">$meta_info</var>) {
                 <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$meta_info</var>)
                  &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$org_name</var>, <var class="vars">$meta_info</var>)) {
                   <var class="vars">$table_name</var> = <var class="vars">$meta_table</var>;
                   <var class="keywords">break</var>;
                 }
               }
             }
           }
           <var class="keywords">if</var> (<var class="vars">$table_name</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$name</var> != <var class="keywords">null</var>) {
             <var class="vars">$result</var>[] = <var class="vars">$table_name</var> . <var class="strings">'.'</var> . <var class="vars">$name</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$result</var>[] = <var class="keywords">null</var>;
           }
         }
         <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$key</var>) &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$result</var>[<var class="vars">$key</var>])) {
           <var class="vars">$result</var> = <var class="vars">$result</var>[<var class="vars">$key</var>];
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0350"><h2>
<a name="p_function_rowcount_350">
<var class="function">rowCount</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>number</em>  the actual row count</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the actual row number that was last fetched
</pre>
</div></div><pre id="source-0350"> <var class="keywords">function</var> rowCount(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;rowCount;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0351"><h2>
<a name="p_function_columncount_351">
<var class="function">columnCount</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>number</em>  the number of columns</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the number of columns in the result set
</pre>
</div></div><pre id="source-0351"> <var class="keywords">function</var> columnCount(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;columnCount;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0352"><h2>
<a name="p_function_numrows_352">
<var class="function">numRows</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>number</em>  the number of rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the number of rows in a result object
</pre>
</div></div><pre id="source-0352"> <var class="keywords">function</var> numRows(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;rowCount();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0353"><h2>
<a name="p_function_numcols_353">
<var class="function">numCols</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>number</em>  the number of columns</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Count the number of columns
</pre>
</div></div><pre id="source-0353"> <var class="keywords">function</var> numCols(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;columnCount();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0354"><h2>
<a name="p_function_hasrows_354">
<var class="function">hasRows</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the rows of the result are empty, or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether the rows of the result are empty
</pre>
</div></div><pre id="source-0354"> <var class="keywords">function</var> hasRows(){
   <var class="vars">$result</var> = !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;rows);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0355"><h2>
<a name="p_function_affectedrows_355">
<var class="function">affectedRows</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>number</em>   the number of rows affected</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the number of rows affected
</pre>
</div></div><pre id="source-0355"> <var class="keywords">function</var> affectedRows(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;affectedRows;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0356"><h2>
<a name="p_function_free_356">
<var class="function">free</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Free the internal resources associated with result
</pre>
</div></div><pre id="source-0356"> <var class="keywords">function</var> free(){
   <var class="vars">$this</var>-&gt;<var class="keywords">__destruct</var>();
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0357"><h2>
<a name="p_function_closecursor_357">
<var class="function">closeCursor</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Closes the cursor, enabling the statement to be executed again
</pre>
</div></div><pre id="source-0357"> <var class="keywords">function</var> closeCursor(){
   <var class="vars">$rows</var> = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;_setResultRows(<var class="vars">$rows</var>);
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0358"><h2>
<a name="p_class_posql_pager_358">
<var class="class">Posql_Pager</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 A simple Pager class for client view
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Pager</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0359"><h2>
<a name="p_var_totalcount_359">
<var class="var">totalCount</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number of all items</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0360"><h2>
<a name="p_var_currentpage_360">
<var class="var">currentPage</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    current page number</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0361"><h2>
<a name="p_var_perpage_361">
<var class="var">perPage</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number of items per page</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0362"><h2>
<a name="p_var_range_362">
<var class="var">range</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number of page links for each window</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0363"><h2>
<a name="p_var_totalpages_363">
<var class="var">totalPages</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number of total pages</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0364"><h2>
<a name="p_var_pages_364">
<var class="var">pages</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>array</em>     array with number of pages</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0365"><h2>
<a name="p_var_startpage_365">
<var class="var">startPage</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number of start page</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0366"><h2>
<a name="p_var_endpage_366">
<var class="var">endPage</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number of end page</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0367"><h2>
<a name="p_var_prev_367">
<var class="var">prev</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number of previous page</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0368"><h2>
<a name="p_var_next_368">
<var class="var">next</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number of next page</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0369"><h2>
<a name="p_var_offset_369">
<var class="var">offset</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number offset of SELECT statement</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0370"><h2>
<a name="p_var_limit_370">
<var class="var">limit</var>
</a>
</h2><div class="var"><div>
<dl>
<dt>var</dt>
<dd><em>number</em>    number limit of SELECT statement</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0371"><h2>
<a name="p_function_posql_pager_371">
<var class="function">Posql_Pager</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>object</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Class constructor
</pre>
</div></div><pre id="source-0371"> <var class="keywords">function</var> Posql_Pager(){
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0372"><h2>
<a name="p_function_setpager_372">
<var class="function">setPager</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  number of total items</dd>
<dt>param</dt>
<dd><em>number</em>  current page number</dd>
<dt>param</dt>
<dd><em>number</em>  number of items per page</dd>
<dt>param</dt>
<dd><em>number</em>  number of page links for each window</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Set each pages information for the Pager object
</pre>
</div></div><pre id="source-0372"> <var class="keywords">function</var> setPager(<var class="vars">$total_count</var> = <var class="keywords">null</var>, <var class="vars">$curpage</var> = <var class="keywords">null</var>,
                   <var class="vars">$perpage</var>     = <var class="keywords">null</var>, <var class="vars">$range</var> = <var class="keywords">null</var>){
   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$total_count</var>)) {
     <var class="vars">$this</var>-&gt;totalCount = <var class="vars">$total_count</var>;
   }
   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$curpage</var>)) {
     <var class="vars">$this</var>-&gt;currentPage = <var class="vars">$curpage</var>;
   }
   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$perpage</var>)) {
     <var class="vars">$this</var>-&gt;perPage = <var class="vars">$perpage</var>;
   }
   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$range</var>)) {
     <var class="vars">$this</var>-&gt;<var class="funcs">range</var> = <var class="vars">$range</var>;
   }
   <var class="vars">$this</var>-&gt;totalCount  = <var class="vars">$this</var>-&gt;totalCount  - 0;
   <var class="vars">$this</var>-&gt;currentPage = <var class="vars">$this</var>-&gt;currentPage - 0;
   <var class="vars">$this</var>-&gt;perPage     = <var class="vars">$this</var>-&gt;perPage     - 0;
   <var class="vars">$this</var>-&gt;<var class="funcs">range</var>       = <var class="vars">$this</var>-&gt;<var class="funcs">range</var>       - 0;
   <var class="vars">$this</var>-&gt;totalPages = <var class="funcs">ceil</var>(<var class="vars">$this</var>-&gt;totalCount / <var class="vars">$this</var>-&gt;perPage);
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;totalPages &lt; <var class="vars">$this</var>-&gt;<var class="funcs">range</var>) {
     <var class="vars">$this</var>-&gt;<var class="funcs">range</var> = <var class="vars">$this</var>-&gt;totalPages;
   }
   <var class="vars">$this</var>-&gt;startPage = 1;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;currentPage &gt;= <var class="funcs">ceil</var>(<var class="vars">$this</var>-&gt;<var class="funcs">range</var> / 2)) {
     <var class="vars">$this</var>-&gt;startPage = <var class="vars">$this</var>-&gt;currentPage - <var class="funcs">floor</var>(<var class="vars">$this</var>-&gt;<var class="funcs">range</var> / 2);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;startPage &lt; 1) {
     <var class="vars">$this</var>-&gt;startPage = 1;
   }
   <var class="vars">$this</var>-&gt;endPage = <var class="vars">$this</var>-&gt;startPage + <var class="vars">$this</var>-&gt;<var class="funcs">range</var> - 1;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;currentPage &gt; <var class="vars">$this</var>-&gt;totalPages - <var class="funcs">ceil</var>(<var class="vars">$this</var>-&gt;<var class="funcs">range</var> / 2)) {
     <var class="vars">$this</var>-&gt;endPage = <var class="vars">$this</var>-&gt;totalPages;
     <var class="vars">$this</var>-&gt;startPage = <var class="vars">$this</var>-&gt;endPage - <var class="vars">$this</var>-&gt;<var class="funcs">range</var> + 1;
   }
   <var class="vars">$this</var>-&gt;<var class="funcs">prev</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;currentPage &gt; <var class="vars">$this</var>-&gt;startPage) {
     <var class="vars">$this</var>-&gt;<var class="funcs">prev</var> = <var class="vars">$this</var>-&gt;currentPage - 1;
   }
   <var class="vars">$this</var>-&gt;<var class="funcs">next</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;currentPage &lt; <var class="vars">$this</var>-&gt;endPage) {
     <var class="vars">$this</var>-&gt;<var class="funcs">next</var> = <var class="vars">$this</var>-&gt;currentPage + 1;
   }
   <var class="vars">$range_end</var> = 1;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;endPage) {
     <var class="vars">$range_end</var> = <var class="vars">$this</var>-&gt;endPage;
   }
   <var class="vars">$this</var>-&gt;pages = <var class="funcs">range</var>(<var class="vars">$this</var>-&gt;startPage, <var class="vars">$range_end</var>);
   <var class="vars">$this</var>-&gt;offset = <var class="funcs">ceil</var>(<var class="vars">$this</var>-&gt;currentPage - 1) * <var class="vars">$this</var>-&gt;perPage;
   <var class="vars">$this</var>-&gt;limit = <var class="vars">$this</var>-&gt;perPage;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;totalCount &lt; <var class="vars">$this</var>-&gt;perPage) {
     <var class="vars">$this</var>-&gt;limit = <var class="vars">$this</var>-&gt;totalCount;
   }
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0373"><h2>
<a name="p_class_posql_utils_373">
<var class="class">Posql_Utils</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class is a group of static methods for Posql
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Utils</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0374"><h2>
<a name="p_function_escape_374">
<var class="function">escape</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the subject string to escape</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether or not to escape the wildcards</dd>
<dt>param</dt>
<dd><em>mixed</em>    whether or not enclose string by quotes</dd>
<dt>return</dt>
<dd><em>string</em>   escaped string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Escape a string to validate expression in a query.
 Optionally, and escape characters to validate string as a LIKE pattern.
</pre>
</div></div><pre id="source-0374"> <var class="keywords">function</var> escape(<var class="vars">$string</var>, <var class="vars">$escape_wildcards</var> = <var class="keywords">false</var>, <var class="vars">$enclose</var> = <var class="keywords">false</var>){
   <var class="keywords">if</var> (!<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = <var class="strings">''</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;escapeString(<var class="vars">$string</var>, <var class="vars">$enclose</var>);
     <var class="keywords">if</var> (<var class="vars">$escape_wildcards</var>) {
       <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;escapePattern(<var class="vars">$string</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0375"><h2>
<a name="p_function_escapestring_375">
<var class="function">escapeString</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the string to be quoted</dd>
<dt>param</dt>
<dd><em>mixed</em>   the optionals to enclose marker of string (e.g. &quot;&#039;&quot;)</dd>
<dt>return</dt>
<dd><em>string</em>  the quoted string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Quotes the string so it can be safely used
  within string delimiters in a query.
 Note:
   Version 2.06 older:
     This function does not escapes more than once.
      (the backslash does not become two or more)
   Version 2.07 later:
     The backslashes will be increased when escaping more than once.
                 Or, TRUE will be use single quotation mark(&#039;)
 </pre>
</div></div><pre id="source-0375"> <var class="keywords">function</var> escapeString(<var class="vars">$string</var>, <var class="vars">$enclose</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$bs</var> = <var class="strings">'\\'</var>, <var class="vars">$sq</var> = <var class="strings">'\''</var>, <var class="vars">$dq</var> = <var class="strings">'&quot;'</var>;
   <var class="vars">$quote</var> = <var class="vars">$sq</var>;
   <var class="keywords">if</var> (<var class="vars">$enclose</var> === <var class="vars">$dq</var>) {
     <var class="vars">$quote</var> = <var class="vars">$dq</var>;
   }
   <var class="keywords">if</var> (!<var class="funcs">is_scalar</var>(<var class="vars">$string</var>)) {
     <var class="vars">$string</var> = <var class="strings">''</var>;
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$string</var> == <var class="keywords">null</var>) {
     <var class="vars">$string</var> = (<var class="keywords">string</var>)<var class="vars">$string</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$string</var>, <var class="vars">$bs</var>) !== <var class="keywords">false</var>) {
       <var class="vars">$split</var> = <var class="funcs">explode</var>(<var class="vars">$bs</var>, <var class="vars">$string</var>);
       <var class="vars">$string</var> = <var class="funcs">implode</var>(<var class="vars">$bs</var> . <var class="vars">$bs</var>, <var class="vars">$split</var>);
     }
     <var class="vars">$split</var> = <var class="funcs">explode</var>(<var class="vars">$quote</var>, <var class="vars">$string</var>);
     <var class="vars">$string</var> = <var class="keywords">array</var>();
     <var class="vars">$end</var> = <var class="funcs">count</var>(<var class="vars">$split</var>);
     <var class="keywords">while</var> (--<var class="vars">$end</var> &gt;= 0) {
       <var class="vars">$shift</var> = <var class="funcs">array_shift</var>(<var class="vars">$split</var>);
       <var class="vars">$glue</var> = <var class="strings">''</var>;
       <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="vars">$shift</var>, -1) === <var class="vars">$bs</var>) {
         <var class="vars">$rtrim</var> = <var class="funcs">rtrim</var>(<var class="vars">$shift</var>, <var class="vars">$bs</var>);
         <var class="vars">$diff</var> = <var class="funcs">strlen</var>(<var class="vars">$shift</var>) - <var class="funcs">strlen</var>(<var class="vars">$rtrim</var>);
         <var class="keywords">if</var> (<var class="vars">$end</var>) {
           <var class="keywords">if</var> (<var class="vars">$diff</var> % 2 === 0) {
             <var class="vars">$glue</var> = <var class="vars">$bs</var>;
           }
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$diff</var> % 2 === 1) {
             <var class="vars">$glue</var> = <var class="vars">$bs</var>;
           }
         }
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="vars">$end</var>) {
           <var class="vars">$glue</var> = <var class="vars">$bs</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$glue</var> = <var class="strings">''</var>;
         }
       }
       <var class="vars">$shift</var> .= <var class="vars">$glue</var>;
       <var class="vars">$string</var>[] = <var class="vars">$shift</var>;
     }
     <var class="vars">$string</var> = <var class="funcs">implode</var>(<var class="vars">$quote</var>, <var class="vars">$string</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$enclose</var>) {
     <var class="vars">$string</var> = <var class="vars">$quote</var> . <var class="vars">$string</var> . <var class="vars">$quote</var>;
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0376"><h2>
<a name="p_function_escapepattern_376">
<var class="function">escapePattern</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the string pattern to escape</dd>
<dt>return</dt>
<dd><em>string</em>  the escaped string pattern</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Escape characters that work as wildcard string in a LIKE pattern.
 The wildcard characters &quot;%&quot; and &quot;_&quot; should be escaped.
 </pre>
</div></div><pre id="source-0376"> <var class="keywords">function</var> escapePattern(<var class="vars">$pattern</var>){
   <var class="keywords">static</var> <var class="vars">$translates</var> = <var class="keywords">array</var>(
     <var class="strings">'%'</var> =&gt; <var class="strings">'\%'</var>,
     <var class="strings">'_'</var> =&gt; <var class="strings">'\_'</var>
   );
   <var class="keywords">if</var> (!<var class="funcs">is_scalar</var>(<var class="vars">$pattern</var>)) {
     <var class="vars">$pattern</var> = <var class="strings">''</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$bs</var> = <var class="strings">'\\'</var>;
     <var class="vars">$pattern</var> = <var class="funcs">str_replace</var>(<var class="vars">$bs</var>, <var class="vars">$bs</var> . <var class="vars">$bs</var>, <var class="vars">$pattern</var>);
     <var class="vars">$pattern</var> = <var class="funcs">strtr</var>(<var class="vars">$pattern</var>, <var class="vars">$translates</var>);
   }
   <var class="keywords">return</var> <var class="vars">$pattern</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0377"><h2>
<a name="p_function_unescapesqlstring_377">
<var class="function">unescapeSQLString</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>concatStringTokens()</dd>
<dt>param</dt>
<dd><em>string</em>  string of target</dd>
<dt>param</dt>
<dd><em>string</em>  relation character row to unite</dd>
<dt>return</dt>
<dd><em>string</em>  unescaped string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The string in SQL query where
  it is escaped is returned to former character
 When giving the relation character to unite,
  and it become it side by side by quotation mark (&#039;&#039;),
  they are united.
 </pre>
</div></div><pre id="source-0377"> <var class="keywords">function</var> unescapeSQLString(<var class="vars">$string</var>, <var class="vars">$concat</var> = <var class="keywords">null</var>){
   <var class="keywords">static</var> <var class="vars">$tr</var> = <var class="keywords">array</var>(
     <var class="strings">'\0'</var>   =&gt; <var class="strings">&quot;\x00&quot;</var>,
     <var class="strings">&quot;\\'&quot;</var>  =&gt; <var class="strings">&quot;'&quot;</var>,
     <var class="strings">'\\&quot;'</var>  =&gt; <var class="strings">'&quot;'</var>,
     <var class="strings">'\b'</var>   =&gt; <var class="strings">&quot;\x08&quot;</var>,
     <var class="strings">'\n'</var>   =&gt; <var class="strings">&quot;\x0A&quot;</var>,
     <var class="strings">'\r'</var>   =&gt; <var class="strings">&quot;\x0D&quot;</var>,
     <var class="strings">'\t'</var>   =&gt; <var class="strings">&quot;\t&quot;</var>,
     <var class="strings">'\Z'</var>   =&gt; <var class="strings">&quot;\x1A&quot;</var>,<var class="comments">// (Ctrl-Z)</var>
     <var class="strings">'\\\\'</var> =&gt; <var class="strings">'\\'</var>,
     <var class="strings">'\%'</var>   =&gt; <var class="strings">'%'</var>,
     <var class="strings">'\_'</var>   =&gt; <var class="strings">'_'</var>
   );
   <var class="keywords">if</var> (<var class="vars">$concat</var> !== <var class="keywords">null</var> &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$string</var>) === <var class="funcs">ord</var>(<var class="vars">$concat</var>)) {
     <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;concatStringTokens(<var class="vars">$string</var>, <var class="vars">$concat</var>);
   }
   <var class="vars">$string</var> = <var class="funcs">strtr</var>(<var class="vars">$string</var>, <var class="vars">$tr</var>);
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0378"><h2>
<a name="p_function_escapehtml_378">
<var class="function">escapeHTML</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the variable of target</dd>
<dt>param</dt>
<dd><em>string</em>  optional, the character set for encode</dd>
<dt>return</dt>
<dd><em>mixed</em>   the encoded valiable</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> A handy function that will escape the contents of a variable,
   recursing into arrays for HTML/XML text
 </pre>
</div></div><pre id="source-0378"> <var class="keywords">function</var> escapeHTML(<var class="vars">$html</var>, <var class="vars">$charset</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$html</var>)) {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>)) {
       <var class="vars">$result</var> = <var class="funcs">array_map</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'escapeHTML'</var>), <var class="vars">$args</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="funcs">array_map</var>(<var class="keywords">array</var>(<var class="strings">'Posql_Utils'</var>, <var class="strings">'escapeHTML'</var>), <var class="vars">$args</var>);
     }
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$html</var>)) {
     <var class="keywords">if</var> (<var class="vars">$charset</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$charset</var>)) {
       <var class="vars">$result</var> = <var class="funcs">htmlspecialchars</var>(<var class="vars">$html</var>, ENT_QUOTES, <var class="vars">$charset</var>);
     } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;charset)) {
       <var class="vars">$result</var> = <var class="funcs">htmlspecialchars</var>(<var class="vars">$html</var>, ENT_QUOTES, <var class="vars">$this</var>-&gt;charset);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="funcs">htmlspecialchars</var>(<var class="vars">$html</var>, ENT_QUOTES);
     }
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="vars">$html</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0379"><h2>
<a name="p_function_truncatepad_379">
<var class="function">truncatePad</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the value of target</dd>
<dt>param</dt>
<dd><em>number</em>  the miximun length</dd>
<dt>param</dt>
<dd><em>string</em>  the padding character</dd>
<dt>param</dt>
<dd><em>string</em>  options as quotes enclosed</dd>
<dt>param</dt>
<dd><em>boolean</em> whether the string already escaped or not</dd>
<dt>return</dt>
<dd><em>mixed</em>   truncated value</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Truncates the string by limited length
 If the mbstring extension loaded, it will use on cutting to string
  or, it will be truncated by the UTF-8 option of preg_*
 When the padding character is a dot(.),
  it is likely to become three dots(...)
</pre>
</div></div><pre id="source-0379"> <var class="keywords">function</var> truncatePad(<var class="vars">$value</var>, <var class="vars">$length</var>, <var class="vars">$marker</var> = <var class="strings">'.'</var>,
                      <var class="vars">$quotes</var> = <var class="strings">''</var>, <var class="vars">$escaped</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$mb</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$mb</var> === <var class="keywords">null</var>) {
     <var class="vars">$mb</var> = <var class="funcs">extension_loaded</var>(<var class="strings">'mbstring'</var>)
        &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_strcut'</var>)
        &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'mb_detect_encoding'</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$quotes</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">ord</var>(<var class="vars">$value</var>) === <var class="funcs">ord</var>(<var class="vars">$quotes</var>)
    &amp;&amp; <var class="funcs">substr</var>(<var class="vars">$value</var>, -1) === <var class="vars">$quotes</var>) {
     <var class="vars">$value</var> = <var class="funcs">substr</var>(<var class="vars">$value</var>, 1, -1);
   }
   <var class="vars">$bytes</var> = <var class="funcs">strlen</var>(<var class="vars">$value</var>);
   <var class="keywords">if</var> (<var class="vars">$marker</var> === <var class="strings">'.'</var>) {
     <var class="vars">$marker</var> = <var class="strings">'...'</var>;
   }
   <var class="vars">$length</var> = (<var class="keywords">int</var>)(<var class="vars">$length</var> - <var class="funcs">strlen</var>(<var class="vars">$marker</var>));
   <var class="keywords">if</var> (<var class="vars">$length</var> &lt;= 0) {
     <var class="vars">$value</var> = <var class="strings">''</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$bytes</var> &amp;&amp; <var class="vars">$length</var> &gt; 0 &amp;&amp; <var class="vars">$bytes</var> &gt; <var class="vars">$length</var>) {
       <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$value</var>)) {
         <var class="vars">$value</var> = <var class="funcs">substr</var>(<var class="vars">$value</var>, 0, <var class="vars">$length</var>);
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$mb</var>) {
         <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;charset)) {
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;pcharset)) {
             <var class="vars">$charset</var> = <var class="vars">$this</var>-&gt;pcharset-&gt;detectEncoding(<var class="vars">$value</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$charset</var> = <var class="funcs">mb_detect_encoding</var>(<var class="vars">$value</var>, <var class="strings">'auto'</var>, <var class="keywords">true</var>);
           }
         } <var class="keywords">else</var> {
           <var class="vars">$charset</var> = <var class="vars">$this</var>-&gt;charset;
         }
         <var class="vars">$value</var> = <var class="funcs">mb_strcut</var>(<var class="vars">$value</var>, 0, <var class="vars">$length</var>, <var class="vars">$charset</var>);
       }
       <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$length</var> &lt; 0x10000 &amp;&amp; <var class="vars">$length</var> &gt; 1
             &amp;&amp; <var class="funcs">preg_match</var>(<var class="strings">'&lt;^.{1,'</var> . <var class="vars">$length</var> . <var class="strings">'}&gt;s'</var>, <var class="vars">$value</var>, <var class="vars">$match</var>))
       {
         <var class="vars">$value</var> = <var class="vars">$match</var>[0];
         <var class="keywords">unset</var>(<var class="vars">$match</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$value</var> = <var class="funcs">substr</var>(<var class="vars">$value</var>, 0, <var class="vars">$length</var>);
       }
       <var class="keywords">if</var> (<var class="vars">$marker</var> != <var class="keywords">null</var>) {
         <var class="vars">$value</var> .= <var class="vars">$marker</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$escaped</var>) {
         <var class="keywords">if</var> (<var class="funcs">ord</var>(<var class="vars">$value</var>) !== <var class="funcs">ord</var>(<var class="vars">$quotes</var>)) {
           <var class="vars">$value</var> = <var class="vars">$quotes</var> . <var class="vars">$value</var> . <var class="vars">$quotes</var>;
         }
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>)) {
           <var class="keywords">if</var> (<var class="vars">$quotes</var> == <var class="keywords">null</var>) {
             <var class="vars">$value</var> = <var class="vars">$this</var>-&gt;escapeString(<var class="vars">$value</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$value</var> = <var class="vars">$this</var>-&gt;escapeString(<var class="vars">$value</var>, <var class="vars">$quotes</var>);
           }
         } <var class="keywords">else</var> {
           <var class="keywords">while</var> (<var class="funcs">substr</var>(<var class="vars">$value</var>, -1) === <var class="strings">'\\'</var>) {
             <var class="vars">$value</var> = <var class="funcs">substr</var>(<var class="vars">$value</var>, 0, -1);
           }
           <var class="keywords">if</var> (<var class="vars">$quotes</var> != <var class="keywords">null</var>) {
             <var class="vars">$value</var> = <var class="vars">$quotes</var> . <var class="vars">$value</var> . <var class="vars">$quotes</var>;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$value</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0380"><h2>
<a name="p_function_striptags_380">
<var class="function">stripTags</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the HTML string of target</dd>
<dt>return</dt>
<dd><em>boolean</em> the string that stripped tags</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> A handy function the strip_tags() of inherited call
 </pre>
</div></div><pre id="source-0380"> <var class="keywords">function</var> stripTags(<var class="vars">$html</var>){
   <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$html</var>, <var class="strings">'&lt;'</var>) !== <var class="keywords">false</var>
    &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$html</var>, <var class="strings">'&gt;'</var>) !== <var class="keywords">false</var>) {
     <var class="vars">$html</var> = <var class="funcs">preg_replace</var>(<var class="strings">'{&lt;/?\w+[^&gt;]*&gt;}isU'</var>, <var class="strings">''</var>, <var class="vars">$html</var>);
   }
   <var class="keywords">return</var> <var class="vars">$html</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0381"><h2>
<a name="p_function_base16encode_381">
<var class="function">base16Encode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the data to encode</dd>
<dt>example</dt>
<dd><pre class="example">
  <var class="keywords">foreach</var>(<var class="keywords">array</var>(<var class="strings">&quot;\n&quot;</var>, <var class="strings">&quot;\r\n&quot;</var>, <var class="strings">&quot;foo&quot;</var>, <var class="strings">&quot;&amp;&amp;&quot;</var>) <var class="keywords">as</var> <var class="vars">$string</var>) {
    <var class="keywords">echo</var> <var class="strings">&quot;&lt;ul&gt;\n&quot;</var>;
    <var class="vars">$hex_normal</var> = Posql_Utils::base16Encode(<var class="vars">$string</var>);
    <var class="funcs">printf</var>(<var class="strings">&quot;&lt;li&gt;normal: %s&lt;/li&gt;\n&quot;</var>, <var class="funcs">htmlspecialchars</var>(<var class="vars">$hex_normal</var>));
    <var class="vars">$hex_regexp</var> = Posql_Utils::base16Encode(<var class="vars">$string</var>, <var class="strings">'\x'</var>);
    <var class="funcs">printf</var>(<var class="strings">&quot;&lt;li&gt;regexp: %s&lt;/li&gt;\n&quot;</var>, <var class="funcs">htmlspecialchars</var>(<var class="vars">$hex_regexp</var>));
    <var class="vars">$hex_entity</var> = Posql_Utils::base16Encode(<var class="vars">$string</var>, <var class="strings">'&amp;#x'</var>, <var class="strings">';'</var>);
    <var class="funcs">printf</var>(<var class="strings">&quot;&lt;li&gt;entity: %s&lt;/li&gt;\n&quot;</var>, <var class="funcs">htmlspecialchars</var>(<var class="vars">$hex_entity</var>));
    <var class="keywords">echo</var> <var class="strings">&quot;&lt;/ul&gt;\n&quot;</var>;
  }</pre></dd>
<dt>param</dt>
<dd><em>string</em>  optionally, the prefix string</dd>
<dt>param</dt>
<dd><em>string</em>  optionally, the suffix string</dd>
<dt>return</dt>
<dd><em>string</em>  the hexadecimal numbers as string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Encodes the given data with base16 as soon as hexadecimal numbers
 </pre>
</div></div><pre id="source-0381"> <var class="keywords">function</var> base16Encode(<var class="vars">$string</var>, <var class="vars">$prefix</var> = <var class="strings">''</var>, <var class="vars">$suffix</var> = <var class="strings">''</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$string</var>) &amp;&amp; <var class="vars">$string</var> != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$prefix</var> == <var class="keywords">null</var> &amp;&amp; <var class="vars">$suffix</var> == <var class="keywords">null</var>) {
       <var class="vars">$result</var> = <var class="funcs">strtoupper</var>(<var class="funcs">bin2hex</var>(<var class="vars">$string</var>));
       <var class="vars">$string</var> = <var class="keywords">null</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$string</var> = <var class="funcs">unpack</var>(<var class="strings">'C*'</var>, <var class="vars">$string</var>);
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$string</var>);
       <var class="keywords">while</var> (--<var class="vars">$length</var> &gt;= 0) {
         <var class="vars">$byte</var> = <var class="funcs">array_shift</var>(<var class="vars">$string</var>);
         <var class="vars">$result</var> .= <var class="funcs">sprintf</var>(<var class="strings">'%s%02X%s'</var>, <var class="vars">$prefix</var>, <var class="vars">$byte</var>, <var class="vars">$suffix</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0382"><h2>
<a name="p_function_isstringtoken_382">
<var class="function">isStringToken</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  string of token</dd>
<dt>return</dt>
<dd><em>boolean</em> whether the token is string or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Checks whether the given token is a string
 (it was enclosed with the quotation mark)
 </pre>
</div></div><pre id="source-0382"> <var class="keywords">function</var> isStringToken(<var class="vars">$token</var>){
   <var class="keywords">static</var> <var class="vars">$sq</var> = <var class="strings">&quot;'&quot;</var>, <var class="vars">$dq</var> = <var class="strings">'&quot;'</var>;
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$token</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$token</var>)) {
     <var class="vars">$pre</var> = <var class="funcs">substr</var>(<var class="vars">$token</var>, 0, 1);
     <var class="keywords">if</var> (<var class="vars">$pre</var> === <var class="vars">$sq</var> || <var class="vars">$pre</var> === <var class="vars">$dq</var>) {
       <var class="vars">$result</var> = <var class="funcs">substr</var>(<var class="vars">$token</var>, -1) === <var class="vars">$pre</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0383"><h2>
<a name="p_function_tostringtoken_383">
<var class="function">toStringToken</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the token of target</dd>
<dt>return</dt>
<dd><em>string</em>  the converted string token</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Convert the value of the given argument that will be the token as string
 The token will be enclosed with the single quotation mark(&#039;)
</pre>
</div></div><pre id="source-0383"> <var class="keywords">function</var> toStringToken(<var class="vars">$token</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$token</var>)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;escapeString(<var class="vars">$token</var>, <var class="keywords">true</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="vars">$token</var>, 0, 1) === <var class="strings">'&quot;'</var>) {
       <var class="vars">$token</var> = <var class="funcs">substr</var>(<var class="vars">$token</var>, 1, -1);
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;escapeString(<var class="vars">$token</var>, <var class="keywords">true</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$token</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0384"><h2>
<a name="p_function_concatstringtokens_384">
<var class="function">concatStringTokens</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the left string</dd>
<dt>param</dt>
<dd><em>string</em>  the right string</dd>
<dt>return</dt>
<dd><em>string</em>  concatenated string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Concatenate the operands pairs.
  (e.g. [ &#039;foo&#039;&#039;bar&#039; ] =&gt; [ &#039;foo\&#039;bar&#039; ])
</pre>
</div></div><pre id="source-0384"> <var class="keywords">function</var> concatStringTokens(<var class="vars">$left_string</var>, <var class="vars">$right_string</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$left_string</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$right_string</var> != <var class="keywords">null</var>
    &amp;&amp; <var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$left_string</var>)
    &amp;&amp; <var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$right_string</var>)) {
     <var class="vars">$left_string</var>  = <var class="vars">$this</var>-&gt;toStringToken(<var class="vars">$left_string</var>);
     <var class="vars">$right_string</var> = <var class="vars">$this</var>-&gt;toStringToken(<var class="vars">$right_string</var>);
     <var class="vars">$glue</var> = <var class="strings">'\\\''</var>;
     <var class="vars">$result</var> = <var class="funcs">substr</var>(<var class="vars">$left_string</var>, 0, -1) . <var class="vars">$glue</var> . <var class="funcs">substr</var>(<var class="vars">$right_string</var>, 1);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0385"><h2>
<a name="p_function_trimextra_385">
<var class="function">trimExtra</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  string of target</dd>
<dt>param</dt>
<dd><em>string</em>  optionally, the stripped characters</dd>
<dt>return</dt>
<dd><em>string</em>  the trimmed string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> It further as for the trim() function
 </pre>
</div></div><pre id="source-0385"> <var class="keywords">function</var> trimExtra(<var class="vars">$string</var>, <var class="vars">$extras</var> = <var class="strings">'$'</var>){
   <var class="vars">$string</var> = <var class="funcs">trim</var>(<var class="funcs">trim</var>(<var class="vars">$string</var>), <var class="vars">$extras</var>);
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0386"><h2>
<a name="p_function_isword_386">
<var class="function">isWord</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  a character string of target</dd>
<dt>return</dt>
<dd><em>boolean</em> whether string was word or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Checks whether the character string is a word
  equal to RegExp: [a-zA-Z_\x7F-\xFF]
 </pre>
</div></div><pre id="source-0386"> <var class="keywords">function</var> isWord(<var class="vars">$char</var>){
   <var class="vars">$ord</var> = <var class="funcs">ord</var>(<var class="vars">$char</var>);
   <var class="keywords">return</var> <var class="vars">$ord</var> === 0x5F || <var class="vars">$ord</var> &gt; 0x7E
      || (<var class="vars">$ord</var>  &gt;  0x40 &amp;&amp; <var class="vars">$ord</var> &lt; 0x5B)
      || (<var class="vars">$ord</var>  &gt;  0x60 &amp;&amp; <var class="vars">$ord</var> &lt; 0x7B);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0387"><h2>
<a name="p_function_isalphanum_387">
<var class="function">isAlphaNum</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  a character string of target</dd>
<dt>return</dt>
<dd><em>string</em>  whether the string was alphanumeric or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Checks whether the character string is alphanumeric
  equal to RegExp: [0-9a-zA-Z_\x7F-\xFF]
</pre>
</div></div><pre id="source-0387"> <var class="keywords">function</var> isAlphaNum(<var class="vars">$char</var>){
   <var class="vars">$ord</var> = <var class="funcs">ord</var>(<var class="vars">$char</var>);
   <var class="keywords">return</var> <var class="vars">$ord</var> === 0x5F || <var class="vars">$ord</var> &gt; 0x7E
      || (<var class="vars">$ord</var>  &gt;  0x2F &amp;&amp; <var class="vars">$ord</var> &lt; 0x3A)
      || (<var class="vars">$ord</var>  &gt;  0x40 &amp;&amp; <var class="vars">$ord</var> &lt; 0x5B)
      || (<var class="vars">$ord</var>  &gt;  0x60 &amp;&amp; <var class="vars">$ord</var> &lt; 0x7B);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0388"><h2>
<a name="p_function_isenablename_388">
<var class="function">isEnableName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  string of target</dd>
<dt>return</dt>
<dd><em>boolean</em> whether the name is effective or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether it is a format to which the name is effective
 This format is the same as the rule of the variable identifier of PHP
</pre>
</div></div><pre id="source-0388"> <var class="keywords">function</var> isEnableName(<var class="vars">$name</var>){
   <var class="keywords">static</var> <var class="vars">$pattern</var> = <var class="strings">'{^[a-zA-Z_\x7F-\xFF][a-zA-Z0-9_\x7F-\xFF]*$}'</var>;
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$name</var>)) {
     <var class="keywords">switch</var> (<var class="funcs">strlen</var>(<var class="vars">$name</var>)) {
       <var class="keywords">case</var> 0:
           <var class="keywords">break</var>;
       <var class="keywords">case</var> 1:
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isWord(<var class="vars">$name</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> 2:
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isWord(<var class="funcs">substr</var>(<var class="vars">$name</var>, 0, 1))
            &amp;&amp; <var class="vars">$this</var>-&gt;isAlphaNum(<var class="funcs">substr</var>(<var class="vars">$name</var>, -1))) {
             <var class="vars">$result</var> = <var class="keywords">true</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="keywords">if</var> (<var class="funcs">preg_match</var>(<var class="vars">$pattern</var>, <var class="vars">$name</var>)) {
             <var class="vars">$result</var> = <var class="keywords">true</var>;
           }
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0389"><h2>
<a name="p_function_isexprtoken_389">
<var class="function">isExprToken</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the target token</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the argument was evaluatable token</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether the token is evaluatable or static value
</pre>
</div></div><pre id="source-0389"> <var class="keywords">function</var> isExprToken(<var class="vars">$token</var>) {
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$token</var>)) {
     <var class="keywords">foreach</var> (<var class="vars">$token</var> <var class="keywords">as</var> <var class="vars">$item</var>) {
       <var class="vars">$lc_item</var> = <var class="funcs">strtolower</var>(<var class="vars">$item</var>);
       <var class="keywords">if</var> (<var class="vars">$lc_item</var> === <var class="strings">'false'</var>  || <var class="vars">$lc_item</var> === <var class="strings">'true'</var>
        || !<var class="vars">$this</var>-&gt;isWord(<var class="vars">$item</var>) || !<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$item</var>)) {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
         <var class="keywords">break</var>;
       }
     }
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$token</var>)) {
     <var class="vars">$lc_token</var> = <var class="funcs">strtolower</var>(<var class="vars">$token</var>);
     <var class="keywords">if</var> (<var class="vars">$lc_token</var> === <var class="strings">'false'</var>  || <var class="vars">$lc_token</var> === <var class="strings">'true'</var>
      || !<var class="vars">$this</var>-&gt;isWord(<var class="vars">$token</var>) || !<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$token</var>)) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0390"><h2>
<a name="p_function_getcolumnaffinity_390">
<var class="function">getColumnAffinity</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>link</dt>
<dd><a href="http://www.sqlite.org/datatype3.html#affinity" target="_blank" title="open in blanks window">http://www.sqlite.org/datatype3.html#affinity</a></dd>
<dt>param</dt>
<dd><em>string</em>  type of subject as string</dd>
<dt>return</dt>
<dd><em>string</em>  type of string which passed affinity.</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> This logic refers to the column affinity algorithm of SQLite.
                 return as following types.
                 ------------------------------
                 - string : type of string
                 - number : type of number
                 - null   : null
                 ------------------------------
</pre>
</div></div><pre id="source-0390"> <var class="keywords">function</var> getColumnAffinity(<var class="vars">$column</var>){
   <var class="keywords">static</var> <var class="vars">$maps</var> = <var class="keywords">array</var>(
     <var class="strings">'string'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'char'</var>, <var class="strings">'text'</var>, <var class="strings">'lob'</var>, <var class="strings">'date'</var>, <var class="strings">'time'</var>, <var class="strings">'year'</var>
     ),
     <var class="strings">'number'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'int'</var>,  <var class="strings">'dec'</var>,  <var class="strings">'num'</var>, <var class="strings">'real'</var>, <var class="strings">'doub'</var>,
       <var class="strings">'floa'</var>, <var class="strings">'seri'</var>, <var class="strings">'bit'</var>, <var class="strings">'bool'</var>
     )
   );
   <var class="vars">$result</var> = <var class="strings">'null'</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$column</var>) &amp;&amp; <var class="vars">$column</var> != <var class="keywords">null</var>) {
     <var class="vars">$column</var> = <var class="funcs">strtolower</var>(<var class="vars">$column</var>);
     <var class="keywords">foreach</var> (<var class="vars">$maps</var> <var class="keywords">as</var> <var class="vars">$type</var> =&gt; <var class="vars">$types</var>) {
       <var class="keywords">foreach</var> (<var class="vars">$types</var> <var class="keywords">as</var> <var class="vars">$part</var>) {
         <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$column</var>, <var class="vars">$part</var>) !== <var class="keywords">false</var>) {
           <var class="vars">$result</var> = <var class="vars">$type</var>;
           <var class="keywords">break</var> 2;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0391"><h2>
<a name="p_function_getmicrotime_391">
<var class="function">getMicrotime</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>float</em>  microtime</dd>
</dl>
<pre class="desc"> Returns the microtime in seconds as a float.
</pre>
</div></div><pre id="source-0391"> <var class="keywords">function</var> getMicrotime(){
   <var class="vars">$result</var> = <var class="funcs">array_sum</var>(<var class="funcs">explode</var>(<var class="strings">' '</var>, <var class="funcs">microtime</var>()));
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0392"><h2>
<a name="p_function_getvalue_392">
<var class="function">getValue</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   target variable which is type of array or object</dd>
<dt>param</dt>
<dd><em>mixed</em>   the key which should be type of scalar</dd>
<dt>param</dt>
<dd><em>mixed</em>   default value to return if result is null</dd>
<dt>param</dt>
<dd><em>boolean</em> whether the result evaluated strictly or not</dd>
<dt>return</dt>
<dd><em>mixed</em>   the value of the key on variable, or default</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Gets the value of the key from array or object
 If it not exists the key, it return $default = null
 </pre>
</div></div><pre id="source-0392"> <var class="keywords">function</var> getValue(<var class="vars">$var</var>, <var class="vars">$key</var>, <var class="vars">$default</var> = <var class="keywords">null</var>, <var class="vars">$strict</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$key</var>)) {
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$var</var>) &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$var</var>[<var class="vars">$key</var>])) {
       <var class="vars">$result</var> = <var class="vars">$var</var>[<var class="vars">$key</var>];
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_object</var>(<var class="vars">$var</var>) &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$var</var>-&gt;{<var class="vars">$key</var>})) {
       <var class="vars">$result</var> = <var class="vars">$var</var>-&gt;{<var class="vars">$key</var>};
     }
   }
   <var class="keywords">if</var> (<var class="vars">$strict</var>) {
     <var class="keywords">if</var> (<var class="vars">$result</var> === <var class="keywords">null</var>) {
       <var class="vars">$result</var> = <var class="vars">$default</var>;
     }
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$result</var> == <var class="keywords">null</var>) {
       <var class="vars">$result</var> = <var class="vars">$default</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0393"><h2>
<a name="p_function_hashvalue_393">
<var class="function">hashValue</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the value of target</dd>
<dt>param</dt>
<dd><em>boolean</em> whether it returns as bare integer,or string of hexadecimal</dd>
<dt>return</dt>
<dd><em>mixed</em>   the hashed value as number, or as string of hex</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Calculate the hash value that using by the crc32 checksum as 8 digits
 </pre>
</div></div><pre id="source-0393"> <var class="keywords">function</var> hashValue(<var class="vars">$value</var>, <var class="vars">$as_int</var> = <var class="keywords">false</var>){
   <var class="vars">$value</var> = <var class="funcs">crc32</var>(<var class="funcs">serialize</var>(<var class="vars">$value</var>));
   <var class="keywords">if</var> (!<var class="vars">$as_int</var>) {
     <var class="vars">$value</var> = <var class="funcs">sprintf</var>(<var class="strings">'%08x'</var>, <var class="vars">$value</var>);
   }
   <var class="keywords">return</var> <var class="vars">$value</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0394"><h2>
<a name="p_function_comparedefinedvalue_394">
<var class="function">compareDefinedValue</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the constant string to compared</dd>
<dt>example</dt>
<dd><pre class="example">
  <var class="comments">// Assume some error occurred:</var>
  <var class="keywords">if</var> (!Posql_Utils::compareDefinedValue(<var class="strings">&quot;PDO::ERR_NONE&quot;</var>, <var class="vars">$db_error</var>)) {
    <var class="keywords">print</var> <var class="strings">&quot;Error!&quot;</var>;
  }</pre></dd>
<dt>param</dt>
<dd><em>mixed</em>    the value to be compared</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether compare as strict</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the values were same or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Compare the defined value and given argument value
 This method is useful for PHP versions interchangeable.
 </pre>
</div></div><pre id="source-0394"> <var class="keywords">function</var> compareDefinedValue(<var class="vars">$defined</var>, <var class="vars">$value</var>, <var class="vars">$strict</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$defined</var>) &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$value</var>)) {
     <var class="vars">$tmp</var> = <var class="vars">$defined</var>;
     <var class="vars">$defined</var> = <var class="vars">$value</var>;
     <var class="vars">$value</var> = <var class="vars">$tmp</var>;
   }
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$defined</var>) &amp;&amp; <var class="funcs">defined</var>(<var class="vars">$defined</var>)) {
     <var class="keywords">if</var> (<var class="vars">$strict</var>) {
       <var class="vars">$result</var> = <var class="vars">$value</var> === <var class="funcs">constant</var>(<var class="vars">$defined</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$value</var> == <var class="funcs">constant</var>(<var class="vars">$defined</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0395"><h2>
<a name="p_function_sortbytemplate_395">
<var class="function">sortByTemplate</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the target array as reference variable</dd>
<dt>example</dt>
<dd><pre class="example">
   <var class="vars">$array</var> = <var class="keywords">array</var>(
     <var class="strings">'id'</var>   =&gt; 1,
     <var class="strings">'name'</var> =&gt; <var class="strings">'foo'</var>,
     <var class="strings">'text'</var> =&gt; <var class="strings">'hello!'</var>
   );
   <var class="keywords">print</var> <var class="strings">&quot;&lt;br/&gt;&lt;b&gt;original:&lt;/b&gt;&lt;br/&gt;&lt;pre&gt;\n&quot;</var>;
   <var class="funcs">print_r</var>(<var class="vars">$array</var>);
   <var class="vars">$template</var> = <var class="keywords">array</var>(<var class="strings">'name'</var>, <var class="strings">'id'</var>, <var class="strings">'text'</var>);
   Posql_Utils::sortByTemplate(<var class="vars">$array</var>, <var class="vars">$template</var>);
   <var class="keywords">print</var> <var class="strings">&quot;\n&lt;b&gt;after:&lt;/b&gt;&lt;br/&gt;\n&quot;</var>;
   <var class="funcs">print_r</var>(<var class="vars">$array</var>);
   <var class="keywords">print</var> <var class="strings">&quot;&lt;/pre&gt;&quot;</var>;
   <var class="comments">// output:</var>
   <var class="comments">//  array(</var>
   <var class="comments">//     [name] =&gt; foo</var>
   <var class="comments">//     [id]   =&gt; 1</var>
   <var class="comments">//     [text] =&gt; hello!</var>
   <var class="comments">//  );</var></pre></dd>
<dt>example</dt>
<dd><pre class="example">
   <var class="vars">$array</var> = <var class="keywords">array</var>();
   <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; 5; <var class="vars">$i</var>++) {
     <var class="vars">$array</var>[] = <var class="keywords">array</var>(
       <var class="strings">'id'</var>   =&gt; <var class="vars">$i</var>,
       <var class="strings">'name'</var> =&gt; <var class="strings">'foo@'</var> . <var class="vars">$i</var>,
       <var class="strings">'text'</var> =&gt; <var class="strings">'hello!'</var> . <var class="vars">$i</var>
     );
   }
   <var class="keywords">echo</var> <var class="strings">&quot;&lt;b&gt;Original:&lt;/b&gt;&lt;br/&gt;&lt;pre&gt;\n&quot;</var>;
   <var class="funcs">var_dump</var>(<var class="vars">$array</var>);
   <var class="keywords">echo</var> <var class="strings">&quot;&lt;b&gt;After:&lt;/b&gt;&lt;br/&gt;\n&quot;</var>;
   Posql_Utils::sortByTemplate(<var class="vars">$array</var>, <var class="strings">'text'</var>, <var class="strings">'name'</var>, <var class="strings">'id'</var>);
   <var class="funcs">var_dump</var>(<var class="vars">$array</var>);
   <var class="keywords">echo</var> <var class="strings">&quot;&lt;/pre&gt;&quot;</var>;</pre></dd>
<dt>param</dt>
<dd><em>mixed</em>   template which becomes row of key to sort it</dd>
<dt>return</dt>
<dd><em>boolean</em> success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Sorts the array according to the template of the given arguments
 </pre>
</div></div><pre id="source-0395"> <var class="keywords">function</var> sortByTemplate(&amp;<var class="vars">$array</var>, <var class="vars">$templates</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$array</var>)) {
     <var class="vars">$dim</var> = <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$array</var>));
     <var class="keywords">if</var> (!<var class="vars">$dim</var>) {
       <var class="vars">$array</var> = <var class="keywords">array</var>(<var class="vars">$array</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">func_num_args</var>() &gt; 2) {
       <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
       <var class="vars">$tpls</var> = <var class="funcs">array_slice</var>(<var class="vars">$args</var>, 1);
     } <var class="keywords">else</var> {
       <var class="vars">$tpls</var> = (<var class="keywords">array</var>) <var class="vars">$templates</var>;
       <var class="vars">$flip</var> = <var class="funcs">array_keys</var>(<var class="vars">$tpls</var>);
       <var class="vars">$check</var> = <var class="funcs">array_filter</var>(<var class="vars">$flip</var>, <var class="strings">'is_string'</var>);
       <var class="keywords">if</var> (<var class="vars">$check</var> != <var class="keywords">null</var>) {
         <var class="vars">$tpls</var> = <var class="vars">$flip</var>;
       }
     }
     <var class="vars">$array</var> = <var class="funcs">array_filter</var>(<var class="vars">$array</var>, <var class="strings">'is_array'</var>);
     <var class="vars">$elems</var> = <var class="keywords">array</var>();
     <var class="vars">$count</var> = <var class="funcs">count</var>(<var class="vars">$array</var>);
     <var class="vars">$i</var> = 0;
     <var class="keywords">do</var> {
       <var class="vars">$shift</var> = <var class="funcs">array_shift</var>(<var class="vars">$array</var>);
       <var class="vars">$elems</var>[<var class="vars">$i</var>] = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$tpls</var> <var class="keywords">as</var> <var class="vars">$key</var>) {
         <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$shift</var>)) {
           <var class="vars">$elems</var>[<var class="vars">$i</var>][<var class="vars">$key</var>] = <var class="vars">$shift</var>[<var class="vars">$key</var>];
         }
       }
     } <var class="keywords">while</var> (<var class="vars">$count</var> &gt; ++<var class="vars">$i</var>);
     <var class="keywords">unset</var>(<var class="vars">$shift</var>);
     <var class="keywords">if</var> (<var class="vars">$dim</var>) {
       <var class="vars">$array</var> = <var class="funcs">array_splice</var>(<var class="vars">$elems</var>, 0);
     } <var class="keywords">else</var> {
       <var class="vars">$array</var> = <var class="funcs">reset</var>(<var class="vars">$elems</var>);
     }
     <var class="keywords">unset</var>(<var class="vars">$elems</var>);
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0396"><h2>
<a name="p_function_split_396">
<var class="function">split</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  pattern of the RegExp</dd>
<dt>param</dt>
<dd><em>string</em>  input values</dd>
<dt>param</dt>
<dd><em>number</em>  divided the maximum value</dd>
<dt>param</dt>
<dd><em>number</em>  flags of split mode</dd>
<dt>return</dt>
<dd><em>array</em>   divided array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> A shortcut of preg_split() as PREG_SPLIT_NO_EMPTY
 </pre>
</div></div><pre id="source-0396"> <var class="keywords">function</var> <var class="funcs">split</var>(<var class="vars">$pattern</var>, <var class="vars">$subject</var>, <var class="vars">$limit</var> = -1, <var class="vars">$flags</var> = 0){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$flags</var> |= PREG_SPLIT_NO_EMPTY;
   <var class="keywords">if</var> (<var class="vars">$limit</var> === -1) {
     <var class="vars">$result</var> = <var class="funcs">preg_split</var>(<var class="vars">$pattern</var>, <var class="vars">$subject</var>, <var class="vars">$limit</var>, <var class="vars">$flags</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = @<var class="funcs">preg_split</var>(<var class="vars">$pattern</var>, <var class="vars">$subject</var>, <var class="vars">$limit</var>, <var class="vars">$flags</var>);
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$result</var>)) {
       <var class="vars">$result</var> = <var class="keywords">array</var>();
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0397"><h2>
<a name="p_function_splitenablename_397">
<var class="function">splitEnableName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  input values</dd>
<dt>param</dt>
<dd><em>number</em>  divided the maximum value</dd>
<dt>param</dt>
<dd><em>number</em>  flags of split mode</dd>
<dt>return</dt>
<dd><em>array</em>   divided array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Splits to string as format to which the name is effective
 </pre>
</div></div><pre id="source-0397"> <var class="keywords">function</var> splitEnableName(<var class="vars">$subject</var>, <var class="vars">$limit</var> = -1, <var class="vars">$flags</var> = 0){
   <var class="keywords">static</var> <var class="vars">$pattern</var> = <var class="strings">'{[^a-zA-Z0-9_\x7F-\xFF]+}'</var>;
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;<var class="funcs">split</var>(<var class="vars">$pattern</var>, <var class="vars">$subject</var>, <var class="vars">$limit</var>, <var class="vars">$flags</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = Posql_Utils::<var class="funcs">split</var>(<var class="vars">$pattern</var>, <var class="vars">$subject</var>, <var class="vars">$limit</var>, <var class="vars">$flags</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0398"><h2>
<a name="p_function_isassoc_398">
<var class="function">isAssoc</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the target array</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$array</var> = <var class="keywords">array</var>(1, 2, <var class="strings">'foo'</var>);
 <var class="funcs">var_dump</var>(Posql_Utils::isAssoc(<var class="vars">$array</var>));
 <var class="comments">// result: false</var></pre></dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$array</var> = <var class="keywords">array</var>(<var class="strings">'key1'</var> =&gt; <var class="strings">'value1'</var>, <var class="strings">'key2'</var> =&gt; <var class="strings">'value2'</var>);
 <var class="funcs">var_dump</var>(Posql_Utils::isAssoc(<var class="vars">$array</var>));
 <var class="comments">// result: true</var></pre></dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$array</var> = <var class="keywords">array</var>(1, 2, <var class="strings">'key'</var> =&gt; <var class="strings">'foo'</var>);
 <var class="funcs">var_dump</var>(Posql_Utils::isAssoc(<var class="vars">$array</var>));
 <var class="comments">// result: true</var></pre></dd>
<dt>return</dt>
<dd><em>boolean</em> the result whether the array was associated</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Examine whether it is an associate array
 </pre>
</div></div><pre id="source-0398"> <var class="keywords">function</var> isAssoc(<var class="vars">$array</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$array</var>)) {
     <var class="vars">$keys</var> = <var class="funcs">array_keys</var>(<var class="vars">$array</var>);
     <var class="vars">$array</var> = <var class="funcs">array_filter</var>(<var class="vars">$keys</var>, <var class="strings">'is_string'</var>);
     <var class="vars">$result</var> = <var class="vars">$array</var> != <var class="keywords">null</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0399"><h2>
<a name="p_function_cleanarray_399">
<var class="function">cleanArray</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the target array</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$array</var> = <var class="keywords">array</var>(<var class="strings">''</var>, <var class="strings">'foo'</var>, <var class="keywords">null</var>, <var class="strings">'bar'</var>);
 <var class="funcs">var_dump</var>(Posql_Utils::cleanArray(<var class="vars">$array</var>));
 <var class="comments">// result: array('foo', 'bar');</var></pre></dd>
<dt>param</dt>
<dd><em>boolean</em> whether key to array is preserve or reset it</dd>
<dt>return</dt>
<dd><em>array</em>   an array which removed empty value</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Cleans the array which removed empty value
 </pre>
</div></div><pre id="source-0399"> <var class="keywords">function</var> cleanArray(<var class="vars">$array</var>, <var class="vars">$preserve_keys</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$array</var>)) {
     <var class="vars">$result</var> = <var class="funcs">array_filter</var>(<var class="funcs">array_map</var>(<var class="strings">'trim'</var>, <var class="vars">$array</var>), <var class="strings">'strlen'</var>);
     <var class="keywords">if</var> (!<var class="vars">$preserve_keys</var>) {
       <var class="vars">$result</var> = <var class="funcs">array_values</var>(<var class="vars">$result</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0400"><h2>
<a name="p_function_fliparray_400">
<var class="function">flipArray</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   an array of target</dd>
<dt>example</dt>
<dd><pre class="example">
  <var class="vars">$array</var> = <var class="keywords">array</var>(<var class="strings">'foo'</var>, <var class="keywords">null</var>, <var class="strings">''</var>, <var class="keywords">array</var>(2), <var class="strings">'bar'</var>);
  <var class="funcs">var_dump</var>(Posql_Utils::flipArray(<var class="vars">$array</var>));
  <var class="comments">// result: array('foo' =&gt; 0, 'bar' =&gt; 1);</var></pre></dd>
<dt>return</dt>
<dd><em>array</em>   the flipped array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Exchanges all keys valid from values in an array
 </pre>
</div></div><pre id="source-0400"> <var class="keywords">function</var> flipArray(<var class="vars">$array</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$array</var>)) {
     <var class="vars">$array</var> = <var class="funcs">array_filter</var>(<var class="funcs">array_filter</var>(<var class="vars">$array</var>, <var class="strings">'is_string'</var>), <var class="strings">'strlen'</var>);
     <var class="vars">$result</var> = <var class="funcs">array_flip</var>(<var class="funcs">array_splice</var>(<var class="vars">$array</var>, 0));
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0401"><h2>
<a name="p_function_toonearray_401">
<var class="function">toOneArray</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>  the target array</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$array</var> = <var class="keywords">array</var>(1, 2, <var class="keywords">array</var>(3, 4, 5), 6);
 <var class="funcs">var_dump</var>(Posql_Utils::toOneArray(<var class="vars">$array</var>));
 <var class="comments">// result: array(1, 2, 3, 4, 5, 6);</var></pre></dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$array</var> = <var class="keywords">array</var>(1, 2, <var class="keywords">array</var>(3, 4, <var class="keywords">array</var>(4.1, 4.2), 5), 6);
 <var class="funcs">var_dump</var>(Posql_Utils::toOneArray(<var class="vars">$array</var>));
 <var class="comments">// result: array(1, 2, 3, 4, 4.1, 4.2, 5, 6);</var></pre></dd>
<dt>return</dt>
<dd><em>array</em>  an array which has only one dimension</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Bundles the multi-dimensional array to an array which has one dimension
 </pre>
</div></div><pre id="source-0401"> <var class="keywords">function</var> toOneArray(<var class="vars">$value</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$value</var>)) {
     <var class="vars">$value</var> = <var class="funcs">array_values</var>(<var class="vars">$value</var>);
     <var class="keywords">foreach</var> (<var class="vars">$value</var> <var class="keywords">as</var> <var class="vars">$index</var> =&gt; <var class="vars">$val</var>) {
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$val</var>)) {
         <var class="keywords">while</var> ((<var class="vars">$valid</var> = <var class="funcs">array_filter</var>(<var class="vars">$val</var>, <var class="strings">'is_array'</var>)) != <var class="keywords">null</var>) {
           <var class="keywords">foreach</var> (<var class="vars">$valid</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$v</var>) {
             <var class="funcs">array_splice</var>(<var class="vars">$val</var>, <var class="vars">$i</var>, 1, <var class="vars">$v</var>);
           }
         }
         <var class="keywords">foreach</var> (<var class="vars">$val</var> <var class="keywords">as</var> <var class="vars">$v</var>) {
           <var class="vars">$result</var>[] = <var class="vars">$v</var>;
         }
       } <var class="keywords">else</var> {
         <var class="vars">$result</var>[] = <var class="vars">$val</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0402"><h2>
<a name="p_function_existsclass_402">
<var class="function">existsClass</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the class name of target</dd>
<dt>return</dt>
<dd><em>boolean</em>  TRUE success and FALSE on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Checks whether the class exists without triggering __autoload().
</pre>
</div></div><pre id="source-0402"> <var class="keywords">function</var> existsClass(<var class="vars">$class</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$class</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$class</var>)) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isPHP5) {
       <var class="vars">$result</var> = <var class="funcs">class_exists</var>(<var class="vars">$class</var>, <var class="keywords">false</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="funcs">class_exists</var>(<var class="vars">$class</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0403"><h2>
<a name="p_function_camelize_403">
<var class="function">camelize</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="keywords">echo</var> Posql_Utils::camelize(<var class="strings">'font-color'</var>);   <var class="comments">// output: 'fontColor'</var>
 <var class="keywords">echo</var> Posql_Utils::camelize(<var class="strings">'-moz-opacity'</var>); <var class="comments">// output: 'MozOpacity'</var></pre></dd>
<dt>param</dt>
<dd><em>string</em>  optionally, a separator character (default = &#039;-&#039;)</dd>
<dt>return</dt>
<dd><em>string</em>  string which translated into camel caps</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Translates a string with underscores into camel case
 </pre>
</div></div><pre id="source-0403"> <var class="keywords">function</var> camelize(<var class="vars">$string</var>, <var class="vars">$separator</var> = <var class="strings">'-'</var>){
   <var class="vars">$org_head</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, 0, 1);
   <var class="vars">$string</var> = <var class="funcs">str_replace</var>(<var class="strings">' '</var>, <var class="strings">''</var>, <var class="funcs">ucwords</var>(<var class="funcs">strtr</var>(<var class="vars">$string</var>, <var class="vars">$separator</var>, <var class="strings">' '</var>)));
   <var class="keywords">if</var> (<var class="vars">$org_head</var> !== <var class="vars">$separator</var>) {
     <var class="vars">$head</var> = <var class="funcs">substr</var>(<var class="vars">$string</var>, 0, 1);
     <var class="keywords">if</var> (<var class="vars">$org_head</var> !== <var class="vars">$head</var>) {
       <var class="vars">$string</var> = <var class="vars">$org_head</var> . <var class="funcs">substr</var>(<var class="vars">$string</var>, 1);
     }
   }
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0404"><h2>
<a name="p_function_underscore_404">
<var class="function">underscore</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  subject string</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="keywords">echo</var> Posql_Utils::underscore(<var class="strings">'underScore'</var>);    <var class="comments">// output: 'under_score'</var>
 <var class="keywords">echo</var> Posql_Utils::underscore(<var class="strings">'PrivateMethod'</var>); <var class="comments">// output: '_private_method'</var></pre></dd>
<dt>return</dt>
<dd><em>string</em>  string which translated into underscore format</dd>
</dl>
<pre class="desc"> Translates a camel case string into a string with underscores
</pre>
</div></div><pre id="source-0404"> <var class="keywords">function</var> underscore(<var class="vars">$string</var>){
   <var class="keywords">static</var> <var class="vars">$maps</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$maps</var> === <var class="keywords">null</var>) {
     <var class="vars">$maps</var> = <var class="keywords">array</var>();
     <var class="keywords">for</var> (<var class="vars">$c</var> = 0x41; <var class="vars">$c</var> &lt;= 0x5A; ++<var class="vars">$c</var>) {
       <var class="vars">$maps</var>[<var class="funcs">chr</var>(<var class="vars">$c</var>)] = <var class="strings">'_'</var> . <var class="funcs">strtolower</var>(<var class="funcs">chr</var>(<var class="vars">$c</var>));
     }
   }
   <var class="vars">$string</var> = <var class="funcs">strtolower</var>(<var class="funcs">strtr</var>(<var class="vars">$string</var>, <var class="vars">$maps</var>));
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0405"><h2>
<a name="p_function_iscontentplaintext_405">
<var class="function">isContentPlainText</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em> whether Mime-Type is text/plain, or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> It is examined whether Mime-Type is text/plain.
 It is searched from the Content-Type and the header information
 </pre>
</div></div><pre id="source-0405"> <var class="keywords">function</var> isContentPlainText(){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">strncasecmp</var>(<var class="funcs">php_sapi_name</var>(), <var class="strings">'cli'</var>, 3) === 0) {
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$headers</var> = <var class="keywords">array</var>();
     <var class="keywords">if</var> (<var class="funcs">function_exists</var>(<var class="strings">'headers_list'</var>)) {
       <var class="vars">$headers</var> = @<var class="funcs">headers_list</var>();
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">function_exists</var>(<var class="strings">'apache_response_headers'</var>)) {
       <var class="vars">$headers</var> = @apache_response_headers();
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$headers</var>)) {
       <var class="vars">$content_type</var> = <var class="strings">'content-type'</var>;
       <var class="vars">$text_plain</var>   = <var class="strings">'text/plain'</var>;
       <var class="keywords">foreach</var> ((<var class="keywords">array</var>)<var class="vars">$headers</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$key</var>)) {
           <var class="vars">$val</var> = <var class="vars">$key</var> . <var class="vars">$val</var>;
         }
         <var class="vars">$val</var> = <var class="funcs">strtolower</var>(<var class="vars">$val</var>);
         <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$val</var>, <var class="vars">$content_type</var>) !== <var class="keywords">false</var>
          &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$val</var>, <var class="vars">$text_plain</var>)   !== <var class="keywords">false</var>) {
           <var class="vars">$result</var> = <var class="keywords">true</var>;
           <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0406"><h2>
<a name="p_class_posql_error_406">
<var class="class">Posql_Error</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 The class raise and generate the errors as stackable exception
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Error</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0407"><h2>
<a name="p_function_errorhandler_407">
<var class="function">errorHandler</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The error handler for expression
</pre>
</div></div><pre id="source-0407"> <var class="keywords">function</var> errorHandler(<var class="vars">$no</var>, <var class="vars">$msg</var>, <var class="vars">$file</var>, <var class="vars">$line</var>){
   <var class="vars">$php_errormsg</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s on line %d'</var>, <var class="vars">$msg</var>, <var class="vars">$line</var>);
   <var class="vars">$this</var>-&gt;pushError(<var class="vars">$msg</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0408"><h2>
<a name="p_function_pusherror_408">
<var class="function">pushError</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the error message</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Generates the error message
 It is stored in an internal variable, and it handle stackable
</pre>
</div></div><pre id="source-0408"> <var class="keywords">function</var> pushError(<var class="vars">$msg</var> = <var class="strings">'unknown error'</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="funcs">func_num_args</var>() &gt; 1) {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
     <var class="vars">$format</var> = <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$args</var>)) {
       <var class="vars">$msg</var> = <var class="vars">$format</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">foreach</var> (<var class="vars">$args</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$arg</var>) {
         <var class="keywords">if</var> (!<var class="funcs">is_scalar</var>(<var class="vars">$arg</var>)) {
           <var class="vars">$args</var>[<var class="vars">$i</var>] = <var class="funcs">gettype</var>(<var class="vars">$arg</var>);
         }
       }
       <var class="vars">$msg</var> = <var class="funcs">vsprintf</var>(<var class="vars">$format</var>, <var class="vars">$args</var>);
     }
   }
   <var class="vars">$trace</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="funcs">function_exists</var>(<var class="strings">'debug_backtrace'</var>)) {
     <var class="vars">$trace</var> = @<var class="funcs">debug_backtrace</var>();
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$trace</var>)) {
     <var class="vars">$trace</var> = <var class="keywords">array</var>();
   }
   <var class="vars">$bt</var> = <var class="funcs">array_pop</var>(<var class="vars">$trace</var>) + <var class="vars">$this</var>-&gt;getDefaultBackTrace();
   <var class="vars">$code</var> = <var class="vars">$this</var>-&gt;mapErrorObject(<var class="vars">$trace</var>);
   <var class="vars">$this</var>-&gt;errors[] = <var class="keywords">array</var>(
     <var class="strings">'msg'</var>  =&gt; <var class="vars">$msg</var>,
     <var class="strings">'line'</var> =&gt; <var class="vars">$bt</var>[<var class="strings">'line'</var>],
     <var class="strings">'file'</var> =&gt; <var class="vars">$bt</var>[<var class="strings">'file'</var>],
     <var class="strings">'code'</var> =&gt; <var class="vars">$code</var>
   );
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0409"><h2>
<a name="p_function_getdefaultbacktrace_409">
<var class="function">getDefaultBackTrace</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>array</em>  an array that has the all backtrace keys</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> A helper function for the return value of debug_backtrace()
</pre>
</div></div><pre id="source-0409"> <var class="keywords">function</var> getDefaultBackTrace(){
   <var class="vars">$default</var> = <var class="keywords">array</var>(
     <var class="strings">'function'</var> =&gt; <var class="keywords">null</var>,
     <var class="strings">'line'</var>     =&gt; <var class="keywords">__LINE__</var>,
     <var class="strings">'file'</var>     =&gt; <var class="keywords">__FILE__</var>,
     <var class="strings">'class'</var>    =&gt; <var class="keywords">__CLASS__</var>,
     <var class="strings">'object'</var>   =&gt; <var class="keywords">null</var>,
     <var class="strings">'type'</var>     =&gt; <var class="keywords">null</var>,
     <var class="strings">'args'</var>     =&gt; <var class="keywords">array</var>()
   );
   <var class="keywords">return</var> <var class="vars">$default</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0410"><h2>
<a name="p_function_maperrorobject_410">
<var class="function">mapErrorObject</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the class name</dd>
<dt>return</dt>
<dd><em>string</em>   the error code as string</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Converts it to the error message from the class name
   which generated the error
</pre>
</div></div><pre id="source-0410"> <var class="keywords">function</var> mapErrorObject(<var class="vars">$class</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$class</var>)) {
     <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$class</var>);
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$reset</var>) &amp;&amp; <var class="funcs">count</var>(<var class="vars">$class</var>) &gt;= 1 &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$reset</var>[<var class="strings">'class'</var>])
      &amp;&amp; <var class="funcs">strtolower</var>(<var class="funcs">substr</var>(<var class="vars">$reset</var>[<var class="strings">'class'</var>], -5)) === <var class="strings">'error'</var>) {
       <var class="funcs">array_shift</var>(<var class="vars">$class</var>);
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$class</var>))) {
         <var class="vars">$class</var> = <var class="funcs">reset</var>(<var class="vars">$class</var>);
       }
     }
     <var class="keywords">foreach</var> (<var class="keywords">array</var>(<var class="strings">'class'</var>, 3) <var class="keywords">as</var> <var class="vars">$key</var>) {
       <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$class</var>)) {
         <var class="vars">$class</var> = <var class="vars">$class</var>[<var class="vars">$key</var>];
         <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$class</var>)) {
     <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$class</var>, <var class="strings">'_'</var>) === <var class="keywords">false</var>) {
       <var class="vars">$class</var> .= <var class="strings">'_'</var>;
     }
     <var class="vars">$class</var> = <var class="funcs">explode</var>(<var class="strings">'_'</var>, <var class="funcs">trim</var>(<var class="vars">$class</var>, <var class="strings">'_'</var>));
     <var class="vars">$class</var> = <var class="funcs">array_filter</var>(<var class="vars">$class</var>, <var class="strings">'strlen'</var>);
     <var class="funcs">reset</var>(<var class="vars">$class</var>);
     <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$class</var>) &gt; 1) {
       <var class="vars">$class</var> = <var class="funcs">next</var>(<var class="vars">$class</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$class</var> = <var class="funcs">current</var>(<var class="vars">$class</var>);
     }
   }
   <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$class</var>)) {
     <var class="vars">$class</var> = <var class="strings">''</var>;
   }
   <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$class</var>)) {
     <var class="keywords">case</var> <var class="strings">'builder'</var>:
         <var class="vars">$result</var> = <var class="strings">'Compile'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'config'</var>:
         <var class="vars">$result</var> = <var class="strings">'Setting'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'expr'</var>:
     <var class="keywords">case</var> <var class="strings">'method'</var>:
         <var class="vars">$result</var> = <var class="strings">'Expression'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'file'</var>:
         <var class="vars">$result</var> = <var class="strings">'IO'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'parser'</var>:
         <var class="vars">$result</var> = <var class="strings">'Parse'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'core'</var>:
     <var class="keywords">case</var> <var class="strings">'ctype'</var>:
     <var class="keywords">case</var> <var class="strings">'error'</var>:
     <var class="keywords">case</var> <var class="strings">'math'</var>:
     <var class="keywords">case</var> <var class="strings">'utils'</var>:
     <var class="keywords">case</var> <var class="strings">'utf8'</var>:
     <var class="keywords">case</var> <var class="strings">'unicode'</var>:
     <var class="keywords">case</var> <var class="strings">'charset'</var>:
         <var class="vars">$result</var> = <var class="strings">'Internal'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'statement'</var>:
         <var class="vars">$result</var> = <var class="strings">'Statement'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'posql'</var>:
     <var class="keywords">default</var>:
         <var class="vars">$result</var> = <var class="strings">''</var>;
         <var class="keywords">break</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0411"><h2>
<a name="p_function_poperror_411">
<var class="function">popError</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>mixed</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Pops an error off of the error stack
 If the stack is empty, NULL will be returned
</pre>
</div></div><pre id="source-0411"> <var class="keywords">function</var> popError(){
   <var class="vars">$result</var> = <var class="funcs">array_pop</var>(<var class="vars">$this</var>-&gt;errors);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0412"><h2>
<a name="p_function_formaterror_412">
<var class="function">formatError</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the error stack</dd>
<dt>return</dt>
<dd><em>string</em>  the error message that was formatted</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Formats the error message from the error stack values
</pre>
</div></div><pre id="source-0412"> <var class="keywords">function</var> formatError(<var class="vars">$error</var>){
   <var class="vars">$result</var> = <var class="strings">'error'</var>;
   <var class="vars">$map</var> = <var class="keywords">array</var>(
     <var class="strings">'-c-'</var>  =&gt; <var class="strings">'%s'</var>,
     <var class="strings">'code'</var> =&gt; <var class="strings">'%s'</var>,
     <var class="strings">'-e-'</var>  =&gt; <var class="strings">'Error:'</var>,
     <var class="strings">'msg'</var>  =&gt; <var class="strings">'%s'</var>,
     <var class="strings">'file'</var> =&gt; <var class="strings">'in %s'</var>,
     <var class="strings">'line'</var> =&gt; <var class="strings">'on line %d'</var>
   );
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$error</var>)) {
     <var class="vars">$format</var> = <var class="keywords">array</var>();
     <var class="vars">$i</var> = 0;
     <var class="keywords">foreach</var> (<var class="vars">$map</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
       <var class="keywords">if</var> (!<var class="vars">$i</var>--) {
         <var class="vars">$arg</var> = <var class="vars">$this</var>-&gt;getClass();
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$error</var>)) {
         <var class="vars">$arg</var> = <var class="vars">$error</var>[<var class="vars">$key</var>];
       } <var class="keywords">else</var> {
         <var class="vars">$arg</var> = <var class="vars">$val</var>;
       }
       <var class="vars">$format</var>[] = <var class="funcs">sprintf</var>(<var class="vars">$val</var>, <var class="vars">$arg</var>);
     }
     <var class="vars">$result</var> = <var class="funcs">implode</var>(<var class="strings">' '</var>, <var class="vars">$format</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0413"><h2>
<a name="p_function_lasterror_413">
<var class="function">lastError</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em> whether details besides the message are contained or not</dd>
<dt>return</dt>
<dd><em>string</em>  the last error message</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the last error message
 If no errors, it return empty string (&#039;&#039;)
</pre>
</div></div><pre id="source-0413"> <var class="keywords">function</var> lastError(<var class="vars">$detail</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$e</var> = <var class="vars">$this</var>-&gt;popError();
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$e</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$e</var>)) {
     <var class="keywords">if</var> (<var class="vars">$detail</var>) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;formatError(<var class="vars">$e</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="strings">'msg'</var>, <var class="vars">$e</var>)) {
         <var class="vars">$result</var> = <var class="vars">$e</var>[<var class="strings">'msg'</var>];
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="strings">'unknown error'</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0414"><h2>
<a name="p_function_geterrors_414">
<var class="function">getErrors</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em> whether details besides the message are contained or not</dd>
<dt>return</dt>
<dd><em>array</em>   the all errors as an array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the all error messages as an array
</pre>
</div></div><pre id="source-0414"> <var class="keywords">function</var> getErrors(<var class="vars">$detail</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">while</var> (<var class="vars">$this</var>-&gt;hasError()) {
       <var class="funcs">array_unshift</var>(<var class="vars">$result</var>, <var class="vars">$this</var>-&gt;lastError(<var class="vars">$detail</var>));
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0415"><h2>
<a name="p_function_iserror_415">
<var class="function">isError</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em> whether it had the error or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Checks whether it had the error
</pre>
</div></div><pre id="source-0415"> <var class="keywords">function</var> isError(){
   <var class="keywords">return</var> !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;errors);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0416"><h2>
<a name="p_function_haserror_416">
<var class="function">hasError</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em> whether it had the error or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Checks whether it had the error
</pre>
</div></div><pre id="source-0416"> <var class="keywords">function</var> hasError(){
   <var class="keywords">return</var> !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;errors);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0417"><h2>
<a name="p_function_numerror_417">
<var class="function">numError</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>number</em>  the numbers of errors count</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> How many numbers of errors are there
</pre>
</div></div><pre id="source-0417"> <var class="keywords">function</var> numError(){
   <var class="keywords">return</var> <var class="funcs">count</var>(<var class="vars">$this</var>-&gt;errors);
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0418"><h2>
<a name="p_class_posql_file_418">
<var class="class">Posql_File</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 The class which collected the file utility for Posql
</pre>
<dl>
<dt>name</dt>
<dd>Posql_File</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0419"><h2>
<a name="p_function_fopen_419">
<var class="function">fopen</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>fseekLine</dd>
<dt>param</dt>
<dd><em>string</em>  operation mode</dd>
<dt>return</dt>
<dd><em>mixed</em>   stream resource or false</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> A shortcut of fopen() and fgets() function call
 Note:
   Version 2.10 latest is:
     The second argument was removed.
     Instead, fseekLine() is used.
</pre>
</div></div><pre id="source-0419"> <var class="keywords">function</var> <var class="funcs">fopen</var>(<var class="vars">$mode</var>){
   <var class="vars">$mode</var> = <var class="funcs">strtolower</var>(<var class="vars">$mode</var>);
   <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$mode</var>, <var class="strings">'b'</var>) === <var class="keywords">false</var>) {
     <var class="vars">$mode</var> .= <var class="strings">'b'</var>;
   }
   <var class="keywords">if</var> (<var class="vars">$fp</var> = @<var class="funcs">fopen</var>(<var class="vars">$this</var>-&gt;path, <var class="vars">$mode</var>)) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isWriteMode(<var class="vars">$mode</var>)) {
       <var class="funcs">set_file_buffer</var>(<var class="vars">$fp</var>, 0);
     }
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;path)) {
       <var class="vars">$path</var> = <var class="vars">$this</var>-&gt;path;
     } <var class="keywords">else</var> {
       <var class="vars">$path</var> = <var class="keywords">null</var>;
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_useQuery)
      &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;lastMethod)
      &amp;&amp; ((<var class="vars">$this</var>-&gt;lastMethod === <var class="strings">'drop'</var>
      &amp;&amp;   <var class="vars">$this</var>-&gt;_ifExistsClause !== <var class="strings">'if_exists'</var>)
      ||  (<var class="vars">$this</var>-&gt;lastMethod === <var class="strings">'create'</var>
      &amp;&amp;   <var class="vars">$this</var>-&gt;_ifExistsClause !== <var class="strings">'if_not_exists'</var>))) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot open file(%s)'</var>, <var class="vars">$path</var>);
     }
     <var class="vars">$fp</var> = <var class="keywords">false</var>;
   }
   <var class="keywords">return</var> <var class="vars">$fp</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0420"><h2>
<a name="p_function_iswritemode_420">
<var class="function">isWriteMode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   fopen()&#039;s mode</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether mode is writing or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Checks whether fopen()&#039;s mode is writing or not
 </pre>
</div></div><pre id="source-0420"> <var class="keywords">function</var> isWriteMode(<var class="vars">$mode</var>){
   <var class="keywords">return</var> <var class="funcs">strpos</var>(<var class="vars">$mode</var>, <var class="strings">'+'</var>) !== <var class="keywords">false</var>
       || <var class="funcs">strpos</var>(<var class="vars">$mode</var>, <var class="strings">'a'</var>) !== <var class="keywords">false</var>
       || <var class="funcs">strpos</var>(<var class="vars">$mode</var>, <var class="strings">'w'</var>) !== <var class="keywords">false</var>
       || <var class="funcs">strpos</var>(<var class="vars">$mode</var>, <var class="strings">'x'</var>) !== <var class="keywords">false</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0421"><h2>
<a name="p_function_fgets_421">
<var class="function">fgets</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>resource</em> stream handle</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether to trim or not</dd>
<dt>return</dt>
<dd><em>string</em>   next one line on stream</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Optimized method for fgets() function
</pre>
</div></div><pre id="source-0421"> <var class="keywords">function</var> <var class="funcs">fgets</var>(&amp;<var class="vars">$fp</var>, <var class="vars">$trim</var> = <var class="keywords">false</var>){
   <var class="comments">/*
   static $has = null;
   if ($has === null) {
     $has = function_exists('stream_get_line')
         &amp;&amp; !empty($this-&gt;isPHP5);
   }
   if ($has) {
     $line = trim(stream_get_line($fp, $this-&gt;MAX, $this-&gt;NL)) . $this-&gt;NL;
   } else {
     $line = fgets($fp);
   }
   return $trim ? trim($line) : $line;
   */</var>
   <var class="comments">//</var>
   <var class="comments">//Fixed bug on PHP function stream_get_line().</var>
   <var class="comments">//</var>
   <var class="comments">// Bug #44607 stream_get_line unable to correctly identify</var>
   <var class="comments">//            the "ending" in the stream content.</var>
   <var class="comments">// @see  http://bugs.php.net/bug.php?id=44607</var>
   <var class="comments">//</var>
   <var class="comments">// Bug #43522 stream_get_line eats additional characters.</var>
   <var class="comments">// @see  http://bugs.php.net/bug.php?id=43522</var>
   <var class="comments">//</var>
   <var class="comments">// stream_get_line() fixed since PHP 5.2.7</var>
   <var class="comments">// But it is assumed that it does not use it now for stability.</var>
   <var class="comments">//</var>
   <var class="vars">$line</var> = <var class="funcs">fgets</var>(<var class="vars">$fp</var>);
   <var class="keywords">if</var> (<var class="vars">$trim</var>) {
     <var class="vars">$line</var> = <var class="funcs">trim</var>(<var class="vars">$line</var>);
   }
   <var class="keywords">return</var> <var class="vars">$line</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0422"><h2>
<a name="p_function_fputs_422">
<var class="function">fputs</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>resource</em> stream handle</dd>
<dt>param</dt>
<dd><em>string</em>   the string that is to be written</dd>
<dt>return</dt>
<dd><em>number</em>   the number of bytes written, or FALSE on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Optimized method for fwrite() function
 </pre>
</div></div><pre id="source-0422"> <var class="keywords">function</var> <var class="funcs">fputs</var>(&amp;<var class="vars">$fp</var>, <var class="vars">$string</var>){
   <var class="vars">$result</var> = <var class="funcs">fwrite</var>(<var class="vars">$fp</var>, <var class="vars">$string</var>, <var class="funcs">strlen</var>(<var class="vars">$string</var>));
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0423"><h2>
<a name="p_function_fseekline_423">
<var class="function">fseekLine</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>resource</em>  stream handle</dd>
<dt>param</dt>
<dd><em>number</em>    number of lines for moving cursor</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Seek lines on a file pointer
</pre>
</div></div><pre id="source-0423"> <var class="keywords">function</var> fseekLine(&amp;<var class="vars">$fp</var>, <var class="vars">$lines</var> = 0){
   <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$lines</var>)) {
     <var class="keywords">while</var> (--<var class="vars">$lines</var> &gt;= 0) {
       <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0424"><h2>
<a name="p_function_appendfileline_424">
<var class="function">appendFileLine</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   filename</dd>
<dt>param</dt>
<dd><em>mixed</em>    string or array to append</dd>
<dt>param</dt>
<dd><em>number</em>   line number to insert which starts from 1</dd>
<dt>param</dt>
<dd><em>string</em>   the string glue to join array</dd>
<dt>return</dt>
<dd><em>number</em>   the number of bytes written</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Appends given string into the file with the specified line number
</pre>
</div></div><pre id="source-0424"> <var class="keywords">function</var> appendFileLine(<var class="vars">$filename</var>, <var class="vars">$append_data</var>, <var class="vars">$line_number</var>, <var class="vars">$glue</var> = <var class="strings">''</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$line_number</var>)) {
     <var class="vars">$line_number</var> = <var class="vars">$line_number</var> - 0;
     <var class="vars">$appends</var> = <var class="keywords">array</var>();
     <var class="keywords">if</var> (<var class="vars">$append_data</var> === <var class="keywords">null</var> || <var class="funcs">is_scalar</var>(<var class="vars">$append_data</var>)) {
       <var class="vars">$appends</var> = <var class="keywords">array</var>((<var class="keywords">string</var>)<var class="vars">$append_data</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$append_data</var>)) {
         <var class="vars">$append_data</var> = (<var class="keywords">array</var>)<var class="vars">$append_data</var>;
       }
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$append_data</var>)) {
         <var class="vars">$append_data</var> = <var class="keywords">array</var>(<var class="keywords">null</var>);
       }
       <var class="vars">$appends</var> = <var class="funcs">array_map</var>(<var class="strings">'strval'</var>, <var class="vars">$append_data</var>);
     }
     <var class="vars">$org_ext</var> = <var class="vars">$this</var>-&gt;setExt(<var class="keywords">null</var>);
     <var class="vars">$org_path</var> = <var class="vars">$this</var>-&gt;getPath();
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$filename</var>);
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$i</var> = 1;
       <var class="vars">$nl</var> = <var class="strings">''</var>;
       <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
         <var class="keywords">if</var> (<var class="vars">$i</var> == <var class="vars">$line_number</var>) {
           <var class="vars">$buffer</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
           <var class="keywords">if</var> (<var class="vars">$nl</var> == <var class="keywords">null</var>) {
             <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$buffer</var>, -2);
             <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
               <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$nl</var>, -1);
               <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
                 <var class="vars">$nl</var> = <var class="strings">''</var>;
               }
             }
           }
           <var class="vars">$buffer</var> = <var class="funcs">substr</var>(<var class="vars">$buffer</var>, 0, -<var class="funcs">strlen</var>(<var class="vars">$nl</var>));
           <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$appends</var>) &gt; 1) {
             <var class="vars">$nl</var> = <var class="strings">''</var>;
           }
           <var class="funcs">reset</var>(<var class="vars">$appends</var>);
           <var class="vars">$key</var> = <var class="funcs">key</var>(<var class="vars">$appends</var>);
           <var class="vars">$appends</var>[<var class="vars">$key</var>] = <var class="vars">$buffer</var> . <var class="vars">$appends</var>[<var class="vars">$key</var>] . <var class="vars">$nl</var>;
           <var class="keywords">break</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$i</var> === 1) {
             <var class="vars">$buffer</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
             <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$buffer</var>, -2);
             <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
               <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$nl</var>, -1);
               <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
                 <var class="vars">$nl</var> = <var class="strings">''</var>;
               }
             }
             <var class="keywords">unset</var>(<var class="vars">$buffer</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
           }
         }
         <var class="vars">$i</var>++;
       }
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_replaceFileLine(<var class="vars">$appends</var>, <var class="vars">$line_number</var>, <var class="vars">$glue</var>);
     }
     <var class="vars">$this</var>-&gt;setExt(<var class="vars">$org_ext</var>);
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$org_path</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0425"><h2>
<a name="p_function_insertfileline_425">
<var class="function">insertFileLine</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   filename</dd>
<dt>param</dt>
<dd><em>mixed</em>    string or array to insert</dd>
<dt>param</dt>
<dd><em>number</em>   line number to insert which starts from 1</dd>
<dt>param</dt>
<dd><em>string</em>   the string glue to join array</dd>
<dt>return</dt>
<dd><em>number</em>   the number of bytes written</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Insert given string into the file with the specified line number
</pre>
</div></div><pre id="source-0425"> <var class="keywords">function</var> insertFileLine(<var class="vars">$filename</var>, <var class="vars">$insert_data</var>, <var class="vars">$line_number</var>, <var class="vars">$glue</var> = <var class="strings">''</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$line_number</var>)) {
     <var class="vars">$line_number</var> = <var class="vars">$line_number</var> - 0;
     <var class="vars">$inserts</var> = <var class="keywords">array</var>();
     <var class="keywords">if</var> (<var class="vars">$insert_data</var> === <var class="keywords">null</var> || <var class="funcs">is_scalar</var>(<var class="vars">$insert_data</var>)) {
       <var class="vars">$inserts</var> = <var class="keywords">array</var>((<var class="keywords">string</var>)<var class="vars">$insert_data</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$insert_data</var>)) {
         <var class="vars">$insert_data</var> = (<var class="keywords">array</var>)<var class="vars">$insert_data</var>;
       }
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$insert_data</var>)) {
         <var class="vars">$insert_data</var> = <var class="keywords">array</var>(<var class="keywords">null</var>);
       }
       <var class="vars">$inserts</var> = <var class="funcs">array_map</var>(<var class="strings">'strval'</var>, <var class="vars">$insert_data</var>);
     }
     <var class="vars">$org_ext</var> = <var class="vars">$this</var>-&gt;setExt(<var class="keywords">null</var>);
     <var class="vars">$org_path</var> = <var class="vars">$this</var>-&gt;getPath();
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$filename</var>);
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$i</var> = 1;
       <var class="vars">$nl</var> = <var class="strings">''</var>;
       <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
         <var class="keywords">if</var> (<var class="vars">$i</var> == <var class="vars">$line_number</var>) {
           <var class="vars">$buffer</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
           <var class="keywords">if</var> (<var class="vars">$nl</var> == <var class="keywords">null</var>) {
             <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$buffer</var>, -2);
             <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
               <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$nl</var>, -1);
               <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
                 <var class="vars">$nl</var> = <var class="strings">''</var>;
               }
             }
           }
           <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$inserts</var>) &gt; 1) {
             <var class="vars">$buffer</var> = <var class="funcs">substr</var>(<var class="vars">$buffer</var>, 0, -<var class="funcs">strlen</var>(<var class="vars">$nl</var>));
           }
           <var class="funcs">end</var>(<var class="vars">$inserts</var>);
           <var class="vars">$key</var> = <var class="funcs">key</var>(<var class="vars">$inserts</var>);
           <var class="vars">$inserts</var>[<var class="vars">$key</var>] .= <var class="vars">$nl</var> . <var class="vars">$buffer</var>;
           <var class="keywords">break</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$i</var> === 1) {
             <var class="vars">$buffer</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
             <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$buffer</var>, -2);
             <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
               <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$nl</var>, -1);
               <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
                 <var class="vars">$nl</var> = <var class="strings">''</var>;
               }
             }
             <var class="keywords">unset</var>(<var class="vars">$buffer</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
           }
         }
         <var class="vars">$i</var>++;
       }
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_replaceFileLine(<var class="vars">$inserts</var>, <var class="vars">$line_number</var>, <var class="vars">$glue</var>);
     }
     <var class="vars">$this</var>-&gt;setExt(<var class="vars">$org_ext</var>);
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$org_path</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0426"><h2>
<a name="p_function_replacefileline_426">
<var class="function">replaceFileLine</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   filename</dd>
<dt>param</dt>
<dd><em>mixed</em>    replacement as string or array</dd>
<dt>param</dt>
<dd><em>number</em>   line number to replace which starts from 1</dd>
<dt>param</dt>
<dd><em>string</em>   the string glue to join array</dd>
<dt>return</dt>
<dd><em>number</em>   the number of bytes written</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Replaces to given string into the file with the specified line number
</pre>
</div></div><pre id="source-0426"> <var class="keywords">function</var> replaceFileLine(<var class="vars">$filename</var>, <var class="vars">$replacement</var>, <var class="vars">$line_number</var>, <var class="vars">$glue</var> = <var class="strings">''</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$line_number</var>)) {
     <var class="vars">$line_number</var> = <var class="vars">$line_number</var> - 0;
     <var class="vars">$replacements</var> = <var class="keywords">array</var>();
     <var class="keywords">if</var> (<var class="vars">$replacement</var> === <var class="keywords">null</var> || <var class="funcs">is_scalar</var>(<var class="vars">$replacement</var>)) {
       <var class="vars">$replacements</var> = <var class="keywords">array</var>((<var class="keywords">string</var>)<var class="vars">$replacement</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$replacement</var>)) {
         <var class="vars">$replacement</var> = (<var class="keywords">array</var>)<var class="vars">$replacement</var>;
       }
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$replacement</var>)) {
         <var class="vars">$replacement</var> = <var class="keywords">array</var>(<var class="keywords">null</var>);
       }
       <var class="vars">$replacements</var> = <var class="funcs">array_map</var>(<var class="strings">'strval'</var>, <var class="vars">$replacement</var>);
     }
     <var class="keywords">unset</var>(<var class="vars">$replacement</var>);
     <var class="vars">$org_ext</var> = <var class="vars">$this</var>-&gt;setExt(<var class="keywords">null</var>);
     <var class="vars">$org_path</var> = <var class="vars">$this</var>-&gt;getPath();
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$filename</var>);
     <var class="vars">$nl</var> = <var class="strings">''</var>;
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$buffer</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$buffer</var>, -2);
       <var class="keywords">unset</var>(<var class="vars">$buffer</var>);
       <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
         <var class="vars">$nl</var> = <var class="funcs">substr</var>(<var class="vars">$nl</var>, -1);
         <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$nl</var>) != <var class="keywords">null</var>) {
           <var class="vars">$nl</var> = <var class="strings">''</var>;
         }
       }
       <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$replacements</var>) &gt; 1) {
         <var class="vars">$nl</var> = <var class="strings">''</var>;
       }
       <var class="funcs">end</var>(<var class="vars">$replacements</var>);
       <var class="vars">$key</var> = <var class="funcs">key</var>(<var class="vars">$replacements</var>);
       <var class="vars">$replacements</var>[<var class="vars">$key</var>] .= <var class="vars">$nl</var>;
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_replaceFileLine(<var class="vars">$replacements</var>, <var class="vars">$line_number</var>, <var class="vars">$glue</var>);
     }
     <var class="vars">$this</var>-&gt;setExt(<var class="vars">$org_ext</var>);
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$org_path</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0427"><h2>
<a name="p_function__replacefileline_427">
<var class="function">_replaceFileLine</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    replacement as string or array</dd>
<dt>param</dt>
<dd><em>number</em>   line number to replace which starts from 1</dd>
<dt>param</dt>
<dd><em>string</em>   the string glue to join array</dd>
<dt>return</dt>
<dd><em>number</em>   the number of bytes written</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Replaces to given string into the file with the specified line number
</pre>
</div></div><pre id="source-0427"> <var class="keywords">function</var> _replaceFileLine(<var class="vars">$replacement</var>, <var class="vars">$line_number</var>, <var class="vars">$glue</var> = <var class="strings">''</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$line_number</var>)) {
     <var class="vars">$line_number</var> = <var class="vars">$line_number</var> - 0;
     <var class="vars">$replacements</var> = <var class="keywords">array</var>();
     <var class="keywords">if</var> (<var class="vars">$replacement</var> === <var class="keywords">null</var> || <var class="funcs">is_scalar</var>(<var class="vars">$replacement</var>)) {
       <var class="vars">$replacements</var> = <var class="keywords">array</var>((<var class="keywords">string</var>)<var class="vars">$replacement</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$replacement</var>)) {
         <var class="vars">$replacement</var> = (<var class="keywords">array</var>)<var class="vars">$replacement</var>;
       }
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$replacement</var>)) {
         <var class="vars">$replacement</var> = <var class="keywords">array</var>(<var class="keywords">null</var>);
       }
       <var class="vars">$replacements</var> = <var class="funcs">array_map</var>(<var class="strings">'strval'</var>, <var class="vars">$replacement</var>);
     }
     <var class="vars">$replacement</var> = <var class="strings">''</var>;
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$replacements</var>)) {
       <var class="vars">$count</var> = <var class="funcs">count</var>(<var class="vars">$replacements</var>);
       <var class="keywords">if</var> (<var class="vars">$count</var> === 1) {
         <var class="vars">$replacement</var> = <var class="funcs">array_shift</var>(<var class="vars">$replacements</var>);
       } <var class="keywords">else</var> {
         <var class="keywords">while</var> (--<var class="vars">$count</var> &gt;= 0) {
           <var class="vars">$replacement</var> .= <var class="funcs">array_shift</var>(<var class="vars">$replacements</var>) . <var class="vars">$glue</var>;
         }
       }
       <var class="vars">$written_bytes</var> = 0;
       <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$replacement</var>);
       <var class="vars">$buffer_size</var> = 0x2000;
       <var class="keywords">if</var> (<var class="vars">$rp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
         <var class="keywords">if</var> (<var class="vars">$wp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
           <var class="vars">$i</var> = 1;
           <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$rp</var>)) {
             <var class="keywords">if</var> (<var class="vars">$i</var> == <var class="vars">$line_number</var>) {
               <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$rp</var>);
               <var class="vars">$buffers</var> = <var class="keywords">array</var>();
               <var class="vars">$buffers</var>[] = <var class="funcs">fread</var>(<var class="vars">$rp</var>, <var class="vars">$length</var>);
               <var class="vars">$written_bytes</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$replacement</var>);
               <var class="vars">$buffer_size</var> += <var class="vars">$length</var>;
               <var class="keywords">if</var> (!<var class="funcs">feof</var>(<var class="vars">$rp</var>)) {
                 <var class="keywords">do</var> {
                   <var class="vars">$buffers</var>[] = <var class="funcs">fread</var>(<var class="vars">$rp</var>, <var class="vars">$buffer_size</var>);
                   <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="funcs">array_shift</var>(<var class="vars">$buffers</var>));
                 } <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$rp</var>));
               }
               <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="funcs">array_shift</var>(<var class="vars">$buffers</var>));
               <var class="vars">$org_user_abort</var> = <var class="funcs">ignore_user_abort</var>(1);
               <var class="funcs">ftruncate</var>(<var class="vars">$wp</var>, <var class="funcs">ftell</var>(<var class="vars">$wp</var>));
               <var class="funcs">ignore_user_abort</var>(<var class="vars">$org_user_abort</var>);
               <var class="vars">$result</var> = <var class="vars">$written_bytes</var>;
               <var class="keywords">break</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$rp</var>));
             }
             <var class="vars">$i</var>++;
           }
           <var class="funcs">fclose</var>(<var class="vars">$wp</var>);
         }
         <var class="funcs">fclose</var>(<var class="vars">$rp</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0428"><h2>
<a name="p_function_fgetcsv_428">
<var class="function">fgetcsv</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>link</dt>
<dd><a href="http://www.ietf.org/rfc/rfc4180.txt" target="_blank" title="open in blanks window">http://www.ietf.org/rfc/rfc4180.txt</a></dd>
<dt>param</dt>
<dd><em>resource</em>  a valid file pointer</dd>
<dt>param</dt>
<dd><em>string</em>    the field delimiter</dd>
<dt>param</dt>
<dd><em>string</em>    the field enclosure character</dd>
<dt>return</dt>
<dd><em>array</em>     an indexed array containing the fields or FALSE</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Parse CSV (Comma-Separated Values) fields as string.
 Almost compatibly PHP&#039;s fgetcsv() function.
</pre>
</div></div><pre id="source-0428"> <var class="keywords">function</var> <var class="funcs">fgetcsv</var>(&amp;<var class="vars">$fp</var>, <var class="vars">$delimiter</var> = <var class="strings">','</var>, <var class="vars">$enclosure</var> = <var class="strings">'&quot;'</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
     <var class="vars">$line</var> = <var class="strings">''</var>;
     <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
       <var class="vars">$line</var> .= <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
       <var class="vars">$quote_count</var> = <var class="funcs">substr_count</var>(<var class="vars">$line</var>, <var class="vars">$enclosure</var>);
       <var class="keywords">if</var> (<var class="vars">$quote_count</var> % 2 === 0) {
         <var class="keywords">break</var>;
       }
     }
     <var class="vars">$line</var> = <var class="funcs">rtrim</var>(<var class="vars">$line</var>);
     <var class="keywords">if</var> (<var class="vars">$line</var> != <var class="keywords">null</var>) {
       <var class="vars">$quoted_delimiter</var> = <var class="funcs">preg_quote</var>(<var class="vars">$delimiter</var>, <var class="strings">'/'</var>);
       <var class="vars">$quoted_enclosure</var> = <var class="funcs">preg_quote</var>(<var class="vars">$enclosure</var>, <var class="strings">'/'</var>);
       <var class="vars">$pattern</var> = <var class="funcs">sprintf</var>(<var class="strings">'/(?:(?&lt;=%s)(?=(?:(?:[^%s]*%s){2})*[^%s]*$)|^)'</var>
                        .  <var class="strings">'(?:[^%s,]+|%s(?:[^%s]|%s%s)+%s|)/'</var>,
         <var class="vars">$quoted_delimiter</var>, <var class="vars">$quoted_enclosure</var>, <var class="vars">$quoted_enclosure</var>,
         <var class="vars">$quoted_enclosure</var>, <var class="vars">$quoted_enclosure</var>, <var class="vars">$quoted_enclosure</var>,
         <var class="vars">$quoted_enclosure</var>, <var class="vars">$quoted_enclosure</var>, <var class="vars">$quoted_enclosure</var>,
         <var class="vars">$quoted_enclosure</var>
       );
       <var class="funcs">preg_match_all</var>(<var class="vars">$pattern</var>, <var class="vars">$line</var>, <var class="vars">$matches</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$matches</var>[0])) {
         <var class="vars">$fields</var> = <var class="funcs">array_shift</var>(<var class="vars">$matches</var>);
         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$fields</var>)) {
           <var class="vars">$result</var> = <var class="keywords">array</var>();
           <var class="keywords">foreach</var> (<var class="vars">$fields</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$field</var>) {
             <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="vars">$field</var>, 0, 1) === <var class="vars">$enclosure</var>
              &amp;&amp; <var class="funcs">substr</var>(<var class="vars">$field</var>, -1)  === <var class="vars">$enclosure</var>) {
               <var class="vars">$field</var> = <var class="funcs">substr</var>(<var class="vars">$field</var>, 1, -1);
             }
             <var class="vars">$enclosure2</var> = <var class="vars">$enclosure</var> . <var class="vars">$enclosure</var>;
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$field</var>, <var class="vars">$enclosure2</var>) !== <var class="keywords">false</var>) {
               <var class="vars">$field</var> = <var class="funcs">str_replace</var>(<var class="vars">$enclosure2</var>, <var class="vars">$enclosure</var>, <var class="vars">$field</var>);
             }
             <var class="vars">$result</var>[] = <var class="vars">$field</var>;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0429"><h2>
<a name="p_function_fullpath_429">
<var class="function">fullPath</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  file path</dd>
<dt>param</dt>
<dd><em>boolean</em> checks then return valid path or filename</dd>
<dt>return</dt>
<dd><em>string</em>  file path of full</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns full path as realpath() function behaves
</pre>
</div></div><pre id="source-0429"> <var class="keywords">function</var> fullPath(<var class="vars">$path</var>, <var class="vars">$check_exists</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$backslash</var> = <var class="strings">'\\'</var>, <var class="vars">$slash</var> = <var class="strings">'/'</var>, <var class="vars">$colon</var> = <var class="strings">':'</var>;
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$fullpath</var> = <var class="vars">$path</var>;
   <var class="vars">$pre0</var> = <var class="funcs">substr</var>(<var class="vars">$path</var>, 0, 1);
   <var class="vars">$pre1</var> = <var class="funcs">substr</var>(<var class="vars">$path</var>, 1, 1);
   <var class="keywords">if</var> ((!<var class="vars">$this</var>-&gt;isWin &amp;&amp; <var class="vars">$pre0</var> !== <var class="vars">$slash</var>)
     || (<var class="vars">$this</var>-&gt;isWin &amp;&amp; <var class="vars">$pre1</var> !== <var class="vars">$colon</var>)) {
     <var class="vars">$fullpath</var> = <var class="funcs">getcwd</var>() . <var class="vars">$slash</var> . <var class="vars">$path</var>;
   }
   <var class="vars">$fullpath</var> = <var class="funcs">strtr</var>(<var class="vars">$fullpath</var>, <var class="vars">$backslash</var>, <var class="vars">$slash</var>);
   <var class="vars">$items</var> = <var class="funcs">explode</var>(<var class="vars">$slash</var>, <var class="vars">$fullpath</var>);
   <var class="vars">$new_items</var> = <var class="keywords">array</var>();
   <var class="keywords">foreach</var> (<var class="vars">$items</var> <var class="keywords">as</var> <var class="vars">$item</var>) {
     <var class="keywords">if</var> (<var class="vars">$item</var> == <var class="keywords">null</var> || <var class="funcs">strpos</var>(<var class="vars">$item</var>, <var class="strings">'.'</var>) === 0) {
       <var class="keywords">if</var> (<var class="vars">$item</var> === <var class="strings">'..'</var>) {
         <var class="funcs">array_pop</var>(<var class="vars">$new_items</var>);
       }
       <var class="keywords">continue</var>;
     }
     <var class="vars">$new_items</var>[] = <var class="vars">$item</var>;
   }
   <var class="vars">$fullpath</var> = <var class="funcs">implode</var>(<var class="vars">$slash</var>, <var class="vars">$new_items</var>);
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isWin) {
     <var class="vars">$fullpath</var> = <var class="vars">$slash</var> . <var class="vars">$fullpath</var>;
   }
   <var class="vars">$result</var> = <var class="vars">$fullpath</var>;
   <var class="keywords">if</var> (<var class="vars">$check_exists</var>) {
     <var class="funcs">clearstatcache</var>();
     <var class="keywords">if</var> (!@<var class="funcs">file_exists</var>(<var class="vars">$result</var>)) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0430"><h2>
<a name="p_function_dirname_430">
<var class="function">dirname</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  file path to target</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql;
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'C:/tmp'</var>);       <var class="comments">// output: 'C:/tmp'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'C:/tmp/'</var>);      <var class="comments">// output: 'C:/tmp'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'C:/tmp//'</var>);     <var class="comments">// output: 'C:/tmp'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'/tmp/hoge'</var>);    <var class="comments">// output: '/tmp/hoge'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'/tmp/hoge/'</var>);   <var class="comments">// output: '/tmp/hoge'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'/tmp/hoge///'</var>); <var class="comments">// output: '/tmp/hoge'</var></pre></dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql;
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'C:/path/to/file.ext'</var>, 1); <var class="comments">// output: 'C:/path/to'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'C:/path/to/file.ext'</var>, 2); <var class="comments">// output: 'C:/path'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'C:/path/to/file.ext'</var>, 3); <var class="comments">// output: 'C:/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'C:/path/to/file.ext'</var>, 4); <var class="comments">// output: 'C:/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'/path/to/file.ext'</var>, 2);   <var class="comments">// output: '/path'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'/path/to/file.ext'</var>, 3);   <var class="comments">// output: '/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;<var class="funcs">dirname</var>(<var class="strings">'/path/to/file.ext'</var>, 4);   <var class="comments">// output: '/'</var></pre></dd>
<dt>param</dt>
<dd><em>int</em>     how many hierarchies to up for path</dd>
<dt>return</dt>
<dd><em>string</em>  the name of the directory, or FALSE on failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> A handy function like the dirname() of inherited call
 Note:
  Windows: unable to use &quot;*&quot; for filename
  Unix:    unable to use &quot;\0&quot; for filename
  MacOS:   unable to use &quot;:&quot; for filename
 </pre>
</div></div><pre id="source-0430"> <var class="keywords">function</var> <var class="funcs">dirname</var>(<var class="vars">$path</var>, <var class="vars">$hierarchy</var> = 0){
   <var class="keywords">static</var> <var class="vars">$dummy</var> = <var class="strings">&quot;/:*\0&quot;</var>;
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$path</var>)) {
     <var class="keywords">if</var> (<var class="vars">$path</var> === <var class="strings">'/'</var>) {
       <var class="vars">$result</var> = <var class="vars">$path</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="funcs">dirname</var>(<var class="vars">$path</var> . <var class="vars">$dummy</var>);
       <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$hierarchy</var>)) {
         <var class="vars">$base</var> = <var class="keywords">null</var>;
         <var class="vars">$prev</var> = <var class="keywords">null</var>;
         <var class="keywords">while</var> (--<var class="vars">$hierarchy</var> &gt;= 0) {
           <var class="vars">$prev</var> = <var class="vars">$result</var>;
           <var class="vars">$base</var> = <var class="funcs">basename</var>(<var class="vars">$result</var>);
           <var class="vars">$result</var> = <var class="funcs">dirname</var>(<var class="vars">$result</var>);
           <var class="keywords">if</var> (<var class="funcs">dirname</var>(<var class="vars">$result</var>) === <var class="vars">$result</var>) {
             <var class="keywords">break</var>;
           }
         }
         <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$base</var> != <var class="keywords">null</var>
          &amp;&amp; <var class="funcs">dirname</var>(<var class="vars">$result</var>) === <var class="vars">$result</var>) {
           <var class="vars">$result</var> = <var class="funcs">substr</var>(<var class="vars">$prev</var>, 0, -<var class="funcs">strlen</var>(<var class="vars">$base</var>));
         }
         <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$result</var>) &gt; <var class="funcs">strlen</var>(<var class="vars">$path</var>)) {
           <var class="vars">$result</var> = <var class="vars">$path</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0431"><h2>
<a name="p_function_dirnamewith_431">
<var class="function">dirnameWith</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  file path to target</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql;
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'/path/to/file'</var>);   <var class="comments">// output: '/path/to/file/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'path/file.ext'</var>);   <var class="comments">// output: 'path/file.ext/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'/path/'</var>);          <var class="comments">// output: '/path/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'/path'</var>);           <var class="comments">// output: '/path/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'/'</var>);               <var class="comments">// output: '/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'C:/tmp/a/file'</var>);   <var class="comments">// output: 'C:/tmp/a/file/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'C:/tmp/file.ext'</var>); <var class="comments">// output: 'C:/tmp/file.ext/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'C:/tmp/'</var>);         <var class="comments">// output: 'C:/tmp/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'C:/tmp'</var>);          <var class="comments">// output: 'C:/tmp/'</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;dirnameWith(<var class="strings">'C:'</var>);              <var class="comments">// output: 'C:/'</var></pre></dd>
<dt>param</dt>
<dd><em>string</em>  optionally, the suffix (default = &#039;/&#039;)</dd>
<dt>return</dt>
<dd><em>string</em>  the name of the directory, or NULL on failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Fixes with the suffix the paths
</pre>
</div></div><pre id="source-0431"> <var class="keywords">function</var> dirnameWith(<var class="vars">$path</var>, <var class="vars">$with</var> = <var class="strings">'/'</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$path</var>)) {
     <var class="keywords">if</var> (!<var class="funcs">is_scalar</var>(<var class="vars">$with</var>)) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;<var class="funcs">dirname</var>(<var class="vars">$path</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="funcs">rtrim</var>(<var class="vars">$this</var>-&gt;<var class="funcs">dirname</var>(<var class="vars">$path</var>), <var class="vars">$with</var>) . <var class="vars">$with</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0432"><h2>
<a name="p_function_toext_432">
<var class="function">toExt</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  extension</dd>
<dt>param</dt>
<dd><em>boolean</em> whether the extension of all lowercase or not</dd>
<dt>return</dt>
<dd><em>string</em>  extension that added the period</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the extension that added the dot(.)
 </pre>
</div></div><pre id="source-0432"> <var class="keywords">function</var> toExt(<var class="vars">$ext</var> = <var class="keywords">null</var>, <var class="vars">$tolower</var> = <var class="keywords">false</var>){
   <var class="keywords">if</var> (<var class="vars">$ext</var> == <var class="keywords">null</var> &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;ext)) {
     <var class="vars">$ext</var> = <var class="vars">$this</var>-&gt;ext;
   }
   <var class="keywords">if</var> (<var class="vars">$ext</var> != <var class="keywords">null</var>) {
     <var class="vars">$ext</var> = <var class="strings">'.'</var> . <var class="funcs">ltrim</var>(<var class="vars">$ext</var>, <var class="strings">'.'</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$tolower</var>) {
     <var class="vars">$ext</var> = <var class="funcs">strtolower</var>(<var class="vars">$ext</var>);
   }
   <var class="keywords">return</var> <var class="vars">$ext</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0433"><h2>
<a name="p_function_getextensionname_433">
<var class="function">getExtensionName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   filename</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql;
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;getExtensionName(<var class="strings">&quot;/path/to/file.ext&quot;</var>); <var class="comments">// output: "ext"</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;getExtensionName(<var class="strings">&quot;.ext&quot;</var>);              <var class="comments">// output: "ext"</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;getExtensionName(<var class="strings">&quot;..ext&quot;</var>);             <var class="comments">// output: "ext"</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;getExtensionName(<var class="strings">&quot;ext2.ext1.ext&quot;</var>);     <var class="comments">// output: "ext"</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;getExtensionName(<var class="strings">&quot;ext.&quot;</var>);              <var class="comments">// output: ""</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;getExtensionName(<var class="strings">&quot;ext&quot;</var>);               <var class="comments">// output: ""</var>
 <var class="keywords">echo</var> <var class="vars">$posql</var>-&gt;getExtensionName(<var class="strings">&quot;file.ext&quot;</var>);          <var class="comments">// output: "ext"</var></pre></dd>
<dt>param</dt>
<dd><em>boolean</em>  whether result returned lower-case</dd>
<dt>return</dt>
<dd><em>string</em>   the extension name</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Get the extension name from filename without dot
 </pre>
</div></div><pre id="source-0433"> <var class="keywords">function</var> getExtensionName(<var class="vars">$filename</var>, <var class="vars">$tolower</var> = <var class="keywords">false</var>){
   <var class="vars">$ext</var> = <var class="keywords">null</var>;
   <var class="vars">$base</var> = <var class="funcs">trim</var>(<var class="funcs">basename</var>(<var class="vars">$filename</var>));
   <var class="vars">$tail</var> = <var class="funcs">strrchr</var>(<var class="vars">$base</var>, <var class="strings">'.'</var>);
   <var class="keywords">if</var> (<var class="vars">$tail</var> == <var class="keywords">null</var>) {
     <var class="vars">$ext</var> = <var class="strings">''</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$tail</var> === <var class="strings">'.'</var>) {
       <var class="vars">$ext</var> = <var class="strings">''</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$ext</var> = <var class="funcs">substr</var>(<var class="vars">$tail</var>, 1);
     }
   }
   <var class="keywords">if</var> (<var class="vars">$tolower</var>) {
     <var class="vars">$ext</var> = <var class="funcs">strtolower</var>(<var class="vars">$ext</var>);
   }
   <var class="keywords">return</var> <var class="vars">$ext</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0434"><h2>
<a name="p_function_assignlockmode_434">
<var class="function">assignLockMode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  the mode of locking</dd>
<dt>return</dt>
<dd><em>number</em>  assigned locking mode</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Assigns the mode of locking for constant LOCK_*
</pre>
</div></div><pre id="source-0434"> <var class="keywords">function</var> assignLockMode(<var class="vars">$mode</var>){
   <var class="keywords">switch</var> ((<var class="keywords">int</var>)<var class="vars">$mode</var>) {
     <var class="keywords">case</var> 1:
     <var class="keywords">case</var> LOCK_SH:
     <var class="keywords">case</var> <var class="vars">$this</var>-&gt;LOCK_SH:
         <var class="vars">$mode</var> = <var class="vars">$this</var>-&gt;LOCK_SH;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 2:
     <var class="keywords">case</var> LOCK_EX:
     <var class="keywords">case</var> <var class="vars">$this</var>-&gt;LOCK_EX:
         <var class="vars">$mode</var> = <var class="vars">$this</var>-&gt;LOCK_EX;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 3:
     <var class="keywords">case</var> LOCK_UN:
     <var class="keywords">case</var> 4:
     <var class="keywords">case</var> LOCK_NB:
     <var class="keywords">case</var> <var class="vars">$this</var>-&gt;LOCK_NONE:
     <var class="keywords">default</var>:
         <var class="vars">$mode</var> = <var class="vars">$this</var>-&gt;LOCK_NONE;
         <var class="keywords">break</var>;
   }
   <var class="vars">$mode</var> = (<var class="keywords">int</var>)<var class="vars">$mode</var>;
   <var class="keywords">return</var> <var class="vars">$mode</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0435"><h2>
<a name="p_function_setresultstorage_435">
<var class="function">setResultStorage</var>
</a>
</h2><div class="function"><div>
<pre class="desc"> Not implemented function</pre>
</div></div><pre id="source-0435"> <var class="keywords">function</var> setResultStorage(<var class="vars">$mode</var>, <var class="vars">$storage</var> = <var class="keywords">null</var>){
   <var class="comments">//TODO: The storage of the result row should be able to be set</var>
   <var class="comments">//      in the future.</var>
   <var class="keywords">switch</var> (<var class="vars">$mode</var>) {
     <var class="keywords">case</var> <var class="strings">'auto'</var>:    <var class="comments">//use auto</var>
     <var class="keywords">case</var> <var class="strings">'tmpfile'</var>: <var class="comments">//use tmpfile();</var>
     <var class="keywords">case</var> <var class="strings">'memory'</var>:  <var class="comments">//use memory</var>
     <var class="keywords">case</var> <var class="strings">'file'</var>:    <var class="comments">//use file</var>
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0436"><h2>
<a name="p_function_getuniquefilename_436">
<var class="function">getUniqueFilename</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  target directory name</dd>
<dt>param</dt>
<dd><em>string</em>  string which is preppended to the filename</dd>
<dt>return</dt>
<dd><em>string</em>  the unique filename, or FALSE on failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Get the unique filename which is able to create actually
</pre>
</div></div><pre id="source-0436"> <var class="keywords">function</var> getUniqueFilename(<var class="vars">$dir</var>, <var class="vars">$prefix</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$dir</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$dir</var>)) {
     <var class="vars">$dir</var> = <var class="vars">$this</var>-&gt;fullPath(<var class="vars">$dir</var>, <var class="keywords">true</var>);
     <var class="keywords">if</var> (<var class="vars">$dir</var>) {
       <var class="vars">$dir</var> = <var class="vars">$this</var>-&gt;<var class="funcs">dirname</var>(<var class="vars">$dir</var>);
       <var class="keywords">if</var> (<var class="vars">$prefix</var> === <var class="keywords">null</var> || !<var class="funcs">is_scalar</var>(<var class="vars">$prefix</var>)) {
         <var class="vars">$prefix</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s_dummy_%s'</var>, <var class="vars">$this</var>-&gt;getClassName(), <var class="vars">$this</var>-&gt;id);
         <var class="vars">$prefix</var> = <var class="funcs">strtolower</var>(<var class="vars">$prefix</var>);
       }
       <var class="keywords">do</var> {
         <var class="funcs">clearstatcache</var>();
         <var class="vars">$dirname</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s_%.08f'</var>, <var class="vars">$prefix</var>, <var class="vars">$this</var>-&gt;getMicrotime());
         <var class="vars">$dirname</var> = <var class="funcs">rawurlencode</var>(<var class="vars">$dirname</var>);
         <var class="vars">$path</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s/%s'</var>, <var class="vars">$dir</var>, <var class="vars">$dirname</var>);
       } <var class="keywords">while</var> (@<var class="funcs">file_exists</var>(<var class="vars">$path</var>));
       <var class="vars">$result</var> = <var class="vars">$dirname</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0437"><h2>
<a name="p_function_getlockdirname_437">
<var class="function">getLockDirName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  the temporary directory name</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Return the temporary directory name which  is used on locking the database
</pre>
</div></div><pre id="source-0437"> <var class="keywords">function</var> getLockDirName(){
   <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s/.%s.lock'</var>,
     <var class="funcs">dirname</var>(<var class="vars">$this</var>-&gt;path),
     <var class="vars">$this</var>-&gt;getDatabaseName()
   );
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0438"><h2>
<a name="p_function_canlockdatabase_438">
<var class="function">canLockDatabase</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the current directory is able to lock or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Check whether the current directory is able to lock
</pre>
</div></div><pre id="source-0438"> <var class="keywords">function</var> canLockDatabase(){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;path != <var class="keywords">null</var>) {
     <var class="vars">$perms</var> = 0777;
     <var class="vars">$dir</var> = <var class="funcs">dirname</var>(<var class="vars">$this</var>-&gt;path);
     <var class="vars">$uniqid</var> = <var class="vars">$this</var>-&gt;getUniqueFilename(<var class="vars">$dir</var>);
     <var class="keywords">if</var> (<var class="vars">$uniqid</var>) {
       <var class="vars">$path</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s/%s'</var>, <var class="vars">$dir</var>, <var class="vars">$uniqid</var>);
       <var class="keywords">if</var> (@<var class="funcs">mkdir</var>(<var class="vars">$path</var>, <var class="vars">$perms</var>) &amp;&amp; @<var class="funcs">rmdir</var>(<var class="vars">$path</var>)) {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0439"><h2>
<a name="p_function_lockdatabase_439">
<var class="function">lockDatabase</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Tries to lock a database.
 It waits maximal timeout seconds for the lock.
 Clears the dead lock when the timeout passes.
</pre>
</div></div><pre id="source-0439"> <var class="keywords">function</var> lockDatabase(){
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;autoLock) {
     <var class="vars">$perms</var> = 0777;
     <var class="vars">$lock_dir</var> = <var class="vars">$this</var>-&gt;getLockDirName();
     <var class="vars">$timeout</var> = <var class="vars">$this</var>-&gt;getDeadLockTimeout();
     <var class="keywords">while</var> (<var class="keywords">true</var>) {
       <var class="vars">$locked</var> = @<var class="funcs">mkdir</var>(<var class="vars">$lock_dir</var>, <var class="vars">$perms</var>);
       <var class="keywords">if</var> (<var class="vars">$locked</var>) {
         <var class="vars">$mask</var> = @<var class="funcs">umask</var>(0);
         @<var class="funcs">chmod</var>(<var class="vars">$lock_dir</var>, <var class="vars">$perms</var>);
         @<var class="funcs">umask</var>(<var class="vars">$mask</var>);
         <var class="keywords">break</var>;
       }
       <var class="funcs">clearstatcache</var>();
       <var class="keywords">if</var> (@<var class="funcs">is_dir</var>(<var class="vars">$lock_dir</var>)) {
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)) {
           <var class="keywords">break</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$mtime</var> = @<var class="funcs">filemtime</var>(<var class="vars">$lock_dir</var>);
           <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$mtime</var>) &amp;&amp; (<var class="funcs">time</var>() - 60 * <var class="vars">$timeout</var>) &gt; <var class="vars">$mtime</var>) {
             <var class="vars">$this</var>-&gt;unlockDatabase();
             <var class="keywords">continue</var>;
           }
         }
       }
       <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0440"><h2>
<a name="p_function_unlockdatabase_440">
<var class="function">unlockDatabase</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Unlocks a file
</pre>
</div></div><pre id="source-0440"> <var class="keywords">function</var> unlockDatabase(){
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;autoLock) {
     <var class="vars">$lock_dir</var> = <var class="vars">$this</var>-&gt;getLockDirName();
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)) {
       @<var class="funcs">rmdir</var>(<var class="vars">$lock_dir</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0441"><h2>
<a name="p_function_islock_441">
<var class="function">isLock</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>number</em>  the mode of locking</dd>
<dt>return</dt>
<dd><em>boolean</em> locking or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Checks whether the table is locking
 If the argument is not given it will interpreted
   as locked by either LOCK_EX or LOCK_SH
</pre>
</div></div><pre id="source-0441"> <var class="keywords">function</var> isLock(<var class="vars">$table</var>, <var class="vars">$mode</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isLockAll()) {
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$mode_org</var> = <var class="vars">$mode</var>;
     <var class="vars">$mode</var> = <var class="vars">$this</var>-&gt;assignLockMode(<var class="vars">$mode</var>);
     <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
     <var class="vars">$tname_symbol</var> = <var class="vars">$tname</var> . <var class="strings">':'</var>;
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$this</var>-&gt;lockDatabase();
       <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 1);
       <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       <var class="vars">$this</var>-&gt;unlockDatabase();
       <var class="vars">$symbol_pos</var> = <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$tname_symbol</var>);
       <var class="keywords">if</var> (<var class="vars">$symbol_pos</var> === <var class="keywords">false</var>
        || <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="strings">'@'</var>) === <var class="keywords">false</var>) {
         <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>])) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$table</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot check by isLock(%s)'</var>, <var class="vars">$table</var>);
         }
       } <var class="keywords">else</var> {
         <var class="vars">$lock_pos</var> = <var class="vars">$symbol_pos</var> + <var class="funcs">strlen</var>(<var class="vars">$tname_symbol</var>);
         <var class="vars">$lock_buffer</var> = <var class="funcs">substr</var>(<var class="vars">$line</var>, <var class="vars">$lock_pos</var>, 10);
         <var class="keywords">list</var>(<var class="vars">$lock_mode</var>, <var class="vars">$lock_id</var>) = <var class="funcs">explode</var>(<var class="strings">'@'</var>, <var class="vars">$lock_buffer</var>);
         <var class="vars">$lock_mode</var> = <var class="vars">$this</var>-&gt;assignLockMode(<var class="vars">$lock_mode</var>);
         <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;id) {
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;toUniqId(0)) {
             <var class="vars">$result</var> = <var class="keywords">false</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$mode_org</var> === <var class="keywords">null</var>) {
               <var class="keywords">if</var> (<var class="vars">$lock_mode</var> !== <var class="vars">$this</var>-&gt;LOCK_NONE) {
                 <var class="vars">$result</var> = <var class="keywords">true</var>;
               }
             } <var class="keywords">else</var> {
               <var class="keywords">if</var> (<var class="vars">$lock_mode</var> === <var class="vars">$mode</var>) {
                 <var class="vars">$result</var> = <var class="keywords">true</var>;
               }
             }
           }
         }
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$result</var>) {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;autoLock)) {
       <var class="vars">$this</var>-&gt;autoLock = <var class="keywords">true</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0442"><h2>
<a name="p_function_islockex_442">
<var class="function">isLockEx</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   table name</dd>
<dt>return</dt>
<dd><em>boolean</em>  locked or not locked</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> It is checked whether the table is locked as LOCK_EX
</pre>
</div></div><pre id="source-0442"> <var class="keywords">function</var> isLockEx(<var class="vars">$table</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isLock(<var class="vars">$table</var>, <var class="vars">$this</var>-&gt;LOCK_EX);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0443"><h2>
<a name="p_function_islocksh_443">
<var class="function">isLockSh</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   table name</dd>
<dt>return</dt>
<dd><em>boolean</em>  locked or not locked</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> It is checked whether the table is locked as LOCK_SH
</pre>
</div></div><pre id="source-0443"> <var class="keywords">function</var> isLockSh(<var class="vars">$table</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isLock(<var class="vars">$table</var>, <var class="vars">$this</var>-&gt;LOCK_SH);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0444"><h2>
<a name="p_function_islockall_444">
<var class="function">isLockAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>   the mode of locking</dd>
<dt>return</dt>
<dd><em>boolean</em>  all locked or not locked</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> It is checked whether all tables are locked
 If the argument is not given it will interpreted
   as locked by either LOCK_EX or LOCK_SH
</pre>
</div></div><pre id="source-0444"> <var class="keywords">function</var> isLockAll(<var class="vars">$mode</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$mode_org</var> = <var class="vars">$mode</var>;
   <var class="vars">$mode</var> = <var class="vars">$this</var>-&gt;assignLockMode(<var class="vars">$mode</var>);
   <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
     <var class="vars">$this</var>-&gt;lockDatabase();
     <var class="vars">$header</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>, <var class="keywords">true</var>);
     <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
     <var class="vars">$this</var>-&gt;unlockDatabase();
     <var class="vars">$buffer</var> = <var class="funcs">substr</var>(<var class="vars">$header</var>, -10);
     <var class="vars">$at_pos</var> = <var class="funcs">strpos</var>(<var class="vars">$buffer</var>, <var class="strings">'@'</var>);
     <var class="keywords">if</var> (<var class="vars">$at_pos</var> === <var class="keywords">false</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Database might be broken'</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">list</var>(<var class="vars">$lock_mode</var>, <var class="vars">$lock_id</var>) = <var class="funcs">explode</var>(<var class="strings">'@'</var>, <var class="vars">$buffer</var>);
       <var class="vars">$lock_mode</var> = <var class="vars">$this</var>-&gt;assignLockMode(<var class="vars">$lock_mode</var>);
       <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;id) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;toUniqId(0)) {
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$mode_org</var> === <var class="keywords">null</var>) {
             <var class="keywords">if</var> (<var class="vars">$lock_mode</var> !== <var class="vars">$this</var>-&gt;LOCK_NONE) {
               <var class="vars">$result</var> = <var class="keywords">true</var>;
             }
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$lock_mode</var> === <var class="vars">$mode</var>) {
               <var class="vars">$result</var> = <var class="keywords">true</var>;
             }
           }
         }
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$result</var>) {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;autoLock)) {
       <var class="vars">$this</var>-&gt;autoLock = <var class="keywords">true</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0445"><h2>
<a name="p_function_islockexall_445">
<var class="function">isLockExAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  all locked or not locked</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> It is checked whether all tables are locked as LOCK_EX
</pre>
</div></div><pre id="source-0445"> <var class="keywords">function</var> isLockExAll(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isLockAll(<var class="vars">$this</var>-&gt;LOCK_EX);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0446"><h2>
<a name="p_function_islockshall_446">
<var class="function">isLockShAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  all locked or not locked</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> It is checked whether all tables are locked as LOCK_SH
</pre>
</div></div><pre id="source-0446"> <var class="keywords">function</var> isLockShAll(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isLockAll(<var class="vars">$this</var>-&gt;LOCK_SH);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0447"><h2>
<a name="p_function_lockall_447">
<var class="function">lockAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>   the mode of locking</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Locks to all tables
 Other processes stand by while locking
</pre>
</div></div><pre id="source-0447"> <var class="keywords">function</var> lockAll(<var class="vars">$mode</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;userAbort = @<var class="funcs">ignore_user_abort</var>(1);
   <var class="keywords">while</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$sleep</var> = <var class="keywords">false</var>;
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;_lockAll(<var class="vars">$mode</var>)) {
       <var class="vars">$sleep</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$current_id</var> = <var class="vars">$this</var>-&gt;getLockIdAll();
       <var class="keywords">if</var> (<var class="vars">$current_id</var> === <var class="vars">$this</var>-&gt;id) {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
         <var class="keywords">break</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$sleep</var> = <var class="keywords">true</var>;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$sleep</var>) {
       <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0448"><h2>
<a name="p_function__lockall_448">
<var class="function">_lockAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0448"> <var class="keywords">function</var> _lockAll(<var class="vars">$mode</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)) {
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$mode</var>     = <var class="vars">$this</var>-&gt;assignLockMode(<var class="vars">$mode</var>);
     <var class="vars">$uniqid</var>   = <var class="vars">$this</var>-&gt;id;
     <var class="vars">$id_len</var>   = <var class="funcs">strlen</var>(<var class="vars">$uniqid</var>);
     <var class="vars">$lock_pos</var> = <var class="funcs">strlen</var>(<var class="vars">$this</var>-&gt;getHeader());
     <var class="vars">$id_pos</var>   = <var class="vars">$lock_pos</var> + 2;
     <var class="vars">$puts</var>     = <var class="funcs">sprintf</var>(<var class="strings">'%d@%s'</var>, <var class="vars">$mode</var>, <var class="vars">$uniqid</var>);
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isLockAll()) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
         <var class="vars">$this</var>-&gt;lockDatabase();
         <var class="vars">$do_write</var> = <var class="keywords">true</var>;
         <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$id_pos</var>);
         <var class="vars">$lock_id</var> = <var class="funcs">fread</var>(<var class="vars">$fp</var>, <var class="vars">$id_len</var>);
         <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;toUniqId(0)) {
           <var class="vars">$do_write</var> = <var class="keywords">true</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;id) {
             <var class="vars">$do_write</var> = <var class="keywords">true</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$do_write</var> = <var class="keywords">false</var>;
           }
         }
         <var class="keywords">if</var> (<var class="vars">$do_write</var>) {
           <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$lock_pos</var>);
           <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$fp</var>, <var class="vars">$puts</var>);
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
         <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
         <var class="vars">$this</var>-&gt;unlockDatabase();
       }
       <var class="keywords">if</var> (<var class="vars">$result</var>) {
         <var class="vars">$current_id</var> = <var class="vars">$this</var>-&gt;getLockIdAll();
         <var class="keywords">if</var> (<var class="vars">$current_id</var> !== <var class="vars">$this</var>-&gt;id) {
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0449"><h2>
<a name="p_function_lockexall_449">
<var class="function">lockExAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Locks to all tables as LOCK_EX
 Other processes stand by while locking
</pre>
</div></div><pre id="source-0449"> <var class="keywords">function</var> lockExAll(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;lockAll(<var class="vars">$this</var>-&gt;LOCK_EX);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0450"><h2>
<a name="p_function_lockshall_450">
<var class="function">lockShAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Locks to all tables as LOCK_SH
 Other processes stand by while locking
</pre>
</div></div><pre id="source-0450"> <var class="keywords">function</var> lockShAll(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;lockAll(<var class="vars">$this</var>-&gt;LOCK_SH);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0451"><h2>
<a name="p_function_unlockall_451">
<var class="function">unlockAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em>  whether it compulsorily unlocks</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Unlocks to all tables
                  it regardless of the state of the lock
</pre>
</div></div><pre id="source-0451"> <var class="keywords">function</var> unlockAll(<var class="vars">$force</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">while</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;_unlockAll(<var class="vars">$force</var>)) {
       <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
       <var class="keywords">break</var>;
     }
   }
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;userAbort)) {
     @<var class="funcs">ignore_user_abort</var>(<var class="vars">$this</var>-&gt;userAbort);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0452"><h2>
<a name="p_function__unlockall_452">
<var class="function">_unlockAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0452"> <var class="keywords">function</var> _unlockAll(<var class="vars">$force</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)) {
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$uniqid</var>   = <var class="vars">$this</var>-&gt;toUniqId(0);
     <var class="vars">$id_len</var>   = <var class="funcs">strlen</var>(<var class="vars">$uniqid</var>);
     <var class="vars">$lock_pos</var> = <var class="funcs">strlen</var>(<var class="vars">$this</var>-&gt;getHeader());
     <var class="vars">$id_pos</var>   = <var class="vars">$lock_pos</var> + 2;
     <var class="vars">$puts</var>     = <var class="funcs">sprintf</var>(<var class="strings">'%d@%s'</var>, <var class="vars">$this</var>-&gt;LOCK_NONE, <var class="vars">$uniqid</var>);
     <var class="keywords">if</var> (!<var class="vars">$force</var> &amp;&amp; <var class="vars">$this</var>-&gt;isLockAll()) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
         <var class="vars">$this</var>-&gt;lockDatabase();
         <var class="vars">$do_write</var> = <var class="keywords">true</var>;
         <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$id_pos</var>);
         <var class="vars">$lock_id</var> = <var class="funcs">fread</var>(<var class="vars">$fp</var>, <var class="vars">$id_len</var>);
         <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;toUniqId(0)) {
           <var class="vars">$do_write</var> = <var class="keywords">true</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;id) {
             <var class="vars">$do_write</var> = <var class="keywords">true</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$do_write</var> = <var class="keywords">false</var>;
           }
         }
         <var class="keywords">if</var> (<var class="vars">$force</var>) {
           <var class="vars">$do_write</var> = <var class="keywords">true</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$do_write</var>) {
           <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$lock_pos</var>);
           <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$fp</var>, <var class="vars">$puts</var>);
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
         <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
         <var class="vars">$this</var>-&gt;unlockDatabase();
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0453"><h2>
<a name="p_function_lock_453">
<var class="function">lock</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>number</em>  the mode of locking</dd>
<dt>return</dt>
<dd><em>boolean</em> success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Locks to one table
 Other processes stand by while locking
</pre>
</div></div><pre id="source-0453"> <var class="keywords">function</var> lock(<var class="vars">$table</var>, <var class="vars">$mode</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;userAbort = @<var class="funcs">ignore_user_abort</var>(1);
   <var class="keywords">while</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$sleep</var> = <var class="keywords">false</var>;
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;_lock(<var class="vars">$table</var>, <var class="vars">$mode</var>)) {
       <var class="vars">$sleep</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$current_id</var> = <var class="vars">$this</var>-&gt;getLockId(<var class="vars">$table</var>);
       <var class="keywords">if</var> (<var class="vars">$current_id</var> === <var class="vars">$this</var>-&gt;id) {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
         <var class="keywords">break</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$sleep</var> = <var class="keywords">true</var>;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$sleep</var>) {
       <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0454"><h2>
<a name="p_function__lock_454">
<var class="function">_lock</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0454"> <var class="keywords">function</var> _lock(<var class="vars">$table</var>, <var class="vars">$mode</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)) {
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$tname</var>  = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
     <var class="vars">$symbol</var> = <var class="vars">$tname</var> . <var class="strings">':'</var>;
     <var class="vars">$mode</var>   = <var class="vars">$this</var>-&gt;assignLockMode(<var class="vars">$mode</var>);
     <var class="vars">$uniqid</var> = <var class="vars">$this</var>-&gt;toUniqId(<var class="vars">$this</var>-&gt;id);
     <var class="vars">$id_len</var> = <var class="funcs">strlen</var>(<var class="vars">$uniqid</var>);
     <var class="vars">$puts</var>   = <var class="funcs">sprintf</var>(<var class="strings">'%d@%s'</var>, <var class="vars">$mode</var>, <var class="vars">$uniqid</var>);
     <var class="vars">$sleep</var>  = <var class="keywords">false</var>;
     <var class="keywords">switch</var> (<var class="vars">$mode</var>) {
       <var class="keywords">case</var> <var class="vars">$this</var>-&gt;LOCK_SH:
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isLockAll() || <var class="vars">$this</var>-&gt;isLockEx(<var class="vars">$table</var>)) {
             <var class="vars">$sleep</var> = <var class="keywords">true</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="vars">$this</var>-&gt;LOCK_EX:
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isLockAll() || <var class="vars">$this</var>-&gt;isLock(<var class="vars">$table</var>)) {
             <var class="vars">$sleep</var> = <var class="keywords">true</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="keywords">break</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$sleep</var>) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
         <var class="vars">$this</var>-&gt;lockDatabase();
         <var class="vars">$do_write</var> = <var class="keywords">true</var>;
         <var class="vars">$head</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
         <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
         <var class="vars">$symbol_pos</var> = <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$symbol</var>);
         <var class="keywords">if</var> (<var class="vars">$symbol_pos</var> === <var class="keywords">false</var>
          || <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="strings">'@'</var>) === <var class="keywords">false</var>) {
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>])) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot lock table(%s)'</var>, <var class="vars">$table</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$table</var>);
           }
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$lock_pos</var> = <var class="funcs">strlen</var>(<var class="vars">$head</var>) + <var class="funcs">strlen</var>(<var class="vars">$symbol</var>) + <var class="vars">$symbol_pos</var>;
           <var class="vars">$id_pos</var>   = <var class="vars">$lock_pos</var> + 2;
           <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$id_pos</var>);
           <var class="vars">$lock_id</var> = <var class="funcs">fread</var>(<var class="vars">$fp</var>, <var class="vars">$id_len</var>);
           <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;toUniqId(0)) {
             <var class="vars">$do_write</var> = <var class="keywords">true</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;id) {
               <var class="vars">$do_write</var> = <var class="keywords">true</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$do_write</var> = <var class="keywords">false</var>;
             }
           }
           <var class="keywords">if</var> (<var class="vars">$do_write</var>) {
             <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$lock_pos</var>);
             <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$fp</var>, <var class="vars">$puts</var>);
             <var class="vars">$result</var> = <var class="keywords">true</var>;
           }
         }
         <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
         <var class="vars">$this</var>-&gt;unlockDatabase();
       }
       <var class="keywords">if</var> (<var class="vars">$result</var>) {
         <var class="vars">$current_id</var> = <var class="vars">$this</var>-&gt;getLockId(<var class="vars">$table</var>);
         <var class="keywords">if</var> (<var class="vars">$current_id</var> !== <var class="vars">$this</var>-&gt;id) {
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0455"><h2>
<a name="p_function_lockex_455">
<var class="function">lockEx</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>return</dt>
<dd><em>boolean</em> success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Locks to one table as LOCK_EX
 Other processes stand by while locking
</pre>
</div></div><pre id="source-0455"> <var class="keywords">function</var> lockEx(<var class="vars">$table</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;lock(<var class="vars">$table</var>, <var class="vars">$this</var>-&gt;LOCK_EX);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0456"><h2>
<a name="p_function_locksh_456">
<var class="function">lockSh</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   table name</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Locks to one table as LOCK_SH
 Other processes stand by while locking
</pre>
</div></div><pre id="source-0456"> <var class="keywords">function</var> lockSh(<var class="vars">$table</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;lock(<var class="vars">$table</var>, <var class="vars">$this</var>-&gt;LOCK_SH);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0457"><h2>
<a name="p_function_unlock_457">
<var class="function">unlock</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   table name</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether it compulsorily unlocks</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Unlocks to the one table
                  it regardless of the state of the lock
</pre>
</div></div><pre id="source-0457"> <var class="keywords">function</var> unlock(<var class="vars">$table</var>, <var class="vars">$force</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">while</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;_unlock(<var class="vars">$table</var>, <var class="vars">$force</var>)) {
       <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
       <var class="keywords">break</var>;
     }
   }
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;userAbort)) {
     @<var class="funcs">ignore_user_abort</var>(<var class="vars">$this</var>-&gt;userAbort);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0458"><h2>
<a name="p_function__unlock_458">
<var class="function">_unlock</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0458"> <var class="keywords">function</var> _unlock(<var class="vars">$table</var>, <var class="vars">$force</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)) {
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$tname</var>  = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
     <var class="vars">$symbol</var> = <var class="vars">$tname</var> . <var class="strings">':'</var>;
     <var class="vars">$uniqid</var> = <var class="vars">$this</var>-&gt;toUniqId(0);
     <var class="vars">$id_len</var> = <var class="funcs">strlen</var>(<var class="vars">$uniqid</var>);
     <var class="vars">$puts</var>   = <var class="funcs">sprintf</var>(<var class="strings">'%d@%s'</var>, <var class="vars">$this</var>-&gt;LOCK_NONE, <var class="vars">$uniqid</var>);
     <var class="vars">$sleep</var>  = <var class="keywords">false</var>;
     <var class="keywords">if</var> (!<var class="vars">$force</var> &amp;&amp; <var class="vars">$this</var>-&gt;isLockAll()) {
       <var class="vars">$sleep</var> = <var class="keywords">true</var>;
     }
     <var class="keywords">if</var> (!<var class="vars">$force</var> &amp;&amp; <var class="vars">$this</var>-&gt;isLock(<var class="vars">$table</var>)) {
       <var class="vars">$sleep</var> = <var class="keywords">true</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$sleep</var>) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
         <var class="vars">$this</var>-&gt;lockDatabase();
         <var class="vars">$do_write</var> = <var class="keywords">true</var>;
         <var class="vars">$head</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
         <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
         <var class="vars">$symbol_pos</var> = <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$symbol</var>);
         <var class="keywords">if</var> (<var class="vars">$symbol_pos</var> === <var class="keywords">false</var>
          || <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="strings">'@'</var>) === <var class="keywords">false</var>) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot unlock the table(%s)'</var>, <var class="vars">$table</var>);
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$lock_pos</var> = <var class="funcs">strlen</var>(<var class="vars">$head</var>) + <var class="funcs">strlen</var>(<var class="vars">$symbol</var>) + <var class="vars">$symbol_pos</var>;
           <var class="vars">$id_pos</var>   = <var class="vars">$lock_pos</var> + 2;
           <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$id_pos</var>);
           <var class="vars">$lock_id</var> = <var class="funcs">fread</var>(<var class="vars">$fp</var>, <var class="vars">$id_len</var>);
           <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;toUniqId(0)) {
             <var class="vars">$do_write</var> = <var class="keywords">true</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$lock_id</var> === <var class="vars">$this</var>-&gt;id) {
               <var class="vars">$do_write</var> = <var class="keywords">true</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$do_write</var> = <var class="keywords">false</var>;
             }
           }
           <var class="keywords">if</var> (<var class="vars">$force</var>) {
             <var class="vars">$do_write</var> = <var class="keywords">true</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$do_write</var>) {
             <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$lock_pos</var>);
             <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$fp</var>, <var class="vars">$puts</var>);
             <var class="vars">$result</var> = <var class="keywords">true</var>;
           }
         }
         <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
         <var class="vars">$this</var>-&gt;unlockDatabase();
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0459"><h2>
<a name="p_function_lockalltables_459">
<var class="function">lockAllTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>   the mode of locking</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Lock all tables by using lock() and lockAll() methods.
 Other processes stand by while locking
</pre>
</div></div><pre id="source-0459"> <var class="keywords">function</var> lockAllTables(<var class="vars">$mode</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;getMeta();
   <var class="keywords">if</var> (<var class="vars">$meta</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
     <var class="vars">$this</var>-&gt;_lockedTables = <var class="keywords">array</var>();
     <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$meta</var>) <var class="keywords">as</var> <var class="vars">$tname</var>) {
       <var class="vars">$this</var>-&gt;_lockedTables[] = <var class="vars">$this</var>-&gt;decodeKey(<var class="vars">$tname</var>);
     }
     <var class="keywords">foreach</var> (<var class="vars">$this</var>-&gt;_lockedTables <var class="keywords">as</var> <var class="vars">$table</var>) {
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;lock(<var class="vars">$table</var>, <var class="vars">$mode</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to lock table(%s)'</var>, <var class="vars">$table</var>);
         <var class="keywords">break</var>;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">foreach</var> (<var class="vars">$this</var>-&gt;_lockedTables <var class="keywords">as</var> <var class="vars">$table</var>) {
         <var class="vars">$this</var>-&gt;unlock(<var class="vars">$table</var>);
       }
       <var class="vars">$this</var>-&gt;_lockedTables = <var class="keywords">array</var>();
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockAll(<var class="vars">$mode</var>)) {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0460"><h2>
<a name="p_function_lockexalltables_460">
<var class="function">lockExAllTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Lock all tables as LOCK_EX by using lock() and lockAll() methods
 Other processes stand by while locking
</pre>
</div></div><pre id="source-0460"> <var class="keywords">function</var> lockExAllTables(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;lockAllTables(<var class="vars">$this</var>-&gt;LOCK_EX);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0461"><h2>
<a name="p_function_lockshalltables_461">
<var class="function">lockShAllTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Lock all tables as LOCK_SH by using lock() and lockAll() methods
 Other processes stand by while locking
</pre>
</div></div><pre id="source-0461"> <var class="keywords">function</var> lockShAllTables(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;lockAllTables(<var class="vars">$this</var>-&gt;LOCK_SH);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0462"><h2>
<a name="p_function_unlockalltables_462">
<var class="function">unlockAllTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em>  whether it compulsorily unlocks</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Unlock all tables by using unlock() and unlockAll() methods
                  it regardless of the state of the lock
</pre>
</div></div><pre id="source-0462"> <var class="keywords">function</var> unlockAllTables(<var class="vars">$force</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_lockedTables) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;_lockedTables)) {
     <var class="keywords">while</var> (<var class="vars">$table</var> = <var class="funcs">array_pop</var>(<var class="vars">$this</var>-&gt;_lockedTables)) {
       <var class="vars">$this</var>-&gt;unlock(<var class="vars">$table</var>, <var class="vars">$force</var>);
     }
     <var class="vars">$this</var>-&gt;unlockAll(<var class="vars">$force</var>);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0463"><h2>
<a name="p_function_getlockid_463">
<var class="function">getLockId</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   target table name</dd>
<dt>return</dt>
<dd><em>string</em>   the locking object id</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Return the locking instance object id
</pre>
</div></div><pre id="source-0463"> <var class="keywords">function</var> getLockId(<var class="vars">$table</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">while</var> (<var class="vars">$this</var>-&gt;isLockAll()) {
     <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
     <var class="vars">$symbol</var> = <var class="vars">$tname</var> . <var class="strings">':'</var>;
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$this</var>-&gt;lockDatabase();
       <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 1);
       <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       <var class="vars">$this</var>-&gt;unlockDatabase();
       <var class="vars">$symbol_pos</var> = <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$symbol</var>);
       <var class="keywords">if</var> (<var class="vars">$symbol_pos</var> === <var class="keywords">false</var>
        || <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="strings">'@'</var>) === <var class="keywords">false</var>) {
         <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>])) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$table</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot check id by getLockId(%s)'</var>, <var class="vars">$table</var>);
         }
       } <var class="keywords">else</var> {
         <var class="vars">$lock_pos</var> = <var class="funcs">strlen</var>(<var class="vars">$symbol</var>) + <var class="vars">$symbol_pos</var>;
         <var class="vars">$lock_buffer</var> = <var class="funcs">substr</var>(<var class="vars">$line</var>, <var class="vars">$lock_pos</var>, 10);
         <var class="keywords">list</var>(, <var class="vars">$lock_id</var>) = <var class="funcs">explode</var>(<var class="strings">'@'</var>, <var class="vars">$lock_buffer</var>);
         <var class="vars">$result</var> = <var class="vars">$lock_id</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0464"><h2>
<a name="p_function_getlockidall_464">
<var class="function">getLockIdAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>   the locking object id</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Return the locking instance object id as locking all tables
</pre>
</div></div><pre id="source-0464"> <var class="keywords">function</var> getLockIdAll(){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">while</var> (<var class="vars">$this</var>-&gt;isLockAll()) {
     <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
   }
   <var class="vars">$lock_pos</var> = <var class="funcs">strlen</var>(<var class="vars">$this</var>-&gt;getHeader());
   <var class="vars">$id_pos</var>   = <var class="vars">$lock_pos</var> + 2;
   <var class="vars">$id_len</var>   = <var class="funcs">strlen</var>(<var class="vars">$this</var>-&gt;id);
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$this</var>-&gt;lockDatabase();
       <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$id_pos</var>);
       <var class="vars">$result</var> = <var class="funcs">fread</var>(<var class="vars">$fp</var>, <var class="vars">$id_len</var>);
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       <var class="vars">$this</var>-&gt;unlockDatabase();
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0465"><h2>
<a name="p_class_posql_parser_465">
<var class="class">Posql_Parser</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class token parses SQL syntax, expression and PHP code
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Parser</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0466"><h2>
<a name="p_function_isparsedexpr_466">
<var class="function">isParsedExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the target expression</dd>
<dt>return</dt>
<dd><em>boolean</em> whether it already parsed or it has not yet</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Checks whether the expression has already parsed or it has not yet
</pre>
</div></div><pre id="source-0466"> <var class="keywords">function</var> isParsedExpr(<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$mark</var> = <var class="vars">$this</var>-&gt;getParsedMark();
   <var class="keywords">if</var> (<var class="vars">$mark</var> &amp;&amp; <var class="vars">$expr</var> != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$result</var> = <var class="funcs">reset</var>(<var class="vars">$expr</var>) === <var class="vars">$mark</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="funcs">substr</var>(<var class="vars">$expr</var>, 0, <var class="funcs">strlen</var>(<var class="vars">$mark</var>)) === <var class="vars">$mark</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0467"><h2>
<a name="p_function_getparsedmark_467">
<var class="function">getParsedMark</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>   the Mark that use to parsed</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Returns the mark to compare that parsed the expression
</pre>
</div></div><pre id="source-0467"> <var class="keywords">function</var> getParsedMark(){
   <var class="keywords">static</var> <var class="vars">$mark</var> = <var class="strings">'#'</var>;
   <var class="keywords">return</var> <var class="vars">$mark</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0468"><h2>
<a name="p_function_addparsedmark_468">
<var class="function">addParsedMark</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the expression</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Adds the mark to compare for the expression
</pre>
</div></div><pre id="source-0468"> <var class="keywords">function</var> addParsedMark(&amp;<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$mark</var> = <var class="vars">$this</var>-&gt;getParsedMark();
   <var class="keywords">if</var> (<var class="vars">$mark</var> &amp;&amp; !<var class="vars">$this</var>-&gt;isParsedExpr(<var class="vars">$expr</var>)) {
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
       <var class="funcs">array_unshift</var>(<var class="vars">$expr</var>, <var class="vars">$mark</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$expr</var> = <var class="vars">$mark</var> . <var class="vars">$expr</var>;
     }
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0469"><h2>
<a name="p_function_removeparsedmark_469">
<var class="function">removeParsedMark</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the expression</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Removes the mark to compare for the expression
</pre>
</div></div><pre id="source-0469"> <var class="keywords">function</var> removeParsedMark(&amp;<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$mark</var> = <var class="vars">$this</var>-&gt;getParsedMark();
   <var class="keywords">if</var> (<var class="vars">$mark</var> &amp;&amp; <var class="vars">$this</var>-&gt;isParsedExpr(<var class="vars">$expr</var>)) {
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
       <var class="funcs">array_shift</var>(<var class="vars">$expr</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$expr</var> = <var class="funcs">substr</var>(<var class="vars">$expr</var>, <var class="funcs">strlen</var>(<var class="vars">$mark</var>));
     }
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0470"><h2>
<a name="p_function_splitsyntax_470">
<var class="function">splitSyntax</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  expression/syntax</dd>
<dt>return</dt>
<dd><em>array</em>   parsed tokens as an array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Splits the syntax to tokens
</pre>
</div></div><pre id="source-0470"> <var class="keywords">function</var> splitSyntax(<var class="vars">$syntax</var>){
   <var class="keywords">static</var> <var class="vars">$cache</var> = <var class="keywords">array</var>(), <var class="vars">$size</var> = 0, <var class="vars">$opted</var> = <var class="keywords">false</var>, <var class="vars">$regexp</var> = <var class="strings">'
   {(?:
       (
        &quot;[^&quot;\\\\]*(?:\\\\.[^&quot;\\\\]*)*&quot;
     |  \'[^\'\\\\]*(?:\\\\.[^\'\\\\]*)*\'
       )
   |   (?:
          (?:
              //
            | [#]
            | --
          )[^\x0A\x0D]*
       )
   |   (?:/[*][\s\S]*?[*]/)
   |   [\x0A\x0D]+
   |   (
         (?: &lt;=&gt;
           | \(\+\)
           | !!=
           | !~[~*]
           | [!=]==
           | &lt;&lt;[&lt;=]
           | &gt;&gt;[&gt;=]
         )
    |    (?: [!=&lt;&gt;.^&amp;|/%*+-]=
           | [&amp;][&amp;]
           | [|][|]
           | &lt;&lt;
           | [=&lt;&gt;-]&gt;
           | ::
           | \+\+
           | --
           | [!~]~
           | ~[~*]
           | &lt;[%?]
           | [%?]&gt;
         )
       )
   | (
       (?: [+-]?
            (?:
               [0](?i:x[0-9a-f]+|[0-7]+)
          |    (?:\d+(?:[.]\d+)?(?i:e[+-]?\d+)?)
          |    [1-9]\d*
            )
        )
     |  (?i:
            [\w\x7F-\xFF]+
        )
     )
   | ([$:@?,;`~\\\\()\{\}\[\]!=&lt;&gt;.^&amp;|/%*+-])
   | \b
   | ([\s])[\s]+
   )}x'</var>;
   <var class="keywords">if</var> (!<var class="vars">$opted</var>) {
     <var class="vars">$regexp</var> = <var class="funcs">preg_replace</var>(<var class="strings">'{\s+|x$}'</var>, <var class="strings">''</var>, <var class="vars">$regexp</var>);
     <var class="vars">$opted</var> = <var class="keywords">true</var>;
   }
   <var class="vars">$hash</var> = <var class="vars">$this</var>-&gt;hashValue(<var class="vars">$syntax</var>);
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$cache</var>[<var class="vars">$hash</var>])) {
     <var class="vars">$result</var> = <var class="vars">$cache</var>[<var class="vars">$hash</var>];
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="funcs">array_values</var>(
                   <var class="funcs">array_filter</var>(
                       <var class="funcs">array_map</var>(
                         <var class="strings">'trim'</var>,
                         <var class="funcs">preg_split</var>(
                           <var class="vars">$regexp</var>,
                           <var class="funcs">trim</var>(<var class="vars">$syntax</var>),
                           -1,
                           PREG_SPLIT_NO_EMPTY |
                           PREG_SPLIT_DELIM_CAPTURE
                         )
                       ),
                       <var class="strings">'strlen'</var>
                   )
     );
     <var class="keywords">if</var> (<var class="vars">$size</var> &lt; 0x1000 &amp;&amp; <var class="funcs">strlen</var>(<var class="funcs">serialize</var>(<var class="vars">$result</var>)) &lt; 0x100) {
       <var class="vars">$cache</var>[<var class="vars">$hash</var>] = <var class="vars">$result</var>;
       <var class="vars">$size</var>++;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0471"><h2>
<a name="p_function_getsupportedsyntax_471">
<var class="function">getSupportedSyntax</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0471"> <var class="keywords">function</var> getSupportedSyntax(<var class="vars">$flip</var> = <var class="keywords">false</var>, <var class="vars">$method</var> = <var class="keywords">null</var>, <var class="vars">$subset</var> = <var class="keywords">null</var>){
   <var class="keywords">static</var> <var class="vars">$syntax</var> = <var class="keywords">array</var>(
     <var class="strings">'select'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'select'</var>, <var class="strings">'from'</var>, <var class="strings">'where'</var>, <var class="strings">'group'</var>, <var class="strings">'having'</var>, <var class="strings">'order'</var>, <var class="strings">'limit'</var>
     ),
     <var class="strings">'update'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'update'</var>, <var class="strings">'set'</var>, <var class="strings">'where'</var>
     ),
     <var class="strings">'delete'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'delete'</var>, <var class="strings">'from'</var>, <var class="strings">'where'</var>
     ),
     <var class="strings">'insert'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'insert'</var>, <var class="strings">'into'</var>, <var class="strings">'values'</var>, <var class="strings">'select'</var>
     ),
     <var class="strings">'replace'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'replace'</var>, <var class="strings">'into'</var>, <var class="strings">'values'</var>, <var class="strings">'select'</var>
     ),
     <var class="strings">'create'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'create'</var>, <var class="strings">'table'</var>, <var class="strings">'database'</var>
     ),
     <var class="strings">'drop'</var>   =&gt; <var class="keywords">array</var>(
       <var class="strings">'drop'</var>, <var class="strings">'table'</var>, <var class="strings">'database'</var>
     ),
     <var class="strings">'vacuum'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'vacuum'</var>
     ),
     <var class="strings">'describe'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'describe'</var>
     ),
     <var class="strings">'desc'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'desc'</var>
     ),
     <var class="strings">'begin'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'begin'</var>
     ),
     <var class="strings">'start'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'start'</var>
     ),
     <var class="strings">'commit'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'commit'</var>
     ),
     <var class="strings">'end'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'end'</var>
     ),
     <var class="strings">'rollback'</var> =&gt; <var class="keywords">array</var>(
       <var class="strings">'rollback'</var>
     )
   );
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$method</var> == <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="vars">$flip</var>) {
       <var class="vars">$result</var> = <var class="funcs">array_flip</var>(<var class="funcs">array_keys</var>(<var class="vars">$syntax</var>));
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$syntax</var>;
     }
   } <var class="keywords">else</var> {
     <var class="vars">$method</var> = <var class="funcs">strtolower</var>(<var class="vars">$method</var>);
     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$method</var>, <var class="vars">$syntax</var>)) {
       <var class="keywords">if</var> (<var class="vars">$flip</var>) {
         <var class="vars">$result</var> = <var class="funcs">array_flip</var>(<var class="vars">$syntax</var>[<var class="vars">$method</var>]);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="vars">$syntax</var>[<var class="vars">$method</var>];
       }
     } <var class="keywords">else</var> {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$method</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0472"><h2>
<a name="p_function_getquerycommand_472">
<var class="function">getQueryCommand</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the SQL query, or the parsed tokens</dd>
<dt>param</dt>
<dd><em>boolean</em> whether get the result as is or lowercase</dd>
<dt>return</dt>
<dd><em>string</em>  the command name</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Gets the command name from SQL query
</pre>
</div></div><pre id="source-0472"> <var class="keywords">function</var> getQueryCommand(<var class="vars">$query</var>, <var class="vars">$as_is</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$query</var>)) {
     <var class="vars">$result</var> = <var class="funcs">reset</var>(<var class="vars">$query</var>);
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$query</var>)) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$tokens</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
       <var class="vars">$result</var> = <var class="funcs">reset</var>(<var class="vars">$tokens</var>);
     }
     <var class="keywords">unset</var>(<var class="vars">$tokens</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$result</var>) &amp;&amp; !<var class="vars">$as_is</var>) {
     <var class="vars">$result</var> = <var class="funcs">strtolower</var>(<var class="vars">$result</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0473"><h2>
<a name="p_function_parsequeryimplements_473">
<var class="function">parseQueryImplements</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the SQL query</dd>
<dt>return</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses tokens of the SQL for implement each methods
</pre>
</div></div><pre id="source-0473"> <var class="keywords">function</var> parseQueryImplements(<var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$query</var> = <var class="funcs">trim</var>(<var class="vars">$query</var>);
   <var class="keywords">if</var> (<var class="vars">$query</var> != <var class="keywords">null</var>) {
     <var class="vars">$methods</var> = <var class="vars">$this</var>-&gt;getSupportedSyntax(<var class="keywords">true</var>);
     <var class="vars">$tokens</var>  = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$tokens</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
       <var class="vars">$method</var> = <var class="funcs">strtolower</var>(<var class="funcs">reset</var>(<var class="vars">$tokens</var>));
       <var class="keywords">if</var> (<var class="vars">$method</var> == <var class="keywords">null</var>
        || !<var class="funcs">array_key_exists</var>(<var class="vars">$method</var>, <var class="vars">$methods</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$method</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$this</var>-&gt;lastMethod = <var class="vars">$method</var>;
         <var class="vars">$this</var>-&gt;lastQuery  = <var class="vars">$query</var>;
         <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;removeBacktickToken(<var class="vars">$tokens</var>);
         <var class="comments">//</var>
         <var class="comments">//XXX: Should replace the alias in this point?</var>
         <var class="comments">// i.e.  $tokens = $this-&gt;replaceAliasTokens($tokens);</var>
         <var class="comments">//</var>
         <var class="keywords">switch</var> (<var class="vars">$method</var>) {
           <var class="keywords">case</var> <var class="strings">'select'</var>:
               <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;parseSelectQuery(<var class="vars">$tokens</var>);
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'update'</var>:
           <var class="keywords">case</var> <var class="strings">'delete'</var>:
           <var class="keywords">case</var> <var class="strings">'create'</var>:
           <var class="keywords">case</var> <var class="strings">'drop'</var>:
           <var class="keywords">case</var> <var class="strings">'describe'</var>:
           <var class="keywords">case</var> <var class="strings">'desc'</var>:
               <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;parseBasicQuery(<var class="vars">$tokens</var>, <var class="vars">$method</var>);
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'insert'</var>:
           <var class="keywords">case</var> <var class="strings">'replace'</var>:
               <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;parseInsertQuery(<var class="vars">$tokens</var>);
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'vacuum'</var>:
           <var class="keywords">case</var> <var class="strings">'begin'</var>:
           <var class="keywords">case</var> <var class="strings">'start'</var>:
           <var class="keywords">case</var> <var class="strings">'commit'</var>:
           <var class="keywords">case</var> <var class="strings">'end'</var>:
           <var class="keywords">case</var> <var class="strings">'rollback'</var>:
               <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getSupportedSyntax(<var class="keywords">false</var>, <var class="vars">$method</var>);
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'alter'</var>:
           <var class="keywords">default</var>:
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$method</var>);
               <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0474"><h2>
<a name="p_function_parsebasicquery_474">
<var class="function">parseBasicQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>param</dt>
<dd><em>string</em>  the method name</dd>
<dt>return</dt>
<dd><em>array</em>   the tokens that parsed as clauses</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses basic SQL query from the tokens
</pre>
</div></div><pre id="source-0474"> <var class="keywords">function</var> parseBasicQuery(<var class="vars">$tokens</var>, <var class="vars">$method</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens(%s) on %s'</var>, <var class="vars">$tokens</var>, <var class="vars">$method</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$methods</var> = <var class="vars">$this</var>-&gt;getSupportedSyntax(<var class="keywords">true</var>, <var class="vars">$method</var>);
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$methods</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, or token(%s)'</var>, <var class="vars">$methods</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">array</var>();
       <var class="vars">$clause</var> = <var class="keywords">null</var>;
       <var class="vars">$level</var>  = 0;
       <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
       <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$token</var>) {
         <var class="vars">$ltoken</var> = <var class="funcs">strtolower</var>(<var class="vars">$token</var>);
         <var class="keywords">switch</var> (<var class="vars">$ltoken</var>) {
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$level</var>++;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="vars">$level</var>--;
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">break</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$methods</var>)
          &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$ltoken</var>, <var class="vars">$methods</var>)) {
           <var class="vars">$clause</var> = <var class="vars">$ltoken</var>;
           <var class="keywords">foreach</var> (<var class="vars">$methods</var> <var class="keywords">as</var> <var class="vars">$method</var> =&gt; <var class="vars">$k</var>) {
             <var class="keywords">if</var> (<var class="vars">$method</var> === <var class="vars">$clause</var>) {
               <var class="keywords">unset</var>(<var class="vars">$methods</var>[<var class="vars">$method</var>]);
               <var class="keywords">break</var>;
             }
             <var class="keywords">unset</var>(<var class="vars">$methods</var>[<var class="vars">$method</var>]);
           }
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$clause</var> != <var class="keywords">null</var>) {
           <var class="vars">$result</var>[<var class="vars">$clause</var>][] = <var class="vars">$token</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0475"><h2>
<a name="p_function_parseselectquery_475">
<var class="function">parseSelectQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>array</em>   the tokens that parsed as clauses</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses SELECT SQL query from the tokens
</pre>
</div></div><pre id="source-0475"> <var class="keywords">function</var> parseSelectQuery(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens(%s) on SELECT'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$methods</var> = <var class="vars">$this</var>-&gt;getSupportedSyntax(<var class="keywords">true</var>, <var class="strings">'select'</var>);
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$methods</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, or token(%s)'</var>, <var class="vars">$methods</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">array</var>();
       <var class="vars">$clause</var> = <var class="keywords">null</var>;
       <var class="vars">$level</var>  = 0;
       <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
         <var class="vars">$token</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var>];
         <var class="vars">$ltoken</var> = <var class="funcs">strtolower</var>(<var class="vars">$token</var>);
         <var class="keywords">switch</var> (<var class="vars">$ltoken</var>) {
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$level</var>++;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="vars">$level</var>--;
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">break</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$methods</var>)
          &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$ltoken</var>, <var class="vars">$methods</var>)) {
           <var class="vars">$clause</var> = <var class="vars">$ltoken</var>;
           <var class="keywords">foreach</var> (<var class="vars">$methods</var> <var class="keywords">as</var> <var class="vars">$method</var> =&gt; <var class="vars">$k</var>) {
             <var class="keywords">if</var> (<var class="vars">$method</var> === <var class="vars">$clause</var>) {
               <var class="keywords">unset</var>(<var class="vars">$methods</var>[<var class="vars">$method</var>]);
               <var class="keywords">break</var>;
             }
             <var class="keywords">unset</var>(<var class="vars">$methods</var>[<var class="vars">$method</var>]);
           }
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$clause</var> != <var class="keywords">null</var>) {
           <var class="vars">$push</var> = <var class="keywords">true</var>;
           <var class="keywords">switch</var> (<var class="vars">$ltoken</var>) {
             <var class="keywords">case</var> <var class="strings">'by'</var>:
                 <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
                   <var class="keywords">if</var> (<var class="vars">$clause</var> === <var class="strings">'group'</var> || <var class="vars">$clause</var> === <var class="strings">'order'</var>) {
                     <var class="vars">$push</var> = <var class="keywords">false</var>;
                   }
                 }
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'union'</var>:
             <var class="keywords">case</var> <var class="strings">'intersect'</var>:
             <var class="keywords">case</var> <var class="strings">'except'</var>:
                 <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
                   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var> + 1])
                    &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var> + 1], <var class="strings">'all'</var>)) {
                     <var class="vars">$ltoken</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s_all'</var>, <var class="vars">$ltoken</var>);
                     <var class="vars">$i</var>++;
                   }
                   <var class="vars">$slice</var> = <var class="funcs">array_slice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var> + 1);
                   <var class="vars">$subset</var> = <var class="vars">$this</var>-&gt;parseSelectUnion(<var class="vars">$slice</var>);
                   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$subset</var>)) {
                     <var class="keywords">break</var> 2;
                   }
                   <var class="vars">$subset_length</var> = <var class="funcs">count</var>(<var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$subset</var>));
                   <var class="vars">$subset_length</var> += <var class="funcs">count</var>(<var class="vars">$subset</var>);
                   <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="strings">'group'</var>, <var class="vars">$subset</var>)) {
                     <var class="vars">$subset_length</var> += 1;
                   }
                   <var class="vars">$i</var> += <var class="vars">$subset_length</var>;
                   <var class="vars">$result</var>[<var class="vars">$ltoken</var>][] = <var class="vars">$subset</var>;
                   <var class="vars">$push</var> = <var class="keywords">false</var>;
                 }
                 <var class="keywords">break</var>;
             <var class="keywords">default</var>:
                 <var class="keywords">break</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$push</var>) {
             <var class="vars">$result</var>[<var class="vars">$clause</var>][] = <var class="vars">$token</var>;
           }
         }
       }
     }
   }
   <var class="comments">//debug($result,'color=purple:***parseSelectQuery***;');</var>
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0476"><h2>
<a name="p_function_parseselectunion_476">
<var class="function">parseSelectUnion</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>array</em>   the tokens that parsed as clauses</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parse compound-operator for SELECT query
 compound-operator:
  - UNION [ALL] : combine two query expressions into a single result set.
                  if ALL is specified, duplicate rows returned by
                  union expression are retained.
  - EXCEPT      : evaluates the output of two query expressions and
                  returns the difference between the results.
  - INTERSECT   : evaluates the output of two query expressions and
                  returns only the rows common to each.
</pre>
</div></div><pre id="source-0476"> <var class="keywords">function</var> parseSelectUnion(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens(%s) on SELECT'</var>, <var class="vars">$tokens</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$methods</var> = <var class="vars">$this</var>-&gt;getSupportedSyntax(<var class="keywords">true</var>, <var class="strings">'select'</var>);
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$methods</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, or token(%s)'</var>, <var class="vars">$methods</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="keywords">array</var>();
         <var class="vars">$clause</var> = <var class="keywords">null</var>;
         <var class="vars">$level</var>  = 0;
         <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
         <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
           <var class="vars">$token</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var>];
           <var class="vars">$ltoken</var> = <var class="funcs">strtolower</var>(<var class="vars">$token</var>);
           <var class="keywords">switch</var> (<var class="vars">$ltoken</var>) {
             <var class="keywords">case</var> <var class="strings">'('</var>:
                 <var class="vars">$level</var>++;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">')'</var>:
                 <var class="vars">$level</var>--;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'order'</var>:
                 <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var> + 1])
                  &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var> + 1], <var class="strings">'by'</var>)) {
                   <var class="keywords">break</var> 2;
                 }
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'limit'</var>:
             <var class="keywords">case</var> <var class="strings">'union'</var>:
             <var class="keywords">case</var> <var class="strings">'intersect'</var>:
             <var class="keywords">case</var> <var class="strings">'except'</var>:
                 <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
                   <var class="keywords">break</var> 2;
                 }
                 <var class="keywords">break</var>;
             <var class="keywords">default</var>:
                 <var class="keywords">break</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$methods</var>)
            &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$ltoken</var>, <var class="vars">$methods</var>)) {
             <var class="vars">$clause</var> = <var class="vars">$ltoken</var>;
             <var class="keywords">foreach</var> (<var class="vars">$methods</var> <var class="keywords">as</var> <var class="vars">$method</var> =&gt; <var class="vars">$k</var>) {
               <var class="keywords">if</var> (<var class="vars">$method</var> === <var class="vars">$clause</var>) {
                 <var class="keywords">unset</var>(<var class="vars">$methods</var>[<var class="vars">$method</var>]);
                 <var class="keywords">break</var>;
               }
               <var class="keywords">unset</var>(<var class="vars">$methods</var>[<var class="vars">$method</var>]);
             }
           } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$clause</var> != <var class="keywords">null</var>) {
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; <var class="vars">$ltoken</var> === <var class="strings">'by'</var>
              &amp;&amp; (<var class="vars">$clause</var> === <var class="strings">'group'</var> || <var class="vars">$clause</var> === <var class="strings">'order'</var>)) {
               <var class="keywords">continue</var>;
             }
             <var class="vars">$result</var>[<var class="vars">$clause</var>][] = <var class="vars">$token</var>;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0477"><h2>
<a name="p_function_parseinsertquery_477">
<var class="function">parseInsertQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>array</em>   the tokens that parsed as clauses</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the INSERT query from the tokens
</pre>
</div></div><pre id="source-0477"> <var class="keywords">function</var> parseInsertQuery(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens(%s)'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$methods</var> = <var class="vars">$this</var>-&gt;getSupportedSyntax(<var class="keywords">true</var>, <var class="strings">'insert'</var>);
     <var class="vars">$result</var> = <var class="keywords">array</var>();
     <var class="vars">$clause</var> = <var class="keywords">null</var>;
     <var class="vars">$level</var>  = 0;
     <var class="vars">$select</var> = <var class="keywords">null</var>;
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
       <var class="vars">$skip</var> = <var class="keywords">false</var>;
       <var class="vars">$token</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$i</var>);
       <var class="vars">$next</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$j</var>);
       <var class="vars">$ltoken</var> = <var class="funcs">strtolower</var>(<var class="vars">$token</var>);
       <var class="keywords">switch</var> (<var class="vars">$ltoken</var>) {
         <var class="keywords">case</var> <var class="strings">'('</var>:
             <var class="vars">$level</var>++;
             <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var> &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$next</var>, <var class="strings">'select'</var>)) {
               <var class="vars">$level</var>--;
               <var class="vars">$select</var> = <var class="vars">$level</var> - 1;
               <var class="vars">$skip</var> = <var class="keywords">true</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">')'</var>:
             <var class="vars">$level</var>--;
             <var class="keywords">if</var> (<var class="vars">$select</var> !== <var class="keywords">null</var> &amp;&amp; <var class="vars">$select</var> === <var class="vars">$level</var>) {
               <var class="vars">$level</var>++;
               <var class="vars">$select</var> = <var class="keywords">null</var>;
               <var class="vars">$skip</var> = <var class="keywords">true</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'insert'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$next</var>, <var class="strings">'or'</var>)
              &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var> + 2])
              &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var> + 2], <var class="strings">'replace'</var>)) {
               <var class="vars">$this</var>-&gt;lastMethod = <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var> + 2]);
               <var class="vars">$i</var> += 2;
               <var class="vars">$skip</var> = <var class="keywords">true</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="keywords">break</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$skip</var>) {
         <var class="keywords">continue</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$methods</var>)
        &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$ltoken</var>, <var class="vars">$methods</var>)) {
         <var class="vars">$clause</var> = <var class="vars">$ltoken</var>;
         <var class="keywords">foreach</var> (<var class="vars">$methods</var> <var class="keywords">as</var> <var class="vars">$method</var> =&gt; <var class="vars">$k</var>) {
           <var class="keywords">if</var> (<var class="vars">$method</var> === <var class="vars">$clause</var>) {
             <var class="keywords">unset</var>(<var class="vars">$methods</var>[<var class="vars">$method</var>]);
             <var class="keywords">break</var>;
           }
           <var class="keywords">unset</var>(<var class="vars">$methods</var>[<var class="vars">$method</var>]);
         }
         <var class="keywords">if</var> ((<var class="vars">$clause</var> === <var class="strings">'values'</var> || <var class="vars">$clause</var> === <var class="strings">'select'</var>)
          &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$result</var>[<var class="strings">'cols'</var>]) &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$result</var>[<var class="strings">'into'</var>])) {
           <var class="vars">$into</var> = &amp; <var class="vars">$result</var>[<var class="strings">'into'</var>];
           <var class="vars">$pre</var> = <var class="funcs">array_search</var>(<var class="strings">'('</var>, <var class="vars">$into</var>);
           <var class="vars">$suf</var> = <var class="funcs">array_search</var>(<var class="strings">')'</var>, <var class="vars">$into</var>);
           <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$pre</var>) &amp;&amp; <var class="funcs">is_int</var>(<var class="vars">$suf</var>) &amp;&amp; <var class="vars">$pre</var> &lt; <var class="vars">$suf</var>) {
             <var class="vars">$result</var>[<var class="strings">'cols'</var>] = <var class="funcs">array_splice</var>(<var class="vars">$into</var>, <var class="vars">$pre</var>, <var class="vars">$pre</var> + <var class="vars">$suf</var>);
           }
         }
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$clause</var> != <var class="keywords">null</var>) {
         <var class="vars">$result</var>[<var class="vars">$clause</var>][] = <var class="vars">$token</var>;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$level</var> !== 0) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Syntax error, expect () parenthesis'</var>);
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$cols_name</var> = <var class="strings">'cols'</var>;
       <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$into</var>)
        &amp;&amp; !<var class="funcs">array_key_exists</var>(<var class="vars">$cols_name</var>, <var class="vars">$result</var>)) {
         <var class="vars">$cols</var> = <var class="vars">$this</var>-&gt;getMeta(<var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$into</var>));
         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$cols</var>)) {
           <var class="vars">$result</var>[<var class="vars">$cols_name</var>] = <var class="keywords">array</var>();
           <var class="vars">$columns</var> = &amp; <var class="vars">$result</var>[<var class="vars">$cols_name</var>];
           <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$cols</var>) <var class="keywords">as</var> <var class="vars">$col</var>) {
             <var class="vars">$columns</var>[] = <var class="vars">$col</var>;
             <var class="vars">$columns</var>[] = <var class="strings">','</var>;
           }
           <var class="funcs">array_pop</var>(<var class="vars">$columns</var>);
         }
       }
     }
     <var class="keywords">unset</var>(<var class="vars">$into</var>, <var class="vars">$columns</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0478"><h2>
<a name="p_function_parsemultiquery_478">
<var class="function">parseMultiQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the multielement queies</dd>
<dt>return</dt>
<dd><em>array</em>   results of to disjointed query</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the multielement queries to the individual query
</pre>
</div></div><pre id="source-0478"> <var class="keywords">function</var> parseMultiQuery(<var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$query</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$query</var>)) {
     <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>);
     <var class="vars">$query</var> = <var class="funcs">array_values</var>(<var class="vars">$query</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$query</var>);
     <var class="vars">$stack</var>  = <var class="keywords">array</var>();
     <var class="vars">$prev_token</var> = <var class="keywords">null</var>;
     <var class="vars">$prev_index</var> = 0;
     <var class="keywords">while</var> (--<var class="vars">$length</var> &gt;= 0) {
       <var class="vars">$token</var> = <var class="funcs">array_shift</var>(<var class="vars">$query</var>);
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$token</var>)) {
         <var class="vars">$token</var> = <var class="vars">$this</var>-&gt;toStringToken(<var class="vars">$token</var>);
         <var class="keywords">if</var> (<var class="vars">$prev_index</var> === 0) {
           <var class="vars">$prev_token</var> = <var class="vars">$token</var>;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$prev_index</var> - 1 === <var class="vars">$length</var>) {
           <var class="vars">$token</var> = <var class="vars">$this</var>-&gt;concatStringTokens(<var class="vars">$prev_token</var>, <var class="vars">$token</var>);
           <var class="funcs">array_pop</var>(<var class="vars">$stack</var>);
         }
         <var class="vars">$prev_token</var> = <var class="vars">$token</var>;
         <var class="vars">$prev_index</var> = <var class="vars">$length</var>;
       }
       <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
       <var class="keywords">if</var> (<var class="vars">$token</var> === <var class="strings">';'</var>
        &amp;&amp; (!<var class="vars">$length</var> || <var class="vars">$this</var>-&gt;isWord(<var class="funcs">reset</var>(<var class="vars">$query</var>)))) {
         <var class="vars">$result</var>[] = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$stack</var>);
         <var class="vars">$stack</var> = <var class="keywords">array</var>();
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0479"><h2>
<a name="p_function_assignnames_479">
<var class="function">assignNames</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    parsed tokens</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether it exists is checked</dd>
<dt>return</dt>
<dd><em>mixed</em>    results of parsed tokens</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the tokens for naming the table, or database
</pre>
</div></div><pre id="source-0479"> <var class="keywords">function</var> assignNames(<var class="vars">$tokens</var>, <var class="vars">$check_exists</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;_ifExistsClause = <var class="keywords">null</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens(%s)'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$name</var> = <var class="strings">''</var>;
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
       <var class="vars">$k</var> = <var class="vars">$j</var> + 1;
       <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var>])) {
         <var class="keywords">case</var> <var class="strings">'`'</var>:
         <var class="comments">//case ';':</var>
         <var class="comments">//case ':':</var>
         <var class="comments">//case '(':</var>
         <var class="comments">//case ')':</var>
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'if'</var>:
             <var class="keywords">if</var> (<var class="vars">$check_exists</var>) {
               <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>])) {
                 <var class="keywords">if</var> (<var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>]) === <var class="strings">'exists'</var>) {
                   <var class="vars">$this</var>-&gt;_ifExistsClause = <var class="strings">'if_exists'</var>;
                   <var class="vars">$i</var> = <var class="vars">$j</var>;
                 } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>])
                         &amp;&amp; <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>]) === <var class="strings">'not'</var>
                         &amp;&amp; <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>]) === <var class="strings">'exists'</var>) {
                   <var class="vars">$this</var>-&gt;_ifExistsClause = <var class="strings">'if_not_exists'</var>;
                   <var class="vars">$i</var> = <var class="vars">$k</var>;
                 }
               }
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="vars">$name</var> .= <var class="vars">$tokens</var>[<var class="vars">$i</var>];
             <var class="keywords">break</var>;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$name</var>)) {
       <var class="vars">$name</var> = <var class="funcs">substr</var>(<var class="vars">$name</var>, 1, -1);
     }
     <var class="vars">$result</var> = <var class="vars">$name</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0480"><h2>
<a name="p_function_parsecreatedatabasequery_480">
<var class="function">parseCreateDatabaseQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of parsed tokens</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the tokens for CREATE DATABASE
</pre>
</div></div><pre id="source-0480"> <var class="keywords">function</var> parseCreateDatabaseQuery(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;assignNames(<var class="vars">$tokens</var>, <var class="keywords">true</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0481"><h2>
<a name="p_function_parsedropquery_481">
<var class="function">parseDropQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of parsed tokens</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the tokens for DROP TABLE/DATABASE
</pre>
</div></div><pre id="source-0481"> <var class="keywords">function</var> parseDropQuery(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;assignNames(<var class="vars">$tokens</var>, <var class="keywords">true</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0482"><h2>
<a name="p_function_parsecreatetablequery_482">
<var class="function">parseCreateTableQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    parsed tokens</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether return the result as simple array</dd>
<dt>return</dt>
<dd><em>mixed</em>    results of parsed tokens</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the tokens for CREATE TABLE
</pre>
</div></div><pre id="source-0482"> <var class="keywords">function</var> parseCreateTableQuery(<var class="vars">$tokens</var>, <var class="vars">$simple</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>) || <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;lastQuery)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens on CREATE TABLE'</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$sql</var> = <var class="vars">$this</var>-&gt;lastQuery;
     <var class="vars">$open</var>  = <var class="strings">'('</var>;
     <var class="vars">$close</var> = <var class="strings">')'</var>;
     <var class="vars">$bpos</var> = <var class="funcs">strpos</var>(<var class="vars">$sql</var>, <var class="vars">$open</var>);
     <var class="vars">$epos</var> = <var class="funcs">strrpos</var>(<var class="vars">$sql</var>, <var class="vars">$close</var>);
     <var class="keywords">if</var> (<var class="vars">$bpos</var> === <var class="keywords">false</var> || <var class="vars">$epos</var> === <var class="keywords">false</var> || <var class="vars">$bpos</var> &gt; <var class="vars">$epos</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal query on CREATE(%s)'</var>, <var class="vars">$sql</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;removeBacktickToken(<var class="vars">$tokens</var>);
       <var class="vars">$table</var> = <var class="keywords">array</var>();
       <var class="keywords">while</var> (!<var class="keywords">empty</var>(<var class="vars">$tokens</var>) &amp;&amp; <var class="funcs">reset</var>(<var class="vars">$tokens</var>) !== <var class="vars">$open</var>) {
         <var class="vars">$table</var>[] = <var class="funcs">array_shift</var>(<var class="vars">$tokens</var>);
       }
       <var class="funcs">array_shift</var>(<var class="vars">$tokens</var>);
       <var class="vars">$table</var> = <var class="vars">$this</var>-&gt;assignNames(<var class="vars">$table</var>, <var class="keywords">true</var>);
       <var class="keywords">while</var> (!<var class="keywords">empty</var>(<var class="vars">$tokens</var>) &amp;&amp; <var class="funcs">end</var>(<var class="vars">$tokens</var>) !== <var class="vars">$close</var>) {
         <var class="funcs">array_pop</var>(<var class="vars">$tokens</var>);
       }
       <var class="funcs">array_pop</var>(<var class="vars">$tokens</var>);
       <var class="vars">$fields</var> = <var class="vars">$this</var>-&gt;parseColumnDefinition(<var class="vars">$tokens</var>);
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$fields</var>) || <var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$primary</var> = <var class="keywords">null</var>;
         <var class="vars">$this</var>-&gt;_onCreate = <var class="keywords">true</var>;
         <var class="vars">$this</var>-&gt;_execExpr = <var class="keywords">true</var>;
         <var class="vars">$simple_fields</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$fields</var> <var class="keywords">as</var> <var class="vars">$name</var> =&gt; <var class="vars">$field</var>) {
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$field</var>) || !<var class="funcs">is_array</var>(<var class="vars">$field</var>)
            || <var class="vars">$name</var> == <var class="keywords">null</var> || !<var class="funcs">is_string</var>(<var class="vars">$name</var>)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse CREATE_DEFINITION'</var>);
             <var class="keywords">break</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">foreach</var> (<var class="vars">$field</var> <var class="keywords">as</var> <var class="vars">$desc</var> =&gt; <var class="vars">$value</var>) {
               <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$desc</var>)) {
                 <var class="keywords">case</var> <var class="strings">'key'</var>:
                     <var class="keywords">if</var> (<var class="vars">$primary</var> === <var class="keywords">null</var>
                      &amp;&amp; <var class="funcs">strcasecmp</var>(<var class="vars">$value</var>, <var class="strings">'primary'</var>) === 0) {
                       <var class="vars">$primary</var> = <var class="vars">$name</var>;
                     }
                     <var class="keywords">break</var>;
                 <var class="keywords">case</var> <var class="strings">'default'</var>:
                     <var class="vars">$value</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$value</var>);
                     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
                       <var class="vars">$value</var> = <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$value</var>);
                       <var class="vars">$fields</var>[<var class="vars">$name</var>][<var class="vars">$desc</var>] = <var class="vars">$value</var>;
                       <var class="vars">$simple_fields</var>[<var class="vars">$name</var>] = <var class="vars">$value</var>;
                     }
                     <var class="keywords">break</var>;
                 <var class="keywords">case</var> <var class="strings">'type'</var>:
                 <var class="keywords">case</var> <var class="strings">'null'</var>:
                 <var class="keywords">default</var>:
                     <var class="keywords">break</var>;
               }
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                 <var class="vars">$result</var> = <var class="keywords">false</var>;
                 <var class="keywords">break</var>;
               }
             }
           }
         }
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
           <var class="vars">$result</var> = <var class="keywords">array</var>(
             <var class="strings">'table'</var>   =&gt; <var class="vars">$table</var>,
             <var class="strings">'fields'</var>  =&gt; <var class="vars">$fields</var>,
             <var class="strings">'primary'</var> =&gt; <var class="vars">$primary</var>
           );
           <var class="keywords">if</var> (<var class="vars">$simple</var>) {
             <var class="vars">$result</var>[<var class="strings">'fields'</var>] = <var class="vars">$simple_fields</var>;
           }
         }
         <var class="vars">$this</var>-&gt;_execExpr = <var class="keywords">null</var>;
         <var class="vars">$this</var>-&gt;_onCreate = <var class="keywords">null</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0483"><h2>
<a name="p_function_parsecreatetablequerysimple_483">
<var class="function">parseCreateTableQuerySimple</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   parsed tokens, or CREATE TABLE SQL as string</dd>
<dt>return</dt>
<dd><em>mixed</em>   create_definition as associate array</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the tokens that part of column_definition as simple
</pre>
</div></div><pre id="source-0483"> <var class="keywords">function</var> parseCreateTableQuerySimple(<var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$query</var>)) {
     <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$query</var>);
   }
   <var class="vars">$open</var>  = <var class="strings">'('</var>;
   <var class="vars">$close</var> = <var class="strings">')'</var>;
   <var class="vars">$bpos</var> = <var class="funcs">strpos</var>(<var class="vars">$query</var>, <var class="vars">$open</var>);
   <var class="vars">$epos</var> = <var class="funcs">strrpos</var>(<var class="vars">$query</var>, <var class="vars">$close</var>);
   <var class="keywords">if</var> (<var class="vars">$bpos</var> === <var class="keywords">false</var> || <var class="vars">$epos</var> === <var class="keywords">false</var> || <var class="vars">$bpos</var> &gt; <var class="vars">$epos</var>) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Connot parse tokens (CREATE_DEFINITION)'</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>);
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;removeBacktickToken(<var class="vars">$tokens</var>);
     <var class="keywords">while</var> (!<var class="keywords">empty</var>(<var class="vars">$tokens</var>) &amp;&amp; <var class="funcs">reset</var>(<var class="vars">$tokens</var>) !== <var class="vars">$open</var>) {
       <var class="funcs">array_shift</var>(<var class="vars">$tokens</var>);
     }
     <var class="funcs">array_shift</var>(<var class="vars">$tokens</var>);
     <var class="keywords">while</var> (!<var class="keywords">empty</var>(<var class="vars">$tokens</var>) &amp;&amp; <var class="funcs">end</var>(<var class="vars">$tokens</var>) !== <var class="vars">$close</var>) {
       <var class="funcs">array_pop</var>(<var class="vars">$tokens</var>);
     }
     <var class="funcs">array_pop</var>(<var class="vars">$tokens</var>);
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;parseColumnDefinition(<var class="vars">$tokens</var>);
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$result</var>) || <var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0484"><h2>
<a name="p_function_parsecolumndefinition_484">
<var class="function">parseColumnDefinition</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   target definition</dd>
<dt>return</dt>
<dd><em>array</em>   results of parsed tokens, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the tokens that part of column_definition
 The result will be classified as follows.
 - type
           Data type of column  i.e. INTEGER, TEXT or VARCHAR(255) etc.
 - null
           Boolean flag that indicates whether this field is constrained
            to be set to NULL.
 - key
           Field of key types, others are NULL  e.g. &quot;primary&quot;
 - default
           Text value to be used as default for this field.
</pre>
</div></div><pre id="source-0484"> <var class="keywords">function</var> parseColumnDefinition(<var class="vars">$definition</var>){
   <var class="keywords">static</var> <var class="vars">$reserve_types</var> = <var class="keywords">array</var>(
     <var class="strings">'default'</var>,
     <var class="strings">'primary'</var>,
     <var class="strings">'key'</var>,
     <var class="strings">'check'</var>,
     <var class="strings">'unique'</var>,
     <var class="strings">'not'</var>,
     <var class="strings">'null'</var>,
     <var class="strings">'auto_increment'</var>,
     <var class="strings">'collate'</var>,
     <var class="strings">'foreign'</var>
   );
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$definition</var>)) {
     <var class="vars">$definition</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$definition</var>);
   }
   <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;removeBacktickToken(<var class="vars">$definition</var>);
   <var class="keywords">unset</var>(<var class="vars">$definition</var>);
   <var class="vars">$open</var>     = <var class="strings">'('</var>;
   <var class="vars">$close</var>    = <var class="strings">')'</var>;
   <var class="vars">$comma</var>    = <var class="strings">','</var>;
   <var class="vars">$level</var>    = 0;
   <var class="vars">$names</var>    = <var class="keywords">array</var>();
   <var class="vars">$types</var>    = <var class="keywords">array</var>();
   <var class="vars">$defaults</var> = <var class="keywords">array</var>();
   <var class="vars">$nulls</var>    = <var class="keywords">array</var>();
   <var class="vars">$primary</var>  = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="funcs">end</var>(<var class="vars">$tokens</var>) !== <var class="vars">$comma</var>) {
     <var class="funcs">array_push</var>(<var class="vars">$tokens</var>, <var class="vars">$comma</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">reset</var>(<var class="vars">$tokens</var>) !== <var class="vars">$comma</var>) {
     <var class="funcs">array_unshift</var>(<var class="vars">$tokens</var>, <var class="vars">$comma</var>);
   }
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
   <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
     <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
     <var class="vars">$k</var> = <var class="vars">$j</var> + 1;
     <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var>])) {
       <var class="keywords">case</var> <var class="strings">'('</var>:
           <var class="vars">$level</var>++;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">')'</var>:
           <var class="vars">$level</var>--;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">','</var>:
           <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>])
              &amp;&amp; <var class="funcs">in_array</var>(<var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>]), <var class="vars">$reserve_types</var>)) {
               <var class="keywords">break</var>;
             }
             <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$names</var>)) {
               <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$names</var>) &gt; <var class="funcs">count</var>(<var class="vars">$defaults</var>)) {
                 <var class="vars">$defaults</var>[] = <var class="strings">'null'</var>;
               }
               <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$names</var>) &gt; <var class="funcs">count</var>(<var class="vars">$nulls</var>)) {
                 <var class="vars">$nulls</var>[] = <var class="keywords">true</var>;
               }
             }
             <var class="keywords">while</var> (++<var class="vars">$i</var> &lt; <var class="vars">$length</var>) {
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$tokens</var>[<var class="vars">$i</var>])) {
                 <var class="vars">$names</var>[] = <var class="vars">$tokens</var>[<var class="vars">$i</var>];
                 <var class="vars">$n</var> = <var class="vars">$i</var> + 1;
                 <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$n</var>])) {
                   <var class="vars">$type</var> = <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$n</var>]);
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$type</var>)
                    &amp;&amp; !<var class="funcs">in_array</var>(<var class="vars">$type</var>, <var class="vars">$reserve_types</var>)) {
                     <var class="vars">$type_length</var> = <var class="strings">''</var>;
                     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[++<var class="vars">$n</var>]) &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$n</var>] === <var class="vars">$open</var>) {
                       <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[++<var class="vars">$n</var>])) {
                         <var class="keywords">if</var> (<var class="vars">$tokens</var>[<var class="vars">$n</var>] === <var class="vars">$close</var>) {
                           <var class="keywords">break</var>;
                         }
                         <var class="vars">$type_length</var> .= <var class="vars">$tokens</var>[<var class="vars">$n</var>];
                       }
                       <var class="keywords">if</var> (<var class="vars">$type_length</var> != <var class="keywords">null</var>) {
                         <var class="vars">$type</var> .= <var class="funcs">sprintf</var>(<var class="strings">'(%s)'</var>, <var class="vars">$type_length</var>);
                       }
                       <var class="vars">$i</var> = <var class="vars">$n</var>;
                     }
                     <var class="vars">$types</var>[] = <var class="vars">$type</var>;
                   }
                 }
                 <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$names</var>) &gt; <var class="funcs">count</var>(<var class="vars">$types</var>)) {
                   <var class="vars">$types</var>[] = <var class="vars">$this</var>-&gt;defaultDataType;
                 }
                 <var class="keywords">break</var>;
               }
             }
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'default'</var>:
           <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>])) {
               <var class="keywords">if</var> (<var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>]) !== <var class="strings">'character'</var>) {
                 <var class="vars">$defaults</var>[] = <var class="vars">$tokens</var>[<var class="vars">$j</var>];
               }
               <var class="vars">$i</var> = <var class="vars">$j</var>;
             }
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'null'</var>:
           <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
             <var class="vars">$n</var> = <var class="vars">$i</var> - 1;
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$n</var>])
              &amp;&amp; <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$n</var>]) === <var class="strings">'not'</var>) {
               <var class="vars">$nulls</var>[] = <var class="keywords">false</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$nulls</var>[] = <var class="keywords">true</var>;
             }
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'primary'</var>:
           <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>])
            &amp;&amp; <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>]) === <var class="strings">'key'</var>) {
             <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$names</var>)) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse tokens, expect PRIMARY'</var>);
               <var class="keywords">break</var> 2;
             }
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>])
              &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$names</var>) &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$k</var>] === <var class="vars">$open</var>) {
               <var class="vars">$n</var> = <var class="vars">$k</var>;
               <var class="vars">$primary_tokens</var> = <var class="keywords">array</var>();
               <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[++<var class="vars">$n</var>])) {
                 <var class="keywords">switch</var> (<var class="vars">$tokens</var>[<var class="vars">$n</var>]) {
                   <var class="keywords">case</var> <var class="strings">'('</var>:
                   <var class="keywords">case</var> <var class="strings">')'</var>:
                       <var class="keywords">break</var> 2;
                   <var class="keywords">case</var> <var class="strings">','</var>:
                       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported'</var>
                                     .  <var class="strings">' the multiple PRIMARY keys'</var>);
                       <var class="keywords">break</var> 4;
                   <var class="keywords">default</var>:
                       <var class="vars">$primary_tokens</var>[] = <var class="vars">$tokens</var>[<var class="vars">$n</var>];
                       <var class="keywords">break</var>;
                 }
               }
               <var class="vars">$primary_token</var> = <var class="funcs">array_shift</var>(<var class="vars">$primary_tokens</var>);
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$primary_token</var>)) {
                 <var class="vars">$primary_token</var> = <var class="funcs">substr</var>(<var class="vars">$primary_token</var>, 1, -1);
               }
               <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$primary_tokens</var>) || <var class="vars">$primary_token</var> == <var class="keywords">null</var>
                || !<var class="funcs">in_array</var>(<var class="vars">$primary_token</var>, <var class="vars">$names</var>)) {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse tokens, expect PRIMARY'</var>);
                 <var class="keywords">break</var> 2;
               }
               <var class="vars">$primary</var> = <var class="vars">$primary_token</var>;
               <var class="vars">$i</var> = <var class="vars">$n</var>;
             } <var class="keywords">else</var> {
               <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$names</var>)
                &amp;&amp; <var class="funcs">count</var>(<var class="vars">$names</var>) === 1 &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$names</var>[0])) {
                 <var class="vars">$primary</var> = <var class="vars">$names</var>[0];
                 <var class="vars">$i</var> = <var class="vars">$j</var>;
               }
             }
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'character'</var>:
           <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>], <var class="vars">$tokens</var>[<var class="vars">$k</var>])
              &amp;&amp; <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>]) === <var class="strings">'set'</var>
              &amp;&amp; (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$tokens</var>[<var class="vars">$k</var>])
              ||  <var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$tokens</var>[<var class="vars">$k</var>]))) {
               <var class="vars">$i</var> = <var class="vars">$k</var>;
             }
           }
           <var class="keywords">break</var>;
       <var class="comments">// ignore for futures</var>
       <var class="keywords">case</var> <var class="strings">'check'</var>:
       <var class="keywords">case</var> <var class="strings">'unique'</var>:
       <var class="keywords">case</var> <var class="strings">'auto_increment'</var>:
       <var class="keywords">case</var> <var class="strings">'collate'</var>:
       <var class="keywords">case</var> <var class="strings">'foreign'</var>:
       <var class="keywords">default</var>:
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="vars">$level</var> !== 0) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse tokens, expect %s bracket'</var>, <var class="vars">$close</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$names</var>    = <var class="funcs">array_values</var>(<var class="vars">$names</var>);
       <var class="vars">$types</var>    = <var class="funcs">array_values</var>(<var class="vars">$types</var>);
       <var class="vars">$defaults</var> = <var class="funcs">array_values</var>(<var class="vars">$defaults</var>);
       <var class="vars">$nulls</var>    = <var class="funcs">array_values</var>(<var class="vars">$nulls</var>);
       <var class="vars">$length</var>   = <var class="funcs">count</var>(<var class="vars">$names</var>);
       <var class="keywords">if</var> (<var class="vars">$length</var> !== <var class="funcs">count</var>(<var class="vars">$types</var>)
        || <var class="vars">$length</var> !== <var class="funcs">count</var>(<var class="vars">$defaults</var>)
        || <var class="vars">$length</var> !== <var class="funcs">count</var>(<var class="vars">$nulls</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse tokens, expect CREATE_DEFINITION'</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$fields</var> = <var class="keywords">array</var>();
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
           <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$names</var>)
            || !<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$types</var>)
            || !<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$defaults</var>)
            || !<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$nulls</var>)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Unable to parse tokens (CREATE_DEFINITION)'</var>);
             <var class="keywords">break</var>;
           }
           <var class="vars">$key</var> = <var class="keywords">null</var>;
           <var class="keywords">if</var> (<var class="vars">$primary</var> === <var class="vars">$names</var>[<var class="vars">$i</var>]) {
             <var class="vars">$key</var> = <var class="strings">'primary'</var>;
           }
           <var class="vars">$fields</var>[<var class="vars">$names</var>[<var class="vars">$i</var>]] = <var class="keywords">array</var>(
             <var class="strings">'type'</var>    =&gt; <var class="vars">$types</var>[<var class="vars">$i</var>],
             <var class="strings">'null'</var>    =&gt; <var class="vars">$nulls</var>[<var class="vars">$i</var>],
             <var class="strings">'key'</var>     =&gt; <var class="vars">$key</var>,
             <var class="strings">'default'</var> =&gt; <var class="vars">$defaults</var>[<var class="vars">$i</var>]
           );
         }
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
           <var class="vars">$result</var> = <var class="vars">$fields</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0485"><h2>
<a name="p_function_parseinsertvalues_485">
<var class="function">parseInsertValues</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of parsed tokens</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the tokens for &quot;INSERT (...) VALUES (...)&quot;
</pre>
</div></div><pre id="source-0485"> <var class="keywords">function</var> parseInsertValues(<var class="vars">$values</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$values</var>)
    || !<var class="keywords">isset</var>(<var class="vars">$values</var>[<var class="strings">'cols'</var>]) || !<var class="keywords">isset</var>(<var class="vars">$values</var>[<var class="strings">'values'</var>])) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens on INSERT'</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
     <var class="vars">$cols</var> = <var class="vars">$values</var>[<var class="strings">'cols'</var>];
     <var class="vars">$vals</var> = <var class="vars">$values</var>[<var class="strings">'values'</var>];
     <var class="keywords">while</var> (<var class="funcs">end</var>(<var class="vars">$cols</var>) === <var class="strings">';'</var>) {
       <var class="funcs">array_pop</var>(<var class="vars">$cols</var>);
     }
     <var class="keywords">if</var> ( <var class="funcs">end</var>(<var class="vars">$cols</var>)   === <var class="strings">')'</var>
      &amp;&amp;  <var class="funcs">reset</var>(<var class="vars">$cols</var>) === <var class="strings">'('</var>) {
       <var class="funcs">array_pop</var>(<var class="vars">$cols</var>);
       <var class="funcs">array_shift</var>(<var class="vars">$cols</var>);
     }
     <var class="keywords">while</var> (<var class="funcs">end</var>(<var class="vars">$vals</var>) === <var class="strings">';'</var>) {
       <var class="funcs">array_pop</var>(<var class="vars">$vals</var>);
     }
     <var class="keywords">if</var> ( <var class="funcs">end</var>(<var class="vars">$vals</var>)   === <var class="strings">')'</var>
      &amp;&amp;  <var class="funcs">reset</var>(<var class="vars">$vals</var>) === <var class="strings">'('</var>) {
       <var class="funcs">array_pop</var>(<var class="vars">$vals</var>);
       <var class="funcs">array_shift</var>(<var class="vars">$vals</var>);
     }
     <var class="keywords">if</var> (<var class="vars">$cols</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$vals</var> != <var class="keywords">null</var>) {
       <var class="vars">$tmp</var> = <var class="keywords">array</var>();
       <var class="vars">$level</var> = 0;
       <var class="vars">$stack</var> = <var class="strings">''</var>;
       <var class="keywords">foreach</var> (<var class="vars">$vals</var> <var class="keywords">as</var> <var class="vars">$val</var>) {
         <var class="keywords">switch</var> (<var class="vars">$val</var>) {
           <var class="keywords">case</var> <var class="strings">'`'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$level</var>++;
               <var class="vars">$stack</var> .= <var class="vars">$val</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="vars">$level</var>--;
               <var class="vars">$stack</var> .= <var class="vars">$val</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">','</var>:
               <var class="keywords">if</var> (<var class="vars">$level</var>) {
                 <var class="vars">$stack</var> .= <var class="vars">$val</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$tmp</var>[] = <var class="vars">$stack</var>;
                 <var class="vars">$stack</var> = <var class="strings">''</var>;
               }
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="vars">$stack</var> .= <var class="vars">$val</var>;
               <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="vars">$stack</var> != <var class="keywords">null</var>) {
         <var class="vars">$tmp</var>[] = <var class="vars">$stack</var>;
       }
       <var class="vars">$vals</var> = <var class="vars">$tmp</var>;
       <var class="vars">$tmp</var> = <var class="keywords">array</var>();
       <var class="vars">$stack</var> = <var class="strings">''</var>;
       <var class="keywords">foreach</var> (<var class="vars">$cols</var> <var class="keywords">as</var> <var class="vars">$col</var>) {
         <var class="keywords">switch</var> (<var class="vars">$col</var>) {
           <var class="keywords">case</var> <var class="strings">'`'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">','</var>:
               <var class="vars">$tmp</var>[] = <var class="vars">$stack</var>;
               <var class="vars">$stack</var> = <var class="strings">''</var>;
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="vars">$stack</var> .= <var class="vars">$col</var>;
               <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="vars">$stack</var> != <var class="keywords">null</var>) {
         <var class="vars">$tmp</var>[] = <var class="vars">$stack</var>;
       }
       <var class="vars">$cols</var> = <var class="vars">$tmp</var>;
       <var class="vars">$vlen</var> = <var class="funcs">count</var>(<var class="vars">$vals</var>);
       <var class="keywords">if</var> (<var class="vars">$vlen</var> &lt; <var class="funcs">count</var>(<var class="vars">$cols</var>)) {
         <var class="keywords">while</var> (<var class="vars">$vlen</var> &lt; <var class="funcs">count</var>(<var class="vars">$cols</var>)) {
           <var class="funcs">array_pop</var>(<var class="vars">$cols</var>);
         }
       }
       <var class="keywords">if</var> (<var class="vars">$cols</var> == <var class="keywords">null</var> || <var class="vars">$vals</var> == <var class="keywords">null</var>
        || <var class="funcs">count</var>(<var class="vars">$cols</var>) !== <var class="funcs">count</var>(<var class="vars">$vals</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal format of columns, or values'</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$cols</var> = <var class="funcs">array_values</var>(<var class="vars">$cols</var>);
         <var class="vars">$vals</var> = <var class="funcs">array_values</var>(<var class="vars">$vals</var>);
         <var class="vars">$vlen</var> = <var class="funcs">count</var>(<var class="vars">$vals</var>);
         <var class="vars">$rows</var> = <var class="keywords">array</var>();
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$vlen</var>; <var class="vars">$i</var>++) {
           <var class="vars">$rows</var>[<var class="vars">$cols</var>[<var class="vars">$i</var>]] = <var class="vars">$vals</var>[<var class="vars">$i</var>];
         }
         <var class="vars">$result</var> = <var class="vars">$rows</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0486"><h2>
<a name="p_function_parseupdateset_486">
<var class="function">parseUpdateSet</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of parsed tokens</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the tokens for UPDATE
</pre>
</div></div><pre id="source-0486"> <var class="keywords">function</var> parseUpdateSet(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens in UPDATE SET(%s)'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$row</var>   = <var class="keywords">array</var>();
     <var class="vars">$stack</var> = <var class="keywords">array</var>();
     <var class="vars">$level</var> = 0;
     <var class="vars">$col</var>   = <var class="strings">''</var>;
     <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$token</var>) {
       <var class="keywords">switch</var> (<var class="vars">$token</var>) {
         <var class="keywords">case</var> <var class="strings">'`'</var>:
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'='</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="vars">$col</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$stack</var>);
               <var class="vars">$row</var>[<var class="vars">$col</var>] = <var class="strings">''</var>;
               <var class="vars">$stack</var> = <var class="keywords">array</var>();
             } <var class="keywords">else</var> {
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'('</var>:
             <var class="vars">$level</var>++;
             <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">')'</var>:
             <var class="vars">$level</var>--;
             <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">','</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="vars">$row</var>[<var class="vars">$col</var>] = <var class="vars">$stack</var>;
               <var class="vars">$stack</var> = <var class="keywords">array</var>();
             } <var class="keywords">else</var> {
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             <var class="keywords">break</var>;
       }
     }
     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$row</var>[<var class="vars">$col</var>])) {
       <var class="vars">$row</var>[<var class="vars">$col</var>] .= <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$stack</var>);
     }
     <var class="vars">$result</var> = <var class="vars">$row</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0487"><h2>
<a name="p_function_parseselectarguments_487">
<var class="function">parseSelectArguments</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    target arguments</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether return the result as associate array</dd>
<dt>return</dt>
<dd><em>mixed</em>    parsed arguments, or empty array on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the arguments for SELECT method
</pre>
</div></div><pre id="source-0487"> <var class="keywords">function</var> parseSelectArguments(<var class="vars">$args</var>, <var class="vars">$as_assoc</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$indexes</var> = <var class="keywords">array</var>(
     <var class="strings">'from'</var>   =&gt; 0,
     <var class="strings">'select'</var> =&gt; 1, <var class="strings">'where'</var>  =&gt; 2,
     <var class="strings">'group'</var>  =&gt; 3, <var class="strings">'having'</var> =&gt; 4,
     <var class="strings">'order'</var>  =&gt; 5, <var class="strings">'limit'</var>  =&gt; 6
   );
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
     <var class="vars">$args</var> = (<var class="keywords">string</var>)<var class="vars">$args</var>;
     <var class="vars">$result</var> = <var class="keywords">array</var>(<var class="vars">$args</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$args</var>)) {
       <var class="vars">$result</var> = <var class="vars">$args</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$marks</var> = <var class="keywords">array</var>(<var class="strings">'_'</var>, <var class="strings">' '</var>);
       <var class="keywords">foreach</var> (<var class="vars">$args</var> <var class="keywords">as</var> <var class="vars">$clause</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$clause</var>)) {
           <var class="vars">$result</var>[] = <var class="vars">$clause</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$clause</var> = <var class="funcs">strtolower</var>(<var class="vars">$clause</var>);
           <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="vars">$clause</var>, -1) === <var class="strings">'s'</var>) {
             <var class="vars">$clause</var> = <var class="funcs">rtrim</var>(<var class="vars">$clause</var>, <var class="strings">'s'</var>);
           }
           <var class="keywords">foreach</var> (<var class="vars">$marks</var> <var class="keywords">as</var> <var class="vars">$mark</var>) {
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$clause</var>, <var class="vars">$mark</var>) !== <var class="keywords">false</var>) {
               <var class="vars">$split</var> = <var class="funcs">explode</var>(<var class="vars">$mark</var>, <var class="vars">$clause</var>);
               <var class="vars">$clause</var> = <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$split</var>);
             }
           }
           <var class="keywords">switch</var> (<var class="vars">$clause</var>) {
             <var class="keywords">case</var> <var class="strings">'from'</var>:
             <var class="keywords">case</var> <var class="strings">'table'</var>:
                 <var class="vars">$result</var>[<var class="vars">$indexes</var>[<var class="strings">'from'</var>]] = <var class="vars">$val</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'select'</var>:
             <var class="keywords">case</var> <var class="strings">'col'</var>:
             <var class="keywords">case</var> <var class="strings">'column'</var>:
             <var class="keywords">case</var> <var class="strings">'field'</var>:
                 <var class="vars">$result</var>[<var class="vars">$indexes</var>[<var class="strings">'select'</var>]] = <var class="vars">$val</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'where'</var>:
             <var class="keywords">case</var> <var class="strings">'expr'</var>:
             <var class="keywords">case</var> <var class="strings">'expression'</var>:
             <var class="keywords">case</var> <var class="strings">'cond'</var>:
             <var class="keywords">case</var> <var class="strings">'condition'</var>:
                 <var class="vars">$result</var>[<var class="vars">$indexes</var>[<var class="strings">'where'</var>]] = <var class="vars">$val</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'group'</var>:
             <var class="keywords">case</var> <var class="strings">'groupby'</var>:
                 <var class="vars">$result</var>[<var class="vars">$indexes</var>[<var class="strings">'group'</var>]] = <var class="vars">$val</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'having'</var>:
                 <var class="vars">$result</var>[<var class="vars">$indexes</var>[<var class="strings">'having'</var>]] = <var class="vars">$val</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'order'</var>:
             <var class="keywords">case</var> <var class="strings">'orderby'</var>:
             <var class="keywords">case</var> <var class="strings">'sort'</var>:
             <var class="keywords">case</var> <var class="strings">'sortby'</var>:
                 <var class="vars">$result</var>[<var class="vars">$indexes</var>[<var class="strings">'order'</var>]] = <var class="vars">$val</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'limit'</var>:
                 <var class="vars">$limit</var> = <var class="vars">$val</var>;
                 <var class="vars">$index</var> = &amp; <var class="vars">$indexes</var>[<var class="strings">'limit'</var>];
                 <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$offset</var>)) {
                   <var class="vars">$result</var>[<var class="vars">$index</var>] = <var class="funcs">sprintf</var>(<var class="strings">'%.0f,%.0f'</var>, <var class="vars">$offset</var>, <var class="vars">$limit</var>);
                 } <var class="keywords">else</var> {
                   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$limit</var>)) {
                     <var class="vars">$limit</var> = <var class="funcs">sprintf</var>(<var class="strings">'%.0f'</var>, <var class="vars">$limit</var>);
                   }
                   <var class="vars">$result</var>[<var class="vars">$index</var>] = <var class="vars">$limit</var>;
                 }
                 <var class="keywords">unset</var>(<var class="vars">$index</var>);
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'offset'</var>:
                 <var class="vars">$offset</var> = <var class="vars">$val</var>;
                 <var class="vars">$index</var> = &amp; <var class="vars">$indexes</var>[<var class="strings">'limit'</var>];
                 <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$index</var>, <var class="vars">$result</var>)) {
                   <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$limit</var>)) {
                     <var class="vars">$limit</var> = <var class="vars">$result</var>[<var class="vars">$index</var>];
                   }
                   <var class="vars">$result</var>[<var class="vars">$index</var>] = <var class="funcs">sprintf</var>(<var class="strings">'%.0f,%.0f'</var>, <var class="vars">$offset</var>, <var class="vars">$limit</var>);
                 } <var class="keywords">else</var> {
                   <var class="vars">$result</var>[<var class="vars">$index</var>] = <var class="funcs">sprintf</var>(<var class="strings">'%.0f,ALL'</var>, <var class="vars">$offset</var>);
                 }
                 <var class="keywords">unset</var>(<var class="vars">$index</var>);
                 <var class="keywords">break</var>;
             <var class="keywords">default</var>:
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Undefined name(%s) on argument'</var>, <var class="vars">$clause</var>);
                 <var class="vars">$result</var> = <var class="keywords">array</var>();
                 <var class="keywords">break</var> 2;
           }
         }
       }
     }
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$result</var>)
    || <var class="funcs">count</var>(<var class="vars">$result</var>) &gt; <var class="funcs">count</var>(<var class="vars">$indexes</var>)) {
     <var class="vars">$error</var> = (<var class="keywords">string</var>)<var class="vars">$result</var>;
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>)) {
       <var class="vars">$error</var> .= <var class="funcs">sprintf</var>(<var class="strings">'#%d'</var>, <var class="funcs">count</var>(<var class="vars">$result</var>));
     }
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal arguments(%s) on SELECT'</var>, <var class="vars">$error</var>);
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> {
     <var class="keywords">foreach</var> (<var class="vars">$indexes</var> <var class="keywords">as</var> <var class="vars">$clause</var> =&gt; <var class="vars">$i</var>) {
       <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$result</var>)) {
         <var class="vars">$result</var>[<var class="vars">$i</var>] = <var class="vars">$this</var>-&gt;getSelectDefaultArguments(<var class="vars">$clause</var>);
       }
     }
     <var class="funcs">ksort</var>(<var class="vars">$result</var>);
     <var class="keywords">if</var> (<var class="vars">$as_assoc</var>) {
       <var class="vars">$assoc</var> = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$indexes</var> <var class="keywords">as</var> <var class="vars">$clause</var> =&gt; <var class="vars">$i</var>) {
         <var class="vars">$assoc</var>[<var class="vars">$clause</var>] = <var class="vars">$result</var>[<var class="vars">$i</var>];
       }
       <var class="vars">$result</var> = <var class="vars">$assoc</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0488"><h2>
<a name="p_function_parsesubquery_488">
<var class="function">parseSubQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the SQL query, or the parsed tokens</dd>
<dt>param</dt>
<dd><em>boolean</em> whether include parentheses</dd>
<dt>param</dt>
<dd><em>boolean</em> whether include alias length</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of parsed tokens</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the sub-query
</pre>
</div></div><pre id="source-0488"> <var class="keywords">function</var> parseSubQuery(<var class="vars">$tokens</var>, <var class="vars">$include_parentheses</var> = <var class="keywords">false</var>,
                                 <var class="vars">$include_alias_length</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$level</var>     = 0;
     <var class="vars">$sub_level</var> = <var class="keywords">null</var>;
     <var class="vars">$offset</var>    = <var class="keywords">null</var>;
     <var class="vars">$operator</var>  = <var class="keywords">null</var>;
     <var class="vars">$alias</var>     = <var class="keywords">null</var>;
     <var class="vars">$stack</var>     = <var class="keywords">array</var>();
     <var class="vars">$tokens</var>    = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
     <var class="vars">$count</var>     = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$count</var>; <var class="vars">$i</var>++) {
       <var class="vars">$token</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var>];
       <var class="vars">$next</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$i</var> + 1);
       <var class="vars">$prev</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$i</var> - 1);
       <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
         <var class="keywords">case</var> <var class="strings">'`'</var>:
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'('</var>:
             <var class="vars">$level</var>++;
             <var class="keywords">if</var> (<var class="vars">$sub_level</var> !== <var class="keywords">null</var>) {
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             }
             <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var> &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$next</var>, <var class="strings">'select'</var>)) {
               <var class="vars">$sub_level</var> = <var class="vars">$level</var> - 1;
               <var class="vars">$offset</var> = <var class="vars">$i</var> + 1;
               <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var>) {
                 <var class="vars">$operator</var> = <var class="funcs">strtolower</var>(<var class="vars">$prev</var>);
               }
               <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$stack</var>)) {
                 <var class="vars">$stack</var> = <var class="keywords">array</var>();
               }
               <var class="keywords">if</var> (<var class="vars">$include_parentheses</var>) {
                 <var class="vars">$offset</var>--;
                 <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
               }
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">')'</var>:
             <var class="vars">$level</var>--;
             <var class="keywords">if</var> (<var class="vars">$sub_level</var> === <var class="vars">$level</var>) {
               <var class="vars">$sub_level</var> = <var class="keywords">null</var>;
               <var class="keywords">if</var> (<var class="vars">$include_parentheses</var>) {
                 <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
               }
             }
             <var class="keywords">if</var> (<var class="vars">$sub_level</var> !== <var class="keywords">null</var>) {
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'as'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; <var class="vars">$next</var> != <var class="keywords">null</var>) {
               <var class="vars">$alias</var> = <var class="vars">$next</var>;
               <var class="vars">$i</var>++;
               <var class="keywords">break</var>;
             }
             <var class="comments">// FALLTHROUGH</var>
         <var class="keywords">default</var>:
             <var class="keywords">if</var> (<var class="vars">$sub_level</var> !== <var class="keywords">null</var>) {
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             }
             <var class="keywords">break</var>;
       }
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$stack</var>)) {
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$stack</var>);
       <var class="keywords">if</var> (<var class="vars">$include_alias_length</var> &amp;&amp; <var class="vars">$alias</var> != <var class="keywords">null</var>) {
         <var class="vars">$length</var>++;
       }
       <var class="vars">$result</var> = <var class="keywords">array</var>(
         <var class="strings">'tokens'</var>   =&gt; <var class="vars">$stack</var>,
         <var class="strings">'offset'</var>   =&gt; <var class="vars">$offset</var>,
         <var class="strings">'length'</var>   =&gt; <var class="vars">$length</var>,
         <var class="strings">'operator'</var> =&gt; <var class="vars">$operator</var>,
         <var class="strings">'alias'</var>    =&gt; <var class="vars">$alias</var>
       );
     }
   }
   <var class="comments">//debug($result,"color=#6600ff:**sub-query**;");</var>
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0489"><h2>
<a name="p_function_gettablenamefromtokens_489">
<var class="function">getTableNameFromTokens</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    parsed tokens</dd>
<dt>param</dt>
<dd><em>string</em>   type of statement</dd>
<dt>return</dt>
<dd><em>string</em>   table name</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Get the table name from parsed tokens
</pre>
</div></div><pre id="source-0489"> <var class="keywords">function</var> getTableNameFromTokens(<var class="vars">$tokens</var>, <var class="vars">$type</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="keywords">switch</var> (<var class="vars">$type</var>) {
       <var class="keywords">case</var> <var class="strings">'select'</var>:
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="strings">'from'</var>, <var class="vars">$tokens</var>)) {
             <var class="vars">$result</var> = <var class="vars">$tokens</var>[<var class="strings">'from'</var>];
             <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>)) {
               <var class="vars">$result</var> = <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$result</var>);
             }
           }
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$result</var> = <var class="keywords">null</var>;
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0490"><h2>
<a name="p_function_ismanip_490">
<var class="function">isManip</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the query, or the parsed tokens</dd>
<dt>return</dt>
<dd><em>boolean</em> whether the query is manipulation query</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether the query is manipulation or definition query
</pre>
</div></div><pre id="source-0490"> <var class="keywords">function</var> isManip(<var class="vars">$query</var>){
   <var class="keywords">static</var> <var class="vars">$spaces</var> = <var class="keywords">array</var>(<var class="strings">' '</var>, <var class="strings">&quot;\t&quot;</var>, <var class="strings">&quot;\r&quot;</var>, <var class="strings">&quot;\n&quot;</var>);
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$query</var>)) {
     <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$query</var>)) {
     <var class="vars">$query</var> = <var class="funcs">reset</var>(<var class="vars">$query</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$query</var>) &amp;&amp; <var class="vars">$query</var> != <var class="keywords">null</var>) {
     <var class="vars">$query</var> = <var class="funcs">substr</var>(<var class="funcs">ltrim</var>(<var class="vars">$query</var>), 0, 10);
     <var class="keywords">foreach</var> (<var class="vars">$spaces</var> <var class="keywords">as</var> <var class="vars">$space</var>) {
       <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$query</var>, <var class="vars">$space</var>) !== <var class="keywords">false</var>) {
         <var class="vars">$split</var> = <var class="funcs">explode</var>(<var class="vars">$space</var>, <var class="vars">$query</var>);
         <var class="vars">$query</var> = <var class="funcs">array_shift</var>(<var class="vars">$split</var>);
       }
     }
     <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$query</var>)) {
       <var class="keywords">case</var> <var class="strings">'alter'</var>:
       <var class="keywords">case</var> <var class="strings">'begin'</var>:
       <var class="keywords">case</var> <var class="strings">'commit'</var>:
       <var class="keywords">case</var> <var class="strings">'copy'</var>:
       <var class="keywords">case</var> <var class="strings">'create'</var>:
       <var class="keywords">case</var> <var class="strings">'delete'</var>:
       <var class="keywords">case</var> <var class="strings">'drop'</var>:
       <var class="keywords">case</var> <var class="strings">'end'</var>:
       <var class="keywords">case</var> <var class="strings">'grant'</var>:
       <var class="keywords">case</var> <var class="strings">'insert'</var>:
       <var class="keywords">case</var> <var class="strings">'load'</var>:
       <var class="keywords">case</var> <var class="strings">'lock'</var>:
       <var class="keywords">case</var> <var class="strings">'replace'</var>:
       <var class="keywords">case</var> <var class="strings">'revoke'</var>:
       <var class="keywords">case</var> <var class="strings">'rollback'</var>:
       <var class="keywords">case</var> <var class="strings">'start'</var>:
       <var class="keywords">case</var> <var class="strings">'unlock'</var>:
       <var class="keywords">case</var> <var class="strings">'update'</var>:
       <var class="keywords">case</var> <var class="strings">'vacuum'</var>:
           <var class="vars">$result</var> = <var class="keywords">true</var>;
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$result</var> = <var class="keywords">false</var>;
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0491"><h2>
<a name="p_function_ismultiquery_491">
<var class="function">isMultiQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the target query</dd>
<dt>return</dt>
<dd><em>boolean</em> whether the argument was multiple queries</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether queries are multiple or one query
</pre>
</div></div><pre id="source-0491"> <var class="keywords">function</var> isMultiQuery(<var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$query</var>)) {
     <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>);
   }
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$query</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$query</var>)) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$query</var>);
     <var class="keywords">unset</var>(<var class="vars">$query</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="keywords">while</var> (--<var class="vars">$length</var> &gt;= 0) {
       <var class="vars">$token</var> = <var class="funcs">array_shift</var>(<var class="vars">$tokens</var>);
       <var class="keywords">if</var> (<var class="vars">$token</var> === <var class="strings">';'</var>) {
         <var class="vars">$next</var> = <var class="funcs">array_shift</var>(<var class="vars">$tokens</var>);
         <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$this</var>-&gt;isWord(<var class="vars">$next</var>)) {
           <var class="vars">$result</var> = <var class="keywords">true</var>;
           <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0492"><h2>
<a name="p_function_ismultipleselect_492">
<var class="function">isMultipleSelect</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the value of FROM clause</dd>
<dt>return</dt>
<dd><em>boolean</em>  it has multiples or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Checks whether the SELECT Query has multiples or single
</pre>
</div></div><pre id="source-0492"> <var class="keywords">function</var> isMultipleSelect(<var class="vars">$from</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$from</var> == <var class="keywords">null</var>) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'The query of FROM clause is empty'</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$from</var>)) {
       <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$from</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$from</var>)) {
       <var class="vars">$level</var> = 0;
       <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$from</var>);
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$from</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
         <var class="vars">$token</var> = <var class="vars">$from</var>[<var class="vars">$i</var>];
         <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$level</var>++;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="vars">$level</var>--;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">','</var>:
           <var class="keywords">case</var> <var class="strings">'join'</var>:
               <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
                 <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
                 <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$from</var>[<var class="vars">$j</var>]) &amp;&amp; <var class="vars">$from</var>[<var class="vars">$j</var>] != <var class="keywords">null</var>) {
                   <var class="vars">$result</var> = <var class="keywords">true</var>;
                   <var class="keywords">break</var> 2;
                 }
               }
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0493"><h2>
<a name="p_function_issubselectfrom_493">
<var class="function">isSubSelectFrom</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the value of FROM clause</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the FROM clause has sub-query or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Checks whether the FROM clause has sub-query
</pre>
</div></div><pre id="source-0493"> <var class="keywords">function</var> isSubSelectFrom(<var class="vars">$from</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$from</var> == <var class="keywords">null</var>) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'The query of FROM clause is empty'</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$from</var>)) {
       <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$from</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$from</var>)) {
       <var class="vars">$level</var> = 0;
       <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$from</var>);
       <var class="vars">$count</var> = <var class="funcs">count</var>(<var class="vars">$from</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$count</var>; <var class="vars">$i</var>++) {
         <var class="vars">$token</var> = <var class="vars">$from</var>[<var class="vars">$i</var>];
         <var class="vars">$next</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$from</var>, <var class="vars">$i</var> + 1);
         <var class="keywords">switch</var> (<var class="vars">$token</var>) {
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$level</var>++;
               <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var> &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$next</var>, <var class="strings">'select'</var>)
                &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$from</var>[<var class="vars">$i</var> + 2]) &amp;&amp; <var class="vars">$from</var>[<var class="vars">$i</var> + 2] != <var class="keywords">null</var>) {
                 <var class="vars">$result</var> = <var class="keywords">true</var>;
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="vars">$level</var>--;
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="vars">$level</var> !== 0) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Syntax error on FROM clause'</var>);
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0494"><h2>
<a name="p_function_issimplecount_494">
<var class="function">isSimpleCount</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the parsed arguments</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether the query has multi-tables</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the statement is simple COUNT</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Check whether the statement is &quot;SELECT COUNT(*)&quot; by the arguments.
 Only asterisk(*) is accepted to the expression.
</pre>
</div></div><pre id="source-0494"> <var class="keywords">function</var> isSimpleCount(<var class="vars">$args</var>, <var class="vars">$multi_select</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse arguments on SELECT(%s)'</var>, <var class="vars">$args</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$args</var>)) {
       <var class="vars">$defaults</var> = <var class="vars">$this</var>-&gt;getSelectDefaultArguments();
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">foreach</var> (<var class="vars">$args</var> <var class="keywords">as</var> <var class="vars">$clause</var> =&gt; <var class="vars">$expr</var>) {
         <var class="vars">$clause</var> = <var class="funcs">strtolower</var>(<var class="vars">$clause</var>);
         <var class="keywords">switch</var> (<var class="vars">$clause</var>) {
           <var class="keywords">case</var> <var class="strings">'from'</var>:
               <var class="keywords">if</var> (!<var class="vars">$multi_select</var> &amp;&amp; !<var class="funcs">is_string</var>(<var class="vars">$expr</var>)) {
                 <var class="vars">$result</var> = <var class="keywords">false</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'select'</var>:
               <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
                 <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;parseColumns(<var class="vars">$expr</var>);
               }
               <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
                 <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
                   <var class="vars">$keys</var> = <var class="keywords">array</var>(<var class="strings">'cols'</var>, <var class="strings">'func'</var>);
                   <var class="keywords">foreach</var> (<var class="vars">$keys</var> <var class="keywords">as</var> <var class="vars">$key</var>) {
                     <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$expr</var>)
                      || <var class="funcs">count</var>(<var class="vars">$expr</var>[<var class="vars">$key</var>]) !== 1) {
                       <var class="vars">$result</var> = <var class="keywords">false</var>;
                       <var class="keywords">break</var> 3;
                     }
                   }
                   <var class="vars">$func_key</var> = <var class="funcs">end</var>(<var class="vars">$keys</var>);
                   <var class="keywords">if</var> (<var class="funcs">reset</var>(<var class="vars">$expr</var>[<var class="vars">$func_key</var>]) === <var class="strings">'*'</var>
                    &amp;&amp; <var class="funcs">strtolower</var>(<var class="funcs">key</var>(<var class="vars">$expr</var>[<var class="vars">$func_key</var>])) === <var class="strings">'count'</var>) {
                     <var class="vars">$result</var> = <var class="keywords">true</var>;
                   }
                 }
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'where'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$clause</var>, <var class="vars">$defaults</var>)
                || <var class="vars">$defaults</var>[<var class="vars">$clause</var>] !== <var class="vars">$expr</var>) {
                 <var class="vars">$result</var> = <var class="keywords">false</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0495"><h2>
<a name="p_function_issimplelimitonce_495">
<var class="function">isSimpleLimitOnce</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the parsed arguments</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether the query has multi-tables</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the statement is simple &quot;LIMIT 1&quot;</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Check whether or not the statement is simple &quot;LIMIT 1&quot; by the arguments.
</pre>
</div></div><pre id="source-0495"> <var class="keywords">function</var> isSimpleLimitOnce(<var class="vars">$args</var>, <var class="vars">$multi_select</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse arguments on SELECT(%s)'</var>, <var class="vars">$args</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$args</var>)) {
       <var class="vars">$defaults</var> = <var class="vars">$this</var>-&gt;getSelectDefaultArguments();
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">foreach</var> (<var class="vars">$args</var> <var class="keywords">as</var> <var class="vars">$clause</var> =&gt; <var class="vars">$expr</var>) {
         <var class="vars">$clause</var> = <var class="funcs">strtolower</var>(<var class="vars">$clause</var>);
         <var class="keywords">switch</var> (<var class="vars">$clause</var>) {
           <var class="keywords">case</var> <var class="strings">'from'</var>:
               <var class="keywords">if</var> (!<var class="vars">$multi_select</var> &amp;&amp; !<var class="funcs">is_string</var>(<var class="vars">$expr</var>)) {
                 <var class="vars">$result</var> = <var class="keywords">false</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'select'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'where'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'limit'</var>:
               <var class="vars">$limit</var> = <var class="vars">$expr</var>;
               <var class="keywords">if</var> (<var class="vars">$limit</var> != <var class="keywords">null</var>) {
                 <var class="vars">$parsed</var> = <var class="vars">$this</var>-&gt;parseLimitTokens(<var class="vars">$limit</var>);
                 <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
                   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$parsed</var>)
                    &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'length'</var>, <var class="vars">$parsed</var>)
                    &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'offset'</var>, <var class="vars">$parsed</var>)) {
                     <var class="keywords">if</var> (<var class="vars">$parsed</var>[<var class="strings">'offset'</var>] == <var class="keywords">null</var>
                      &amp;&amp; <var class="vars">$parsed</var>[<var class="strings">'length'</var>] == 1) {
                       <var class="vars">$result</var> = <var class="keywords">true</var>;
                     }
                   }
                 }
               }
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$clause</var>, <var class="vars">$defaults</var>)
                || <var class="vars">$defaults</var>[<var class="vars">$clause</var>] !== <var class="vars">$expr</var>) {
                 <var class="vars">$result</var> = <var class="keywords">false</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0496"><h2>
<a name="p_function_issimpleprimarykeyspecify_496">
<var class="function">isSimplePrimaryKeySpecify</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the parsed arguments</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether the query has multi-tables</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the statement is simple primary-key specify</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Check whether or not the statement is simple primary-key specify
 expression by the arguments.
</pre>
</div></div><pre id="source-0496"> <var class="keywords">function</var> isSimplePrimaryKeySpecify(<var class="vars">$args</var>, <var class="vars">$multi_select</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse arguments on SELECT(%s)'</var>, <var class="vars">$args</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$args</var>)) {
       <var class="vars">$defaults</var> = <var class="vars">$this</var>-&gt;getSelectDefaultArguments();
       <var class="vars">$result</var> = <var class="keywords">false</var>;
       <var class="keywords">foreach</var> (<var class="vars">$args</var> <var class="keywords">as</var> <var class="vars">$clause</var> =&gt; <var class="vars">$expr</var>) {
         <var class="vars">$clause</var> = <var class="funcs">strtolower</var>(<var class="vars">$clause</var>);
         <var class="keywords">switch</var> (<var class="vars">$clause</var>) {
           <var class="keywords">case</var> <var class="strings">'from'</var>:
               <var class="keywords">if</var> (!<var class="vars">$multi_select</var> &amp;&amp; !<var class="funcs">is_string</var>(<var class="vars">$expr</var>)) {
                 <var class="vars">$result</var> = <var class="keywords">false</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'select'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'where'</var>:
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isSimplePrimaryKeyCompareExpression(<var class="vars">$expr</var>)) {
                 <var class="vars">$result</var> = <var class="keywords">true</var>;
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'limit'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'order'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$clause</var>, <var class="vars">$defaults</var>)
                || <var class="vars">$defaults</var>[<var class="vars">$clause</var>] !== <var class="vars">$expr</var>) {
                 <var class="vars">$result</var> = <var class="keywords">false</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0497"><h2>
<a name="p_function_issimpleprimarykeycompareexpression_497">
<var class="function">isSimplePrimaryKeyCompareExpression</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the expression as WHERE clause</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the expression is simple primary-key comparing</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Checks whether or not the expression is simple primary-key comparing
</pre>
</div></div><pre id="source-0497"> <var class="keywords">function</var> isSimplePrimaryKeyCompareExpression(<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$expr</var> != <var class="keywords">null</var>
    &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;_primaryKey) &amp;&amp; <var class="vars">$this</var>-&gt;_primaryKey != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$expr</var>);
     }
     <var class="vars">$this</var>-&gt;removeValidMarks(<var class="vars">$expr</var>);
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$expr</var>   = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$expr</var>);
       <var class="vars">$tokens</var> = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$expr</var> <var class="keywords">as</var> <var class="vars">$token</var>) {
         <var class="keywords">switch</var> (<var class="vars">$token</var>) {
           <var class="keywords">case</var> <var class="strings">'#'</var>:
           <var class="keywords">case</var> <var class="vars">$this</var>-&gt;NL:
           <var class="keywords">case</var> <var class="strings">'$'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="vars">$tokens</var>[] = <var class="vars">$token</var>;
               <var class="keywords">break</var>;
         }
       }
       <var class="vars">$level</var>  = 0;
       <var class="vars">$lefts</var>  = <var class="keywords">array</var>();
       <var class="vars">$rights</var> = <var class="keywords">array</var>();
       <var class="vars">$stack</var>  = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
         <var class="vars">$prev</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$i</var> - 1);
         <var class="vars">$next</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$i</var> + 1);
         <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$level</var>++;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="vars">$level</var>--;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'='</var>:
           <var class="keywords">case</var> <var class="strings">'=='</var>:
           <var class="keywords">case</var> <var class="strings">'==='</var>:
               <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$stack</var>) === 1) {
                 <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$next</var> != <var class="keywords">null</var>) {
                   <var class="vars">$lefts</var>[]  = <var class="vars">$prev</var>;
                   <var class="vars">$rights</var>[] = <var class="vars">$next</var>;
                 }
               }
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
               <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$stack</var>) === 2
        &amp;&amp; <var class="funcs">count</var>(<var class="vars">$lefts</var>) === 1 &amp;&amp; <var class="funcs">count</var>(<var class="vars">$rights</var>) === 1) {
         <var class="vars">$left</var> = <var class="funcs">reset</var>(<var class="vars">$lefts</var>);
         <var class="vars">$right</var> = <var class="funcs">reset</var>(<var class="vars">$rights</var>);
         <var class="keywords">if</var> (<var class="vars">$right</var> === <var class="vars">$this</var>-&gt;_primaryKey) {
           <var class="vars">$tmp</var> = <var class="vars">$left</var>;
           <var class="vars">$left</var> = <var class="vars">$right</var>;
           <var class="vars">$right</var> = <var class="vars">$tmp</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$left</var> === <var class="vars">$this</var>-&gt;_primaryKey) {
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$right</var>)) {
             <var class="vars">$right</var> = <var class="funcs">substr</var>(<var class="vars">$right</var>, 1, -1);
           }
           <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$right</var>)) {
             <var class="vars">$result</var> = <var class="keywords">true</var>;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0498"><h2>
<a name="p_function_isdistinct_498">
<var class="function">isDistinct</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the value of SELECT clause</dd>
<dt>return</dt>
<dd><em>boolean</em>  it has DISTINCT or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Checks whether the SELECT query has DISTINCT clause
</pre>
</div></div><pre id="source-0498"> <var class="keywords">function</var> isDistinct(<var class="vars">$columns</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="vars">$columns</var> == <var class="keywords">null</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Empty SELECT clause (select-list)'</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$columns</var>)) {
         <var class="vars">$columns</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$columns</var>);
       }
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$columns</var>)) {
         <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$columns</var>);
         <var class="keywords">if</var> (0 === <var class="funcs">strcasecmp</var>(<var class="vars">$reset</var>, <var class="strings">'distinct'</var>)) {
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0499"><h2>
<a name="p_function_isselectlistallclause_499">
<var class="function">isSelectListAllClause</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the value of SELECT clause</dd>
<dt>return</dt>
<dd><em>boolean</em>  it has ALL clause or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Checks whether the SELECT query has ALL clause
</pre>
</div></div><pre id="source-0499"> <var class="keywords">function</var> isSelectListAllClause(<var class="vars">$columns</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="vars">$columns</var> == <var class="keywords">null</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Empty SELECT clause (select-list)'</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$columns</var>)) {
         <var class="vars">$columns</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$columns</var>);
       }
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$columns</var>)) {
         <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$columns</var>);
         <var class="vars">$next</var> = <var class="funcs">next</var>(<var class="vars">$columns</var>);
         <var class="keywords">if</var> (0 === <var class="funcs">strcasecmp</var>(<var class="vars">$reset</var>, <var class="strings">'all'</var>)) {
           <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var>) {
             <var class="keywords">if</var> (<var class="vars">$next</var> !== <var class="strings">','</var>) {
               <var class="vars">$result</var> = <var class="keywords">true</var>;
             }
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0500"><h2>
<a name="p_function_isfunctioninstatement_500">
<var class="function">isFunctionInStatement</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the statement</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether or not is the function in statement</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Checks whether or not the statement has the function
</pre>
</div></div><pre id="source-0500"> <var class="keywords">function</var> isFunctionInStatement(<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$expr</var> == <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="keywords">false</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$expr</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$level</var> = 0;
       <var class="vars">$func</var> = <var class="keywords">null</var>;
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$expr</var>);
       <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
         <var class="vars">$prev</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$i</var> - 1);
         <var class="keywords">switch</var> (<var class="vars">$token</var>) {
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$level</var>++;
               <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var>) {
                 <var class="vars">$func</var> = <var class="vars">$prev</var>;
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="keywords">if</var> (<var class="vars">$level</var> &gt; 0 &amp;&amp; <var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$func</var>)) {
                 <var class="vars">$is_func</var> = <var class="keywords">true</var>;
                 <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$func</var>)) {
                   <var class="keywords">case</var> <var class="strings">'and'</var>:
                   <var class="keywords">case</var> <var class="strings">'or'</var>:
                   <var class="keywords">case</var> <var class="strings">'xor'</var>:
                   <var class="keywords">case</var> <var class="strings">'is'</var>:
                   <var class="keywords">case</var> <var class="strings">'not'</var>:
                   <var class="keywords">case</var> <var class="strings">'in'</var>:
                   <var class="keywords">case</var> <var class="strings">'where'</var>:
                   <var class="keywords">case</var> <var class="strings">'having'</var>:
                   <var class="keywords">case</var> <var class="strings">'on'</var>:
                   <var class="keywords">case</var> <var class="strings">'avg'</var>:
                   <var class="keywords">case</var> <var class="strings">'count'</var>:
                   <var class="keywords">case</var> <var class="strings">'max'</var>:
                   <var class="keywords">case</var> <var class="strings">'min'</var>:
                   <var class="keywords">case</var> <var class="strings">'sum'</var>:
                       <var class="vars">$is_func</var> = <var class="keywords">false</var>;
                       <var class="keywords">break</var>;
                   <var class="keywords">default</var>:
                       <var class="vars">$is_func</var> = <var class="keywords">true</var>;
                       <var class="keywords">break</var>;
                 }
                 <var class="keywords">if</var> (<var class="vars">$is_func</var>) {
                   <var class="vars">$result</var> = <var class="keywords">true</var>;
                   <var class="keywords">break</var> 2;
                 }
               }
               <var class="vars">$level</var>--;
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0501"><h2>
<a name="p_function_hascompoundoperator_501">
<var class="function">hasCompoundOperator</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    SELECT tokens, or statement</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether return as compound type or boolean</dd>
<dt>return</dt>
<dd><em>boolean</em>  tokens has compound-operator or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Check whether compound-operator token is in statement
 compound-operator:
  - UNION [ALL] : combine two query expressions into a single result set.
                  if ALL is specified, duplicate rows returned by
                  union expression are retained.
  - EXCEPT      : evaluates the output of two query expressions and
                  returns the difference between the results.
  - INTERSECT   : evaluates the output of two query expressions and
                  returns only the rows common to each.
</pre>
</div></div><pre id="source-0501"> <var class="keywords">function</var> hasCompoundOperator(<var class="vars">$tokens</var>, <var class="vars">$return_string</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$level</var> = 0;
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$token</var>) {
       <var class="vars">$ltoken</var> = <var class="funcs">strtolower</var>(<var class="vars">$token</var>);
       <var class="keywords">switch</var> (<var class="vars">$ltoken</var>) {
         <var class="keywords">case</var> <var class="strings">'('</var>:
             <var class="vars">$level</var>++;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">')'</var>:
             <var class="vars">$level</var>--;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'union'</var>:
         <var class="keywords">case</var> <var class="strings">'except'</var>:
         <var class="keywords">case</var> <var class="strings">'intersect'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="vars">$result</var> = <var class="vars">$ltoken</var>;
               <var class="keywords">break</var> 2;
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">if</var> (!<var class="vars">$return_string</var>) {
     <var class="vars">$result</var> = (<var class="keywords">bool</var>)<var class="vars">$result</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0502"><h2>
<a name="p_function_splitcolumns_502">
<var class="function">splitColumns</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>  columns of target</dd>
<dt>return</dt>
<dd><em>array</em>  results of columns, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> parse and split to the tokens of columns
</pre>
</div></div><pre id="source-0502"> <var class="keywords">function</var> splitColumns(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$tokens</var> == <var class="keywords">null</var> || !<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens(%s) of COLUMNS on SELECT'</var>,
                      <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$colms</var> = <var class="keywords">array</var>();
     <var class="vars">$stack</var> = <var class="keywords">array</var>();
     <var class="vars">$level</var> = 0;
     <var class="vars">$tokens</var>[] = <var class="strings">','</var>;
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$token</var>) {
       <var class="keywords">switch</var> (<var class="vars">$token</var>) {
         <var class="keywords">case</var> <var class="strings">'`'</var>:
         <var class="keywords">case</var> <var class="strings">';'</var>:
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'('</var>:
             <var class="vars">$level</var>++;
             <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">')'</var>:
             <var class="vars">$level</var>--;
             <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">','</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var>) {
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$colms</var>[] = <var class="vars">$stack</var>;
               <var class="vars">$stack</var> = <var class="keywords">array</var>();
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             <var class="keywords">break</var>;
       }
     }
     <var class="vars">$result</var> = <var class="vars">$colms</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0503"><h2>
<a name="p_function_parsecolumns_503">
<var class="function">parseColumns</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   columns of target</dd>
<dt>param</dt>
<dd><em>string</em>  if given as string, will returns only it</dd>
<dt>return</dt>
<dd><em>array</em>   results of columns, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the columns name for SELECT method
</pre>
</div></div><pre id="source-0503"> <var class="keywords">function</var> parseColumns(<var class="vars">$tokens</var>, <var class="vars">$colname</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitColumns(<var class="vars">$tokens</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$tokens</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$alias</var> = <var class="keywords">array</var>();
     <var class="vars">$funcs</var> = <var class="keywords">array</var>();
     <var class="vars">$colms</var> = <var class="keywords">array</var>();
     <var class="vars">$stack</var> = <var class="keywords">array</var>();
     <var class="vars">$exprs</var> = <var class="keywords">array</var>();
     <var class="vars">$level</var> = 0;
     <var class="vars">$func_name</var>  = <var class="keywords">null</var>;
     <var class="vars">$alias_name</var> = <var class="keywords">null</var>;
     <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;getAggregateDefaults();
     <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$columns</var>) {
       <var class="vars">$columns</var> = <var class="funcs">array_values</var>(<var class="vars">$columns</var>);
       <var class="vars">$this</var>-&gt;appendAliasToken(<var class="vars">$columns</var>);
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$columns</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
         <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
         <var class="vars">$token</var> = <var class="vars">$columns</var>[<var class="vars">$i</var>];
         <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
           <var class="keywords">case</var> <var class="strings">'`'</var>:
           <var class="keywords">case</var> <var class="strings">';'</var>:
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$tmp_func</var> = <var class="funcs">strtolower</var>(<var class="vars">$this</var>-&gt;joinWords(<var class="vars">$stack</var>));
               <var class="keywords">if</var> (<var class="vars">$level</var> === 0
                &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$tmp_func</var>, <var class="vars">$aggregates</var>)) {
                 <var class="vars">$func_name</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$stack</var>);
               }
               <var class="keywords">unset</var>(<var class="vars">$tmp_func</var>);
               <var class="vars">$level</var>++;
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="vars">$level</var>--;
               <var class="keywords">if</var> (<var class="vars">$func_name</var> != <var class="keywords">null</var>) {
                 <var class="vars">$funcs</var>[<var class="vars">$func_name</var>] = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$exprs</var>);
                 <var class="vars">$func_name</var> = <var class="keywords">null</var>;
                 <var class="vars">$exprs</var> = <var class="keywords">array</var>();
               }
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'as'</var>:
               <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
                 <var class="keywords">if</var> (<var class="vars">$stack</var> == <var class="keywords">null</var> || !<var class="keywords">isset</var>(<var class="vars">$columns</var>[<var class="vars">$j</var>])) {
                   <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse tokens'</var>
                                 .  <var class="strings">' for columns(AS)'</var>);
                   <var class="keywords">break</var> 3;
                 } <var class="keywords">else</var> {
                   <var class="vars">$alias</var>[ <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$stack</var>) ] = <var class="vars">$columns</var>[<var class="vars">$j</var>];
                   <var class="vars">$i</var> += 2;
                 }
                 <var class="keywords">break</var>;
               }
           <var class="keywords">default</var>:
               <var class="keywords">if</var> (<var class="vars">$level</var>) {
                 <var class="vars">$exprs</var>[] = <var class="vars">$token</var>;
               }
               <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
               <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="vars">$stack</var> == <var class="keywords">null</var>) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse tokens for columns'</var>);
         <var class="keywords">break</var>;
       }
       <var class="vars">$colms</var>[] = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$stack</var>);
       <var class="vars">$stack</var> = <var class="keywords">array</var>();
       <var class="vars">$exprs</var> = <var class="keywords">array</var>();
     }
     <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="funcs">substr</var>(<var class="vars">$colname</var>, 0, 1))) {
       <var class="keywords">case</var> <var class="strings">'a'</var>:
           <var class="vars">$result</var> = <var class="vars">$alias</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'c'</var>:
           <var class="vars">$result</var> = <var class="vars">$colms</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'f'</var>:
           <var class="vars">$result</var> = <var class="vars">$funcs</var>;
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$result</var> = <var class="keywords">array</var>(
             <var class="strings">'cols'</var> =&gt; <var class="vars">$colms</var>,
             <var class="strings">'as'</var>   =&gt; <var class="vars">$alias</var>,
             <var class="strings">'func'</var> =&gt; <var class="vars">$funcs</var>
           );
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0504"><h2>
<a name="p_function_appendaliastoken_504">
<var class="function">appendAliasToken</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Append the alias token &quot;AS&quot; into parsed tokens if proper
</pre>
</div></div><pre id="source-0504"> <var class="keywords">function</var> appendAliasToken(&amp;<var class="vars">$tokens</var>){
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="keywords">if</var> (<var class="vars">$length</var> &gt; 1) {
       <var class="vars">$end</var> = <var class="funcs">end</var>(<var class="vars">$tokens</var>);
       <var class="vars">$prev</var> = <var class="funcs">prev</var>(<var class="vars">$tokens</var>);
       <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var> &amp;&amp; 0 !== <var class="funcs">strcasecmp</var>(<var class="vars">$prev</var>, <var class="strings">'as'</var>)
        &amp;&amp; <var class="vars">$end</var>  != <var class="keywords">null</var> &amp;&amp; <var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$end</var>)
        &amp;&amp; <var class="funcs">substr</var>(<var class="vars">$prev</var>, -1) !== <var class="strings">'.'</var>) {
         <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$length</var> - 1, 0, <var class="keywords">array</var>(<var class="strings">'as'</var>));
       }
       <var class="funcs">reset</var>(<var class="vars">$tokens</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0505"><h2>
<a name="p_function_applyaliasnames_505">
<var class="function">applyAliasNames</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the tokens of SELECT-List</dd>
<dt>param</dt>
<dd><em>mixed</em>   the tokens of FROM clause</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Applies the alias of SELECT-List and FROM clauses
</pre>
</div></div><pre id="source-0505"> <var class="keywords">function</var> applyAliasNames(<var class="vars">$tables</var>, <var class="vars">$columns</var>){
   <var class="vars">$this</var>-&gt;_onParseAliases = <var class="keywords">true</var>;
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onUnionSelect)) {
     <var class="vars">$this</var>-&gt;_selectTableAliases  = <var class="keywords">array</var>();
     <var class="vars">$this</var>-&gt;_selectColumnAliases = <var class="keywords">array</var>();
   }
   <var class="keywords">if</var> (<var class="vars">$tables</var> != <var class="keywords">null</var>) {
     <var class="vars">$do_parse</var> = <var class="keywords">false</var>;
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tables</var>)) {
       <var class="vars">$do_parse</var> = <var class="keywords">true</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$tables</var>))) {
         <var class="vars">$tables</var> = <var class="keywords">array</var>(<var class="vars">$tables</var>);
       }
       <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$tables</var>);
       <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="strings">'table_as'</var>, <var class="vars">$reset</var>)
        &amp;&amp; !<var class="funcs">array_key_exists</var>(<var class="strings">'table_name'</var>, <var class="vars">$reset</var>)) {
         <var class="vars">$do_parse</var> = <var class="keywords">true</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$aliases</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$tables</var> <var class="keywords">as</var> <var class="vars">$table</var>) {
           <var class="vars">$name</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$table</var>, <var class="strings">'table_name'</var>);
           <var class="vars">$alias</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$table</var>, <var class="strings">'table_as'</var>);
           <var class="keywords">if</var> (<var class="vars">$name</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$alias</var> != <var class="keywords">null</var>) {
             <var class="vars">$aliases</var>[<var class="vars">$name</var>] = <var class="vars">$alias</var>;
           }
         }
       }
     }
     <var class="keywords">if</var> (<var class="vars">$do_parse</var>) {
       <var class="vars">$aliases</var> = <var class="vars">$this</var>-&gt;parseFromClause(<var class="vars">$tables</var>);
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$aliases</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$aliases</var>)) {
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onUnionSelect)) {
         <var class="vars">$this</var>-&gt;_selectTableAliases = <var class="vars">$aliases</var>;
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;_selectTableAliases)) {
           <var class="vars">$this</var>-&gt;_selectTableAliases = <var class="keywords">array</var>();
         }
         <var class="keywords">foreach</var> (<var class="vars">$aliases</var> <var class="keywords">as</var> <var class="vars">$org_name</var> =&gt; <var class="vars">$as_name</var>) {
           <var class="vars">$this</var>-&gt;_selectTableAliases[<var class="vars">$org_name</var>] = <var class="vars">$as_name</var>;
         }
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$columns</var> != <var class="keywords">null</var>) {
     <var class="vars">$aliases</var> = <var class="keywords">array</var>();
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$columns</var>)) {
       <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="strings">'as'</var>, <var class="vars">$columns</var>)) {
         <var class="vars">$columns</var> = <var class="vars">$columns</var>[<var class="strings">'as'</var>];
       }
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$columns</var>)) {
         <var class="vars">$aliases</var> = <var class="vars">$columns</var>;
       }
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$columns</var> !== <var class="strings">'*'</var>) {
       <var class="vars">$aliases</var> = <var class="vars">$this</var>-&gt;parseColumns(<var class="vars">$columns</var>, <var class="strings">'as'</var>);
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$aliases</var>) &amp;&amp; <var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$aliases</var>)) {
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onUnionSelect)) {
         <var class="vars">$this</var>-&gt;_selectColumnAliases = <var class="vars">$aliases</var>;
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;_selectColumnAliases)) {
           <var class="vars">$this</var>-&gt;_selectColumnAliases = <var class="keywords">array</var>();
         }
         <var class="keywords">foreach</var> (<var class="vars">$aliases</var> <var class="keywords">as</var> <var class="vars">$org_name</var> =&gt; <var class="vars">$as_name</var>) {
           <var class="vars">$this</var>-&gt;_selectColumnAliases[<var class="vars">$org_name</var>] = <var class="vars">$as_name</var>;
         }
       }
     }
   }
   <var class="vars">$this</var>-&gt;_onParseAliases = <var class="keywords">null</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0506"><h2>
<a name="p_function_replacetablealias_506">
<var class="function">replaceTableAlias</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the name that include &quot;AS xxx&quot; syntax</dd>
<dt>return</dt>
<dd><em>string</em>  the replaced name, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Replace the alias to enable name on &quot;SELECT COUNT(*) FROM xxx AS x&quot;
</pre>
</div></div><pre id="source-0506"> <var class="keywords">function</var> replaceTableAlias(<var class="vars">$name</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$name</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal type of alias(%s)'</var>, <var class="funcs">gettype</var>(<var class="vars">$name</var>));
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$name</var> == <var class="keywords">null</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Empty table name on FROM clause'</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$name</var>;
       <var class="vars">$as_exists</var> = <var class="keywords">false</var>;
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$name</var>);
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
         <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
         <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
           <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
             <var class="keywords">case</var> <var class="strings">'as'</var>:
                 <var class="vars">$as_exists</var> = <var class="keywords">true</var>;
                 <var class="keywords">break</var> 2;
             <var class="keywords">default</var>:
                 <var class="keywords">break</var>;
           }
         }
       }
       <var class="keywords">if</var> (<var class="vars">$as_exists</var>) {
         <var class="vars">$this</var>-&gt;_onParseAliases = <var class="keywords">true</var>;
         <var class="vars">$aliases</var> = <var class="vars">$this</var>-&gt;parseFromClause(<var class="vars">$name</var>);
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$aliases</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$aliases</var>)) {
           <var class="vars">$as_name</var>  = <var class="funcs">reset</var>(<var class="vars">$aliases</var>);
           <var class="vars">$org_name</var> = <var class="funcs">key</var>(<var class="vars">$aliases</var>);
           <var class="keywords">if</var> (<var class="vars">$org_name</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$org_name</var>)) {
             <var class="vars">$result</var> = <var class="vars">$org_name</var>;
           }
         }
         <var class="vars">$this</var>-&gt;_onParseAliases = <var class="keywords">null</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0507"><h2>
<a name="p_function_restorealiastokens_507">
<var class="function">restoreAliasTokens</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the target tokens (i.e. WHERE, HAVING clauses)</dd>
<dt>return</dt>
<dd><em>string</em>  the restored tokens</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Restore the tokens to original tokens
</pre>
</div></div><pre id="source-0507"> <var class="keywords">function</var> restoreAliasTokens(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tokens</var>)) {
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
     }
     <var class="keywords">if</var> (<var class="vars">$tokens</var> != <var class="keywords">null</var>) {
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_selectColumnAliases)
        &amp;&amp; <var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$this</var>-&gt;_selectColumnAliases)) {
         <var class="vars">$aliases</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$this</var>-&gt;_selectColumnAliases <var class="keywords">as</var> <var class="vars">$org_name</var> =&gt; <var class="vars">$as_name</var>) {
           <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$org_name</var>) &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$as_name</var>)) {
             <var class="vars">$aliases</var>[<var class="vars">$as_name</var>] = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$org_name</var>);
           }
         }
         <var class="vars">$tables</var> = <var class="keywords">array</var>();
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_selectTableAliases)
          &amp;&amp; <var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$this</var>-&gt;_selectTableAliases)) {
           <var class="keywords">foreach</var> (<var class="vars">$this</var>-&gt;_selectTableAliases <var class="keywords">as</var> <var class="vars">$org_name</var> =&gt; <var class="vars">$as_name</var>) {
             <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$org_name</var>) &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$as_name</var>)) {
               <var class="vars">$tables</var>[<var class="vars">$as_name</var>] = <var class="vars">$org_name</var>;
             }
           }
         }
         <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="funcs">count</var>(<var class="vars">$tokens</var>); <var class="vars">$i</var>++) {
           <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var>], <var class="vars">$aliases</var>)) {
             <var class="vars">$restore</var> = <var class="vars">$aliases</var>[<var class="vars">$tokens</var>[<var class="vars">$i</var>]];
             <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, 1, <var class="vars">$restore</var>);
           }
           <var class="keywords">if</var> (<var class="vars">$tables</var> != <var class="keywords">null</var>
            &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var>], <var class="vars">$tables</var>)
            &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>]) &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$j</var>] === <var class="strings">'.'</var>) {
             <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="strings">''</var>;
             <var class="vars">$tokens</var>[<var class="vars">$j</var>] = <var class="strings">''</var>;
             <var class="vars">$i</var> = <var class="vars">$j</var>;
           }
         }
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0508"><h2>
<a name="p_function_replacealiasname_508">
<var class="function">replaceAliasName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the alias name</dd>
<dt>return</dt>
<dd><em>string</em>  the replaced name</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Replace the alias to enable name
</pre>
</div></div><pre id="source-0508"> <var class="keywords">function</var> replaceAliasName(<var class="vars">$name</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$name</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal type of alias(%s)'</var>, <var class="funcs">gettype</var>(<var class="vars">$name</var>));
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_selectColumnAliases)) {
       <var class="keywords">foreach</var> (<var class="vars">$this</var>-&gt;_selectColumnAliases <var class="keywords">as</var> <var class="vars">$org_name</var> =&gt; <var class="vars">$as_name</var>) {
         <var class="keywords">if</var> (<var class="vars">$name</var> === <var class="vars">$as_name</var>) {
           <var class="vars">$name</var> = <var class="vars">$org_name</var>;
           <var class="keywords">break</var>;
         }
       }
     }
     <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$name</var>, <var class="strings">'.'</var>) !== <var class="keywords">false</var>) {
       <var class="keywords">list</var>(<var class="vars">$table</var>, <var class="vars">$column</var>) = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$name</var>);
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$table</var>)
        &amp;&amp; (<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$column</var>) || <var class="vars">$column</var> === <var class="strings">'*'</var>)) {
         <var class="vars">$name</var> = <var class="vars">$column</var>;
       }
     }
     <var class="vars">$result</var> = <var class="vars">$name</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0509"><h2>
<a name="p_function_replacealiasnames_509">
<var class="function">replaceAliasNames</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the alias names</dd>
<dt>return</dt>
<dd><em>array</em>   the replaced names</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Replace the alias to enable names
</pre>
</div></div><pre id="source-0509"> <var class="keywords">function</var> replaceAliasNames(<var class="vars">$names</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$names</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal type of aliases(%s)'</var>, <var class="funcs">gettype</var>(<var class="vars">$names</var>));
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$names</var> <var class="keywords">as</var> <var class="vars">$org_name</var> =&gt; <var class="vars">$as_name</var>) {
         <var class="vars">$org_name</var> = (<var class="keywords">string</var>)<var class="vars">$org_name</var>;
         <var class="vars">$new_name</var> = <var class="vars">$this</var>-&gt;replaceAliasName(<var class="vars">$org_name</var>);
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
           <var class="keywords">break</var>;
         }
         <var class="vars">$result</var>[<var class="vars">$new_name</var>] = <var class="vars">$as_name</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0510"><h2>
<a name="p_function_restoretablealiasname_510">
<var class="function">restoreTableAliasName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the alias table name</dd>
<dt>return</dt>
<dd><em>string</em>   the original table name</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Restore the table name from alias name
</pre>
</div></div><pre id="source-0510"> <var class="keywords">function</var> restoreTableAliasName(<var class="vars">$name</var>){
   <var class="vars">$result</var> = <var class="vars">$name</var>;
   <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$name</var>, <var class="strings">'.'</var>) !== <var class="keywords">false</var>) {
     <var class="keywords">list</var>(<var class="vars">$correlation</var>, <var class="vars">$field_name</var>) = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$name</var>);
     <var class="vars">$aliases</var> = <var class="vars">$this</var>-&gt;getTableAliasNames();
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$aliases</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$aliases</var>)) {
       <var class="keywords">foreach</var> (<var class="vars">$aliases</var> <var class="keywords">as</var> <var class="vars">$table_name</var> =&gt; <var class="vars">$alias_name</var>) {
         <var class="keywords">if</var> (<var class="vars">$alias_name</var> === <var class="vars">$correlation</var>) {
           <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s.%s'</var>, <var class="vars">$table_name</var>, <var class="vars">$field_name</var>);
           <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0511"><h2>
<a name="p_function_findidentifier_511">
<var class="function">findIdentifier</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0511"> <var class="keywords">function</var> findIdentifier(<var class="vars">$field_name</var>, <var class="vars">$keys</var>){
   <var class="vars">$result</var> = <var class="vars">$field_name</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$field_name</var>) &amp;&amp; <var class="vars">$field_name</var> != <var class="keywords">null</var>
    &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$keys</var>) &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$keys</var>) &amp;&amp; <var class="funcs">is_string</var>(<var class="funcs">key</var>(<var class="vars">$keys</var>))) {
     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$field_name</var>, <var class="vars">$keys</var>)) {
       <var class="vars">$result</var> = <var class="vars">$field_name</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$field_name</var>, <var class="strings">'.'</var>) === <var class="keywords">false</var>) {
         <var class="vars">$simple_col</var> = <var class="vars">$this</var>-&gt;replaceAliasName(<var class="vars">$field_name</var>);
         <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$simple_col</var>, <var class="vars">$keys</var>)) {
           <var class="vars">$result</var> = <var class="vars">$simple_col</var>;
         }
       } <var class="keywords">else</var> {
         <var class="vars">$column_aliases</var> = <var class="vars">$this</var>-&gt;getColumnAliasNames();
         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$column_aliases</var>) &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$column_aliases</var>)
          &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$field_name</var>, <var class="vars">$column_aliases</var>)
          &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$column_aliases</var>[<var class="vars">$field_name</var>], <var class="vars">$keys</var>)) {
           <var class="vars">$result</var> = <var class="vars">$column_aliases</var>[<var class="vars">$field_name</var>];
         } <var class="keywords">else</var> {
           <var class="keywords">list</var>(<var class="vars">$table_name</var>, <var class="vars">$column_name</var>) = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$field_name</var>);
           <var class="vars">$table_aliases</var> = <var class="vars">$this</var>-&gt;flipArray(<var class="vars">$this</var>-&gt;getTableAliasNames());
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$table_aliases</var>) &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$table_aliases</var>)) {
             <var class="vars">$correlation</var> = <var class="vars">$table_name</var>;
             <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$table_name</var>, <var class="vars">$table_aliases</var>)) {
               <var class="vars">$correlation</var> = <var class="vars">$table_aliases</var>[<var class="vars">$table_name</var>];
             }
             <var class="vars">$identifier</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s.%s'</var>, <var class="vars">$correlation</var>, <var class="vars">$column_name</var>);
             <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$identifier</var>, <var class="vars">$keys</var>)) {
               <var class="vars">$result</var> = <var class="vars">$identifier</var>;
             } <var class="keywords">else</var> {
               <var class="comments">// considered simple SELECT syntax.</var>
               <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$column_name</var>, <var class="vars">$keys</var>)) {
                 <var class="vars">$result</var> = <var class="vars">$column_name</var>;
               }
             }
           }
           <var class="comments">// considered simple SELECT syntax.</var>
           <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$result</var>, <var class="vars">$keys</var>)
            &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$column_name</var>, <var class="vars">$keys</var>)) {
             <var class="vars">$result</var> = <var class="vars">$column_name</var>;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0512"><h2>
<a name="p_function_parsehaving_512">
<var class="function">parseHaving</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the parsed tokens which is a part of HAVING clause</dd>
<dt>return</dt>
<dd><em>array</em>    the information of aggregate functions as array</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the HAVING clause tokens from the SQL syntax
</pre>
</div></div><pre id="source-0512"> <var class="keywords">function</var> parseHaving(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse the tokens(%s) on HAVING'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$open</var>  = <var class="strings">'('</var>;
     <var class="vars">$close</var> = <var class="strings">')'</var>;
     <var class="vars">$level</var> = 0;
     <var class="vars">$token</var> = <var class="keywords">null</var>;
     <var class="vars">$next</var>  = <var class="keywords">null</var>;
     <var class="vars">$in_func</var>    = <var class="keywords">false</var>;
     <var class="vars">$func_reset</var> = <var class="keywords">false</var>;
     <var class="vars">$func_name</var>  = <var class="keywords">null</var>;
     <var class="vars">$func_index</var> = <var class="keywords">null</var>;
     <var class="vars">$func_level</var> = <var class="keywords">null</var>;
     <var class="vars">$func_args</var>  = <var class="keywords">array</var>();
     <var class="vars">$func_info</var>  = <var class="keywords">array</var>();
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
       <var class="vars">$token</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var>];
       <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>])) {
         <var class="vars">$next</var> = <var class="vars">$tokens</var>[<var class="vars">$j</var>];
       } <var class="keywords">else</var> {
         <var class="vars">$next</var> = <var class="keywords">null</var>;
       }
       <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
         <var class="keywords">case</var> <var class="strings">'('</var>:
             <var class="vars">$level</var>++;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">')'</var>:
             <var class="vars">$level</var>--;
             <var class="keywords">if</var> (<var class="vars">$in_func</var> &amp;&amp; <var class="vars">$func_level</var> === <var class="vars">$level</var>) {
               <var class="vars">$in_func</var> = <var class="keywords">false</var>;
               <var class="vars">$cols</var> = <var class="keywords">array</var>(
                 <var class="funcs">strtoupper</var>(<var class="vars">$func_name</var>),
                 <var class="vars">$open</var>,
                 <var class="vars">$func_args</var>,
                 <var class="vars">$close</var>
               );
               <var class="vars">$cols</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$cols</var>);
               <var class="vars">$cols</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$cols</var>);
               <var class="vars">$func_info</var>[] = <var class="keywords">array</var>(
                 <var class="strings">'name'</var>  =&gt; <var class="vars">$func_name</var>,
                 <var class="strings">'args'</var>  =&gt; <var class="vars">$func_args</var>,
                 <var class="strings">'cols'</var>  =&gt; <var class="vars">$cols</var>,
                 <var class="strings">'index'</var> =&gt; <var class="vars">$func_index</var>,
                 <var class="strings">'size'</var>  =&gt; <var class="vars">$i</var> - <var class="vars">$func_index</var> + 1
               );
               <var class="keywords">unset</var>(<var class="vars">$cols</var>);
               <var class="vars">$func_reset</var> = <var class="keywords">true</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'avg'</var>:
         <var class="keywords">case</var> <var class="strings">'count'</var>:
         <var class="keywords">case</var> <var class="strings">'max'</var>:
         <var class="keywords">case</var> <var class="strings">'min'</var>:
         <var class="keywords">case</var> <var class="strings">'sum'</var>:
             <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="vars">$open</var>) {
               <var class="vars">$func_name</var> = <var class="vars">$token</var>;
               <var class="vars">$func_args</var> = <var class="keywords">array</var>();
               <var class="vars">$func_level</var> = <var class="vars">$level</var>;
               <var class="vars">$func_index</var> = <var class="vars">$i</var>;
               <var class="vars">$in_func</var> = <var class="keywords">true</var>;
             } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$in_func</var>) {
               <var class="vars">$func_args</var>[] = <var class="vars">$token</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="keywords">if</var> (<var class="vars">$in_func</var>) {
               <var class="vars">$func_args</var>[] = <var class="vars">$token</var>;
             }
             <var class="keywords">break</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$func_reset</var>) {
         <var class="vars">$func_reset</var> = <var class="keywords">false</var>;
         <var class="vars">$in_func</var>    = <var class="keywords">false</var>;
         <var class="vars">$func_name</var>  = <var class="keywords">null</var>;
         <var class="vars">$func_index</var> = <var class="keywords">null</var>;
         <var class="vars">$func_level</var> = <var class="keywords">null</var>;
         <var class="vars">$func_args</var>  = <var class="keywords">array</var>();
       }
     }
     <var class="vars">$result</var> = <var class="vars">$func_info</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0513"><h2>
<a name="p_function_isenablehavinginfo_513">
<var class="function">isEnableHavingInfo</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the parsed tokens by parseHaving() method</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether the tokens were enabled or not</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Check whether the token is enabled for HAVING clause
</pre>
</div></div><pre id="source-0513"> <var class="keywords">function</var> isEnableHavingInfo(<var class="vars">$having_infos</var>){
   <var class="vars">$result</var> = <var class="keywords">true</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$having_infos</var>) || <var class="keywords">empty</var>(<var class="vars">$having_infos</var>)) {
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$error_token</var> = <var class="vars">$having_infos</var>;
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$error_token</var>)) {
         <var class="vars">$error_token</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$error_token</var>);
       }
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse HAVING (%s)'</var>, <var class="vars">$error_token</var>);
     }
     <var class="vars">$result</var> = <var class="keywords">false</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$name</var>  = <var class="strings">'name'</var>;
     <var class="vars">$args</var>  = <var class="strings">'args'</var>;
     <var class="vars">$cols</var>  = <var class="strings">'cols'</var>;
     <var class="vars">$index</var> = <var class="strings">'index'</var>;
     <var class="vars">$size</var>  = <var class="strings">'size'</var>;
     <var class="vars">$props</var> = <var class="keywords">array</var>(<var class="vars">$name</var>, <var class="vars">$args</var>, <var class="vars">$cols</var>, <var class="vars">$index</var>, <var class="vars">$size</var>);
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$having_infos</var>))) {
       <var class="vars">$having_infos</var> = <var class="keywords">array</var>(<var class="vars">$having_infos</var>);
     }
     <var class="keywords">foreach</var> (<var class="vars">$having_infos</var> <var class="keywords">as</var> <var class="vars">$info</var>) {
       <var class="keywords">foreach</var> (<var class="vars">$props</var> <var class="keywords">as</var> <var class="vars">$prop</var>) {
         <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$info</var>[<var class="vars">$prop</var>])) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Undefined property(%s) in parsed token'</var>,
                            <var class="vars">$prop</var>);
           <var class="vars">$result</var> = <var class="keywords">false</var>;
           <var class="keywords">break</var> 2;
         }
       }
       <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$info</var>[<var class="vars">$name</var>]) || <var class="vars">$info</var>[<var class="vars">$name</var>] == <var class="keywords">null</var>
        || !<var class="funcs">is_string</var>(<var class="vars">$info</var>[<var class="vars">$cols</var>]) || <var class="vars">$info</var>[<var class="vars">$cols</var>] == <var class="keywords">null</var>) {
         <var class="vars">$error_token</var>  = (<var class="keywords">string</var>)<var class="vars">$info</var>[<var class="vars">$name</var>];
         <var class="keywords">if</var> (<var class="vars">$error_token</var> == <var class="keywords">null</var>) {
           <var class="vars">$error_token</var> = (<var class="keywords">string</var>)<var class="vars">$info</var>[<var class="vars">$cols</var>];
         }
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal token(%s) on HAVING'</var>, <var class="vars">$error_token</var>);
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0514"><h2>
<a name="p_function_replacehavingtokens_514">
<var class="function">replaceHavingTokens</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the parsed tokens from HAVING clause</dd>
<dt>param</dt>
<dd><em>array</em>   the HAVING information as array</dd>
<dt>param</dt>
<dd><em>mixed</em>   the tokens to replace</dd>
<dt>param</dt>
<dd><em>boolean</em> wether clean the tokens or not</dd>
<dt>return</dt>
<dd><em>array</em>   the tokens which ware replaced according to replacement</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Replace the HAVING tokens to use on expression
</pre>
</div></div><pre id="source-0514"> <var class="keywords">function</var> replaceHavingTokens(<var class="vars">$having</var>, <var class="vars">$info</var>,
                              <var class="vars">$replace</var> = <var class="keywords">null</var>, <var class="vars">$clean</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$having</var>) &amp;&amp; <var class="vars">$this</var>-&gt;isEnableHavingInfo(<var class="vars">$info</var>)
      &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$info</var>[<var class="strings">'size'</var>])) {
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$replace</var>)) {
         <var class="vars">$replace</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$replace</var>);
         <var class="vars">$replace</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$replace</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$replace</var> = (<var class="keywords">string</var>)<var class="vars">$replace</var>;
       }
       <var class="vars">$size</var> = <var class="keywords">null</var>;
       <var class="keywords">foreach</var> (<var class="vars">$having</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
         <var class="keywords">if</var> (<var class="vars">$i</var> === <var class="vars">$info</var>[<var class="strings">'index'</var>]) {
           <var class="vars">$having</var>[<var class="vars">$i</var>] = <var class="vars">$replace</var>;
           <var class="vars">$size</var> = <var class="vars">$info</var>[<var class="strings">'size'</var>];
           <var class="keywords">continue</var>;
         }
         <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$size</var>)) {
           <var class="vars">$having</var>[<var class="vars">$i</var>] = <var class="strings">''</var>;
           <var class="keywords">if</var> (--<var class="vars">$size</var> &lt;= 1) {
             <var class="vars">$size</var> = <var class="keywords">null</var>;
           }
         }
       }
       <var class="keywords">if</var> (<var class="vars">$clean</var>) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$having</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="vars">$having</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0515"><h2>
<a name="p_function_parsegroupby_515">
<var class="function">parseGroupBy</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the tokens which is a part of GROUP BY clause</dd>
<dt>return</dt>
<dd><em>array</em>    the parsed items as array</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the items of &quot;GROUP BY&quot; clause from the SQL syntax
</pre>
</div></div><pre id="source-0515"> <var class="keywords">function</var> parseGroupBy(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse the tokens(%s) on GROUP BY'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$items</var>  = <var class="keywords">array</var>();
     <var class="vars">$index</var>  = 0;
     <var class="vars">$level</var>  = 0;
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
       <var class="vars">$skip</var> = <var class="keywords">false</var>;
       <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
         <var class="keywords">case</var> <var class="strings">'('</var>:
             <var class="vars">$level</var>++;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">')'</var>:
             <var class="vars">$level</var>--;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">','</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="vars">$skip</var> = <var class="keywords">true</var>;
               <var class="vars">$index</var>++;
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="keywords">break</var>;
       }
       <var class="keywords">if</var> (!<var class="vars">$skip</var>) {
         <var class="vars">$items</var>[<var class="vars">$index</var>][] = <var class="vars">$token</var>;
       }
     }
     <var class="vars">$fields</var> = <var class="keywords">array</var>();
     <var class="vars">$is_expr</var> = <var class="keywords">array</var>();
     <var class="keywords">foreach</var> (<var class="vars">$items</var> <var class="keywords">as</var> <var class="vars">$item</var>) {
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$item</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$item</var>)) {
         <var class="vars">$field</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$item</var>);
         <var class="vars">$is_expr</var>[] = <var class="vars">$this</var>-&gt;isExprToken(<var class="vars">$field</var>);
         <var class="vars">$fields</var>[] = <var class="vars">$field</var>;
       }
     }
     <var class="vars">$result</var> = <var class="keywords">array</var>(
       <var class="strings">'fields'</var>  =&gt; <var class="vars">$fields</var>,
       <var class="strings">'is_expr'</var> =&gt; <var class="vars">$is_expr</var>
     );
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0516"><h2>
<a name="p_function_parseorderbytokens_516">
<var class="function">parseOrderByTokens</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the parsed tokens which is a part of ORDER BY clause</dd>
<dt>return</dt>
<dd><em>array</em>    the parsed clause as associate array</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the &quot;ORDER BY&quot; clause from the SQL syntax
</pre>
</div></div><pre id="source-0516"> <var class="keywords">function</var> parseOrderByTokens(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse the tokens(%s) on ORDER BY'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$index</var>  = 0;
     <var class="vars">$orders</var> = <var class="keywords">array</var>();
     <var class="vars">$colums</var> = <var class="keywords">array</var>();
     <var class="vars">$stack</var>  = <var class="keywords">array</var>();
     <var class="keywords">if</var> (<var class="funcs">end</var>(<var class="vars">$tokens</var>) !== <var class="strings">' '</var>) {
       <var class="vars">$tokens</var>[] = <var class="strings">' '</var>; <var class="comments">// the end point</var>
     }
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
       <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
         <var class="keywords">case</var> <var class="strings">';'</var>:
         <var class="keywords">case</var> <var class="strings">'`'</var>:
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">' '</var>:
             <var class="vars">$colums</var>[<var class="vars">$index</var>] = <var class="vars">$stack</var>;
             <var class="vars">$stack</var> = <var class="keywords">array</var>();
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">','</var>:
             <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$stack</var>)) {
               <var class="vars">$colums</var>[<var class="vars">$index</var>++] = <var class="vars">$stack</var>;
               <var class="vars">$stack</var> = <var class="keywords">array</var>();
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'asc'</var>:
             <var class="vars">$orders</var>[<var class="vars">$index</var>] = SORT_ASC;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'desc'</var>:
             <var class="vars">$orders</var>[<var class="vars">$index</var>] = SORT_DESC;
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             <var class="keywords">break</var>;
       }
     }
     <var class="vars">$result</var> = <var class="keywords">array</var>();
     <var class="keywords">foreach</var> (<var class="vars">$colums</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$cols</var>) {
       <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$orders</var>)) {
         <var class="vars">$orders</var>[<var class="vars">$i</var>] = SORT_ASC;
       }
       <var class="vars">$cols</var> = <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$cols</var>);
       <var class="vars">$result</var>[<var class="vars">$cols</var>] = <var class="vars">$orders</var>[<var class="vars">$i</var>];
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0517"><h2>
<a name="p_function_parselimittokens_517">
<var class="function">parseLimitTokens</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the parsed tokens which is a part of LIMIT clause</dd>
<dt>return</dt>
<dd><em>array</em>    the parsed clause as array</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the LIMIT and OFFSET tokens from the SQL syntax
</pre>
</div></div><pre id="source-0517"> <var class="keywords">function</var> parseLimitTokens(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse the tokens(%s) on LIMIT'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$offset</var> = <var class="keywords">array</var>();
     <var class="vars">$length</var> = <var class="keywords">array</var>();
     <var class="vars">$stack</var>  = <var class="keywords">array</var>();
     <var class="vars">$is_off</var> = <var class="keywords">false</var>;
     <var class="vars">$is_all</var> = <var class="keywords">false</var>;
     <var class="keywords">if</var> (<var class="funcs">end</var>(<var class="vars">$tokens</var>) !== <var class="strings">' '</var>) {
       <var class="vars">$tokens</var>[] = <var class="strings">' '</var>; <var class="comments">// the end point</var>
     }
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
       <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
         <var class="keywords">case</var> <var class="strings">';'</var>:
         <var class="keywords">case</var> <var class="strings">'`'</var>:
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">' '</var>:
             <var class="vars">$length</var> = <var class="vars">$stack</var>;
             <var class="vars">$stack</var> = <var class="keywords">array</var>();
             <var class="keywords">if</var> (<var class="vars">$is_off</var>) {
               <var class="vars">$tmp</var> = <var class="vars">$length</var>;
               <var class="vars">$length</var> = <var class="vars">$offset</var>;
               <var class="vars">$offset</var> = <var class="vars">$tmp</var>;
             }
             <var class="keywords">if</var> (<var class="vars">$is_all</var>) {
               <var class="vars">$length</var> = <var class="keywords">array</var>();
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'offset'</var>:
             <var class="vars">$is_off</var> = <var class="keywords">true</var>;
         <var class="keywords">case</var> <var class="strings">','</var>:
             <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$stack</var>)) {
               <var class="vars">$offset</var> = <var class="vars">$stack</var>;
               <var class="vars">$stack</var> = <var class="keywords">array</var>();
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'all'</var>:
             <var class="vars">$is_all</var> = <var class="keywords">true</var>;
             <var class="vars">$stack</var> = <var class="keywords">array</var>();
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
             <var class="keywords">break</var>;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$offset</var> != <var class="keywords">null</var>) {
       <var class="vars">$offset</var> = (<var class="keywords">int</var>) <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$offset</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$offset</var> = 0;
     }
     <var class="keywords">if</var> (<var class="vars">$length</var> != <var class="keywords">null</var>) {
       <var class="vars">$length</var> = (<var class="keywords">int</var>) <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$length</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$length</var> = <var class="keywords">null</var>;
     }
     <var class="vars">$result</var> = <var class="keywords">array</var>(
       <var class="strings">'offset'</var> =&gt; <var class="vars">$offset</var>,
       <var class="strings">'length'</var> =&gt; <var class="vars">$length</var>
     );
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0518"><h2>
<a name="p_function_parsefromclause_518">
<var class="function">parseFromClause</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the token of FROM clause</dd>
<dt>return</dt>
<dd><em>array</em>   parsed associate array, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the table name which is used on FROM clause
</pre>
</div></div><pre id="source-0518"> <var class="keywords">function</var> parseFromClause(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tokens</var>)) {
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
     }
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>) || <var class="vars">$tokens</var> == <var class="keywords">null</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse tokens(%s) on FROM clause'</var>, <var class="vars">$tokens</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isMultipleSelect(<var class="vars">$tokens</var>)) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;parseJoinTables(<var class="vars">$tokens</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$stack</var>  = <var class="keywords">array</var>();
         <var class="vars">$table</var>  = <var class="keywords">null</var>;
         <var class="vars">$alias</var>  = <var class="keywords">null</var>;
         <var class="vars">$level</var>  = 0;
         <var class="vars">$this</var>-&gt;appendAliasToken(<var class="vars">$tokens</var>);
         <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
           <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
           <var class="vars">$token</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var>];
           <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
             <var class="keywords">case</var> <var class="strings">'`'</var>:
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'('</var>:
                 <var class="vars">$level</var>++;
                 <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">')'</var>:
                 <var class="vars">$level</var>--;
                 <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'as'</var>:
                 <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
                   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>])) {
                     <var class="vars">$alias</var> = <var class="vars">$tokens</var>[<var class="vars">$j</var>];
                     <var class="vars">$i</var> = <var class="vars">$j</var>;
                   }
                 } <var class="keywords">else</var> {
                   <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
                 }
                 <var class="keywords">break</var>;
             <var class="keywords">default</var>:
                 <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
                   <var class="keywords">if</var> (<var class="vars">$table</var> == <var class="keywords">null</var>) {
                     <var class="vars">$table</var> = <var class="vars">$token</var>;
                   }
                 }
                 <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
                 <var class="keywords">break</var>;
           }
         }
         <var class="vars">$sub_select</var> = <var class="keywords">false</var>;
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isSubSelectFrom(<var class="vars">$tokens</var>)) {
           <var class="vars">$sub_select</var> = <var class="keywords">true</var>;
           <var class="vars">$table</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$stack</var>);
         }
         <var class="vars">$is_error</var> = <var class="keywords">false</var>;
         <var class="keywords">if</var> (<var class="vars">$table</var> == <var class="keywords">null</var>) {
           <var class="vars">$is_error</var> = <var class="keywords">true</var>;
         } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="vars">$sub_select</var> &amp;&amp; !<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$table</var>)) {
           <var class="vars">$is_error</var> = <var class="keywords">true</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$is_error</var>) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal table name(%s) on FROM clause'</var>, <var class="vars">$table</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;_selectTableNames = <var class="keywords">array</var>(<var class="vars">$table</var> =&gt; <var class="vars">$alias</var>);
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onParseAliases)) {
             <var class="vars">$result</var> = <var class="keywords">array</var>(
               <var class="strings">'table_name'</var> =&gt; <var class="vars">$table</var>,
               <var class="strings">'table_as'</var>   =&gt; <var class="vars">$alias</var>
             );
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$alias</var> != <var class="keywords">null</var>) {
               <var class="vars">$result</var> = <var class="keywords">array</var>(<var class="vars">$table</var> =&gt; <var class="vars">$alias</var>);
             }
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0519"><h2>
<a name="p_function_parsejointables_519">
<var class="function">parseJoinTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>  tables of target</dd>
<dt>return</dt>
<dd><em>array</em>  results of tables, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the tables name for SELECT method
</pre>
</div></div><pre id="source-0519"> <var class="keywords">function</var> parseJoinTables(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>) &amp;&amp; <var class="vars">$tokens</var> != <var class="keywords">null</var>) {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$tokens</var>);
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens on SELECT using JOIN(%s)'</var>,
                      <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;removeBacktickToken(<var class="vars">$tokens</var>);
     <var class="vars">$open</var>   = <var class="strings">'('</var>;
     <var class="vars">$close</var>  = <var class="strings">')'</var>;
     <var class="keywords">while</var> (<var class="funcs">reset</var>(<var class="vars">$tokens</var>) === <var class="vars">$open</var>
          &amp;&amp; <var class="funcs">end</var>(<var class="vars">$tokens</var>) === <var class="vars">$close</var>) {
       <var class="funcs">array_shift</var>(<var class="vars">$tokens</var>);
       <var class="funcs">array_pop</var>(<var class="vars">$tokens</var>);
     }
     <var class="funcs">reset</var>(<var class="vars">$tokens</var>);
     <var class="funcs">array_push</var>(<var class="vars">$tokens</var>, <var class="strings">','</var>); <var class="comments">// dummy to parse</var>
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="vars">$in_func</var> = <var class="keywords">false</var>;
     <var class="vars">$in_expr</var> = <var class="keywords">false</var>;
     <var class="vars">$usings</var> = <var class="keywords">array</var>();
     <var class="vars">$tables</var> = <var class="keywords">array</var>();
     <var class="vars">$stack</var>  = <var class="keywords">array</var>();
     <var class="vars">$index</var>      = 0;
     <var class="vars">$on_index</var>   = 0;
     <var class="vars">$level</var>      = 0;
     <var class="vars">$base_table</var> = <var class="strings">''</var>;
     <var class="vars">$table_name</var> = <var class="strings">''</var>;
     <var class="vars">$table_as</var>   = <var class="strings">''</var>;
     <var class="vars">$join_type</var>  = <var class="strings">''</var>;
     <var class="vars">$prev_type</var>  = <var class="strings">''</var>;
     <var class="vars">$join_expr</var>  = <var class="keywords">array</var>();
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="vars">$h</var> = <var class="vars">$i</var> - 1;
       <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
       <var class="vars">$k</var> = <var class="vars">$j</var> + 1;
       <var class="vars">$token</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var>];
       <var class="vars">$prev</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$h</var>);
       <var class="vars">$next</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$j</var>);
       <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
         <var class="keywords">case</var> <var class="strings">';'</var>:
         <var class="keywords">case</var> <var class="strings">'$'</var>:
         <var class="keywords">case</var> <var class="strings">'`'</var>:
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'('</var>:
             <var class="vars">$level</var>++;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">')'</var>:
             <var class="vars">$level</var>--;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'as'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; <var class="vars">$next</var> != <var class="keywords">null</var>) {
               <var class="vars">$table_as</var> = <var class="vars">$next</var>;
               <var class="vars">$i</var> = <var class="vars">$j</var>;
               <var class="vars">$token</var> = <var class="keywords">null</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">','</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0 &amp;&amp; <var class="vars">$j</var> !== <var class="vars">$length</var>) {
               <var class="vars">$join_type</var> = <var class="strings">'cross'</var>;
             }
             <var class="comments">// FALLTHROUGH</var>
         <var class="keywords">case</var> <var class="strings">'join'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="vars">$in_expr</var> = <var class="keywords">false</var>;
               <var class="vars">$this</var>-&gt;_setJoinTableTokens(<var class="vars">$table_name</var>, <var class="vars">$table_as</var>, <var class="vars">$stack</var>);
               <var class="keywords">if</var> (<var class="vars">$join_type</var> == <var class="keywords">null</var> || !<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>])) {
                 <var class="vars">$join_type</var> = <var class="strings">'cross'</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$ltoken_h</var> = <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>]);
                 <var class="keywords">if</var> (<var class="vars">$ltoken_h</var> === <var class="strings">'inner'</var>
                  || <var class="vars">$ltoken_h</var> === <var class="strings">'cross'</var>
                  || <var class="vars">$table_name</var> === <var class="vars">$tokens</var>[<var class="vars">$h</var>]) {
                   <var class="vars">$join_type</var> = <var class="strings">'cross'</var>;
                 }
                 <var class="keywords">unset</var>(<var class="vars">$ltoken_h</var>);
               }
               <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var>) {
                 <var class="vars">$tables</var>[<var class="vars">$index</var>] = <var class="keywords">array</var>(
                   <var class="strings">'table_name'</var> =&gt; <var class="vars">$table_name</var>,
                   <var class="strings">'table_as'</var>   =&gt; <var class="vars">$table_as</var>,
                   <var class="strings">'join_type'</var>  =&gt; <var class="vars">$join_type</var>,
                   <var class="strings">'join_expr'</var>  =&gt; <var class="vars">$join_expr</var>,
                   <var class="strings">'using'</var>      =&gt; <var class="vars">$usings</var>
                 );
                 <var class="vars">$tables</var>[<var class="vars">$index</var>][<var class="strings">'join_type'</var>] = <var class="vars">$prev_type</var>;
                 <var class="vars">$prev_type</var> = <var class="vars">$join_type</var>;
                 <var class="keywords">if</var> (<var class="vars">$index</var> === 0) {
                   <var class="vars">$base_table</var> = <var class="vars">$table_name</var>;
                 }
                 <var class="vars">$index</var>++;
                 <var class="vars">$in_expr</var> = <var class="keywords">false</var>;
                 <var class="vars">$table_name</var> = <var class="strings">''</var>;
                 <var class="vars">$table_as</var> = <var class="strings">''</var>;
                 <var class="vars">$join_expr</var> = <var class="keywords">array</var>();
                 <var class="vars">$usings</var> = <var class="keywords">array</var>();
                 <var class="vars">$token</var> = <var class="keywords">null</var>;
               }
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'inner'</var>:
         <var class="keywords">case</var> <var class="strings">'cross'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="keywords">if</var> (0 === <var class="funcs">strcasecmp</var>(<var class="vars">$next</var>, <var class="strings">'join'</var>)) {
                 <var class="vars">$join_type</var> = <var class="strings">'cross'</var>;
                 <var class="vars">$this</var>-&gt;_setJoinTableTokens(<var class="vars">$table_name</var>, <var class="vars">$table_as</var>, <var class="vars">$stack</var>);
               }
               <var class="vars">$in_expr</var> = <var class="keywords">false</var>;
               <var class="vars">$token</var> = <var class="keywords">null</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'outer'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="keywords">if</var> (0 === <var class="funcs">strcasecmp</var>(<var class="vars">$next</var>, <var class="strings">'join'</var>)) {
                 <var class="vars">$this</var>-&gt;_setJoinTableTokens(<var class="vars">$table_name</var>, <var class="vars">$table_as</var>, <var class="vars">$stack</var>);
               }
               <var class="vars">$in_expr</var> = <var class="keywords">false</var>;
               <var class="vars">$token</var> = <var class="keywords">null</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'natural'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="vars">$in_expr</var> = <var class="keywords">false</var>;
               <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onParseAliases)) {
                 <var class="keywords">break</var>;
               }
               <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var>) {
                 <var class="vars">$this</var>-&gt;_setJoinTableTokens(<var class="vars">$table_name</var>, <var class="vars">$table_as</var>, <var class="vars">$stack</var>);
                 <var class="vars">$is_natural</var> = <var class="keywords">false</var>;
                 <var class="keywords">if</var> (0 === <var class="funcs">strcasecmp</var>(<var class="vars">$next</var>, <var class="strings">'join'</var>)) {
                   <var class="vars">$is_natural</var> = <var class="keywords">true</var>;
                 } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>])
                         &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>], <var class="strings">'join'</var>)) {
                   <var class="vars">$is_natural</var> = <var class="keywords">true</var>;
                   <var class="vars">$i</var>++;
                 } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var> + 1])
                         &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var> + 1], <var class="strings">'join'</var>)) {
                   <var class="vars">$is_natural</var> = <var class="keywords">true</var>;
                   <var class="vars">$i</var> += 2;
                 }
                 <var class="keywords">if</var> (<var class="vars">$is_natural</var>) {
                   <var class="vars">$join_type</var> = <var class="strings">'natural'</var>;
                   <var class="keywords">if</var> (<var class="vars">$table_name</var> != <var class="keywords">null</var>) {
                     <var class="keywords">if</var> (<var class="vars">$base_table</var> == <var class="keywords">null</var>) {
                       <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var> + 2])
                        &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$i</var> + 2] != <var class="keywords">null</var>) {
                         <var class="vars">$base_table</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var> + 2];
                       }
                     }
                     <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;getMeta(<var class="vars">$table_name</var>);
                     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
                       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s) on JOIN'</var>,
                                        <var class="vars">$table_name</var>);
                       <var class="keywords">break</var> 2;
                     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$meta</var>) || <var class="vars">$base_table</var> == <var class="keywords">null</var>) {
                       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse the tokens on JOIN'</var>);
                       <var class="keywords">break</var> 2;
                     } <var class="keywords">else</var> {
                       <var class="vars">$nm_expr</var> = <var class="keywords">array</var>();
                       <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$meta</var>) <var class="keywords">as</var> <var class="vars">$nm_key</var>) {
                         <var class="keywords">if</var> (<var class="vars">$nm_key</var> === <var class="strings">'rowid'</var>
                          || <var class="vars">$nm_key</var> === <var class="strings">'ctime'</var> || <var class="vars">$nm_key</var> === <var class="strings">'utime'</var>) {
                           <var class="keywords">continue</var>;
                         }
                         <var class="vars">$usings</var>[] = <var class="vars">$nm_key</var>;
                         <var class="keywords">foreach</var> (<var class="keywords">array</var>(<var class="vars">$base_table</var>, <var class="strings">'.'</var>, <var class="vars">$nm_key</var>,
                                   <var class="strings">'='</var>, <var class="vars">$table_name</var>, <var class="strings">'.'</var>, <var class="vars">$nm_key</var>) <var class="keywords">as</var> <var class="vars">$nm_c</var>) {
                           <var class="vars">$nm_expr</var>[] = <var class="vars">$nm_c</var>;
                         }
                         <var class="vars">$nm_expr</var>[] = <var class="strings">'&amp;&amp;'</var>;
                       }
                       <var class="funcs">array_pop</var>(<var class="vars">$nm_expr</var>);
                       <var class="keywords">foreach</var> (<var class="vars">$nm_expr</var> <var class="keywords">as</var> <var class="vars">$nm_c</var>) {
                         <var class="vars">$join_expr</var>[] = <var class="vars">$nm_c</var>;
                       }
                     }
                     <var class="keywords">unset</var>(<var class="vars">$meta</var>, <var class="vars">$nm_expr</var>, <var class="vars">$nm_key</var>, <var class="vars">$nm_c</var>);
                   }
                   <var class="vars">$token</var> = <var class="keywords">null</var>;
                 }
                 <var class="keywords">unset</var>(<var class="vars">$is_natural</var>);
               }
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'left'</var>:
         <var class="keywords">case</var> <var class="strings">'right'</var>:
         <var class="keywords">case</var> <var class="strings">'full'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="vars">$in_expr</var> = <var class="keywords">false</var>;
               <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var>) {
                 <var class="keywords">if</var> ((0 === <var class="funcs">strcasecmp</var>(<var class="vars">$next</var>, <var class="strings">'join'</var>))
                  || (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>])
                  &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$next</var>, <var class="strings">'outer'</var>)
                  &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>], <var class="strings">'join'</var>))) {
                   <var class="vars">$this</var>-&gt;_setJoinTableTokens(<var class="vars">$table_name</var>, <var class="vars">$table_as</var>, <var class="vars">$stack</var>);
                   <var class="vars">$join_type</var> = <var class="funcs">strtolower</var>(<var class="vars">$token</var>);
                   <var class="vars">$token</var> = <var class="keywords">null</var>;
                 }
               }
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'using'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="vars">$open</var> &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$stack</var>)) {
                 <var class="vars">$slice</var> = <var class="funcs">array_slice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>);
                 <var class="vars">$close_pos</var> = <var class="funcs">array_search</var>(<var class="vars">$close</var>, <var class="vars">$slice</var>);
                 <var class="keywords">if</var> (!<var class="funcs">is_int</var>(<var class="vars">$close_pos</var>)) {
                   <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Parsed error on JOIN(%s)'</var>, <var class="vars">$token</var>);
                   <var class="keywords">break</var> 2;
                 }
                 <var class="vars">$close_pos</var> += <var class="vars">$i</var>;
                 <var class="vars">$on_index</var> = <var class="vars">$k</var>;
                 <var class="vars">$i</var>++;
                 <var class="vars">$in_expr</var> = <var class="keywords">true</var>;
                 <var class="keywords">if</var> (<var class="vars">$base_table</var> == <var class="keywords">null</var>) {
                   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tables</var>[<var class="vars">$index</var> - 1][<var class="strings">'table_name'</var>])) {
                     <var class="vars">$base_table</var> = <var class="vars">$tables</var>[<var class="vars">$index</var> - 1][<var class="strings">'table_name'</var>];
                   } <var class="keywords">else</var> {
                     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Parsed error on JOIN(USING)'</var>);
                     <var class="keywords">break</var> 2;
                   }
                 }
                 <var class="vars">$this</var>-&gt;_setJoinTableTokens(<var class="vars">$table_name</var>, <var class="vars">$table_as</var>, <var class="vars">$stack</var>);
                 <var class="keywords">while</var> (++<var class="vars">$i</var> &lt; <var class="vars">$length</var>) {
                   <var class="vars">$using_token</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var>];
                   <var class="keywords">if</var> (<var class="vars">$i</var> == <var class="vars">$close_pos</var> || <var class="vars">$token</var> === <var class="vars">$close</var>) {
                     <var class="vars">$in_expr</var> = <var class="keywords">false</var>;
                     <var class="keywords">break</var>;
                   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$using_token</var> === <var class="strings">','</var>) {
                     <var class="vars">$join_expr</var>[] = <var class="strings">'&amp;&amp;'</var>;
                   } <var class="keywords">else</var> {
                     <var class="vars">$join_expr</var>[] = <var class="vars">$base_table</var>;
                     <var class="vars">$join_expr</var>[] = <var class="strings">'.'</var>;
                     <var class="vars">$join_expr</var>[] = <var class="vars">$using_token</var>;
                     <var class="vars">$join_expr</var>[] = <var class="strings">'='</var>;
                     <var class="vars">$join_expr</var>[] = <var class="vars">$table_name</var>;
                     <var class="vars">$join_expr</var>[] = <var class="strings">'.'</var>;
                     <var class="vars">$join_expr</var>[] = <var class="vars">$using_token</var>;
                     <var class="vars">$usings</var>[] = <var class="vars">$using_token</var>;
                   }
                 }
                 <var class="vars">$in_expr</var> = <var class="keywords">false</var>;
                 <var class="vars">$token</var> = <var class="keywords">null</var>;
               }
             }
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'on'</var>:
             <var class="keywords">if</var> (<var class="vars">$level</var> === 0) {
               <var class="vars">$on_index</var> = <var class="vars">$i</var>;
               <var class="vars">$this</var>-&gt;_setJoinTableTokens(<var class="vars">$table_name</var>, <var class="vars">$table_as</var>, <var class="vars">$stack</var>);
               <var class="vars">$usings</var> = <var class="keywords">array</var>();
               <var class="vars">$in_expr</var> = <var class="keywords">true</var>;
               <var class="vars">$token</var> = <var class="keywords">null</var>;
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="keywords">break</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
         <var class="keywords">break</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$token</var> != <var class="keywords">null</var>) {
         <var class="keywords">if</var> (<var class="vars">$in_expr</var>) {
           <var class="vars">$join_expr</var>[] = <var class="vars">$token</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$stack</var>[] = <var class="vars">$token</var>;
         }
       }
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="vars">$prev_type</var> != <var class="keywords">null</var>) {
         <var class="vars">$join_type</var> = <var class="vars">$prev_type</var>;
       }
       <var class="comments">// Fixes for NATURAL JOIN</var>
       <var class="vars">$key</var> = <var class="strings">'join_expr'</var>;
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$tables</var>[0][<var class="vars">$key</var>]) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$join_expr</var>)) {
         <var class="vars">$join_expr</var> = <var class="vars">$tables</var>[0][<var class="vars">$key</var>];
         <var class="vars">$tables</var>[0][<var class="vars">$key</var>] = <var class="keywords">array</var>();
       }
       <var class="vars">$key</var> = <var class="strings">'using'</var>;
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$tables</var>[0][<var class="vars">$key</var>]) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$usings</var>)) {
         <var class="vars">$usings</var> = <var class="vars">$tables</var>[0][<var class="vars">$key</var>];
         <var class="vars">$tables</var>[0][<var class="vars">$key</var>] = <var class="keywords">array</var>();
       }
       <var class="vars">$tables</var>[++<var class="vars">$index</var>] = <var class="keywords">array</var>(
         <var class="strings">'table_name'</var> =&gt; <var class="vars">$table_name</var>,
         <var class="strings">'table_as'</var>   =&gt; <var class="vars">$table_as</var>,
         <var class="strings">'join_type'</var>  =&gt; <var class="vars">$join_type</var>,
         <var class="strings">'join_expr'</var>  =&gt; <var class="vars">$join_expr</var>,
         <var class="strings">'using'</var>      =&gt; <var class="vars">$usings</var>
       );
       <var class="vars">$tables</var> = <var class="funcs">array_values</var>(<var class="vars">$tables</var>);
       <var class="vars">$fields</var> = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$tables</var> <var class="keywords">as</var> <var class="vars">$table</var>) {
         <var class="vars">$name</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$table</var>, <var class="strings">'table_name'</var>);
         <var class="vars">$alias</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$table</var>, <var class="strings">'table_as'</var>);
         <var class="keywords">if</var> (<var class="vars">$name</var> != <var class="keywords">null</var>) {
           <var class="vars">$fields</var>[<var class="vars">$name</var>] = <var class="vars">$alias</var>;
         }
       }
       <var class="vars">$this</var>-&gt;_selectTableNames = <var class="vars">$fields</var>;
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onParseAliases)) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;assignJoinTables(<var class="vars">$tables</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$tables</var> <var class="keywords">as</var> <var class="vars">$table</var>) {
           <var class="vars">$name</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$table</var>, <var class="strings">'table_name'</var>);
           <var class="vars">$alias</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$table</var>, <var class="strings">'table_as'</var>);
           <var class="keywords">if</var> (<var class="vars">$name</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$alias</var> != <var class="keywords">null</var>) {
             <var class="vars">$result</var>[<var class="vars">$name</var>] = <var class="vars">$alias</var>;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0520"><h2>
<a name="p_function__setjointabletokens_520">
<var class="function">_setJoinTableTokens</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0520"> <var class="keywords">function</var> _setJoinTableTokens(&amp;<var class="vars">$table_name</var>, &amp;<var class="vars">$table_as</var>, &amp;<var class="vars">$stack</var>){
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$stack</var>)) {
     <var class="vars">$is_subquery</var> = <var class="vars">$this</var>-&gt;isSubSelectFrom(<var class="vars">$stack</var>);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (<var class="vars">$is_subquery</var>) {
         <var class="vars">$this</var>-&gt;appendAliasToken(<var class="vars">$stack</var>);
         <var class="vars">$items</var> = <var class="vars">$this</var>-&gt;parseSubQuery(<var class="vars">$stack</var>, <var class="keywords">true</var>, <var class="keywords">true</var>);
         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$items</var>) &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'tokens'</var>, <var class="vars">$items</var>)) {
           <var class="vars">$tokens</var> = <var class="vars">$items</var>[<var class="strings">'tokens'</var>];
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
             <var class="vars">$table_name</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$tokens</var>);
             <var class="keywords">if</var> (<var class="vars">$table_as</var> == <var class="keywords">null</var>) {
               <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="strings">'alias'</var>, <var class="vars">$items</var>)
                &amp;&amp; <var class="vars">$items</var>[<var class="strings">'alias'</var>] != <var class="keywords">null</var>) {
                 <var class="vars">$table_as</var> = <var class="vars">$items</var>[<var class="strings">'alias'</var>];
               } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="strings">'offset'</var>, <var class="vars">$items</var>)
                       &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'length'</var>, <var class="vars">$items</var>)) {
                 <var class="funcs">array_splice</var>(<var class="vars">$stack</var>, <var class="vars">$items</var>[<var class="strings">'offset'</var>], <var class="vars">$items</var>[<var class="strings">'length'</var>]);
                 <var class="vars">$stub</var> = <var class="funcs">array_splice</var>(<var class="vars">$stack</var>, 0);
                 <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$stub</var>) &amp;&amp; 1 === <var class="funcs">count</var>(<var class="vars">$stub</var>)) {
                   <var class="vars">$table_as</var> = <var class="funcs">array_shift</var>(<var class="vars">$stub</var>);
                 }
               }
             }
           }
         }
       } <var class="keywords">else</var> {
         <var class="vars">$table_name</var> = <var class="funcs">array_shift</var>(<var class="vars">$stack</var>);
         <var class="keywords">if</var> (1 === <var class="funcs">count</var>(<var class="vars">$stack</var>) &amp;&amp; <var class="vars">$table_as</var> == <var class="keywords">null</var>) {
           <var class="vars">$table_as</var> = <var class="funcs">array_shift</var>(<var class="vars">$stack</var>);
         }
       }
     }
     <var class="vars">$stack</var> = <var class="keywords">array</var>();
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0521"><h2>
<a name="p_function_assignjointables_521">
<var class="function">assignJoinTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0521"> <var class="keywords">function</var> assignJoinTables(<var class="vars">$parsed</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$parsed</var>) || !<var class="funcs">is_array</var>(<var class="vars">$parsed</var>) || !<var class="keywords">isset</var>(<var class="vars">$parsed</var>[0])) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse tokens on JOIN'</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$parsed</var>);
     <var class="vars">$check</var> = <var class="keywords">true</var>;
     <var class="vars">$tname</var> = <var class="strings">'table_name'</var>;
     <var class="vars">$alias</var> = <var class="strings">'table_as'</var>;
     <var class="vars">$jtype</var> = <var class="strings">'join_type'</var>;
     <var class="vars">$jexpr</var> = <var class="strings">'join_expr'</var>;
     <var class="keywords">foreach</var> (<var class="keywords">array</var>(<var class="vars">$tname</var>, <var class="vars">$alias</var>, <var class="vars">$jtype</var>, <var class="vars">$jexpr</var>) <var class="keywords">as</var> <var class="vars">$key</var>) {
       <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$reset</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed parsing tokens on JOIN'</var>);
         <var class="vars">$check</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
       }
     }
     <var class="keywords">if</var> (<var class="vars">$check</var>) {
       <var class="vars">$tnames</var> = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$parsed</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$items</var>) {
         <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$items</var>[<var class="vars">$tname</var>]) &amp;&amp; <var class="vars">$items</var>[<var class="vars">$tname</var>] != <var class="keywords">null</var>) {
           <var class="vars">$tnames</var>[<var class="vars">$items</var>[<var class="vars">$tname</var>]] = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$items</var>, <var class="vars">$alias</var>, 1);
         }
       }
       <var class="vars">$aliases</var> = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$tnames</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$val</var>)) {
           <var class="vars">$tnames</var>[<var class="vars">$key</var>] = <var class="vars">$key</var>;
         }
         <var class="vars">$aliases</var>[<var class="vars">$tnames</var>[<var class="vars">$key</var>]] = <var class="vars">$key</var>;
       }
       <var class="vars">$convert_tnames</var> = <var class="keywords">array</var>();
       <var class="vars">$do_convert</var> = <var class="keywords">false</var>;
       <var class="keywords">foreach</var> (<var class="vars">$parsed</var> <var class="keywords">as</var> <var class="vars">$pkey</var> =&gt; <var class="vars">$items</var>) {
         <var class="vars">$convert_tnames</var>[<var class="vars">$pkey</var>] = <var class="keywords">false</var>;
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isSubSelectFrom(<var class="vars">$items</var>[<var class="vars">$tname</var>])) {
           <var class="vars">$convert_tnames</var>[<var class="vars">$pkey</var>] = <var class="keywords">true</var>;
           <var class="vars">$do_convert</var> = <var class="keywords">true</var>;
         }
       }
       <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames = <var class="keywords">array</var>();
       <var class="keywords">if</var> (<var class="vars">$do_convert</var>) {
         <var class="vars">$unique_seed</var> = 0;
         <var class="vars">$new_parsed</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$parsed</var> <var class="keywords">as</var> <var class="vars">$pkey</var> =&gt; <var class="vars">$items</var>) {
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$convert_tnames</var>[<var class="vars">$pkey</var>])) {
             <var class="keywords">do</var> {
               <var class="vars">$unique_tname</var> = <var class="funcs">sprintf</var>(<var class="strings">'_posql_subquery_%d'</var>, <var class="vars">$unique_seed</var>++);
             } <var class="keywords">while</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$unique_tname</var>, <var class="vars">$tnames</var>)
                   || <var class="funcs">array_key_exists</var>(<var class="vars">$unique_tname</var>, <var class="vars">$aliases</var>));
             <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames[<var class="vars">$unique_tname</var>] = <var class="vars">$items</var>[<var class="vars">$tname</var>];
             <var class="vars">$items</var>[<var class="vars">$tname</var>] = <var class="vars">$unique_tname</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames[<var class="vars">$items</var>[<var class="vars">$tname</var>]] = <var class="strings">'&lt;=&gt;'</var>;
           }
           <var class="vars">$new_parsed</var>[<var class="vars">$pkey</var>] = <var class="vars">$items</var>;
         }
         <var class="vars">$parsed</var> = <var class="vars">$new_parsed</var>;
         <var class="keywords">unset</var>(<var class="vars">$new_parsed</var>);
       }
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames)) {
         <var class="vars">$flip_uniqs</var> = <var class="vars">$this</var>-&gt;flipArray(<var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames);
         <var class="vars">$new_tnames</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$tnames</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$flip_uniqs</var>)) {
             <var class="vars">$key</var> = <var class="vars">$flip_uniqs</var>[<var class="vars">$key</var>];
           }
           <var class="vars">$new_tnames</var>[<var class="vars">$key</var>] = <var class="vars">$val</var>;
         }
         <var class="vars">$tnames</var> = <var class="vars">$new_tnames</var>;
         <var class="keywords">unset</var>(<var class="vars">$new_tnames</var>);
         <var class="vars">$new_aliases</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$aliases</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$val</var>, <var class="vars">$flip_uniqs</var>)) {
             <var class="vars">$val</var> = <var class="vars">$flip_uniqs</var>[<var class="vars">$val</var>];
           }
           <var class="vars">$new_aliases</var>[<var class="vars">$key</var>] = <var class="vars">$val</var>;
         }
         <var class="vars">$aliases</var> = <var class="vars">$new_aliases</var>;
         <var class="keywords">unset</var>(<var class="vars">$new_aliases</var>);
       }
       <var class="vars">$tables</var> = <var class="funcs">array_map</var>(<var class="keywords">array</var>(<var class="vars">$this</var>, <var class="strings">'decodeKey'</var>),
                   <var class="funcs">array_filter</var>(<var class="funcs">array_keys</var>(<var class="vars">$this</var>-&gt;meta)));
       <var class="keywords">foreach</var> (<var class="vars">$parsed</var> <var class="keywords">as</var> <var class="vars">$pkey</var> =&gt; <var class="vars">$items</var>) {
         <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$items</var>[<var class="vars">$jexpr</var>], <var class="vars">$items</var>[<var class="vars">$tname</var>])
          &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$items</var>[<var class="vars">$jexpr</var>])) {
           <var class="vars">$expr_vars</var> = <var class="keywords">array</var>();
           <var class="vars">$level</var> = 0;
           <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$items</var>[<var class="vars">$jexpr</var>]);
           <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
             <var class="vars">$h</var> = <var class="vars">$i</var> - 1;
             <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
             <var class="keywords">switch</var> (<var class="vars">$token</var>) {
               <var class="keywords">case</var> <var class="strings">'$'</var>:
               <var class="keywords">case</var> <var class="strings">';'</var>:
               <var class="keywords">case</var> <var class="strings">'`'</var>:
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">'('</var>:
                   <var class="vars">$level</var>++;
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">')'</var>:
                   <var class="vars">$level</var>--;
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">'.'</var>:
                   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>], <var class="vars">$tokens</var>[<var class="vars">$j</var>])) {
                     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$aliases</var>[ <var class="vars">$tokens</var>[<var class="vars">$h</var>] ])) {
                       <var class="vars">$tokens</var>[<var class="vars">$h</var>] = <var class="vars">$aliases</var>[ <var class="vars">$tokens</var>[<var class="vars">$h</var>] ];
                     }
                     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tnames</var>[ <var class="vars">$tokens</var>[<var class="vars">$h</var>] ])
                      || <var class="keywords">isset</var>(<var class="vars">$tables</var>[ <var class="vars">$tokens</var>[<var class="vars">$h</var>] ])) {
                       <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="vars">$tokens</var>[<var class="vars">$h</var>] . <var class="strings">&quot;['&quot;</var> . <var class="vars">$tokens</var>[<var class="vars">$j</var>] . <var class="strings">&quot;']&quot;</var>;
                       <var class="vars">$expr_vars</var>[] = <var class="keywords">array</var>(
                         <var class="strings">'name'</var> =&gt; <var class="vars">$tokens</var>[<var class="vars">$h</var>],
                         <var class="strings">'key'</var>  =&gt; <var class="vars">$tokens</var>[<var class="vars">$j</var>]
                       );
                       <var class="vars">$tokens</var>[<var class="vars">$h</var>] = <var class="vars">$tokens</var>[<var class="vars">$j</var>] = <var class="strings">''</var>;
                       <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="funcs">trim</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var>]), 0, 1) !== <var class="strings">'$'</var>) {
                         <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="strings">'$'</var> . <var class="vars">$tokens</var>[<var class="vars">$i</var>];
                       }
                     }
                   }
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">'='</var>:
                   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>], <var class="vars">$tokens</var>[<var class="vars">$j</var>])
                    &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;autoAssignEquals)) {
                     <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="strings">'=='</var>;
                   }
                   <var class="keywords">break</var>;
               <var class="keywords">default</var>:
                   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$aliases</var>[<var class="vars">$token</var>])) {
                     <var class="vars">$token</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="vars">$aliases</var>[<var class="vars">$token</var>];
                   }
                   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>])) {
                     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$aliases</var>[ <var class="vars">$tokens</var>[<var class="vars">$h</var>] ])) {
                       <var class="vars">$tokens</var>[<var class="vars">$h</var>] = <var class="vars">$aliases</var>[ <var class="vars">$tokens</var>[<var class="vars">$h</var>] ];
                     }
                     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tnames</var>[ <var class="vars">$tokens</var>[<var class="vars">$h</var>] ])
                      || <var class="keywords">isset</var>(<var class="vars">$tables</var>[ <var class="vars">$tokens</var>[<var class="vars">$h</var>] ])) {
                       <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="vars">$tokens</var>[<var class="vars">$h</var>] . <var class="strings">&quot;['&quot;</var> . <var class="vars">$tokens</var>[<var class="vars">$j</var>] . <var class="strings">&quot;']&quot;</var>;
                       <var class="vars">$expr_vars</var>[] = <var class="keywords">array</var>(
                         <var class="strings">'name'</var> =&gt; <var class="vars">$tokens</var>[<var class="vars">$h</var>],
                         <var class="strings">'key'</var>  =&gt; <var class="vars">$tokens</var>[<var class="vars">$j</var>]
                       );
                       <var class="vars">$tokens</var>[<var class="vars">$h</var>] = <var class="vars">$tokens</var>[<var class="vars">$j</var>] = <var class="strings">''</var>;
                       <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="funcs">trim</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var>]), 0, 1) !== <var class="strings">'$'</var>) {
                         <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="strings">'$'</var> . <var class="vars">$tokens</var>[<var class="vars">$i</var>];
                       }
                     }
                   }
                   <var class="keywords">break</var>;
             }
           }
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$expr_vars</var>)) {
             <var class="vars">$exprs</var> = <var class="keywords">array</var>();
             <var class="keywords">foreach</var> (<var class="vars">$expr_vars</var> <var class="keywords">as</var> <var class="vars">$expr_var</var>) {
               <var class="vars">$varname</var> = <var class="strings">'$'</var> . <var class="vars">$this</var>-&gt;trimExtra(<var class="vars">$expr_var</var>[<var class="strings">'name'</var>]);
               <var class="vars">$varkey</var>  = <var class="strings">&quot;'&quot;</var> . <var class="vars">$this</var>-&gt;trimExtra(<var class="vars">$expr_var</var>[<var class="strings">'key'</var>]) . <var class="strings">&quot;'&quot;</var>;
               <var class="vars">$exprs</var>[] = <var class="funcs">sprintf</var>(<var class="strings">'isset(%s[%s])'</var>, <var class="vars">$varname</var>, <var class="vars">$varkey</var>);
             }
             <var class="vars">$exprs</var> = <var class="funcs">array_unique</var>(<var class="vars">$exprs</var>);
             <var class="vars">$exprs</var>[] = <var class="strings">''</var>;
             <var class="vars">$expr</var> = <var class="funcs">implode</var>(<var class="strings">'&amp;&amp;'</var>, <var class="vars">$exprs</var>);
             <var class="funcs">array_unshift</var>(<var class="vars">$tokens</var>, <var class="vars">$expr</var>);
           }
           <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="funcs">array_filter</var>(<var class="vars">$tokens</var>, <var class="strings">'strlen'</var>));
           <var class="vars">$expr</var> = <var class="funcs">trim</var>(<var class="vars">$this</var>-&gt;joinWords(<var class="vars">$tokens</var>), <var class="strings">'&amp;|;'</var>);
           <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$expr</var>) === 0) {
             <var class="vars">$expr</var> = <var class="keywords">true</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;optimizeExpr(<var class="vars">$expr</var>);
           }
           <var class="keywords">switch</var> (<var class="vars">$this</var>-&gt;getEngine()) {
             <var class="keywords">case</var> <var class="strings">'SQL'</var>:
                 <var class="vars">$this</var>-&gt;_onJoinParseExpr = <var class="keywords">true</var>;
                 <var class="keywords">if</var> (!<var class="funcs">is_bool</var>(<var class="vars">$expr</var>)) {
                   <var class="keywords">if</var> (<var class="vars">$expr</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
                     <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$expr</var>);
                   }
                   <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$expr</var>);
                 }
                 <var class="vars">$this</var>-&gt;_onJoinParseExpr = <var class="keywords">null</var>;
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'PHP'</var>:
             <var class="keywords">default</var>:
                 <var class="keywords">break</var>;
           }
           <var class="vars">$parsed</var>[<var class="vars">$pkey</var>][<var class="vars">$jexpr</var>] = <var class="vars">$expr</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$parsed</var>[<var class="vars">$pkey</var>][<var class="vars">$jexpr</var>] = <var class="keywords">true</var>;
         }
       }
       <var class="vars">$result</var> = <var class="vars">$parsed</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0522"><h2>
<a name="p_function_removebackticktoken_522">
<var class="function">removeBacktickToken</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the parsed tokens</dd>
<dt>return</dt>
<dd><em>array</em>   the tokens which has no backticks</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Backtick operator will be ignored for compatibly with MySQL
</pre>
</div></div><pre id="source-0522"> <var class="keywords">function</var> removeBacktickToken(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse the tokens(%s)'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="keywords">if</var> (<var class="vars">$tokens</var>[<var class="vars">$i</var>] === <var class="strings">'`'</var>) {
         <var class="keywords">unset</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var>]);
       }
     }
     <var class="vars">$result</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="keywords">unset</var>(<var class="vars">$tokens</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0523"><h2>
<a name="p_function_removecorrelations_523">
<var class="function">removeCorrelations</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0523"> <var class="keywords">function</var> removeCorrelations(&amp;<var class="vars">$rows</var>){
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
     <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
       <var class="keywords">foreach</var> (<var class="vars">$rows</var>[<var class="vars">$i</var>] <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$key</var>, <var class="strings">'.'</var>) !== <var class="keywords">false</var>) {
           <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$key</var>]);
         }
       }
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0524"><h2>
<a name="p_function_removecorrelationname_524">
<var class="function">removeCorrelationName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0524"> <var class="keywords">function</var> removeCorrelationName(&amp;<var class="vars">$rows</var>){
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
     <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
       <var class="vars">$correlations</var> = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>]) <var class="keywords">as</var> <var class="vars">$key</var>) {
         <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$key</var>, <var class="strings">'.'</var>) !== <var class="keywords">false</var>) {
           <var class="keywords">list</var>(<var class="vars">$table</var>, <var class="vars">$column</var>) = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$key</var>);
           <var class="vars">$correlations</var>[<var class="vars">$key</var>] = <var class="vars">$column</var>;
         }
       }
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$correlations</var>)) {
         <var class="vars">$new_row</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$rows</var>[<var class="vars">$i</var>] <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$correlations</var>)) {
             <var class="vars">$new_row</var>[<var class="vars">$correlations</var>[<var class="vars">$key</var>]] = <var class="vars">$val</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$new_row</var>[<var class="vars">$key</var>] = <var class="vars">$val</var>;
           }
         }
         <var class="vars">$rows</var>[<var class="vars">$i</var>] = <var class="vars">$new_row</var>;
       }
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0525"><h2>
<a name="p_function_concatcorrelationtoken_525">
<var class="function">concatCorrelationToken</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the parsed tokens</dd>
<dt>return</dt>
<dd><em>array</em>   the tokens which was concatenated by dot</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> To maintain the form of &quot;correlation.columnname&quot;
  from the token as the array, it unites by dot (.)
</pre>
</div></div><pre id="source-0525"> <var class="keywords">function</var> concatCorrelationToken(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse the correlative tokens(%s)'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="vars">$h</var> = <var class="vars">$i</var> - 1;
       <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
       <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>])) {
         <var class="vars">$prev</var> = &amp; <var class="vars">$tokens</var>[<var class="vars">$h</var>];
       } <var class="keywords">else</var> {
         <var class="keywords">unset</var>(<var class="vars">$prev</var>);
         <var class="vars">$prev</var> = <var class="keywords">null</var>;
       }
       <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>])) {
         <var class="vars">$next</var> = &amp; <var class="vars">$tokens</var>[<var class="vars">$j</var>];
       } <var class="keywords">else</var> {
         <var class="keywords">unset</var>(<var class="vars">$next</var>);
         <var class="vars">$next</var> = <var class="keywords">null</var>;
       }
       <var class="vars">$token</var> = &amp; <var class="vars">$tokens</var>[<var class="vars">$i</var>];
       <var class="keywords">switch</var> (<var class="vars">$token</var>) {
         <var class="keywords">case</var> <var class="strings">'.'</var>:
             <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$next</var> != <var class="keywords">null</var>) {
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isWord(<var class="vars">$prev</var>)
                &amp;&amp; (<var class="vars">$this</var>-&gt;isWord(<var class="vars">$next</var>) || <var class="vars">$next</var> === <var class="strings">'*'</var>)) {
                 <var class="vars">$token</var> = <var class="vars">$prev</var> . <var class="vars">$token</var> . <var class="vars">$next</var>;
                 <var class="vars">$prev</var> = <var class="keywords">null</var>;
                 <var class="vars">$next</var> = <var class="keywords">null</var>;
               } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="funcs">is_numeric</var>(<var class="vars">$prev</var>) &amp;&amp; !<var class="funcs">is_numeric</var>(<var class="vars">$next</var>)) {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax,'</var>
                               .  <var class="strings">' expect (correlation.column)'</var>);
                 <var class="vars">$tokens</var> = <var class="keywords">array</var>();
                 <var class="keywords">break</var> 2;
               }
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="keywords">break</var>;
       }
     }
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$tokens</var>)) {
       <var class="vars">$result</var> = <var class="keywords">array</var>();
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$token</var>, <var class="vars">$prev</var>, <var class="vars">$next</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0526"><h2>
<a name="p_function_splitcorrelationtoken_526">
<var class="function">splitCorrelationToken</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the parsed tokens</dd>
<dt>return</dt>
<dd><em>array</em>   the tokens which was split by dot</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> To maintain the form of &quot;correlation.columnname&quot;
  from the token as the array, it divide by dot (.)
</pre>
</div></div><pre id="source-0526"> <var class="keywords">function</var> splitCorrelationToken(<var class="vars">$tokens</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse the correlative tokens(%s)'</var>, <var class="vars">$tokens</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="vars">$dot</var> = <var class="strings">'.'</var>;
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="vars">$token</var> = &amp; <var class="vars">$tokens</var>[<var class="vars">$i</var>];
       <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$token</var>, <var class="vars">$dot</var>) !== <var class="keywords">false</var>) {
         <var class="vars">$parts</var> = <var class="funcs">explode</var>(<var class="vars">$dot</var>, <var class="vars">$token</var>);
         <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$parts</var>) === 2) {
           <var class="keywords">list</var>(<var class="vars">$correlation</var>, <var class="vars">$column</var>) = <var class="vars">$parts</var>;
           <var class="keywords">if</var> (<var class="vars">$correlation</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$column</var> != <var class="keywords">null</var>
            &amp;&amp; <var class="vars">$this</var>-&gt;isWord(<var class="vars">$correlation</var>)
            &amp;&amp; (<var class="vars">$this</var>-&gt;isWord(<var class="vars">$column</var>) || <var class="vars">$column</var> === <var class="strings">'*'</var>)) {
             <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, 1,
               <var class="keywords">array</var>(
                 <var class="vars">$correlation</var>,
                 <var class="vars">$dot</var>,
                 <var class="vars">$column</var>
               )
             );
             <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
           }
         }
       }
       <var class="keywords">unset</var>(<var class="vars">$token</var>);
     }
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$tokens</var>)) {
       <var class="vars">$result</var> = <var class="keywords">array</var>();
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0527"><h2>
<a name="p_function_getrightoperandbysql_527">
<var class="function">getRightOperandBySQL</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the parsed tokens as an array</dd>
<dt>param</dt>
<dd><em>number</em>   the start number of token&#039;s index</dd>
<dt>param</dt>
<dd><em>string</em>   the token of current operator</dd>
<dt>return</dt>
<dd><em>string</em>   the operand, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Gets the operand from right directive tokens
</pre>
</div></div><pre id="source-0527"> <var class="keywords">function</var> getRightOperandBySQL(&amp;<var class="vars">$tokens</var>, <var class="vars">$start_idx</var>, <var class="vars">$token</var>){
   <var class="comments">//TODO: unidentified</var>
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$i</var> = <var class="vars">$start_idx</var> - 1;
   <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
   <var class="vars">$k</var> = <var class="vars">$j</var> + 1;
   <var class="vars">$l</var> = <var class="vars">$k</var> + 1;
   <var class="vars">$open</var>  = <var class="strings">'('</var>;
   <var class="vars">$close</var> = <var class="strings">')'</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)
    &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var>], <var class="vars">$tokens</var>[<var class="vars">$j</var>])) {
     <var class="keywords">if</var> (<var class="vars">$tokens</var>[<var class="vars">$j</var>] === <var class="vars">$open</var>) {
       <var class="vars">$nest</var>  = 0;
       <var class="vars">$idx</var>   = <var class="vars">$i</var>;
       <var class="vars">$stack</var> = <var class="keywords">array</var>();
       <var class="keywords">while</var> (<var class="vars">$nest</var> &gt;= 0 &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[++<var class="vars">$idx</var>])) {
         <var class="vars">$op</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
         <var class="vars">$tokens</var>[<var class="vars">$idx</var>] = <var class="strings">''</var>;
         <var class="keywords">if</var> (<var class="vars">$op</var> === <var class="vars">$open</var>) {
           <var class="vars">$nest</var>++;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$op</var> === <var class="vars">$close</var>) {
           <var class="vars">$nest</var>--;
         }
         <var class="vars">$stack</var>[] = <var class="vars">$op</var>;
         <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[++<var class="vars">$idx</var>]) &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$idx</var>] != <var class="keywords">null</var>) {
             <var class="vars">$stack</var>[] = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
             <var class="vars">$tokens</var>[<var class="vars">$idx</var>] = <var class="strings">''</var>;
           }
           <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$stack</var>) || !<var class="funcs">is_array</var>(<var class="vars">$stack</var>)) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="vars">$stack</var>;
       }
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>], <var class="vars">$tokens</var>[<var class="vars">$l</var>])
        &amp;&amp; (<var class="vars">$tokens</var>[<var class="vars">$k</var>] === <var class="strings">'||'</var> || <var class="vars">$tokens</var>[<var class="vars">$k</var>] === <var class="strings">'.'</var>)
        &amp;&amp; !<var class="funcs">is_numeric</var>(<var class="vars">$tokens</var>[<var class="vars">$l</var>])) {
         <var class="vars">$result</var> = <var class="keywords">array</var>();
         <var class="vars">$idx</var> = <var class="vars">$i</var>;
         <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[++<var class="vars">$idx</var>])) {
           <var class="vars">$op</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
           <var class="keywords">if</var> (<var class="vars">$op</var> === <var class="strings">''</var> || <var class="vars">$op</var> === <var class="keywords">null</var>) {
             <var class="keywords">continue</var>;
           }
           <var class="keywords">if</var> ((<var class="vars">$op</var> === <var class="strings">'||'</var> || <var class="vars">$op</var> === <var class="strings">'.'</var>)
            || <var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$op</var>)) {
             <var class="vars">$result</var>[] = <var class="vars">$op</var>;
             <var class="vars">$tokens</var>[<var class="vars">$idx</var>] = <var class="strings">''</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">break</var>;
           }
         }
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="keywords">array</var>(<var class="vars">$tokens</var>[<var class="vars">$j</var>]);
         <var class="vars">$tokens</var>[<var class="vars">$j</var>] = <var class="strings">''</var>;
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$result</var> === <var class="keywords">false</var>) {
     <var class="vars">$token</var> = <var class="funcs">strtoupper</var>(<var class="vars">$token</var>);
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect(%s) operand'</var>, <var class="vars">$token</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0528"><h2>
<a name="p_function_getleftoperandbysql_528">
<var class="function">getLeftOperandBySQL</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the parsed tokens as an array</dd>
<dt>param</dt>
<dd><em>number</em>   the start number of token&#039;s index</dd>
<dt>param</dt>
<dd><em>string</em>   the token of current operator</dd>
<dt>return</dt>
<dd><em>string</em>   the operand, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Gets the operand from left directive tokens
</pre>
</div></div><pre id="source-0528"> <var class="keywords">function</var> getLeftOperandBySQL(&amp;<var class="vars">$tokens</var>, <var class="vars">$start_idx</var>, <var class="vars">$token</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$i</var> = <var class="vars">$start_idx</var> + 1;
   <var class="vars">$h</var> = <var class="vars">$i</var> - 1;
   <var class="vars">$g</var> = <var class="vars">$h</var> - 1;
   <var class="vars">$f</var> = <var class="vars">$g</var> - 1;
   <var class="vars">$open</var>  = <var class="strings">'('</var>;
   <var class="vars">$close</var> = <var class="strings">')'</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)
    &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var>], <var class="vars">$tokens</var>[<var class="vars">$h</var>])) {
     <var class="keywords">if</var> (<var class="vars">$tokens</var>[<var class="vars">$h</var>] === <var class="vars">$close</var>) {
       <var class="vars">$nest</var>  = 0;
       <var class="vars">$idx</var>   = <var class="vars">$i</var>;
       <var class="vars">$stack</var> = <var class="keywords">array</var>();
       <var class="keywords">while</var> (<var class="vars">$nest</var> &gt;= 0 &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[--<var class="vars">$idx</var>])) {
         <var class="vars">$op</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
         <var class="vars">$tokens</var>[<var class="vars">$idx</var>] = <var class="strings">''</var>;
         <var class="keywords">if</var> (<var class="vars">$op</var> === <var class="vars">$open</var>) {
           <var class="vars">$nest</var>--;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$op</var> === <var class="vars">$close</var>) {
           <var class="vars">$nest</var>++;
         }
         <var class="funcs">array_unshift</var>(<var class="vars">$stack</var>, <var class="vars">$op</var>);
         <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[--<var class="vars">$idx</var>]) &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$idx</var>] != <var class="keywords">null</var>) {
             <var class="funcs">array_unshift</var>(<var class="vars">$stack</var>, <var class="vars">$tokens</var>[<var class="vars">$idx</var>]);
             <var class="vars">$tokens</var>[<var class="vars">$idx</var>] = <var class="strings">''</var>;
           }
           <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$stack</var>) || !<var class="funcs">is_array</var>(<var class="vars">$stack</var>)) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="vars">$stack</var>;
       }
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$g</var>], <var class="vars">$tokens</var>[<var class="vars">$f</var>])
        &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$g</var>] === <var class="strings">'.'</var> &amp;&amp; !<var class="funcs">is_numeric</var>(<var class="vars">$tokens</var>[<var class="vars">$f</var>])) {
         <var class="vars">$result</var> = <var class="keywords">array</var>();
         <var class="vars">$idx</var> = <var class="vars">$i</var>;
         <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[--<var class="vars">$idx</var>])) {
           <var class="vars">$op</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
           <var class="keywords">if</var> (<var class="vars">$op</var> === <var class="strings">''</var> || <var class="vars">$op</var> === <var class="keywords">null</var>) {
             <var class="keywords">continue</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$op</var> === <var class="strings">'.'</var> || <var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$op</var>)) {
             <var class="funcs">array_unshift</var>(<var class="vars">$result</var>, <var class="vars">$op</var>);
             <var class="vars">$tokens</var>[<var class="vars">$idx</var>] = <var class="strings">''</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">break</var>;
           }
         }
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="keywords">array</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>]);
         <var class="vars">$tokens</var>[<var class="vars">$h</var>] = <var class="strings">''</var>;
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$result</var> === <var class="keywords">false</var>) {
     <var class="vars">$token</var> = <var class="funcs">strtoupper</var>(<var class="vars">$token</var>);
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect(%s) operand'</var>, <var class="vars">$token</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0529"><h2>
<a name="p_function_replaceexprbysql_529">
<var class="function">replaceExprBySQL</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the expression, or the SQL syntax</dd>
<dt>return</dt>
<dd><em>array</em>   the parsed tokens which were replaced available of Posql</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Replaces from the standard SQL syntax to the Expression
   which be able to handled on Posql
                 (or FALSE on error)
</pre>
</div></div><pre id="source-0529"> <var class="keywords">function</var> replaceExprBySQL(<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$is_error</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;_caseCount = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isParsedExpr(<var class="vars">$expr</var>)) {
     <var class="vars">$result</var> = <var class="vars">$expr</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$expr</var>);
     }
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse the tokens(%s) as SQL mode'</var>, <var class="vars">$expr</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$expr</var>);
       <var class="keywords">unset</var>(<var class="vars">$expr</var>);
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;removeBacktickToken(<var class="vars">$tokens</var>);
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;concatCorrelationToken(<var class="vars">$tokens</var>);
       <var class="vars">$result</var> = <var class="keywords">array</var>();
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="funcs">count</var>(<var class="vars">$tokens</var>); <var class="vars">$i</var>++) {
         <var class="vars">$is_error</var> = <var class="vars">$this</var>-&gt;replaceTokenBySQL(<var class="vars">$tokens</var>, <var class="vars">$i</var>);
         <var class="keywords">if</var> (<var class="vars">$is_error</var>) {
           <var class="vars">$result</var> = <var class="keywords">false</var>;
           <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (!<var class="vars">$is_error</var>) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;splitCorrelationToken(<var class="vars">$tokens</var>);
         <var class="keywords">unset</var>(<var class="vars">$tokens</var>);
         <var class="vars">$this</var>-&gt;addParsedMark(<var class="vars">$result</var>);
       }
     }
   }
   <var class="vars">$this</var>-&gt;_caseCount = <var class="keywords">null</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0530"><h2>
<a name="p_function_replacetokenbysql_530">
<var class="function">replaceTokenBySQL</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>  the tokens which is parsing</dd>
<dt>param</dt>
<dd><em>number</em> the number of current index in parsing</dd>
<dt>return</dt>
<dd><em>array</em>  the parsed tokens which were replaced available of Posql</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Replaces the tokens from the standard SQL syntax
  which be able to available on Posql
</pre>
</div></div><pre id="source-0530"> <var class="keywords">function</var> replaceTokenBySQL(&amp;<var class="vars">$tokens</var>, &amp;<var class="vars">$index</var>){
   <var class="vars">$is_error</var> = <var class="keywords">false</var>;
   <var class="vars">$i</var> = &amp; <var class="vars">$index</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>) || !<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$tokens</var>)) {
     <var class="vars">$error_token</var> = <var class="vars">$tokens</var>;
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$error_token</var>)) {
       <var class="vars">$error_token</var> = <var class="funcs">implode</var>(<var class="strings">', '</var>, <var class="vars">$error_token</var>);
     }
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot parse the tokens(%s) as SQL mode'</var>,
                      <var class="vars">$error_token</var>);
     <var class="vars">$is_error</var> = <var class="keywords">true</var>;
     <var class="keywords">unset</var>(<var class="vars">$error_token</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$g</var> = <var class="vars">$i</var> - 2;
     <var class="vars">$h</var> = <var class="vars">$i</var> - 1;
     <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
     <var class="vars">$k</var> = <var class="vars">$j</var> + 1;
     <var class="vars">$l</var> = <var class="vars">$k</var> + 1;
     <var class="vars">$prev</var> = <var class="strings">''</var>;
     <var class="vars">$next</var> = <var class="strings">''</var>;
     <var class="vars">$level</var> = 0;
     <var class="vars">$open</var>  = <var class="strings">'('</var>;
     <var class="vars">$close</var> = <var class="strings">')'</var>;
     <var class="vars">$token</var> = &amp; <var class="vars">$tokens</var>[<var class="vars">$i</var>];
     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$h</var>, <var class="vars">$tokens</var>)) {
       <var class="vars">$prev</var> = &amp; <var class="vars">$tokens</var>[<var class="vars">$h</var>];
     }
     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$j</var>, <var class="vars">$tokens</var>)) {
       <var class="vars">$next</var> = &amp; <var class="vars">$tokens</var>[<var class="vars">$j</var>];
     }
     <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
       <var class="keywords">case</var> <var class="strings">'not'</var>:
       <var class="keywords">case</var> <var class="strings">'!'</var>:
           <var class="keywords">if</var> (<var class="vars">$prev</var> === <var class="strings">'=='</var> || <var class="funcs">strtolower</var>(<var class="vars">$prev</var>) === <var class="strings">'is'</var>) {
             <var class="vars">$token</var> = <var class="strings">'!='</var>;
             <var class="vars">$prev</var> = <var class="strings">''</var>;
           } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$prev</var> === <var class="strings">'==='</var>) {
             <var class="vars">$token</var> = <var class="strings">'!=='</var>;
             <var class="vars">$prev</var> = <var class="strings">''</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$token</var> = <var class="strings">'!'</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'is'</var>:
       <var class="keywords">case</var> <var class="strings">'='</var>:
           <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="strings">'!'</var> || <var class="funcs">strtolower</var>(<var class="vars">$next</var>) === <var class="strings">'not'</var>) {
             <var class="vars">$next</var>  = <var class="strings">''</var>;
             <var class="vars">$token</var> = <var class="strings">'!='</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$token</var> = <var class="strings">'=='</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'isnull'</var>:
           <var class="comments">// expression ISNULL</var>
           <var class="keywords">if</var> (<var class="vars">$next</var> !== <var class="vars">$open</var> &amp;&amp; <var class="vars">$prev</var> != <var class="keywords">null</var>) {
             <var class="vars">$isnull</var> = <var class="keywords">array</var>(<var class="strings">'==='</var>, <var class="strings">'null'</var>);
             <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, 1, <var class="vars">$isnull</var>);
             <var class="keywords">unset</var>(<var class="vars">$isnull</var>);
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'notnull'</var>:
           <var class="comments">// expression NOTNULL</var>
           <var class="keywords">if</var> (<var class="vars">$next</var> !== <var class="vars">$open</var> &amp;&amp; <var class="vars">$prev</var> != <var class="keywords">null</var>) {
             <var class="vars">$notnull</var> = <var class="keywords">array</var>(<var class="strings">'!=='</var>, <var class="strings">'null'</var>);
             <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, 1, <var class="vars">$notnull</var>);
             <var class="keywords">unset</var>(<var class="vars">$notnull</var>);
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'coalesce'</var>:
       <var class="keywords">case</var> <var class="strings">'ifnull'</var>:
       <var class="keywords">case</var> <var class="strings">'nvl'</var>:
            <var class="comments">// ---------------------------</var>
            <var class="comments">// COALESCE ( value [, ...] )</var>
            <var class="comments">// ---------------------------</var>
            <var class="comments">// IFNULL ( expr1, expr2 )</var>
            <var class="comments">// ---------------------------</var>
            <var class="comments">// NVL ( expr1 , expr2 )</var>
            <var class="comments">// ---------------------------</var>
            <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="vars">$open</var>) {
              <var class="comments">//TODO: parse right operand</var>
              <var class="keywords">break</var>;
              <var class="vars">$idx</var> = <var class="vars">$i</var> + 1;
              <var class="vars">$nest</var> = 0;
              <var class="vars">$exprs</var> = <var class="keywords">array</var>();
              <var class="vars">$stack</var> = <var class="keywords">array</var>();
              <var class="vars">$prev_opd</var> = <var class="keywords">null</var>;
              <var class="vars">$open_count</var> = 0;
              <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                <var class="vars">$opd</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                <var class="keywords">switch</var> (<var class="vars">$opd</var>) {
                  <var class="keywords">case</var> <var class="strings">'('</var>:
                      <var class="vars">$nest</var>++;
                      <var class="vars">$stack</var>[] = <var class="vars">$opd</var>;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">')'</var>:
                      <var class="vars">$nest</var>--;
                      <var class="vars">$stack</var>[] = <var class="vars">$opd</var>;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">','</var>:
                      <var class="vars">$prev_opd</var> = <var class="vars">$stack</var>;
                      <var class="vars">$stack</var> = <var class="keywords">array</var>();
                      <var class="keywords">if</var> (<var class="vars">$open_count</var> === 0) {
                        <var class="keywords">if</var> (<var class="funcs">reset</var>(<var class="vars">$prev_opd</var>) === <var class="vars">$open</var>) {
                          <var class="funcs">array_shift</var>(<var class="vars">$prev_opd</var>);
                        }
                        <var class="vars">$exprs</var>[] = <var class="vars">$open</var>;
                        <var class="vars">$open_count</var>++;
                      }
                      <var class="vars">$exprs</var>[] = <var class="keywords">array</var>(
                        <var class="vars">$prev_opd</var>, <var class="strings">'!=='</var>, <var class="strings">'null'</var>, <var class="strings">'?'</var>,
                        <var class="vars">$prev_opd</var>, <var class="strings">':'</var>,
                        <var class="vars">$open</var>
                      );
                      <var class="vars">$open_count</var>++;
                      <var class="keywords">break</var>;
                  <var class="keywords">default</var>:
                      <var class="vars">$stack</var>[] = <var class="vars">$opd</var>;
                      <var class="keywords">break</var>;
                }
                <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                  <var class="keywords">if</var> (<var class="funcs">end</var>(<var class="vars">$stack</var>) === <var class="vars">$close</var>) {
                    <var class="funcs">array_pop</var>(<var class="vars">$stack</var>);
                  }
                  <var class="vars">$prev_opd</var> = <var class="vars">$stack</var>;
                  <var class="vars">$stack</var> = <var class="keywords">array</var>();
                  <var class="vars">$exprs</var>[] = <var class="keywords">array</var>(
                    <var class="vars">$prev_opd</var>, <var class="strings">'!=='</var>, <var class="strings">'null'</var>, <var class="strings">'?'</var>,
                    <var class="vars">$prev_opd</var>, <var class="strings">':'</var>,   <var class="strings">'null'</var>
                  );
                  <var class="keywords">break</var>;
                }
                ++<var class="vars">$idx</var>;
              }
              <var class="keywords">while</var> (--<var class="vars">$open_count</var> &gt;= 0) {
                <var class="vars">$exprs</var>[] = <var class="vars">$close</var>;
              }
              <var class="vars">$exprs</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$exprs</var>);
              <var class="vars">$check</var> = <var class="funcs">array_count_values</var>(<var class="vars">$exprs</var>);
              <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$check</var>[<var class="vars">$open</var>], <var class="vars">$check</var>[<var class="vars">$close</var>])
               &amp;&amp; <var class="vars">$check</var>[<var class="vars">$open</var>] === <var class="vars">$check</var>[<var class="vars">$close</var>]) {
                <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$idx</var> - <var class="vars">$i</var> + 1, <var class="vars">$exprs</var>);
              } <var class="keywords">else</var> {
                <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect (%s) at end'</var>,
                                 <var class="funcs">strtoupper</var>(<var class="vars">$token</var>));
                <var class="vars">$is_error</var> = <var class="keywords">true</var>;
              }
              <var class="keywords">unset</var>(<var class="vars">$exprs</var>, <var class="vars">$check</var>, <var class="vars">$stack</var>, <var class="vars">$prev_opd</var>, <var class="vars">$opd</var>);
            } <var class="keywords">else</var> {
              <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect (%s) at end'</var>,
                               <var class="funcs">strtoupper</var>(<var class="vars">$token</var>));
              <var class="vars">$is_error</var> = <var class="keywords">true</var>;
            }
            <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'nullif'</var>:
            <var class="comments">// -------------------------------------------------</var>
            <var class="comments">// NULLIF(expr1, expr2)</var>
            <var class="comments">// -------------------------------------------------</var>
            <var class="comments">//   eq</var>
            <var class="comments">// -------------------------------------------------</var>
            <var class="comments">// CASE WHEN expr1 = expr2 THEN NULL ELSE expr1 END</var>
            <var class="comments">// -------------------------------------------------</var>
            <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="vars">$open</var>) {
              <var class="comments">//TODO: parse right operand</var>
              <var class="keywords">break</var>;
              <var class="vars">$idx</var> = <var class="vars">$i</var> + 1;
              <var class="vars">$nest</var> = 0;
              <var class="vars">$nf_index</var> = 0;
              <var class="vars">$nf_exprs</var> = <var class="keywords">array</var>(0 =&gt; <var class="keywords">array</var>(),
                                1 =&gt; <var class="keywords">array</var>());
              <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                <var class="vars">$opd</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                <var class="keywords">switch</var> (<var class="vars">$opd</var>) {
                  <var class="keywords">case</var> <var class="strings">'('</var>:
                      <var class="vars">$nest</var>++;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">')'</var>:
                      <var class="vars">$nest</var>--;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">','</var>:
                      <var class="vars">$nf_index</var> = 1;
                  <var class="keywords">default</var>:
                      <var class="keywords">break</var>;
                }
                <var class="keywords">if</var> (<var class="vars">$opd</var> !== <var class="strings">','</var>) {
                  <var class="vars">$nf_exprs</var>[<var class="vars">$nf_index</var>][] = <var class="vars">$opd</var>;
                }
                <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                  <var class="keywords">break</var>;
                }
                ++<var class="vars">$idx</var>;
              }
              <var class="keywords">foreach</var> (<var class="keywords">array</var>(0, 1) <var class="keywords">as</var> <var class="vars">$nf_index</var>) {
                <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$nf_exprs</var>[<var class="vars">$nf_index</var>]) === 0) {
                  <var class="vars">$nf_exprs</var>[<var class="vars">$nf_index</var>] = <var class="keywords">array</var>(<var class="strings">'null'</var>);
                }
              }
              <var class="vars">$nf_expr</var> = <var class="keywords">array</var>(
                <var class="strings">'('</var>,
                <var class="vars">$nf_exprs</var>[0], <var class="strings">'='</var>, <var class="vars">$nf_exprs</var>[1],
                              <var class="strings">'?'</var>, <var class="strings">'null'</var>,
                              <var class="strings">':'</var>, <var class="vars">$nf_exprs</var>[0],
                <var class="strings">')'</var>
              );
              <var class="vars">$nf_expr</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$nf_expr</var>);
              <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$idx</var> - <var class="vars">$i</var>, <var class="vars">$nf_expr</var>);
              <var class="vars">$stack</var> = <var class="keywords">array</var>();
              <var class="keywords">unset</var>(<var class="vars">$nf_expr</var>, <var class="vars">$nf_exprs</var>, <var class="vars">$nf_index</var>);
            } <var class="keywords">else</var> {
              <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect NULLIF(%s)'</var>, <var class="vars">$next</var>);
              <var class="vars">$is_error</var> = <var class="keywords">true</var>;
            }
            <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'cast'</var>:
       <var class="keywords">case</var> <var class="strings">'convert'</var>:
       <var class="keywords">case</var> <var class="strings">'translate'</var>:
            <var class="comments">// --------------------------------------------------</var>
            <var class="comments">// CAST (expr AS type)</var>
            <var class="comments">// --------------------------------------------------</var>
            <var class="comments">// CONVERT (expr, type)</var>
            <var class="comments">// --------------------------------------------------</var>
            <var class="comments">// CONVERT (string, dest_charset [, source_charset] )</var>
            <var class="comments">// --------------------------------------------------</var>
            <var class="comments">// SQL99 Syntax</var>
            <var class="comments">// --------------------------------------------</var>
            <var class="comments">// CONVERT (char_value target_char_set</var>
            <var class="comments">//          USING form_of_use source_char_name)</var>
            <var class="comments">// --------------------------------------------------</var>
            <var class="comments">// TRANSLATE (char_value target_char_set</var>
            <var class="comments">//            USING translation_name)</var>
            <var class="comments">// --------------------------------------------------</var>
            <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="vars">$open</var>) {
              <var class="vars">$idx</var> = <var class="vars">$i</var> + 1;
              <var class="vars">$nest</var> = 0;
              <var class="comments">//$args_count = 0;</var>
              <var class="vars">$stack</var> = <var class="keywords">array</var>(<var class="vars">$token</var>);
              <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                <var class="vars">$opd</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$opd</var>)) {
                  <var class="keywords">case</var> <var class="strings">'('</var>:
                      <var class="vars">$nest</var>++;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">')'</var>:
                      <var class="vars">$nest</var>--;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">','</var>:
                      <var class="comments">/*
                      // It will not convert it yet now though
                      // it might be appropriate to handle as CAST
                      //  when the argument is delimited by the comma
                      //  because it is not so general.
                      if (strtolower($token) === 'convert') {
                        $token = 'CAST';
                        array_shift($stack);
                        array_unshift($stack, $token);
                      }
                      */</var>
                  <var class="keywords">case</var> <var class="strings">'as'</var>:
                  <var class="keywords">case</var> <var class="strings">'using'</var>:
                      <var class="vars">$next_idx</var> = <var class="vars">$idx</var> + 1;
                      <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$next_idx</var>])) {
                        <var class="vars">$next_opd</var> = &amp; <var class="vars">$tokens</var>[<var class="vars">$next_idx</var>];
                        <var class="keywords">if</var> (<var class="vars">$next_opd</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$this</var>-&gt;isWord(<var class="vars">$next_opd</var>)) {
                          <var class="vars">$next_opd</var> = <var class="vars">$this</var>-&gt;toStringToken(<var class="vars">$next_opd</var>);
                        }
                        <var class="keywords">unset</var>(<var class="vars">$next_opd</var>);
                      }
                      <var class="keywords">unset</var>(<var class="vars">$next_idx</var>);
                      <var class="vars">$opd</var> = <var class="strings">','</var>;
                      <var class="keywords">break</var>;
                  <var class="keywords">default</var>:
                      <var class="keywords">break</var>;
                }
                <var class="vars">$stack</var>[] = <var class="vars">$opd</var>;
                <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                  <var class="keywords">break</var>;
                }
                ++<var class="vars">$idx</var>;
              }
              <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$idx</var> - <var class="vars">$i</var> + 1, <var class="vars">$stack</var>);
              <var class="vars">$stack</var> = <var class="keywords">array</var>();
            } <var class="keywords">else</var> {
              <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect %s(%s)'</var>,
                               <var class="funcs">strtoupper</var>(<var class="vars">$token</var>), <var class="vars">$next</var>);
              <var class="vars">$is_error</var> = <var class="keywords">true</var>;
            }
            <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'substring'</var>:
            <var class="comments">// --------------------------------------</var>
            <var class="comments">// SQL99 Syntax</var>
            <var class="comments">// --------------------------------------</var>
            <var class="comments">// SUBSTRING (  extraction_string</var>
            <var class="comments">//      FROM    starting_position</var>
            <var class="comments">//    [ FOR     length ]</var>
            <var class="comments">//    [ COLLATE collation_name ]</var>
            <var class="comments">// )</var>
            <var class="comments">// --------------------------------------</var>
            <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="vars">$open</var>) {
              <var class="vars">$idx</var> = <var class="vars">$i</var> + 1;
              <var class="vars">$nest</var> = 0;
              <var class="vars">$stack</var> = <var class="keywords">array</var>(<var class="vars">$token</var>);
              <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                <var class="vars">$opd</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$opd</var>)) {
                  <var class="keywords">case</var> <var class="strings">'('</var>:
                      <var class="vars">$nest</var>++;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">')'</var>:
                      <var class="vars">$nest</var>--;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">'from'</var>:
                  <var class="keywords">case</var> <var class="strings">'for'</var>:
                  <var class="keywords">case</var> <var class="strings">'collate'</var>:
                      <var class="vars">$opd</var> = <var class="strings">','</var>;
                      <var class="keywords">break</var>;
                  <var class="keywords">default</var>:
                      <var class="keywords">break</var>;
                }
                <var class="vars">$stack</var>[] = <var class="vars">$opd</var>;
                <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                  <var class="keywords">break</var>;
                }
                ++<var class="vars">$idx</var>;
              }
              <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$idx</var> - <var class="vars">$i</var> + 1, <var class="vars">$stack</var>);
              <var class="vars">$stack</var> = <var class="keywords">array</var>();
            } <var class="keywords">else</var> {
              <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect SUBSTRING(%s)'</var>,
                               <var class="vars">$next</var>);
              <var class="vars">$is_error</var> = <var class="keywords">true</var>;
            }
            <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'trim'</var>:
            <var class="comments">// SQL99 Syntax</var>
            <var class="comments">// ------------------------------------------------------------</var>
            <var class="comments">// TRIM (</var>
            <var class="comments">//    [</var>
            <var class="comments">//      [ {LEADING | TRAILING | BOTH} ]</var>
            <var class="comments">//      [ removal_string ]</var>
            <var class="comments">//      FROM</var>
            <var class="comments">//    ]</var>
            <var class="comments">//    target_string</var>
            <var class="comments">//    [ COLLATE collation_name ]</var>
            <var class="comments">// )</var>
            <var class="comments">// ------------------------------------------------------------</var>
            <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="vars">$open</var>) {
              <var class="vars">$idx</var> = <var class="vars">$i</var> + 1;
              <var class="vars">$nest</var> = 0;
              <var class="vars">$stack</var> = <var class="keywords">array</var>(<var class="vars">$token</var>);
              <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                <var class="vars">$opd</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$opd</var>)) {
                  <var class="keywords">case</var> <var class="strings">'('</var>:
                      <var class="vars">$nest</var>++;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">')'</var>:
                      <var class="vars">$nest</var>--;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">'leading'</var>:
                  <var class="keywords">case</var> <var class="strings">'trailing'</var>:
                  <var class="keywords">case</var> <var class="strings">'both'</var>:
                      <var class="vars">$stack</var>[] = <var class="vars">$this</var>-&gt;toStringToken(<var class="vars">$opd</var>);
                      <var class="vars">$opd</var> = <var class="strings">','</var>;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">'from'</var>:
                  <var class="keywords">case</var> <var class="strings">'collate'</var>:
                      <var class="vars">$opd</var> = <var class="strings">','</var>;
                      <var class="keywords">break</var>;
                  <var class="keywords">default</var>:
                      <var class="keywords">break</var>;
                }
                <var class="vars">$stack</var>[] = <var class="vars">$opd</var>;
                <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                  <var class="keywords">break</var>;
                }
                ++<var class="vars">$idx</var>;
              }
              <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$idx</var> - <var class="vars">$i</var> + 1, <var class="vars">$stack</var>);
              <var class="vars">$stack</var> = <var class="keywords">array</var>();
            } <var class="keywords">else</var> {
              <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect %s(%s)'</var>,
                               <var class="funcs">strtoupper</var>(<var class="vars">$token</var>), <var class="vars">$next</var>);
              <var class="vars">$is_error</var> = <var class="keywords">true</var>;
            }
            <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'position'</var>:
            <var class="comments">// SQL99 Syntax</var>
            <var class="comments">// -----------------------------------------------</var>
            <var class="comments">// POSITION ( starting_string IN search_string )</var>
            <var class="comments">// -----------------------------------------------</var>
            <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="vars">$open</var>) {
              <var class="vars">$idx</var> = <var class="vars">$i</var> + 1;
              <var class="vars">$nest</var> = 0;
              <var class="vars">$stack</var> = <var class="keywords">array</var>(<var class="vars">$token</var>);
              <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                <var class="vars">$opd</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$opd</var>)) {
                  <var class="keywords">case</var> <var class="strings">'('</var>:
                      <var class="vars">$nest</var>++;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">')'</var>:
                      <var class="vars">$nest</var>--;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">'in'</var>:
                      <var class="vars">$opd</var> = <var class="strings">','</var>;
                      <var class="keywords">break</var>;
                  <var class="keywords">default</var>:
                      <var class="keywords">break</var>;
                }
                <var class="vars">$stack</var>[] = <var class="vars">$opd</var>;
                <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                  <var class="keywords">break</var>;
                }
                ++<var class="vars">$idx</var>;
              }
              <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$idx</var> - <var class="vars">$i</var> + 1, <var class="vars">$stack</var>);
              <var class="vars">$stack</var> = <var class="keywords">array</var>();
            } <var class="keywords">else</var> {
              <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect POSITION(%s)'</var>,
                               <var class="vars">$next</var>);
              <var class="vars">$is_error</var> = <var class="keywords">true</var>;
            }
            <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'extract'</var>:
            <var class="comments">// SQL99 Syntax</var>
            <var class="comments">// --------------------------------------------------------</var>
            <var class="comments">// EXTRACT(datepart FROM expression)</var>
            <var class="comments">// --------------------------------------------------------</var>
            <var class="comments">// the datepart to be extracted</var>
            <var class="comments">// (</var>
            <var class="comments">//  YEAR, MONTH, DAY, HOUR, MINUTE, SECOND,</var>
            <var class="comments">//  TIMEZONE_HOUR, or TIMEZONE_MINUTE</var>
            <var class="comments">// )</var>
            <var class="comments">// from an expression</var>
            <var class="comments">// --------------------------------------------------------</var>
            <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="vars">$open</var>) {
              <var class="vars">$idx</var> = <var class="vars">$i</var> + 1;
              <var class="vars">$nest</var> = 0;
              <var class="vars">$stack</var> = <var class="keywords">array</var>(<var class="vars">$token</var>);
              <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                <var class="vars">$opd</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$opd</var>)) {
                  <var class="keywords">case</var> <var class="strings">'('</var>:
                      <var class="vars">$nest</var>++;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">')'</var>:
                      <var class="vars">$nest</var>--;
                      <var class="keywords">break</var>;
                  <var class="keywords">case</var> <var class="strings">'from'</var>:
                      <var class="vars">$opd</var> = <var class="strings">','</var>;
                      <var class="vars">$prev_opd</var> = <var class="funcs">array_pop</var>(<var class="vars">$stack</var>);
                      <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$prev_opd</var>)) {
                        <var class="vars">$stack</var>[] = <var class="vars">$this</var>-&gt;toStringToken(<var class="vars">$prev_opd</var>);
                      } <var class="keywords">else</var> {
                        <var class="vars">$stack</var>[] = <var class="vars">$prev_opd</var>;
                      }
                      <var class="keywords">break</var>;
                  <var class="keywords">default</var>:
                      <var class="keywords">break</var>;
                }
                <var class="vars">$stack</var>[] = <var class="vars">$opd</var>;
                <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                  <var class="keywords">break</var>;
                }
                ++<var class="vars">$idx</var>;
              }
              <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$idx</var> - <var class="vars">$i</var> + 1, <var class="vars">$stack</var>);
              <var class="vars">$stack</var> = <var class="keywords">array</var>();
            } <var class="keywords">else</var> {
              <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect EXTRACT(%s)'</var>,
                               <var class="vars">$next</var>);
              <var class="vars">$is_error</var> = <var class="keywords">true</var>;
            }
            <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'case'</var>:
           <var class="keywords">if</var> (<var class="vars">$next</var> == <var class="keywords">null</var>
            || !<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>]) || !<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$l</var>])) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect (CASE, WHEN, ...)'</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="funcs">strtolower</var>(<var class="vars">$next</var>) !== <var class="strings">'when'</var>) {
               <var class="vars">$idx</var> = <var class="vars">$i</var> + 1;
               <var class="vars">$case_opd</var> = <var class="keywords">array</var>();
               <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                 <var class="keywords">if</var> (<var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>]) === <var class="strings">'when'</var>) {
                   <var class="keywords">break</var>;
                 }
                 <var class="vars">$case_opd</var>[] = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                 <var class="vars">$idx</var>++;
               }
               <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$case_opd</var>)) {
                 <var class="vars">$this</var>-&gt;pushError(
                     <var class="strings">'illegal syntax, expect the empty expression'</var>
                   . <var class="strings">' on CASE expression'</var>
                 );
                 <var class="vars">$is_error</var> = <var class="keywords">true</var>;
               } <var class="keywords">else</var> {
                 <var class="comments">// ----------------------------------------------</var>
                 <var class="comments">// CASE expr</var>
                 <var class="comments">//      WHEN comparison_expr THEN result_expr</var>
                 <var class="comments">//     [WHEN ...]</var>
                 <var class="comments">//      ELSE default_expr</var>
                 <var class="comments">// END</var>
                 <var class="comments">// ----------------------------------------------</var>
                 <var class="comments">// ( expr = comparison_expr</var>
                 <var class="comments">//        ? result_expr</var>
                 <var class="comments">//        : (...) default_expr )</var>
                 <var class="comments">// ----------------------------------------------</var>
                 <var class="vars">$stack</var> = <var class="keywords">array</var>(<var class="vars">$open</var>, <var class="vars">$case_opd</var>, <var class="strings">'='</var>);
                 <var class="vars">$stack</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$stack</var>);
                 <var class="vars">$case_opd_len</var> = <var class="funcs">count</var>(<var class="vars">$case_opd</var>) + 1;
                 <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$case_opd_len</var>, <var class="vars">$stack</var>);
                 <var class="vars">$idx</var> += <var class="vars">$case_opd_len</var>;
                 <var class="vars">$case_else</var> = <var class="keywords">false</var>;
                 <var class="vars">$case_nest</var> = 1;
                 <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                   <var class="vars">$case_expr</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                   <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$case_expr</var>)) {
                     <var class="keywords">case</var> <var class="strings">'then'</var>:
                         <var class="vars">$stack</var>[] = <var class="strings">'?'</var>;
                         <var class="keywords">break</var>;
                     <var class="keywords">case</var> <var class="strings">'when'</var>:
                         <var class="vars">$stack</var>[] = <var class="strings">':'</var>;
                         <var class="vars">$stack</var>[] = <var class="vars">$open</var>;
                         <var class="vars">$stack</var>[] = <var class="vars">$case_opd</var>;
                         <var class="vars">$stack</var>[] = <var class="strings">'='</var>;
                         <var class="vars">$case_nest</var>++;
                         <var class="keywords">break</var>;
                     <var class="keywords">case</var> <var class="strings">'else'</var>:
                         <var class="vars">$stack</var>[] = <var class="strings">':'</var>;
                         <var class="vars">$case_else</var> = <var class="keywords">true</var>;
                         <var class="keywords">break</var>;
                     <var class="keywords">case</var> <var class="strings">'end'</var>:
                         <var class="keywords">if</var> (!<var class="vars">$case_else</var>) {
                           <var class="vars">$stack</var>[] = <var class="strings">':'</var>;
                           <var class="vars">$stack</var>[] = <var class="strings">'null'</var>;
                         }
                         <var class="keywords">while</var> (--<var class="vars">$case_nest</var> &gt;= 0) {
                           <var class="vars">$stack</var>[] = <var class="vars">$close</var>;
                         }
                         <var class="vars">$idx</var>++;
                         <var class="keywords">break</var> 2;
                     <var class="keywords">default</var>:
                         <var class="vars">$stack</var>[] = <var class="vars">$case_expr</var>;
                         <var class="keywords">break</var>;
                   }
                   <var class="vars">$idx</var>++;
                 }
               }
             } <var class="keywords">else</var> {
               <var class="comments">// -------------------------------------</var>
               <var class="comments">// CASE WHEN condition THEN value</var>
               <var class="comments">//     [WHEN ...]</var>
               <var class="comments">//     [ELSE result]</var>
               <var class="comments">// END</var>
               <var class="comments">// -------------------------------------</var>
               <var class="comments">// ( condition ? value : (...) result )</var>
               <var class="comments">// -------------------------------------</var>
               <var class="vars">$stack</var> = <var class="keywords">array</var>(<var class="vars">$open</var>);
               <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, 2, <var class="vars">$stack</var>);
               <var class="vars">$idx</var> = <var class="vars">$i</var> + 1;
               <var class="vars">$case_else</var> = <var class="keywords">false</var>;
               <var class="vars">$case_nest</var> = 1;
               <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
                 <var class="vars">$case_expr</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
                 <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$case_expr</var>)) {
                   <var class="keywords">case</var> <var class="strings">'then'</var>:
                       <var class="vars">$stack</var>[] = <var class="strings">'?'</var>;
                       <var class="keywords">break</var>;
                   <var class="keywords">case</var> <var class="strings">'when'</var>:
                       <var class="vars">$stack</var>[] = <var class="strings">':'</var>;
                       <var class="vars">$stack</var>[] = <var class="vars">$open</var>;
                       <var class="vars">$case_nest</var>++;
                       <var class="keywords">break</var>;
                   <var class="keywords">case</var> <var class="strings">'else'</var>:
                       <var class="vars">$stack</var>[] = <var class="strings">':'</var>;
                       <var class="vars">$case_else</var> = <var class="keywords">true</var>;
                       <var class="keywords">break</var>;
                   <var class="keywords">case</var> <var class="strings">'end'</var>:
                       <var class="keywords">if</var> (!<var class="vars">$case_else</var>) {
                         <var class="vars">$stack</var>[] = <var class="strings">':'</var>;
                         <var class="vars">$stack</var>[] = <var class="strings">'null'</var>;
                       }
                       <var class="keywords">while</var> (--<var class="vars">$case_nest</var> &gt;= 0) {
                         <var class="vars">$stack</var>[] = <var class="vars">$close</var>;
                       }
                       <var class="vars">$idx</var>++;
                       <var class="keywords">break</var> 2;
                   <var class="keywords">default</var>:
                       <var class="vars">$stack</var>[] = <var class="vars">$case_expr</var>;
                       <var class="keywords">break</var>;
                 }
                 <var class="vars">$idx</var>++;
               }
             }
             <var class="vars">$stack</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$stack</var>);
             <var class="vars">$case_check</var> = <var class="funcs">array_count_values</var>(<var class="vars">$stack</var>);
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$case_check</var>[<var class="vars">$open</var>], <var class="vars">$case_check</var>[<var class="vars">$close</var>])
              &amp;&amp; <var class="vars">$case_check</var>[<var class="vars">$open</var>] === <var class="vars">$case_check</var>[<var class="vars">$close</var>]) {
               <var class="vars">$this</var>-&gt;_caseCount  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$case_check</var>, <var class="strings">'?'</var>, 0);
               <var class="vars">$this</var>-&gt;_caseCount += <var class="vars">$this</var>-&gt;getValue(<var class="vars">$case_check</var>, <var class="strings">':'</var>, 0);
               <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$idx</var> - <var class="vars">$i</var>, <var class="vars">$stack</var>);
             } <var class="keywords">else</var> {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect (CASE, WHEN, END)'</var>);
               <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             }
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'in'</var>:
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// expression IN (value [, ...])</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">//        eq</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// expression = value1 OR expression = value2 OR ...</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="keywords">if</var> (<var class="vars">$prev</var> == <var class="keywords">null</var> || <var class="vars">$next</var> == <var class="keywords">null</var> || <var class="vars">$next</var> !== <var class="vars">$open</var>) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect(IN)'</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             <var class="keywords">break</var>;
           }
           <var class="comments">// --------------------------------------------------------</var>
           <var class="comments">// expression NOT IN (value [, ...])</var>
           <var class="comments">// --------------------------------------------------------</var>
           <var class="comments">//        eq</var>
           <var class="comments">// --------------------------------------------------------</var>
           <var class="comments">// (expression &lt;&gt; value1 AND expression &lt;&gt; value2 AND ...)</var>
           <var class="comments">// --------------------------------------------------------</var>
           <var class="keywords">if</var> (<var class="vars">$prev</var> === <var class="strings">'!'</var> || <var class="funcs">strtolower</var>(<var class="vars">$prev</var>) === <var class="strings">'not'</var>) {
             <var class="vars">$this</var>-&gt;_notInOp = <var class="keywords">true</var>;
             <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$h</var>, 1);
             <var class="vars">$i</var> = <var class="vars">$h</var> - 1;
             <var class="keywords">break</var>;
           }
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_notInOp)) {
             <var class="vars">$in_opr</var> = <var class="strings">'='</var>;
             <var class="vars">$in_cnd</var> = <var class="strings">'or'</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$in_opr</var> = <var class="strings">'&lt;&gt;'</var>;
             <var class="vars">$in_cnd</var> = <var class="strings">'and'</var>;
           }
           <var class="vars">$this</var>-&gt;_notInOp = <var class="keywords">null</var>;
           <var class="vars">$in_expr</var> = <var class="vars">$this</var>-&gt;getLeftOperandBySQL(<var class="vars">$tokens</var>, <var class="vars">$h</var>, <var class="vars">$token</var>);
           <var class="keywords">if</var> (<var class="vars">$in_expr</var> === <var class="keywords">false</var>) {
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             <var class="keywords">break</var>;
           }
           <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, 2);
           <var class="vars">$idx</var> = <var class="vars">$i</var>;
           <var class="vars">$nest</var> = 0;
           <var class="vars">$in_count</var> = 0;
           <var class="vars">$stack</var> = <var class="keywords">array</var>(<var class="vars">$open</var>, <var class="vars">$in_expr</var>, <var class="vars">$in_opr</var>);
           <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
             <var class="vars">$in_op</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
             <var class="keywords">switch</var> (<var class="vars">$in_op</var>) {
               <var class="keywords">case</var> <var class="strings">'('</var>:
                   <var class="vars">$nest</var>++;
                   <var class="vars">$stack</var>[] = <var class="vars">$in_op</var>;
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">')'</var>:
                   <var class="vars">$nest</var>--;
                   <var class="vars">$stack</var>[] = <var class="vars">$in_op</var>;
                   <var class="keywords">if</var> (<var class="vars">$nest</var> === -1) {
                     <var class="vars">$idx</var>++;
                     <var class="vars">$in_count</var>++;
                     <var class="keywords">break</var> 2;
                   }
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">','</var>:
                   <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                     <var class="vars">$stack</var>[] = <var class="vars">$in_cnd</var>;
                     <var class="vars">$stack</var>[] = <var class="vars">$in_expr</var>;
                     <var class="vars">$stack</var>[] = <var class="vars">$in_opr</var>;
                     <var class="vars">$in_count</var> += 3;
                     <var class="keywords">break</var>;
                   }
               <var class="keywords">default</var>:
                   <var class="vars">$stack</var>[] = <var class="vars">$in_op</var>;
                   <var class="keywords">break</var>;
             }
             <var class="vars">$in_count</var>++;
             <var class="vars">$idx</var>++;
           }
           <var class="funcs">end</var>(<var class="vars">$stack</var>);
           <var class="keywords">if</var> (<var class="funcs">prev</var>(<var class="vars">$stack</var>) === <var class="vars">$in_opr</var>) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect IN at end(%s)'</var>,
                              <var class="vars">$in_opr</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             <var class="keywords">break</var>;
           }
           <var class="funcs">reset</var>(<var class="vars">$stack</var>);
           <var class="vars">$stack</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$stack</var>);
           <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, <var class="vars">$idx</var> - <var class="vars">$i</var>, <var class="vars">$stack</var>);
           <var class="keywords">unset</var>(<var class="vars">$stack</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'exists'</var>:
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// EXISTS (sub-query)</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// NOT EXISTS (sub-query)</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="keywords">if</var> (<var class="vars">$next</var> !== <var class="vars">$open</var>) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect(EXISTS)'</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             <var class="keywords">break</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'any'</var>:
       <var class="keywords">case</var> <var class="strings">'some'</var>:
       <var class="keywords">case</var> <var class="strings">'all'</var>:
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// SQL-92 Syntax</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// expression operator { ANY | SOME } (sub-query)</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// expr operator ANY (value1, value2, ...)</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">//        eq</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// expr operator value1 OR expr operator value2 OR ...</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="keywords">if</var> (<var class="vars">$prev</var> == <var class="keywords">null</var> || <var class="vars">$next</var> == <var class="keywords">null</var> || <var class="vars">$next</var> !== <var class="vars">$open</var>) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect(%s)'</var>, <var class="vars">$token</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             <var class="keywords">break</var>;
           }
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// expression operator ALL (sub-query)</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// expr operator ALL (value1, value2, ...)</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">//        eq</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// expr operator value1 AND expr operator value2 AND...</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="vars">$sub_opr</var> = <var class="vars">$prev</var>;
           <var class="keywords">if</var> (0 === <var class="funcs">strcasecmp</var>(<var class="vars">$token</var>, <var class="strings">'all'</var>)) {
             <var class="vars">$sub_cnd</var> = <var class="strings">'and'</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$sub_cnd</var> = <var class="strings">'or'</var>;
           }
           <var class="vars">$sub_expr</var> = <var class="vars">$this</var>-&gt;getLeftOperandBySQL(<var class="vars">$tokens</var>, <var class="vars">$g</var>, <var class="vars">$token</var>);
           <var class="keywords">if</var> (<var class="vars">$sub_expr</var> === <var class="keywords">false</var>) {
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             <var class="keywords">break</var>;
           }
           <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$h</var>, 2);
           <var class="vars">$idx</var> = <var class="vars">$i</var>;
           <var class="vars">$nest</var> = 0;
           <var class="vars">$sub_count</var> = 0;
           <var class="vars">$stack</var> = <var class="keywords">array</var>(<var class="vars">$open</var>, <var class="vars">$sub_expr</var>, <var class="vars">$sub_opr</var>);
           <var class="keywords">while</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$idx</var>])) {
             <var class="vars">$sub_op</var> = <var class="vars">$tokens</var>[<var class="vars">$idx</var>];
             <var class="keywords">switch</var> (<var class="vars">$sub_op</var>) {
               <var class="keywords">case</var> <var class="strings">'('</var>:
                   <var class="vars">$nest</var>++;
                   <var class="vars">$stack</var>[] = <var class="vars">$sub_op</var>;
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">')'</var>:
                   <var class="vars">$nest</var>--;
                   <var class="vars">$stack</var>[] = <var class="vars">$sub_op</var>;
                   <var class="keywords">if</var> (<var class="vars">$nest</var> === -1) {
                     <var class="vars">$idx</var>++;
                     <var class="vars">$sub_count</var>++;
                     <var class="keywords">break</var> 2;
                   }
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">','</var>:
                   <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                     <var class="vars">$stack</var>[] = <var class="vars">$sub_cnd</var>;
                     <var class="vars">$stack</var>[] = <var class="vars">$sub_expr</var>;
                     <var class="vars">$stack</var>[] = <var class="vars">$sub_opr</var>;
                     <var class="vars">$sub_count</var> += 3;
                     <var class="keywords">break</var>;
                   }
               <var class="keywords">default</var>:
                   <var class="vars">$stack</var>[] = <var class="vars">$sub_op</var>;
                   <var class="keywords">break</var>;
             }
             <var class="vars">$sub_count</var>++;
             <var class="vars">$idx</var>++;
           }
           <var class="funcs">end</var>(<var class="vars">$stack</var>);
           <var class="keywords">if</var> (<var class="funcs">prev</var>(<var class="vars">$stack</var>) === <var class="vars">$sub_opr</var>) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect (%s) at end(%s)'</var>,
                              <var class="vars">$token</var>, <var class="vars">$sub_opr</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             <var class="keywords">break</var>;
           }
           <var class="funcs">reset</var>(<var class="vars">$stack</var>);
           <var class="vars">$stack</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$stack</var>);
           <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var> - 1, <var class="vars">$idx</var> - <var class="vars">$i</var> + 1, <var class="vars">$stack</var>);
           <var class="keywords">unset</var>(<var class="vars">$stack</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'like'</var>:
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// string LIKE pattern [ESCAPE escape-character]</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="comments">// string NOT LIKE pattern [ESCAPE escape-character]</var>
           <var class="comments">// ----------------------------------------------------</var>
           <var class="keywords">if</var> (<var class="vars">$prev</var> == <var class="keywords">null</var> || <var class="vars">$next</var> == <var class="keywords">null</var>
            || !<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$next</var>)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect LIKE(%s)'</var>, <var class="vars">$next</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             <var class="keywords">break</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$pattern</var> = <var class="vars">$next</var>;
             <var class="vars">$next</var> = <var class="strings">''</var>;
             <var class="vars">$org_pattern</var> = <var class="vars">$pattern</var>;
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$g</var>]) &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$g</var>] != <var class="keywords">null</var>
              &amp;&amp; <var class="vars">$prev</var> === <var class="strings">'!'</var> || <var class="funcs">strtolower</var>(<var class="vars">$prev</var>) === <var class="strings">'not'</var>) {
               <var class="vars">$subject</var> = <var class="vars">$this</var>-&gt;getLeftOperandBySQL(<var class="vars">$tokens</var>, <var class="vars">$g</var>, <var class="vars">$token</var>);
               <var class="vars">$prev</var> = <var class="strings">'!'</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$subject</var> = <var class="vars">$this</var>-&gt;getLeftOperandBySQL(<var class="vars">$tokens</var>, <var class="vars">$h</var>, <var class="vars">$token</var>);
             }
             <var class="keywords">if</var> (<var class="vars">$subject</var> === <var class="keywords">false</var>) {
               <var class="vars">$is_error</var> = <var class="keywords">true</var>;
               <var class="keywords">break</var>;
             }
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>], <var class="vars">$tokens</var>[<var class="vars">$l</var>])
              &amp;&amp; <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>]) === <var class="strings">'escape'</var>) {
               <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$tokens</var>[<var class="vars">$l</var>])) {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect LIKE, ESCAPE(%s)'</var>,
                                  <var class="vars">$tokens</var>[<var class="vars">$l</var>]);
                 <var class="vars">$is_error</var> = <var class="keywords">true</var>;
                 <var class="keywords">break</var>;
               }
               <var class="vars">$escape</var> = <var class="vars">$tokens</var>[<var class="vars">$l</var>];
               <var class="vars">$tokens</var>[<var class="vars">$k</var>] = <var class="strings">''</var>;
               <var class="vars">$tokens</var>[<var class="vars">$l</var>] = <var class="strings">''</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$escape</var> = <var class="keywords">null</var>;
             }
             <var class="vars">$test</var> = <var class="vars">$this</var>-&gt;toLikePattern(<var class="vars">$pattern</var>, <var class="vars">$escape</var>) . <var class="strings">'A'</var>;
             <var class="keywords">if</var> (@<var class="funcs">preg_match</var>(<var class="vars">$test</var>, <var class="strings">''</var>) === <var class="keywords">false</var>) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal pattern on LIKE(%s)'</var>,
                                <var class="vars">$org_pattern</var>);
               <var class="vars">$is_error</var> = <var class="keywords">true</var>;
               <var class="keywords">break</var>;
             }
             <var class="vars">$pattern</var> = <var class="vars">$this</var>-&gt;toStringToken(<var class="vars">$pattern</var>);
             <var class="keywords">unset</var>(<var class="vars">$test</var>, <var class="vars">$org_pattern</var>);
             <var class="vars">$like_func</var> = <var class="funcs">strtoupper</var>(<var class="vars">$token</var>);
             <var class="keywords">if</var> (<var class="vars">$escape</var> === <var class="keywords">null</var>) {
               <var class="vars">$like_tokens</var> = <var class="keywords">array</var>(
                 <var class="vars">$like_func</var>, <var class="strings">'('</var>,
                   <var class="vars">$pattern</var>, <var class="strings">','</var>,
                   <var class="vars">$subject</var>,
                 <var class="strings">')'</var>
               );
             } <var class="keywords">else</var> {
               <var class="vars">$like_tokens</var> = <var class="keywords">array</var>(
                 <var class="vars">$like_func</var>, <var class="strings">'('</var>,
                   <var class="vars">$pattern</var>, <var class="strings">','</var>,
                   <var class="vars">$subject</var>, <var class="strings">','</var>,
                   <var class="vars">$escape</var>,
                 <var class="strings">')'</var>
               );
             }
             <var class="vars">$like_tokens</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$like_tokens</var>);
             <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, 1, <var class="vars">$like_tokens</var>);
             <var class="keywords">unset</var>(<var class="vars">$like_tokens</var>, <var class="vars">$escape</var>, <var class="vars">$pattern</var>, <var class="vars">$subject</var>, <var class="vars">$like_func</var>);
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'between'</var>:
           <var class="comments">// ========================</var>
           <var class="comments">// a BETWEEN x AND y</var>
           <var class="comments">// ------------------</var>
           <var class="comments">//       eq</var>
           <var class="comments">// ------------------</var>
           <var class="comments">// a &gt;= x AND a &lt;= y</var>
           <var class="comments">// ========================</var>
           <var class="comments">// a NOT BETWEEN x AND y</var>
           <var class="comments">// ------------------</var>
           <var class="comments">//       eq</var>
           <var class="comments">// ------------------</var>
           <var class="comments">// a &lt; x OR a &gt; y</var>
           <var class="comments">// ------------------------</var>
           <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$next</var> != <var class="keywords">null</var>
            &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>], <var class="vars">$tokens</var>[<var class="vars">$l</var>])
            &amp;&amp; (<var class="vars">$tokens</var>[<var class="vars">$k</var>] === <var class="strings">'&amp;&amp;'</var>
            || <var class="funcs">strtolower</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>]) === <var class="strings">'and'</var>)) {
             <var class="keywords">if</var> (<var class="vars">$prev</var> === <var class="strings">'!'</var> || <var class="funcs">strtolower</var>(<var class="vars">$prev</var>) === <var class="strings">'not'</var>) {
               <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$g</var>])) {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect(BETWEEN)'</var>);
                 <var class="vars">$is_error</var> = <var class="keywords">true</var>;
                 <var class="keywords">break</var>;
               }
               <var class="vars">$opd</var> = <var class="vars">$this</var>-&gt;getLeftOperandBySQL(<var class="vars">$tokens</var>, <var class="vars">$g</var>, <var class="vars">$token</var>);
               <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$opd</var>)) {
                 <var class="vars">$betweens</var> = <var class="keywords">array</var>(
                   <var class="strings">'('</var>,
                   <var class="vars">$opd</var>, <var class="strings">'&lt;'</var>, <var class="vars">$next</var>,
                   <var class="strings">'or'</var>,
                   <var class="vars">$opd</var>, <var class="strings">'&gt;'</var>, <var class="vars">$tokens</var>[<var class="vars">$l</var>],
                   <var class="strings">')'</var>
                 );
                 <var class="vars">$betweens</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$betweens</var>);
                 <var class="vars">$org</var> = <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$g</var>, 6, <var class="vars">$betweens</var>);
               }
             } <var class="keywords">else</var> {
               <var class="vars">$opd</var> = <var class="vars">$this</var>-&gt;getLeftOperandBySQL(<var class="vars">$tokens</var>, <var class="vars">$h</var>, <var class="vars">$token</var>);
               <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$opd</var>)) {
                 <var class="vars">$betweens</var> = <var class="keywords">array</var>(
                   <var class="strings">'('</var>,
                   <var class="vars">$opd</var>, <var class="strings">'&gt;='</var>, <var class="vars">$next</var>,
                   <var class="strings">'and'</var>,
                   <var class="vars">$opd</var>, <var class="strings">'&lt;='</var>, <var class="vars">$tokens</var>[<var class="vars">$l</var>],
                   <var class="strings">')'</var>
                 );
                 <var class="vars">$betweens</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$betweens</var>);
                 <var class="vars">$org</var> = <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$h</var>, 5, <var class="vars">$betweens</var>);
               }
             }
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$opd</var>) &amp;&amp; <var class="vars">$opd</var> === <var class="keywords">false</var>) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax,'</var>
                             .  <var class="strings">' expect the operand on BETWEEN'</var>);
               <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             }
             <var class="comments">//$i += count($betweens) - count($org) + 3;</var>
             <var class="keywords">unset</var>(<var class="vars">$betweens</var>, <var class="vars">$org</var>, <var class="vars">$opd</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect(BETWEEN)'</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'&lt;&lt;='</var>:
       <var class="keywords">case</var> <var class="strings">'&gt;&gt;='</var>:
       <var class="keywords">case</var> <var class="strings">'.='</var>:
       <var class="keywords">case</var> <var class="strings">'^='</var>:
       <var class="keywords">case</var> <var class="strings">'&amp;='</var>:
       <var class="keywords">case</var> <var class="strings">'|='</var>:
       <var class="keywords">case</var> <var class="strings">'/='</var>:
       <var class="keywords">case</var> <var class="strings">'%='</var>:
       <var class="keywords">case</var> <var class="strings">'*='</var>:
       <var class="keywords">case</var> <var class="strings">'+='</var>:
       <var class="keywords">case</var> <var class="strings">'-='</var>:
       <var class="keywords">case</var> <var class="strings">'++'</var>:
       <var class="keywords">case</var> <var class="strings">'--'</var>:
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'The assignment operator(%s)'</var>
                         .  <var class="strings">' is not supported'</var>, <var class="vars">$token</var>);
           <var class="vars">$is_error</var> = <var class="keywords">true</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'!!='</var>:
       <var class="keywords">case</var> <var class="strings">'!~~'</var>:
       <var class="keywords">case</var> <var class="strings">'!~*'</var>:
       <var class="keywords">case</var> <var class="strings">'!~'</var>:
       <var class="keywords">case</var> <var class="strings">'~~'</var>:
       <var class="keywords">case</var> <var class="strings">'~*'</var>:
       <var class="keywords">case</var> <var class="strings">'&lt;&lt;&lt;'</var>:
       <var class="keywords">case</var> <var class="strings">'&gt;&gt;&gt;'</var>:
       <var class="keywords">case</var> <var class="strings">'=&gt;'</var>:
       <var class="keywords">case</var> <var class="strings">'-&gt;'</var>:
       <var class="keywords">case</var> <var class="strings">'::'</var>:
       <var class="keywords">case</var> <var class="strings">'@'</var>:
       <var class="keywords">case</var> <var class="strings">'\\'</var>:
       <var class="keywords">case</var> <var class="strings">'{'</var>:
       <var class="keywords">case</var> <var class="strings">'}'</var>:
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax,'</var>
                         .  <var class="strings">' expect (%s)'</var>, <var class="vars">$token</var>);
           <var class="vars">$is_error</var> = <var class="keywords">true</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'['</var>:
       <var class="keywords">case</var> <var class="strings">']'</var>:
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onJoinParseExpr)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax,'</var>
                         .  <var class="strings">' expect (%s)'</var>, <var class="vars">$token</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'?'</var>:
       <var class="keywords">case</var> <var class="strings">':'</var>:
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;_caseCount) &amp;&amp; <var class="funcs">is_int</var>(<var class="vars">$this</var>-&gt;_caseCount)) {
             <var class="keywords">if</var> (--<var class="vars">$this</var>-&gt;_caseCount &lt; 0) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect (CASE, WHEN, END)'</var>);
               <var class="vars">$is_error</var> = <var class="keywords">true</var>;
             }
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'`'</var>:
           <var class="vars">$token</var> = <var class="strings">''</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'$'</var>:
           <var class="keywords">if</var> (<var class="vars">$next</var> == <var class="keywords">null</var> || <var class="funcs">substr</var>(<var class="vars">$next</var>, 0, 1) === <var class="strings">'$'</var>
            || !<var class="vars">$this</var>-&gt;isWord(<var class="vars">$next</var>) || <var class="funcs">substr</var>(<var class="vars">$prev</var>, -1) === <var class="strings">'$'</var>) {
             <var class="vars">$token</var> = <var class="strings">''</var>;
           } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="strings">'{'</var>
                   || <var class="vars">$next</var> === <var class="strings">'}'</var>) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid SQL syntax, expect(%s%s)'</var>,
                              <var class="vars">$token</var>, <var class="vars">$next</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'('</var>:
           <var class="vars">$level</var>++;
           <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$this</var>-&gt;isWord(<var class="vars">$next</var>)
            &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$k</var>]) &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$k</var>] === <var class="vars">$close</var>) {
             <var class="vars">$cast_token</var> = <var class="funcs">strtolower</var>(<var class="vars">$next</var>);
             <var class="keywords">switch</var> (<var class="vars">$cast_token</var>) {
               <var class="keywords">case</var> <var class="strings">'int'</var>:
               <var class="keywords">case</var> <var class="strings">'integer'</var>:
               <var class="keywords">case</var> <var class="strings">'bool'</var>:
               <var class="keywords">case</var> <var class="strings">'boolean'</var>:
               <var class="keywords">case</var> <var class="strings">'float'</var>:
               <var class="keywords">case</var> <var class="strings">'double'</var>:
               <var class="keywords">case</var> <var class="strings">'real'</var>:
               <var class="keywords">case</var> <var class="strings">'string'</var>:
                   <var class="vars">$next</var> = <var class="vars">$cast_token</var>;
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">'binary'</var>:
               <var class="keywords">case</var> <var class="strings">'unset'</var>:
               <var class="keywords">case</var> <var class="strings">'array'</var>:
               <var class="keywords">case</var> <var class="strings">'object'</var>:
               <var class="keywords">default</var>:
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isWord(<var class="vars">$cast_token</var>)
                    &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$cast_token</var>, <var class="strings">'.'</var>) === <var class="keywords">false</var>) {
                     <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;getMetaAssoc();
                     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
                       <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$cast_token</var>, <var class="vars">$meta</var>)) {
                         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax,'</var>
                                       .  <var class="strings">' expect(%s)'</var>, <var class="vars">$cast_token</var>);
                         <var class="vars">$is_error</var> = <var class="keywords">true</var>;
                       }
                     }
                   }
                   <var class="keywords">break</var>;
             }
             <var class="keywords">unset</var>(<var class="vars">$cast_token</var>);
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">')'</var>:
           <var class="vars">$level</var>--;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'='</var>:
           <var class="vars">$token</var> = <var class="strings">'=='</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'||'</var>:
           <var class="vars">$token</var> = <var class="strings">'.'</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'and'</var>:
           <var class="vars">$token</var> = <var class="strings">'&amp;&amp;'</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'or'</var>:
           <var class="vars">$token</var> = <var class="strings">'||'</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'xor'</var>:
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'div'</var>:
           <var class="keywords">if</var> (<var class="vars">$next</var> !== <var class="vars">$open</var>) {
             <var class="vars">$token</var> = <var class="strings">'/'</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'mod'</var>:
           <var class="keywords">if</var> (<var class="vars">$next</var> !== <var class="vars">$open</var>) {
             <var class="vars">$token</var> = <var class="strings">'%'</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'.'</var>:
           <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$next</var> != <var class="keywords">null</var>
            &amp;&amp; (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$prev</var>) || <var class="vars">$this</var>-&gt;isWord(<var class="vars">$prev</var>))
            &amp;&amp; (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$next</var>) || <var class="vars">$this</var>-&gt;isWord(<var class="vars">$next</var>))) {
             <var class="vars">$token</var> = <var class="vars">$token</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal syntax, expect (%s)'</var>, <var class="vars">$token</var>);
             <var class="vars">$is_error</var> = <var class="keywords">true</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'&lt;=&gt;'</var>:
           <var class="vars">$token</var> = <var class="strings">'==='</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'&lt;?'</var>:
       <var class="keywords">case</var> <var class="strings">'&lt;%'</var>:
           <var class="vars">$error_token</var> = <var class="strings">'T_OPEN_TAG'</var>;
       <var class="keywords">case</var> <var class="strings">'?&gt;'</var>:
       <var class="keywords">case</var> <var class="strings">'%&gt;'</var>:
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$error_token</var>)) {
             <var class="vars">$error_token</var> = <var class="strings">'T_CLOSE_TAG'</var>;
           }
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid SQL syntax, expect %s'</var>, <var class="vars">$error_token</var>);
           <var class="vars">$is_error</var> = <var class="keywords">true</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'!=='</var>:
       <var class="keywords">case</var> <var class="strings">'==='</var>:
       <var class="keywords">case</var> <var class="strings">'!='</var>:
       <var class="keywords">case</var> <var class="strings">'=='</var>:
       <var class="keywords">case</var> <var class="strings">'&amp;&amp;'</var>:
       <var class="keywords">case</var> <var class="strings">'&lt;='</var>:
       <var class="keywords">case</var> <var class="strings">'&gt;='</var>:
       <var class="keywords">case</var> <var class="strings">'&lt;&gt;'</var>:
       <var class="keywords">case</var> <var class="strings">'&gt;&gt;'</var>:
       <var class="keywords">case</var> <var class="strings">'&lt;&lt;'</var>:
       <var class="keywords">case</var> <var class="strings">','</var>:
       <var class="keywords">case</var> <var class="strings">';'</var>:
       <var class="keywords">case</var> <var class="strings">'&lt;'</var>:
       <var class="keywords">case</var> <var class="strings">'&gt;'</var>:
       <var class="keywords">case</var> <var class="strings">'^'</var>:
       <var class="keywords">case</var> <var class="strings">'~'</var>:
       <var class="keywords">case</var> <var class="strings">'&amp;'</var>:
       <var class="keywords">case</var> <var class="strings">'|'</var>:
       <var class="keywords">case</var> <var class="strings">'/'</var>:
       <var class="keywords">case</var> <var class="strings">'%'</var>:
       <var class="keywords">case</var> <var class="strings">'*'</var>:
       <var class="keywords">case</var> <var class="strings">'+'</var>:
       <var class="keywords">case</var> <var class="strings">'-'</var>:
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="keywords">if</var> (<var class="vars">$token</var> != <var class="keywords">null</var>) {
             <var class="keywords">if</var> (<var class="vars">$token</var> === 0 || <var class="funcs">is_numeric</var>(<var class="vars">$token</var>)) {
               <var class="keywords">if</var> (<var class="vars">$token</var> == 0) {
                 <var class="vars">$token</var> = <var class="strings">'0'</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$token_chr</var> = <var class="funcs">substr</var>(<var class="vars">$token</var>, 0, 1);
                 <var class="vars">$token_num</var> = <var class="funcs">substr</var>(<var class="vars">$token</var>, 1);
                 <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$token_num</var>) &amp;&amp; <var class="funcs">is_numeric</var>(<var class="vars">$token_num</var>)
                  &amp;&amp; (<var class="vars">$token_chr</var> === <var class="strings">'+'</var> || <var class="vars">$token_chr</var> === <var class="strings">'-'</var>)) {
                   <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$prev</var>)) {
                     <var class="vars">$prev_org</var> = <var class="funcs">substr</var>(<var class="vars">$prev</var>, 1, -1);
                     <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$prev_org</var>)) {
                       <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, 0, <var class="vars">$token_chr</var>);
                       <var class="vars">$token</var> = <var class="vars">$token_num</var>;
                     }
                   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var>) {
                     <var class="vars">$prev_last</var> = <var class="funcs">substr</var>(<var class="vars">$prev</var>, -1);
                     <var class="keywords">if</var> (<var class="vars">$prev_last</var> !== <var class="vars">$token_chr</var>) {
                       <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, <var class="vars">$i</var>, 0, <var class="vars">$token_chr</var>);
                       <var class="vars">$token</var> = <var class="vars">$token_num</var>;
                     }
                   }
                 }
                 <var class="vars">$token</var> = <var class="vars">$this</var>-&gt;math-&gt;format(<var class="vars">$token</var>);
               }
               <var class="vars">$token</var> = <var class="vars">$this</var>-&gt;toStringToken(<var class="vars">$token</var>);
               <var class="keywords">break</var>;
             } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$token</var>)) {
               <var class="vars">$token</var> = <var class="vars">$this</var>-&gt;toStringToken(<var class="vars">$token</var>);
             }
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$prev</var>)
              &amp;&amp; <var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$token</var>)) {
               <var class="vars">$token</var> = <var class="vars">$this</var>-&gt;concatStringTokens(<var class="vars">$prev</var>, <var class="vars">$token</var>);
               <var class="vars">$prev</var> = <var class="strings">''</var>;
             }
           }
           <var class="keywords">break</var>;
     }
     <var class="keywords">unset</var>(<var class="vars">$token</var>, <var class="vars">$prev</var>, <var class="vars">$next</var>);
   }
   <var class="keywords">unset</var>(<var class="vars">$i</var>);
   <var class="keywords">return</var> <var class="vars">$is_error</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0531"><h2>
<a name="p_function_parsehtmlattributes_531">
<var class="function">parseHTMLAttributes</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the attributes of target element</dd>
<dt>return</dt>
<dd><em>array</em>    the parsed attributes as array</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Parses the attributes of the given HTML element.
</pre>
</div></div><pre id="source-0531"> <var class="keywords">function</var> parseHTMLAttributes(<var class="vars">$attrs</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">func_num_args</var>() &gt; 1) {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
     <var class="vars">$args</var> = <var class="keywords">array</var>(<var class="vars">$args</var>);
     <var class="vars">$result</var> = <var class="funcs">call_user_func</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'parseHTMLAttributes'</var>), <var class="vars">$args</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$attrs</var>)) {
       <var class="vars">$attrs</var> = <var class="keywords">array</var>(<var class="vars">$attrs</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$attrs</var>)) {
       <var class="keywords">foreach</var> (<var class="vars">$attrs</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$val</var>)) {
           <var class="keywords">if</var> (<var class="funcs">strtolower</var>(<var class="vars">$key</var>) === <var class="strings">'style'</var>) {
             <var class="vars">$css</var> = <var class="keywords">array</var>();
             <var class="keywords">foreach</var> (<var class="vars">$val</var> <var class="keywords">as</var> <var class="vars">$css_key</var> =&gt; <var class="vars">$css_val</var>) {
               <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$css_val</var>)) {
                 <var class="vars">$css</var>[] = <var class="funcs">sprintf</var>(<var class="strings">'%s:%s'</var>, <var class="vars">$css_key</var>, <var class="vars">$css_val</var>);
               }
             }
             <var class="vars">$val</var> = <var class="funcs">implode</var>(<var class="strings">';'</var>, <var class="vars">$css</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$val</var> = <var class="vars">$this</var>-&gt;parseHTMLAttributes(<var class="vars">$val</var>);
           }
         }
         <var class="keywords">if</var> (<var class="funcs">is_scalar</var>(<var class="vars">$val</var>)) {
           <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$key</var>)) {
             <var class="vars">$char</var> = <var class="funcs">substr</var>(<var class="vars">$val</var>, 0, 1);
             <var class="keywords">if</var> ((<var class="vars">$char</var> === <var class="strings">'&quot;'</var> || <var class="vars">$char</var> === <var class="strings">'\''</var>)
              &amp;&amp; <var class="funcs">substr</var>(<var class="vars">$val</var>, -1) === <var class="vars">$char</var>) {
               <var class="vars">$format</var> = <var class="strings">'%s=%s'</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$format</var> = <var class="strings">'%s=&quot;%s&quot;'</var>;
             }
             <var class="vars">$val</var> = <var class="funcs">sprintf</var>(<var class="vars">$format</var>, <var class="vars">$key</var>, <var class="vars">$val</var>);
           }
         }
         <var class="keywords">foreach</var> ((<var class="keywords">array</var>)<var class="vars">$val</var> <var class="keywords">as</var> <var class="vars">$v</var>) {
           <var class="vars">$result</var>[] = <var class="vars">$v</var>;
         }
       }
       <var class="vars">$result</var> = <var class="funcs">array_filter</var>(<var class="vars">$result</var>);
       <var class="vars">$result</var> = <var class="funcs">array_unique</var>(<var class="vars">$result</var>);
       <var class="vars">$result</var> = <var class="funcs">array_values</var>(<var class="vars">$result</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0532"><h2>
<a name="p_function_parsecsv_532">
<var class="function">parseCSV</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>link</dt>
<dd><a href="http://www.ietf.org/rfc/rfc4180.txt" target="_blank" title="open in blanks window">http://www.ietf.org/rfc/rfc4180.txt</a></dd>
<dt>param</dt>
<dd><em>string</em>   optionally, CSV filename</dd>
<dt>return</dt>
<dd><em>array</em>    a parsed multiple dimension array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Parse CSV (Comma-Separated Values) from file
</pre>
</div></div><pre id="source-0532"> <var class="keywords">function</var> parseCSV(<var class="vars">$filename</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$filename</var> != <var class="keywords">null</var>) {
     <var class="vars">$org_path</var> = <var class="vars">$this</var>-&gt;path;
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$filename</var>);
   }
   <var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>);
   <var class="keywords">if</var> (<var class="vars">$fp</var>) {
     <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
       <var class="vars">$fields</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgetcsv</var>(<var class="vars">$fp</var>);
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$fields</var>)) {
         <var class="keywords">foreach</var> (<var class="vars">$fields</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$field</var>) {
           <var class="vars">$fields</var>[<var class="vars">$i</var>] = <var class="vars">$this</var>-&gt;pcharset-&gt;convert(<var class="vars">$field</var>, <var class="vars">$this</var>-&gt;charset);
         }
         <var class="vars">$result</var>[] = <var class="vars">$fields</var>;
       }
     }
     <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
   }
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$org_path</var>) &amp;&amp; <var class="vars">$org_path</var> !== <var class="vars">$this</var>-&gt;path) {
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$org_path</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0533"><h2>
<a name="p_class_posql_builder_533">
<var class="class">Posql_Builder</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This builder class that assign from tokens for Posql
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Builder</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0534"><h2>
<a name="p_function_tolikepattern_534">
<var class="function">toLikePattern</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the pattern which is given from the tokens</dd>
<dt>param</dt>
<dd><em>string</em>  optionally, escape character (default=backslash: \ )</dd>
<dt>return</dt>
<dd><em>string</em>  the pattern which was generated as string</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Generates the pattern of the LIKE operator
</pre>
</div></div><pre id="source-0534"> <var class="keywords">function</var> toLikePattern(<var class="vars">$pattern</var>, <var class="vars">$escape</var> = <var class="strings">'\\'</var>){
   <var class="keywords">static</var> <var class="vars">$patterns</var> = <var class="keywords">array</var>();
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$hash</var> = <var class="vars">$this</var>-&gt;hashValue(<var class="vars">$pattern</var> . <var class="vars">$escape</var>);
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$patterns</var>[<var class="vars">$hash</var>])) {
     <var class="vars">$result</var> = <var class="vars">$patterns</var>[<var class="vars">$hash</var>];
   } <var class="keywords">else</var> {
     <var class="vars">$mod</var> = <var class="strings">'isu'</var>;
     <var class="vars">$dlm</var> = <var class="strings">'~'</var>;
     <var class="vars">$pre</var> = <var class="strings">'^'</var>;
     <var class="vars">$suf</var> = <var class="strings">'$'</var>;
     <var class="vars">$q</var>   = <var class="strings">'\''</var>;
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$pattern</var>)) {
       <var class="vars">$pattern</var> = <var class="funcs">substr</var>(<var class="vars">$pattern</var>, 1, -1);
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStringToken(<var class="vars">$escape</var>)) {
       <var class="vars">$escape</var> = <var class="funcs">substr</var>(<var class="vars">$escape</var>, 1, -1);
     }
     <var class="keywords">if</var> (<var class="vars">$pattern</var> == <var class="keywords">null</var>) {
       <var class="vars">$pattern</var> = <var class="strings">'(?:)'</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$default_escape</var> = <var class="strings">'\\'</var>;
       <var class="keywords">if</var> (<var class="vars">$escape</var> === <var class="keywords">null</var>) {
         <var class="vars">$escape</var> = <var class="vars">$default_escape</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$escape</var> !== <var class="vars">$default_escape</var>) {
         <var class="vars">$pattern</var> = <var class="funcs">str_replace</var>(<var class="vars">$escape</var>, <var class="vars">$default_escape</var>, <var class="vars">$pattern</var>);
       }
       <var class="vars">$pattern</var> = <var class="funcs">preg_quote</var>(<var class="vars">$pattern</var>, <var class="vars">$dlm</var>);
       <var class="vars">$translates</var> = <var class="keywords">array</var>(
         <var class="strings">'\\\\\\\\'</var> =&gt; <var class="strings">'\\\\'</var>,
         <var class="strings">'\&quot;'</var>       =&gt; <var class="strings">'&quot;'</var>,
         <var class="strings">'\''</var>       =&gt; <var class="strings">'\\\''</var>,
         <var class="strings">'\%'</var>       =&gt; <var class="strings">'%'</var>,
         <var class="strings">'\_'</var>       =&gt; <var class="strings">'_'</var>,
         <var class="strings">'%'</var>        =&gt; <var class="strings">'.*'</var>,
         <var class="strings">'_'</var>        =&gt; <var class="strings">'.'</var>
       );
       <var class="vars">$pattern</var> = <var class="funcs">strtr</var>(<var class="vars">$pattern</var>, <var class="vars">$translates</var>);
       <var class="comments">/*
       $pattern = strtr($pattern,
         array(
           '\"' =&gt; '"',
           '\'' =&gt; '\\\'',
           '\%' =&gt; '%',
           '\_' =&gt; '_',
           '%'  =&gt; '.*',
           '_'  =&gt; '.'
         )
       );
       */</var>
     }
     <var class="vars">$result</var> = <var class="vars">$dlm</var> . <var class="vars">$pre</var> . <var class="vars">$pattern</var> . <var class="vars">$suf</var> . <var class="vars">$dlm</var> . <var class="vars">$mod</var>;
     <var class="vars">$patterns</var>[<var class="vars">$hash</var>] = <var class="vars">$result</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0535"><h2>
<a name="p_function_toarrayresult_535">
<var class="function">toArrayResult</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the statement object, or result-set as array</dd>
<dt>return</dt>
<dd><em>string</em>  result-set which converted into array forcibly</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Convert the statement object into array
</pre>
</div></div><pre id="source-0535"> <var class="keywords">function</var> toArrayResult(<var class="vars">$stmt</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$stmt</var>)) {
     <var class="vars">$result</var> = <var class="vars">$stmt</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">is_object</var>(<var class="vars">$stmt</var>)) {
       <var class="keywords">if</var> (<var class="funcs">method_exists</var>(<var class="vars">$stmt</var>, <var class="strings">'fetchAll'</var>)) {
         <var class="vars">$result</var> = <var class="vars">$stmt</var>-&gt;fetchAll(<var class="strings">'assoc'</var>);
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$stmt</var>-&gt;rows) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$stmt</var>-&gt;rows)) {
         <var class="vars">$result</var> = <var class="vars">$stmt</var>-&gt;rows;
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = (<var class="keywords">array</var>)<var class="vars">$stmt</var>;
       }
     }
   }
   <var class="vars">$stmt</var> = <var class="keywords">null</var>;
   <var class="keywords">unset</var>(<var class="vars">$stmt</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0536"><h2>
<a name="p_function_tocorrelationname_536">
<var class="function">toCorrelationName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the left correlation name</dd>
<dt>param</dt>
<dd><em>string</em>  optionally, the right correlation name</dd>
<dt>return</dt>
<dd><em>string</em>  the unique internal correlation name</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Correlate the string which delimited by the dot(.)
</pre>
</div></div><pre id="source-0536"> <var class="keywords">function</var> toCorrelationName(<var class="vars">$left</var>, <var class="vars">$right</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$checked</var> = <var class="keywords">false</var>;
   <var class="vars">$enable_left</var> = <var class="keywords">false</var>;
   <var class="vars">$enable_right</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$left</var>)) {
     <var class="keywords">if</var> (<var class="vars">$right</var> === <var class="keywords">null</var>) {
       <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$left</var>, <var class="strings">'.'</var>) !== <var class="keywords">false</var>) {
         <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onHaving)) {
           <var class="keywords">list</var>(<var class="vars">$left</var>, <var class="vars">$right</var>) = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$left</var>);
         } <var class="keywords">else</var> {
           <var class="keywords">list</var>(<var class="vars">$left_side</var>, <var class="vars">$right_side</var>) = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$left</var>);
           <var class="vars">$enable_left</var> = <var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$left_side</var>);
           <var class="vars">$enable_right</var> = <var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$right_side</var>);
           <var class="vars">$checked</var> = <var class="keywords">true</var>;
           <var class="keywords">if</var> (<var class="vars">$enable_left</var> &amp;&amp; <var class="vars">$enable_right</var>) {
             <var class="vars">$left</var> = <var class="vars">$left_side</var>;
             <var class="vars">$right</var> = <var class="vars">$right_side</var>;
           }
         }
       }
     }
     <var class="keywords">if</var> (<var class="vars">$left</var> != <var class="keywords">null</var>) {
       <var class="keywords">if</var> (<var class="vars">$right</var> == <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="vars">$left</var>;
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (!<var class="vars">$checked</var>) {
           <var class="vars">$enable_left</var> = <var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$left</var>);
           <var class="vars">$enable_right</var> = <var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$right</var>);
         }
         <var class="keywords">if</var> (!<var class="vars">$enable_right</var>) {
           <var class="vars">$result</var> = <var class="vars">$left</var>;
         } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="vars">$enable_left</var>) {
           <var class="vars">$result</var> = <var class="vars">$right</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_correlationPrefix)) {
             <var class="vars">$this</var>-&gt;initCorrelationPrefix();
           }
           <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="strings">'_%s_%s_%s'</var>,
             <var class="vars">$this</var>-&gt;_correlationPrefix,
             <var class="vars">$left</var>,
             <var class="vars">$right</var>
           );
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0537"><h2>
<a name="p_function_joinwords_537">
<var class="function">joinWords</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the target tokens as array</dd>
<dt>return</dt>
<dd><em>string</em>  concatenated string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Concatenate tokens of array with a string
</pre>
</div></div><pre id="source-0537"> <var class="keywords">function</var> joinWords(<var class="vars">$tokens</var>){
   <var class="keywords">static</var> <var class="vars">$cache</var> = <var class="keywords">array</var>(), <var class="vars">$size</var> = 0;
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$hash</var> = <var class="vars">$this</var>-&gt;hashValue(<var class="vars">$tokens</var>);
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$cache</var>[<var class="vars">$hash</var>])) {
     <var class="vars">$result</var> = <var class="vars">$cache</var>[<var class="vars">$hash</var>];
   } <var class="keywords">else</var> {
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
       <var class="vars">$h</var> = <var class="vars">$i</var> - 1;
       <var class="vars">$j</var> = <var class="vars">$i</var> + 1;
       <var class="vars">$pre</var> = <var class="funcs">substr</var>(<var class="vars">$token</var>, 0, 1);
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isAlphaNum(<var class="vars">$pre</var>) || <var class="vars">$pre</var> === <var class="strings">'$'</var>) {
         <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>])) {
           <var class="vars">$lastchar</var> = <var class="funcs">substr</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>], -1);
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isAlphaNum(<var class="vars">$lastchar</var>)) {
             <var class="vars">$tokens</var>[<var class="vars">$h</var>] .= <var class="strings">' '</var>;
           }
         }
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$token</var> === <var class="strings">'+'</var> || <var class="vars">$token</var> === <var class="strings">'-'</var>) {
         <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="strings">' '</var> . <var class="vars">$token</var> . <var class="strings">' '</var>;
       }
     }
     <var class="vars">$result</var> = <var class="funcs">trim</var>(<var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$tokens</var>));
     <var class="keywords">if</var> (<var class="vars">$size</var> &lt; 0x1000 &amp;&amp; <var class="funcs">strlen</var>(<var class="vars">$result</var>) &lt; 0x100) {
       <var class="vars">$cache</var>[<var class="vars">$hash</var>] = <var class="vars">$result</var>;
       <var class="vars">$size</var>++;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0538"><h2>
<a name="p_function_joincrosstable_538">
<var class="function">joinCrossTable</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0538"> <var class="keywords">function</var> joinCrossTable(&amp;<var class="vars">$row1</var>, &amp;<var class="vars">$row2</var>, <var class="vars">$row1name</var>, <var class="vars">$row2name</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="vars">$row1_count</var> = <var class="funcs">count</var>(<var class="vars">$row1</var>);
   <var class="vars">$row2_count</var> = <var class="funcs">count</var>(<var class="vars">$row2</var>);
   <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">true</var>) {
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row2_count</var>; <var class="vars">$i</var>++) {
       <var class="keywords">for</var> (<var class="vars">$j</var> = 0; <var class="vars">$j</var> &lt; <var class="vars">$row1_count</var>; <var class="vars">$j</var>++) {
         <var class="vars">$result</var>[] = <var class="vars">$row2</var>[<var class="vars">$i</var>] + <var class="vars">$row1</var>[<var class="vars">$j</var>];
       }
     }
   } <var class="keywords">else</var> {
     <var class="vars">$this</var>-&gt;fixJoinCrossExpr(<var class="vars">$expr</var>, <var class="vars">$row1name</var>, <var class="vars">$row2name</var>);
     <var class="vars">$arg</var> = <var class="keywords">array</var>();
     <var class="vars">$arg</var>[<var class="vars">$row1name</var>] = <var class="keywords">array</var>();
     <var class="vars">$arg</var>[<var class="vars">$row2name</var>] = <var class="keywords">array</var>();
     <var class="vars">$arg_row1name</var> = &amp; <var class="vars">$arg</var>[<var class="vars">$row1name</var>];
     <var class="vars">$arg_row2name</var> = &amp; <var class="vars">$arg</var>[<var class="vars">$row2name</var>];
     <var class="vars">$first</var> = <var class="keywords">true</var>;
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row2_count</var>; <var class="vars">$i</var>++) {
       <var class="vars">$arg_row2name</var> = <var class="vars">$row2</var>[<var class="vars">$i</var>];
       <var class="keywords">for</var> (<var class="vars">$j</var> = 0; <var class="vars">$j</var> &lt; <var class="vars">$row1_count</var>; <var class="vars">$j</var>++) {
         <var class="vars">$arg_row1name</var> = <var class="vars">$row1</var>[<var class="vars">$j</var>];
         <var class="keywords">if</var> (<var class="vars">$first</var>) {
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$arg</var>, <var class="vars">$expr</var>)) {
             <var class="vars">$result</var>[] = <var class="vars">$row2</var>[<var class="vars">$i</var>] + <var class="vars">$row1</var>[<var class="vars">$j</var>];
           }
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
             <var class="vars">$result</var> = <var class="keywords">array</var>();
             <var class="vars">$row1</var> = <var class="keywords">array</var>();
             <var class="vars">$row2</var> = <var class="keywords">array</var>();
             <var class="keywords">break</var> 2;
           }
           <var class="vars">$first</var> = <var class="keywords">false</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;expr(<var class="vars">$arg</var>, <var class="vars">$expr</var>)) {
             <var class="vars">$result</var>[] = <var class="vars">$row2</var>[<var class="vars">$i</var>] + <var class="vars">$row1</var>[<var class="vars">$j</var>];
           }
         }
       }
     }
     <var class="keywords">unset</var>(<var class="vars">$arg_row1name</var>, <var class="vars">$arg_row2name</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0539"><h2>
<a name="p_function_fixjoincrossexpr_539">
<var class="function">fixJoinCrossExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0539"> <var class="keywords">function</var> fixJoinCrossExpr(&amp;<var class="vars">$expr</var>, <var class="vars">$row1name</var>, <var class="vars">$row2name</var>){
   <var class="keywords">if</var> (<var class="vars">$expr</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$expr</var>, <var class="vars">$row1name</var>) === <var class="keywords">false</var>) {
     <var class="vars">$row_keys</var> = <var class="keywords">array</var>(
       <var class="vars">$row1name</var> =&gt; 1,
       <var class="vars">$row2name</var> =&gt; 2
     );
     <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$expr</var>);
     <var class="vars">$tokens</var> = <var class="funcs">array_values</var>(<var class="vars">$tokens</var>);
     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$tokens</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="vars">$token</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$i</var>);
       <var class="vars">$next</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$i</var> + 1);
       <var class="keywords">switch</var> (<var class="vars">$token</var>) {
         <var class="keywords">case</var> <var class="strings">'$'</var>:
             <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var> &amp;&amp; !<var class="funcs">array_key_exists</var>(<var class="vars">$next</var>, <var class="vars">$row_keys</var>)) {
               <var class="vars">$tokens</var>[<var class="vars">$i</var> + 1] = <var class="vars">$row1name</var>;
               <var class="vars">$i</var>++;
             }
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="keywords">break</var>;
       }
     }
     <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$tokens</var>);
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0540"><h2>
<a name="p_function_joinlefttable_540">
<var class="function">joinLeftTable</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0540"> <var class="keywords">function</var> joinLeftTable(&amp;<var class="vars">$row1</var>, &amp;<var class="vars">$row2</var>, <var class="vars">$row1name</var>, <var class="vars">$row2name</var>,
                                <var class="vars">$using</var>, <var class="vars">$isleft</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;optimizeExpr(<var class="vars">$expr</var>);
   <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">false</var>) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$row1</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$row1</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$row1</var>))) {
       <var class="vars">$keys</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$row1</var>));
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0, <var class="vars">$c</var> = <var class="funcs">count</var>(<var class="vars">$row1</var>); <var class="vars">$i</var> &lt; <var class="vars">$c</var>; <var class="vars">$i</var>++) {
         <var class="keywords">foreach</var> (<var class="vars">$keys</var> <var class="keywords">as</var> <var class="vars">$key</var>) {
           <var class="vars">$result</var>[<var class="vars">$i</var>][<var class="vars">$key</var>] = <var class="keywords">null</var>;
         }
       }
     }
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$isleft</var>) {
       <var class="vars">$cross</var> = <var class="vars">$this</var>-&gt;joinCrossTable(<var class="vars">$row1</var>, <var class="vars">$row2</var>,
                              <var class="vars">$row1name</var>, <var class="vars">$row2name</var>, <var class="vars">$expr</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$cross</var> = <var class="vars">$this</var>-&gt;joinCrossTable(<var class="vars">$row2</var>, <var class="vars">$row1</var>,
                              <var class="vars">$row2name</var>, <var class="vars">$row1name</var>, <var class="vars">$expr</var>);
     }
     <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">true</var>) {
       <var class="vars">$result</var> = <var class="funcs">array_splice</var>(<var class="vars">$cross</var>, 0);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$row1</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$row1</var>)
        &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$row2</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$row2</var>)) {
         <var class="vars">$row1_count</var>  = <var class="funcs">count</var>(<var class="vars">$row1</var>);
         <var class="vars">$row2_count</var>  = <var class="funcs">count</var>(<var class="vars">$row2</var>);
         <var class="vars">$cross_count</var> = <var class="funcs">count</var>(<var class="vars">$cross</var>);
         <var class="vars">$max_count</var>   = <var class="vars">$cross_count</var>;
         <var class="keywords">if</var> (<var class="vars">$max_count</var> &lt; <var class="vars">$row1_count</var>) {
           <var class="vars">$max_count</var> = <var class="vars">$row1_count</var>;
         }
         <var class="vars">$cross_keys</var> = <var class="keywords">array</var>();
         <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$cross</var>[0]) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$cross</var>[0])) {
           <var class="keywords">foreach</var> (<var class="vars">$cross</var>[0] <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
             <var class="vars">$cross_keys</var>[<var class="vars">$key</var>] = <var class="keywords">null</var>;
           }
         }
         <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$row1</var>);
         <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$reset</var>)) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal record(%s) on JOIN'</var>, <var class="vars">$reset</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$row1_keys</var> = <var class="funcs">array_keys</var>(<var class="vars">$reset</var>);
           <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$row2</var>);
           <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$reset</var>)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal record(%s) on JOIN'</var>, <var class="vars">$reset</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$row2_keys</var> = <var class="funcs">array_keys</var>(<var class="vars">$reset</var>);
             <var class="vars">$arg</var> = <var class="keywords">array</var>();
             <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$using</var>)) {
               <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$using</var>)) {
                 <var class="vars">$using</var> = <var class="keywords">array</var>();
               } <var class="keywords">else</var> {
                 <var class="vars">$using</var> = <var class="funcs">array_flip</var>(<var class="funcs">array_filter</var>(<var class="vars">$using</var>, <var class="strings">'is_string'</var>));
               }
             }
             <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$cross_keys</var>)) {
               <var class="vars">$join_keys</var> = <var class="funcs">array_merge</var>(<var class="vars">$row1_keys</var>, <var class="vars">$row2_keys</var>);
               <var class="vars">$join_keys</var> = <var class="funcs">array_unique</var>(<var class="vars">$join_keys</var>);
             } <var class="keywords">else</var> {
               <var class="vars">$join_keys</var> = <var class="funcs">array_keys</var>(<var class="vars">$cross_keys</var>);
             }
             <var class="keywords">for</var> (<var class="vars">$i</var> = 0, <var class="vars">$j</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$max_count</var>; <var class="vars">$i</var>++) {
               <var class="vars">$new_row</var> = <var class="keywords">array</var>();
               <var class="keywords">if</var> (<var class="vars">$i</var> &lt; <var class="vars">$cross_count</var>) {
                 <var class="vars">$new_row</var> = <var class="vars">$cross</var>[<var class="vars">$j</var>];
                 <var class="vars">$cross</var>[<var class="vars">$j</var>] = <var class="keywords">null</var>;
                 <var class="vars">$j</var>++;
               } <var class="keywords">else</var> {
                 <var class="vars">$row</var> = <var class="vars">$row1</var>[<var class="vars">$i</var>];
                 <var class="vars">$diff</var> = <var class="vars">$cross_keys</var>;
                 <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$row2</var>[<var class="vars">$i</var>])) {
                   <var class="vars">$diff</var> = <var class="vars">$row2</var>[<var class="vars">$i</var>];
                 }
                 <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$using</var>)) {
                   <var class="vars">$pad</var> = <var class="vars">$row</var>;
                   <var class="keywords">foreach</var> (<var class="vars">$row2_keys</var> <var class="keywords">as</var> <var class="vars">$key</var>) {
                     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$pad</var>)) {
                       <var class="vars">$pad</var>[<var class="vars">$key</var>] = <var class="keywords">null</var>;
                     }
                   }
                   <var class="comments">//TODO(?): Contradiction of the order of column</var>
                   <var class="vars">$new_row</var> = <var class="vars">$pad</var> + <var class="vars">$diff</var>;
                 } <var class="keywords">else</var> {
                   <var class="vars">$new_row</var> = <var class="vars">$row</var> + <var class="vars">$diff</var>;
                 }
               }
               <var class="vars">$join_row</var> = <var class="keywords">array</var>();
               <var class="keywords">foreach</var> (<var class="vars">$join_keys</var> <var class="keywords">as</var> <var class="vars">$key</var>) {
                 <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$new_row</var>)) {
                   <var class="vars">$join_row</var>[<var class="vars">$key</var>] = <var class="vars">$new_row</var>[<var class="vars">$key</var>];
                 } <var class="keywords">else</var> {
                   <var class="vars">$join_row</var>[<var class="vars">$key</var>] = <var class="keywords">null</var>;
                 }
               }
               <var class="vars">$result</var>[] = <var class="vars">$join_row</var>;
             }
           }
         }
       }
     }
     <var class="keywords">unset</var>(<var class="vars">$cross</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0541"><h2>
<a name="p_function_appendcorrelationpairs_541">
<var class="function">appendCorrelationPairs</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0541"> <var class="keywords">function</var> appendCorrelationPairs(&amp;<var class="vars">$rows</var>, <var class="vars">$table_name</var>){
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
     <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
       <var class="keywords">foreach</var> (<var class="vars">$rows</var>[<var class="vars">$i</var>] <var class="keywords">as</var> <var class="vars">$col</var> =&gt; <var class="vars">$val</var>) {
         <var class="vars">$column_name</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s.%s'</var>, <var class="vars">$table_name</var>, <var class="vars">$col</var>);
         <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$column_name</var>] = <var class="vars">$val</var>;
       }
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0542"><h2>
<a name="p_function_jointables_542">
<var class="function">joinTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0542"> <var class="keywords">function</var> joinTables(&amp;<var class="vars">$rows</var>, <var class="vars">$info</var> = <var class="keywords">array</var>(), <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var> &lt; 1 || <var class="vars">$length</var> !== <var class="funcs">count</var>(<var class="vars">$info</var>)) {
     <var class="comments">/*
     $this-&gt;pushError('The numbers of tables'
                    . ' and rows are discrepancy on JOIN');
     */</var>
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> {
     <var class="vars">$info</var> = <var class="funcs">array_values</var>(<var class="vars">$info</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
       <var class="vars">$table_name</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$info</var>[<var class="vars">$i</var>], <var class="strings">'table_name'</var>);
       <var class="vars">$table_as</var>   = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$info</var>[<var class="vars">$i</var>], <var class="strings">'table_as'</var>);
       <var class="vars">$join_type</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$info</var>[<var class="vars">$i</var>], <var class="strings">'join_type'</var>, <var class="strings">'undefined'</var>);
       <var class="vars">$join_expr</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$info</var>[<var class="vars">$i</var>], <var class="strings">'join_expr'</var>, <var class="keywords">false</var>);
       <var class="vars">$using</var>      = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$info</var>[<var class="vars">$i</var>], <var class="strings">'using'</var>, <var class="keywords">array</var>());
       <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table_name</var>);
       <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$rows</var>[<var class="vars">$tname</var>])) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Table is not exists(%s)'</var>, <var class="vars">$table_name</var>);
         <var class="vars">$rows</var> = <var class="keywords">array</var>();
         <var class="keywords">break</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$rows</var> = <var class="keywords">array</var>();
         <var class="keywords">break</var>;
       }
       <var class="keywords">if</var> (<var class="vars">$i</var> === 0) {
         <var class="vars">$base_row</var>        = <var class="vars">$rows</var>[<var class="vars">$tname</var>];
         <var class="vars">$base_row_name</var>   = <var class="vars">$table_name</var>;
         <var class="vars">$base_count</var>      = <var class="funcs">count</var>(<var class="vars">$base_row</var>);
         <var class="vars">$this</var>-&gt;tableName = <var class="vars">$tname</var>;
         <var class="vars">$this</var>-&gt;appendCorrelationPairs(<var class="vars">$base_row</var>, <var class="vars">$base_row_name</var>);
         <var class="keywords">continue</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$row</var> = <var class="vars">$rows</var>[<var class="vars">$tname</var>];
         <var class="vars">$this</var>-&gt;appendCorrelationPairs(<var class="vars">$row</var>, <var class="vars">$table_name</var>);
       }
       <var class="vars">$join_type</var> = <var class="funcs">strtolower</var>(<var class="vars">$join_type</var>);
       <var class="keywords">switch</var> (<var class="vars">$join_type</var>) {
         <var class="keywords">case</var> <var class="strings">'cross'</var>:
         <var class="keywords">case</var> <var class="strings">'inner'</var>:
         <var class="keywords">case</var> <var class="strings">'join'</var>:
             <var class="vars">$base_row</var> = <var class="vars">$this</var>-&gt;joinCrossTable(<var class="vars">$base_row</var>, <var class="vars">$row</var>,
                           <var class="vars">$base_row_name</var>, <var class="vars">$table_name</var>, <var class="vars">$join_expr</var>);
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'full'</var>:
         <var class="keywords">case</var> <var class="strings">'left'</var>:
         <var class="keywords">case</var> <var class="strings">'natural'</var>:
             <var class="vars">$base_row</var> = <var class="vars">$this</var>-&gt;joinLeftTable(<var class="vars">$base_row</var>, <var class="vars">$row</var>,
                   <var class="vars">$base_row_name</var>, <var class="vars">$table_name</var>, <var class="vars">$using</var>, <var class="keywords">true</var>, <var class="vars">$join_expr</var>);
             <var class="keywords">if</var> (<var class="vars">$join_type</var> !== <var class="strings">'full'</var>) {
               <var class="keywords">break</var>;
             }
         <var class="keywords">case</var> <var class="strings">'right'</var>:
             <var class="vars">$base_row</var> = <var class="vars">$this</var>-&gt;joinLeftTable(<var class="vars">$row</var>, <var class="vars">$base_row</var>,
                   <var class="vars">$table_name</var>, <var class="vars">$base_row_name</var>, <var class="vars">$using</var>, <var class="keywords">false</var>, <var class="vars">$join_expr</var>);
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported JOIN type(%s)'</var>, <var class="vars">$join_type</var>);
             <var class="vars">$rows</var> = <var class="keywords">array</var>();
             <var class="keywords">break</var> 2;
       }
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$base_row</var>)) {
       <var class="vars">$tmp</var> = <var class="vars">$base_row</var>;
       <var class="keywords">unset</var>(<var class="vars">$base_row</var>);
       <var class="vars">$rows</var> = <var class="vars">$tmp</var>;
       <var class="keywords">unset</var>(<var class="vars">$tmp</var>);
     }
     <var class="keywords">unset</var>(<var class="vars">$base_row</var>, <var class="vars">$tmp</var>);
     <var class="vars">$this</var>-&gt;applyJoinExpr(<var class="vars">$rows</var>, <var class="vars">$expr</var>);
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0543"><h2>
<a name="p_function_applyjoinexpr_543">
<var class="function">applyJoinExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0543"> <var class="keywords">function</var> applyJoinExpr(&amp;<var class="vars">$rows</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$expr</var> !== <var class="keywords">true</var>) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_extraJoinExpr)
        &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$expr</var>) &amp;&amp; <var class="vars">$expr</var> != <var class="keywords">null</var>) {
         <var class="vars">$extra_expr</var> = <var class="vars">$this</var>-&gt;_extraJoinExpr;
         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$extra_expr</var>)) {
           <var class="vars">$extra_expr</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$extra_expr</var>);
           <var class="vars">$extra_expr</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$extra_expr</var>);
           <var class="vars">$this</var>-&gt;removeValidMarks(<var class="vars">$expr</var>);
           <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$expr</var>, <var class="vars">$extra_expr</var>) === 0) {
             <var class="vars">$expr</var> = <var class="funcs">substr</var>(<var class="vars">$expr</var>, <var class="funcs">strlen</var>(<var class="vars">$extra_expr</var>));
             <var class="vars">$expr</var> = <var class="funcs">trim</var>(<var class="vars">$expr</var>, <var class="strings">'&amp;|'</var>);
           }
           <var class="vars">$this</var>-&gt;addParsedMark(<var class="vars">$expr</var>);
           <var class="vars">$this</var>-&gt;addValidMarks(<var class="vars">$expr</var>);
         }
       }
       <var class="vars">$this</var>-&gt;_extraJoinExpr = <var class="keywords">array</var>();
       <var class="vars">$rows</var> = <var class="funcs">array_values</var>(<var class="vars">$rows</var>);
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="vars">$first</var> = <var class="keywords">true</var>;
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
         <var class="vars">$valid_row</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$rows</var>[<var class="vars">$i</var>] <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
           <var class="vars">$valid_row</var>[<var class="vars">$key</var>] = <var class="vars">$val</var>;
           <var class="vars">$left_key</var> = <var class="vars">$this</var>-&gt;toCorrelationName(<var class="vars">$key</var>);
           <var class="vars">$valid_row</var>[<var class="vars">$left_key</var>] = <var class="vars">$val</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$first</var>) {
           <var class="vars">$first</var> = <var class="keywords">false</var>;
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$valid_row</var>, <var class="vars">$expr</var>)) {
             <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>]);
           }
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
             <var class="vars">$rows</var> = <var class="keywords">array</var>();
             <var class="keywords">break</var>;
           }
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;expr(<var class="vars">$valid_row</var>, <var class="vars">$expr</var>)) {
             <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>]);
           }
         }
       }
       <var class="vars">$rows</var> = <var class="funcs">array_values</var>(<var class="vars">$rows</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0544"><h2>
<a name="p_function_buildquery_544">
<var class="function">buildQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>param</dt>
<dd><em>string</em>  the type of query e.g. &quot;select&quot;</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of executed, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens, and passes each methods
</pre>
</div></div><pre id="source-0544"> <var class="keywords">function</var> buildQuery(<var class="vars">$parsed</var>, <var class="vars">$type</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;_useQuery = <var class="keywords">true</var>;
   <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$type</var>)) {
     <var class="keywords">case</var> <var class="strings">'select'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildSelectQuery(<var class="vars">$parsed</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'update'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildUpdateQuery(<var class="vars">$parsed</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'delete'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildDeleteQuery(<var class="vars">$parsed</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'insert'</var>:
     <var class="keywords">case</var> <var class="strings">'replace'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildInsertQuery(<var class="vars">$parsed</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'create'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildCreateQuery(<var class="vars">$parsed</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'drop'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildDropQuery(<var class="vars">$parsed</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'vacuum'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;vacuum();
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'describe'</var>:
     <var class="keywords">case</var> <var class="strings">'desc'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildDescribeQuery(<var class="vars">$parsed</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'begin'</var>:
     <var class="keywords">case</var> <var class="strings">'start'</var>:
     <var class="keywords">case</var> <var class="strings">'commit'</var>:
     <var class="keywords">case</var> <var class="strings">'end'</var>:
     <var class="keywords">case</var> <var class="strings">'rollback'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;transaction(<var class="vars">$type</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'alter'</var>:
     <var class="keywords">default</var>:
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$type</var>);
         <var class="keywords">break</var>;
   }
   <var class="vars">$this</var>-&gt;_useQuery = <var class="keywords">null</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0545"><h2>
<a name="p_function_buildcreatequery_545">
<var class="function">buildCreateQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of executed, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens for CREATE TABLE/DATABASE
</pre>
</div></div><pre id="source-0545"> <var class="keywords">function</var> buildCreateQuery(<var class="vars">$parsed</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$args</var> = <var class="keywords">array</var>(<var class="strings">'table'</var>    =&gt; <var class="keywords">array</var>(<var class="strings">'table'</var>    =&gt; <var class="keywords">null</var>, <var class="strings">'fields'</var> =&gt; <var class="keywords">array</var>()),
                 <var class="strings">'database'</var> =&gt; <var class="keywords">array</var>(<var class="strings">'database'</var> =&gt; <var class="keywords">null</var>));
   <var class="vars">$type</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$parsed</var>[<var class="strings">'table'</var>])) {
     <var class="vars">$type</var> = <var class="strings">'table'</var>;
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$parsed</var>[<var class="strings">'database'</var>])) {
     <var class="vars">$type</var> = <var class="strings">'database'</var>;
   }
   <var class="keywords">switch</var> (<var class="vars">$type</var>) {
     <var class="keywords">case</var> <var class="strings">'table'</var>:
         <var class="vars">$args</var> = <var class="vars">$this</var>-&gt;parseCreateTableQuery(<var class="vars">$parsed</var>[<var class="vars">$type</var>], <var class="keywords">true</var>);
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$args</var>)
            &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$args</var>[<var class="strings">'table'</var>], <var class="vars">$args</var>[<var class="strings">'fields'</var>])) {
             <var class="vars">$primary</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$args</var>, <var class="strings">'primary'</var>);
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;createTable(<var class="vars">$args</var>[<var class="strings">'table'</var>],
                                          <var class="vars">$args</var>[<var class="strings">'fields'</var>], <var class="vars">$primary</var>);
           }
         }
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'database'</var>:
         <var class="vars">$path</var> = <var class="vars">$this</var>-&gt;parseCreateDatabaseQuery(<var class="vars">$parsed</var>[<var class="vars">$type</var>]);
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; <var class="vars">$path</var> != <var class="keywords">null</var>) {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;createDatabase(<var class="vars">$path</var>);
         }
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$type</var>);
         <var class="keywords">break</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0546"><h2>
<a name="p_function_builddropquery_546">
<var class="function">buildDropQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of executed, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens for DROP TABLE/DATABASE
</pre>
</div></div><pre id="source-0546"> <var class="keywords">function</var> buildDropQuery(<var class="vars">$parsed</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$args</var> = <var class="keywords">array</var>(<var class="strings">'table'</var>    =&gt; <var class="keywords">array</var>(<var class="strings">'table'</var>    =&gt; <var class="keywords">null</var>),
                 <var class="strings">'database'</var> =&gt; <var class="keywords">array</var>(<var class="strings">'database'</var> =&gt; <var class="keywords">null</var>));
   <var class="vars">$type</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$parsed</var>[<var class="strings">'table'</var>])) {
     <var class="vars">$type</var> = <var class="strings">'table'</var>;
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$parsed</var>[<var class="strings">'database'</var>])) {
     <var class="vars">$type</var> = <var class="strings">'database'</var>;
   }
   <var class="keywords">switch</var> (<var class="vars">$type</var>) {
     <var class="keywords">case</var> <var class="strings">'table'</var>:
         <var class="vars">$table</var> = <var class="vars">$this</var>-&gt;parseDropQuery(<var class="vars">$parsed</var>[<var class="vars">$type</var>]);
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
           <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$table</var>) &amp;&amp; <var class="vars">$table</var> != <var class="keywords">null</var>) {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;dropTable(<var class="vars">$table</var>);
           }
         }
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'database'</var>:
         <var class="vars">$dbname</var> = <var class="vars">$this</var>-&gt;parseDropQuery(<var class="vars">$parsed</var>[<var class="vars">$type</var>]);
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
           <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$dbname</var>) &amp;&amp; <var class="vars">$dbname</var> != <var class="keywords">null</var>) {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;dropDatabase(<var class="vars">$dbname</var>);
           }
         }
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$type</var>);
         <var class="keywords">break</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0547"><h2>
<a name="p_function_buildinsertquery_547">
<var class="function">buildInsertQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of executed, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens for INSERT
</pre>
</div></div><pre id="source-0547"> <var class="keywords">function</var> buildInsertQuery(<var class="vars">$parsed</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$args</var> = <var class="keywords">array</var>(<var class="strings">'table'</var> =&gt; <var class="keywords">null</var>, <var class="strings">'rows'</var> =&gt; <var class="keywords">array</var>());
   <var class="vars">$cols</var> = <var class="keywords">array</var>();
   <var class="funcs">ksort</var>(<var class="vars">$parsed</var>);
   <var class="keywords">foreach</var> (<var class="vars">$parsed</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">switch</var> (<var class="vars">$key</var>) {
       <var class="keywords">case</var> <var class="strings">'into'</var>:
           <var class="vars">$args</var>[<var class="strings">'table'</var>] = <var class="vars">$this</var>-&gt;assignNames(<var class="vars">$val</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'cols'</var>:
           <var class="vars">$cols</var> = <var class="vars">$val</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'values'</var>:
           <var class="vars">$values</var> = <var class="keywords">array</var>(<var class="strings">'cols'</var>   =&gt; <var class="vars">$cols</var>,
                           <var class="strings">'values'</var> =&gt; <var class="vars">$val</var>);
           <var class="vars">$args</var>[<var class="strings">'rows'</var>] = <var class="vars">$this</var>-&gt;parseInsertValues(<var class="vars">$values</var>);
           <var class="vars">$this</var>-&gt;_execExpr = <var class="keywords">true</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'select'</var>:
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$val</var>)) {
             <var class="funcs">array_unshift</var>(<var class="vars">$val</var>, <var class="vars">$key</var>);
           }
           <var class="vars">$args</var>[<var class="strings">'rows'</var>] = <var class="vars">$this</var>-&gt;buildInsertSelectSubQuery(<var class="vars">$val</var>, <var class="vars">$cols</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'set'</var>:
       <var class="keywords">default</var>:
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$key</var>);
           <var class="keywords">break</var>;
     }
   }
   <var class="comments">//debug($args,'color=blue:***insert***;');</var>
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">switch</var> (<var class="vars">$this</var>-&gt;lastMethod) {
       <var class="keywords">case</var> <var class="strings">'insert'</var>:
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;insert(<var class="vars">$args</var>[<var class="strings">'table'</var>], <var class="vars">$args</var>[<var class="strings">'rows'</var>]);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'replace'</var>:
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;replace(<var class="vars">$args</var>[<var class="strings">'table'</var>], <var class="vars">$args</var>[<var class="strings">'rows'</var>]);
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$this</var>-&gt;lastMethod);
           <var class="keywords">break</var>;
     }
   }
   <var class="vars">$this</var>-&gt;_execExpr = <var class="keywords">false</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0548"><h2>
<a name="p_function_buildinsertselectsubquery_548">
<var class="function">buildInsertSelectSubQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens as SELECT clause</dd>
<dt>param</dt>
<dd><em>array</em>   parsed tokens as columns-list</dd>
<dt>return</dt>
<dd><em>array</em>   array which was executed as SELECT sub-query</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens for INSERT-SELECT sub-query
</pre>
</div></div><pre id="source-0548"> <var class="keywords">function</var> buildInsertSelectSubQuery(<var class="vars">$select</var>, <var class="vars">$cols</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$cols</var>) || !<var class="funcs">is_array</var>(<var class="vars">$cols</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot execute sub-query. expect columns-list'</var>);
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$select</var>) || !<var class="funcs">is_array</var>(<var class="vars">$select</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot execute sub-query. expect SELECT clause'</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$values</var> = <var class="keywords">array</var>(<var class="strings">'cols'</var>   =&gt; <var class="vars">$cols</var>,
                       <var class="strings">'values'</var> =&gt; <var class="vars">$cols</var>);
       <var class="vars">$columns</var> = <var class="vars">$this</var>-&gt;parseInsertValues(<var class="vars">$values</var>);
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$columns</var>) &amp;&amp; <var class="funcs">reset</var>(<var class="vars">$columns</var>) === <var class="funcs">key</var>(<var class="vars">$columns</var>)) {
           <var class="vars">$columns</var> = <var class="funcs">array_values</var>(<var class="vars">$columns</var>);
           <var class="vars">$parsed_select</var> = <var class="vars">$this</var>-&gt;parseSelectQuery(<var class="vars">$select</var>);
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$parsed_select</var>)) {
             <var class="vars">$stmt</var> = <var class="vars">$this</var>-&gt;buildSelectQuery(<var class="vars">$parsed_select</var>);
             <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
               <var class="vars">$rows</var> = <var class="keywords">null</var>;
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStatementObject(<var class="vars">$stmt</var>)) {
                 <var class="vars">$rows</var> = <var class="vars">$stmt</var>-&gt;fetchAll(<var class="strings">'assoc'</var>);
               } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$stmt</var>) &amp;&amp; <var class="vars">$this</var>-&gt;isAssoc(<var class="funcs">reset</var>(<var class="vars">$stmt</var>))) {
                 <var class="vars">$rows</var> = <var class="vars">$stmt</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to get records on INSERT-SELECT'</var>);
               }
               <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
                 <var class="vars">$rows_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
                 <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$rows_count</var>; <var class="vars">$i</var>++) {
                   <var class="vars">$new_row</var> = <var class="keywords">array</var>();
                   <var class="vars">$values</var> = <var class="funcs">array_values</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>]);
                   <var class="keywords">foreach</var> (<var class="vars">$columns</var> <var class="keywords">as</var> <var class="vars">$index</var> =&gt; <var class="vars">$column</var>) {
                     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$index</var>, <var class="vars">$values</var>)) {
                       <var class="vars">$new_row</var>[<var class="vars">$column</var>] = <var class="vars">$values</var>[<var class="vars">$index</var>];
                     }
                   }
                   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$new_row</var>)) {
                     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Column count does not match'</var>
                                   .  <var class="strings">' value count on INSERT-SELECT'</var>);
                     <var class="vars">$rows</var> = <var class="keywords">array</var>();
                     <var class="keywords">break</var>;
                   }
                   <var class="vars">$rows</var>[<var class="vars">$i</var>] = <var class="vars">$new_row</var>;
                 }
                 <var class="vars">$result</var> = <var class="funcs">array_splice</var>(<var class="vars">$rows</var>, 0);
                 <var class="keywords">unset</var>(<var class="vars">$rows</var>);
               }
             }
             <var class="vars">$stmt</var> = <var class="keywords">null</var>;
             <var class="keywords">unset</var>(<var class="vars">$stmt</var>);
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0549"><h2>
<a name="p_function_builddeletequery_549">
<var class="function">buildDeleteQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of executed, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens for DELETE
</pre>
</div></div><pre id="source-0549"> <var class="keywords">function</var> buildDeleteQuery(<var class="vars">$parsed</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$args</var> = <var class="keywords">array</var>(<var class="strings">'table'</var> =&gt; <var class="keywords">null</var>, <var class="strings">'expr'</var> =&gt; <var class="keywords">false</var>);
   <var class="keywords">foreach</var> (<var class="vars">$parsed</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">switch</var> (<var class="vars">$key</var>) {
       <var class="keywords">case</var> <var class="strings">'from'</var>:
           <var class="vars">$tablename</var> = <var class="vars">$this</var>-&gt;assignNames(<var class="vars">$val</var>);
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;getMeta(<var class="vars">$tablename</var>)) {
             <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$tablename</var>);
           }
           <var class="vars">$args</var>[<var class="strings">'table'</var>] = <var class="vars">$tablename</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'where'</var>:
           <var class="vars">$args</var>[<var class="strings">'expr'</var>] = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$val</var>);
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$key</var>);
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;delete(<var class="vars">$args</var>[<var class="strings">'table'</var>], <var class="vars">$args</var>[<var class="strings">'expr'</var>]);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0550"><h2>
<a name="p_function_buildupdatequery_550">
<var class="function">buildUpdateQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of executed, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens for UPDATE
</pre>
</div></div><pre id="source-0550"> <var class="keywords">function</var> buildUpdateQuery(<var class="vars">$parsed</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$args</var> = <var class="keywords">array</var>(<var class="strings">'table'</var> =&gt; <var class="keywords">null</var>, <var class="strings">'row'</var> =&gt; <var class="keywords">array</var>(), <var class="strings">'expr'</var> =&gt; <var class="keywords">true</var>);
   <var class="keywords">foreach</var> (<var class="vars">$parsed</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">switch</var> (<var class="vars">$key</var>) {
       <var class="keywords">case</var> <var class="strings">'update'</var>:
           <var class="vars">$tablename</var> = <var class="vars">$this</var>-&gt;assignNames(<var class="vars">$val</var>);
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;getMeta(<var class="vars">$tablename</var>)) {
             <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$tablename</var>);
           }
           <var class="vars">$args</var>[<var class="strings">'table'</var>] = <var class="vars">$tablename</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'where'</var>:
           <var class="vars">$args</var>[<var class="strings">'expr'</var>] = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$val</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'set'</var>:
           <var class="vars">$args</var>[<var class="strings">'row'</var>] = <var class="vars">$this</var>-&gt;parseUpdateSet(<var class="vars">$val</var>);
           <var class="vars">$this</var>-&gt;_execExpr = <var class="keywords">true</var>;
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$key</var>);
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;update(<var class="vars">$args</var>[<var class="strings">'table'</var>], <var class="vars">$args</var>[<var class="strings">'row'</var>], <var class="vars">$args</var>[<var class="strings">'expr'</var>]);
   }
   <var class="vars">$this</var>-&gt;_execExpr = <var class="keywords">false</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0551"><h2>
<a name="p_function_buildselectquery_551">
<var class="function">buildSelectQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of executed, or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens for SELECT
</pre>
</div></div><pre id="source-0551"> <var class="keywords">function</var> buildSelectQuery(<var class="vars">$parsed</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;_subSelectJoinInfo = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames = <var class="keywords">array</var>();
   <var class="vars">$args</var> = <var class="vars">$this</var>-&gt;getSelectDefaultArguments();
   <var class="vars">$multi</var> = <var class="keywords">false</var>;
   <var class="vars">$sub_select</var> = <var class="keywords">false</var>;
   <var class="vars">$subsets</var> = <var class="keywords">array</var>();
   <var class="keywords">foreach</var> (<var class="vars">$parsed</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">switch</var> (<var class="vars">$key</var>) {
       <var class="keywords">case</var> <var class="strings">'select'</var>:
           <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$val</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'from'</var>:
           <var class="vars">$tables</var> = <var class="keywords">array</var>();
           <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$val</var>);
           <var class="vars">$table_name</var> = <var class="strings">'table_name'</var>;
           <var class="vars">$sub_select</var> = <var class="vars">$this</var>-&gt;isSubSelectFrom(<var class="vars">$from</var>);
           <var class="keywords">if</var> (<var class="vars">$sub_select</var>) {
             <var class="vars">$this</var>-&gt;tableName = <var class="strings">''</var>;
             <var class="vars">$this</var>-&gt;applyAliasNames(<var class="vars">$from</var>, <var class="vars">$args</var>[<var class="strings">'select'</var>]);
             <var class="vars">$aliases</var> = <var class="vars">$this</var>-&gt;getTableAliasNames();
             <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$aliases</var>)) {
               <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="funcs">reset</var>(<var class="vars">$aliases</var>));
             }
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isMultipleSelect(<var class="vars">$from</var>)) {
               <var class="vars">$this</var>-&gt;_subSelectJoinInfo = <var class="vars">$this</var>-&gt;parseJoinTables(<var class="vars">$val</var>);
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                 <var class="keywords">break</var> 2;
               } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames)) {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to compile on sub-query using JOIN'</var>);
                 <var class="keywords">break</var> 2;
               }
               <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;execMultiSubQueryFrom(<var class="vars">$from</var>);
               <var class="vars">$multi</var> = <var class="keywords">true</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;execSubQueryFrom(<var class="vars">$from</var>);
             }
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$from</var>);
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isMultipleSelect(<var class="vars">$from</var>)) {
               <var class="vars">$tables</var> = <var class="vars">$this</var>-&gt;parseJoinTables(<var class="vars">$val</var>);
               <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tables</var>[0][<var class="vars">$table_name</var>])) {
                 <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$tables</var>[0][<var class="vars">$table_name</var>]);
               }
               <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$tables</var>;
               <var class="vars">$multi</var> = <var class="keywords">true</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$tables</var> = <var class="vars">$this</var>-&gt;parseFromClause(<var class="vars">$val</var>);
               <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tables</var>[<var class="vars">$table_name</var>])) {
                 <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$tables</var>[<var class="vars">$table_name</var>]);
                 <var class="vars">$this</var>-&gt;appendAliasToken(<var class="vars">$val</var>);
                 <var class="vars">$from</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$val</var>);
               }
               <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$from</var>;
             }
           }
           <var class="keywords">unset</var>(<var class="vars">$tables</var>, <var class="vars">$from</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'where'</var>:
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;tableName)
             &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
             <var class="vars">$this</var>-&gt;getMeta();
           }
           <var class="keywords">if</var> (<var class="vars">$multi</var>) {
             <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">true</var>;
           }
           <var class="keywords">if</var> (!<var class="vars">$sub_select</var>) {
             <var class="vars">$this</var>-&gt;applyAliasNames(<var class="vars">$args</var>[<var class="strings">'from'</var>], <var class="vars">$args</var>[<var class="strings">'select'</var>]);
           }
           <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$val</var>);
           <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">null</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'group'</var>:
           <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$val</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'having'</var>:
           <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$val</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'order'</var>:
           <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;parseOrderByTokens(<var class="vars">$val</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'limit'</var>:
           <var class="vars">$args</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;parseLimitTokens(<var class="vars">$val</var>);
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'union'</var>:
       <var class="keywords">case</var> <var class="strings">'union_all'</var>:
       <var class="keywords">case</var> <var class="strings">'intersect'</var>:
       <var class="keywords">case</var> <var class="strings">'intersect_all'</var>:
       <var class="keywords">case</var> <var class="strings">'except'</var>:
       <var class="keywords">case</var> <var class="strings">'except_all'</var>:
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$val</var>) || <var class="vars">$val</var> === <var class="keywords">array</var>(<var class="keywords">array</var>())) {
             <var class="vars">$error</var> = <var class="funcs">strtoupper</var>(<var class="funcs">strtr</var>(<var class="vars">$key</var>, <var class="strings">'_'</var>, <var class="strings">' '</var>));
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Syntax error, expect(%s)'</var>, <var class="vars">$error</var>);
           }
           <var class="vars">$subsets</var>[<var class="vars">$key</var>] = <var class="vars">$val</var>;
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$key</var>);
           <var class="keywords">break</var> 2;
     }
   }
   <var class="comments">//debug($args,'color=blue:***buildSelectQuery***;');</var>
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_fromSubSelect) {
       <var class="keywords">if</var> (<var class="vars">$multi</var>) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;multiSubSelect(<var class="vars">$args</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;subSelect(<var class="vars">$args</var>);
       }
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$args</var>[<var class="strings">'from'</var>] === <var class="keywords">null</var>) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;selectDual(<var class="vars">$args</var>[<var class="strings">'select'</var>]);
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$multi</var>) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;multiSelect(<var class="vars">$args</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;select(<var class="vars">$args</var>);
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$subsets</var>)) {
       <var class="vars">$this</var>-&gt;_unionColNames = <var class="keywords">array</var>();
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildSelectUnionQuery(<var class="vars">$result</var>, <var class="vars">$args</var>, <var class="vars">$subsets</var>);
       <var class="vars">$this</var>-&gt;_unionColNames = <var class="keywords">array</var>();
     }
   }
   <var class="vars">$this</var>-&gt;_subSelectJoinInfo = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames = <var class="keywords">array</var>();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0552"><h2>
<a name="p_function_buildselectunionquery_552">
<var class="function">buildSelectUnionQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens as UNION clause same as SELECT tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   executed result-set, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens for SELECT (using UNION: compound-operator)
</pre>
</div></div><pre id="source-0552"> <var class="keywords">function</var> buildSelectUnionQuery(<var class="vars">$base_stmt</var>, <var class="vars">$args</var>, <var class="vars">$subsets</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$subsets</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$subsets</var>)) {
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isStatementObject(<var class="vars">$base_stmt</var>)) {
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$base_stmt</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid result-set on SELECT (using UNION)'</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$rows</var> = <var class="vars">$base_stmt</var>;
       }
     } <var class="keywords">else</var> {
       <var class="vars">$rows</var> = <var class="vars">$base_stmt</var>-&gt;fetchAll(<var class="strings">'assoc'</var>);
     }
     <var class="vars">$base_stmt</var> = <var class="keywords">null</var>;
     <var class="keywords">unset</var>(<var class="vars">$base_stmt</var>);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">foreach</var> (<var class="vars">$subsets</var> <var class="keywords">as</var> <var class="vars">$type</var> =&gt; <var class="vars">$subset</var>) {
         <var class="keywords">foreach</var> (<var class="vars">$subset</var> <var class="keywords">as</var> <var class="vars">$parsed_tokens</var>) {
           <var class="vars">$col_names</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$args</var>, <var class="strings">'select'</var>);
           <var class="keywords">if</var> (<var class="vars">$col_names</var> != <var class="keywords">null</var>) {
             <var class="vars">$col_names</var> = <var class="vars">$this</var>-&gt;parseColumns(<var class="vars">$col_names</var>, <var class="strings">'columns'</var>);
           }
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$col_names</var>)) {
             <var class="keywords">foreach</var> (<var class="vars">$col_names</var> <var class="keywords">as</var> <var class="vars">$col_name</var>) {
               <var class="vars">$this</var>-&gt;_unionColNames[<var class="vars">$col_name</var>] = 1;
             }
           } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$col_names</var>)) {
             <var class="vars">$this</var>-&gt;_unionColNames[<var class="vars">$col_names</var>] = 1;
           }
           <var class="vars">$this</var>-&gt;_onUnionSelect = <var class="keywords">true</var>;
           <var class="vars">$stmt</var> = <var class="vars">$this</var>-&gt;buildSelectQuery(<var class="vars">$parsed_tokens</var>);
           <var class="vars">$this</var>-&gt;_onUnionSelect = <var class="keywords">null</var>;
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
             <var class="keywords">break</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isStatementObject(<var class="vars">$stmt</var>)) {
               <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$stmt</var>)) {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to compound rows on UNION'</var>);
                 <var class="keywords">break</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$union_rows</var> = <var class="vars">$stmt</var>;
               }
             } <var class="keywords">else</var> {
               <var class="vars">$union_rows</var> = <var class="vars">$stmt</var>-&gt;fetchAll(<var class="strings">'assoc'</var>);
             }
             <var class="keywords">switch</var> (<var class="vars">$type</var>) {
               <var class="keywords">case</var> <var class="strings">'union'</var>:
                   <var class="vars">$rows</var> = <var class="vars">$this</var>-&gt;unionAll(<var class="vars">$rows</var>, <var class="vars">$union_rows</var>, <var class="vars">$col_names</var>);
                   <var class="vars">$this</var>-&gt;applyDistinct(<var class="vars">$rows</var>);
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">'union_all'</var>:
                   <var class="vars">$rows</var> = <var class="vars">$this</var>-&gt;unionAll(<var class="vars">$rows</var>, <var class="vars">$union_rows</var>, <var class="vars">$col_names</var>);
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">'intersect'</var>:
                   <var class="vars">$rows</var> = <var class="vars">$this</var>-&gt;intersectAll(<var class="vars">$rows</var>, <var class="vars">$union_rows</var>, <var class="vars">$col_names</var>);
                   <var class="vars">$this</var>-&gt;applyDistinct(<var class="vars">$rows</var>);
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">'intersect_all'</var>:
                   <var class="vars">$rows</var> = <var class="vars">$this</var>-&gt;intersectAll(<var class="vars">$rows</var>, <var class="vars">$union_rows</var>, <var class="vars">$col_names</var>);
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">'except'</var>:
                   <var class="vars">$rows</var> = <var class="vars">$this</var>-&gt;exceptAll(<var class="vars">$rows</var>, <var class="vars">$union_rows</var>, <var class="vars">$col_names</var>);
                   <var class="vars">$this</var>-&gt;applyDistinct(<var class="vars">$rows</var>);
                   <var class="keywords">break</var>;
               <var class="keywords">case</var> <var class="strings">'except_all'</var>:
                   <var class="vars">$rows</var> = <var class="vars">$this</var>-&gt;exceptAll(<var class="vars">$rows</var>, <var class="vars">$union_rows</var>, <var class="vars">$col_names</var>);
                   <var class="keywords">break</var>;
               <var class="keywords">default</var>:
                   <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported syntax(%s)'</var>, <var class="vars">$type</var>);
                   <var class="keywords">break</var> 2;
             }
           }
           <var class="vars">$stmt</var> = <var class="keywords">null</var>;
           <var class="keywords">unset</var>(<var class="vars">$stmt</var>);
         }
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
           <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$rows</var> = <var class="keywords">array</var>();
       }
       <var class="vars">$this</var>-&gt;removeCorrelationName(<var class="vars">$rows</var>);
       <var class="vars">$args</var>[<var class="strings">'from'</var>] = <var class="vars">$rows</var>;
       <var class="vars">$args</var>[<var class="strings">'where'</var>] = <var class="keywords">true</var>;
       <var class="vars">$this</var>-&gt;_onUnionSelect = <var class="keywords">true</var>;
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;subSelect(<var class="vars">$args</var>);
       <var class="vars">$this</var>-&gt;_onUnionSelect = <var class="keywords">null</var>;
     }
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromStatement)) {
     <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Statement(<var class="vars">$this</var>, <var class="vars">$result</var>, <var class="vars">$this</var>-&gt;getLastQuery());
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0553"><h2>
<a name="p_function_builddescribequery_553">
<var class="function">buildDescribeQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of executed, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Builds the parsed tokens for DESCRIBE command
</pre>
</div></div><pre id="source-0553"> <var class="keywords">function</var> buildDescribeQuery(<var class="vars">$parsed</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$args</var> = <var class="keywords">array</var>(<var class="strings">'table'</var> =&gt; <var class="keywords">null</var>);
   <var class="keywords">foreach</var> (<var class="vars">$parsed</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">switch</var> (<var class="vars">$key</var>) {
       <var class="keywords">case</var> <var class="strings">'desc'</var>:
       <var class="keywords">case</var> <var class="strings">'describe'</var>:
           <var class="vars">$table_name</var> = <var class="vars">$this</var>-&gt;assignNames(<var class="vars">$val</var>);
           <var class="vars">$args</var>[<var class="strings">'table'</var>] = <var class="vars">$table_name</var>;
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax(%s)'</var>, <var class="vars">$key</var>);
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;describe(<var class="vars">$args</var>[<var class="strings">'table'</var>]);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0554"><h2>
<a name="p_function_unionall_554">
<var class="function">unionAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   based rows</dd>
<dt>param</dt>
<dd><em>array</em>   subject rows to combine</dd>
<dt>param</dt>
<dd><em>array</em>   column names which is used for result-set</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Combine two query expressions into a single result set.
 If ALL is specified, duplicate rows returned by
 union expression are retained.
</pre>
</div></div><pre id="source-0554"> <var class="keywords">function</var> unionAll(<var class="vars">$base_rows</var>, <var class="vars">$union_rows</var>, <var class="vars">$col_names</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$base_rows</var>) || !<var class="funcs">is_array</var>(<var class="vars">$union_rows</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid arguments on UNION'</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$col_names</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$base_rows</var>))) {
       <var class="vars">$col_names</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$base_rows</var>));
     }
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$col_names</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to compound rows on UNION'</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$col_names</var>)) {
         <var class="vars">$col_names</var> = <var class="keywords">array</var>(<var class="vars">$col_names</var>);
       }
       <var class="vars">$col_length</var> = <var class="funcs">count</var>(<var class="vars">$col_names</var>);
       <var class="vars">$union_rows</var> = <var class="funcs">array_values</var>(<var class="vars">$union_rows</var>);
       <var class="vars">$union_row_count</var> = <var class="funcs">count</var>(<var class="vars">$union_rows</var>);
       <var class="vars">$key</var> = 0;
       <var class="keywords">while</var> (--<var class="vars">$union_row_count</var> &gt;= 0) {
         <var class="vars">$row</var> = <var class="vars">$union_rows</var>[<var class="vars">$key</var>];
         <var class="vars">$union_rows</var>[<var class="vars">$key</var>] = <var class="keywords">null</var>;
         <var class="vars">$base_rows</var>[] = <var class="vars">$row</var>;
         <var class="vars">$key</var>++;
       }
       <var class="keywords">unset</var>(<var class="vars">$union_rows</var>);
       <var class="vars">$base_rows</var> = <var class="funcs">array_values</var>(<var class="vars">$base_rows</var>);
       <var class="vars">$base_row_count</var> = <var class="funcs">count</var>(<var class="vars">$base_rows</var>);
       <var class="vars">$key</var> = 0;
       <var class="keywords">while</var> (--<var class="vars">$base_row_count</var> &gt;= 0) {
         <var class="vars">$row</var> = <var class="vars">$base_rows</var>[<var class="vars">$key</var>];
         <var class="vars">$base_rows</var>[<var class="vars">$key</var>] = <var class="keywords">null</var>;
         <var class="vars">$subset_row</var> = <var class="keywords">array</var>();
         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$row</var>) &amp;&amp; <var class="funcs">count</var>(<var class="vars">$row</var>) === <var class="vars">$col_length</var>) {
           <var class="keywords">foreach</var> (<var class="funcs">array_values</var>(<var class="vars">$row</var>) <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$val</var>) {
             <var class="vars">$subset_row</var>[ <var class="vars">$col_names</var>[<var class="vars">$i</var>] ] = <var class="vars">$val</var>;
           }
           <var class="vars">$result</var>[] = <var class="vars">$subset_row</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'In UNION, two rows should be the same numbers'</var>);
           <var class="vars">$result</var> = <var class="keywords">array</var>();
           <var class="keywords">break</var>;
         }
         <var class="vars">$key</var>++;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0555"><h2>
<a name="p_function_intersectall_555">
<var class="function">intersectAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   based rows</dd>
<dt>param</dt>
<dd><em>array</em>   subject rows to intersected</dd>
<dt>param</dt>
<dd><em>array</em>   column names which is used for result-set</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Evaluates the output of two query expressions and
 returns only the rows common to each.
</pre>
</div></div><pre id="source-0555"> <var class="keywords">function</var> intersectAll(<var class="vars">$base_rows</var>, <var class="vars">$intersect_rows</var>, <var class="vars">$col_names</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$base_rows</var>) || !<var class="funcs">is_array</var>(<var class="vars">$intersect_rows</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid arguments on INTERSECT'</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$col_names</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$base_rows</var>))) {
       <var class="vars">$col_names</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$base_rows</var>));
     }
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$col_names</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to compound rows on INTERSECT'</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$col_names</var>)) {
         <var class="vars">$col_names</var> = <var class="keywords">array</var>(<var class="vars">$col_names</var>);
       }
       <var class="vars">$col_length</var> = <var class="funcs">count</var>(<var class="vars">$col_names</var>);
       <var class="vars">$base_row_count</var>   = <var class="funcs">count</var>(<var class="vars">$base_rows</var>);
       <var class="vars">$intersect_row_count</var> = <var class="funcs">count</var>(<var class="vars">$intersect_rows</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$base_row_count</var>; <var class="vars">$i</var>++) {
         <var class="vars">$subset_row</var> = <var class="keywords">array</var>();
         <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$base_rows</var>[<var class="vars">$i</var>]) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$base_rows</var>[<var class="vars">$i</var>])
          &amp;&amp; <var class="funcs">count</var>(<var class="vars">$base_rows</var>[<var class="vars">$i</var>]) === <var class="vars">$col_length</var>) {
           <var class="vars">$index</var> = -1;
           <var class="vars">$base_values</var> = <var class="funcs">array_values</var>(<var class="vars">$base_rows</var>[<var class="vars">$i</var>]);
           <var class="keywords">for</var> (<var class="vars">$j</var> = 0; <var class="vars">$j</var> &lt; <var class="vars">$intersect_row_count</var>; <var class="vars">$j</var>++) {
             <var class="keywords">if</var> (<var class="vars">$base_values</var> === <var class="funcs">array_values</var>(<var class="vars">$intersect_rows</var>[<var class="vars">$j</var>])) {
               <var class="vars">$index</var> = <var class="vars">$i</var>;
               <var class="keywords">break</var>;
             }
           }
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$index</var>, <var class="vars">$base_rows</var>)) {
             <var class="keywords">foreach</var> (<var class="vars">$base_values</var> <var class="keywords">as</var> <var class="vars">$idx</var> =&gt; <var class="vars">$val</var>) {
               <var class="vars">$subset_row</var>[ <var class="vars">$col_names</var>[<var class="vars">$idx</var>] ] = <var class="vars">$val</var>;
             }
             <var class="vars">$result</var>[] = <var class="vars">$subset_row</var>;
           }
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'In INTERSECT,'</var>
                         .  <var class="strings">' two rows should be the same numbers'</var>);
           <var class="vars">$result</var> = <var class="keywords">array</var>();
           <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0556"><h2>
<a name="p_function_exceptall_556">
<var class="function">exceptAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   based rows</dd>
<dt>param</dt>
<dd><em>array</em>   subject rows to combine</dd>
<dt>param</dt>
<dd><em>array</em>   column names which is used for result-set</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Evaluates the output of two query expressions and
 returns the difference between the results.
</pre>
</div></div><pre id="source-0556"> <var class="keywords">function</var> exceptAll(<var class="vars">$base_rows</var>, <var class="vars">$except_rows</var>, <var class="vars">$col_names</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$base_rows</var>) || !<var class="funcs">is_array</var>(<var class="vars">$except_rows</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid arguments on EXCEPT'</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$col_names</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$base_rows</var>))) {
       <var class="vars">$col_names</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$base_rows</var>));
     }
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$col_names</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to compound rows on EXCEPT'</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$col_names</var>)) {
         <var class="vars">$col_names</var> = <var class="keywords">array</var>(<var class="vars">$col_names</var>);
       }
       <var class="vars">$col_length</var> = <var class="funcs">count</var>(<var class="vars">$col_names</var>);
       <var class="vars">$base_row_count</var>   = <var class="funcs">count</var>(<var class="vars">$base_rows</var>);
       <var class="vars">$except_row_count</var> = <var class="funcs">count</var>(<var class="vars">$except_rows</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$base_row_count</var>; <var class="vars">$i</var>++) {
         <var class="vars">$subset_row</var> = <var class="keywords">array</var>();
         <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$base_rows</var>[<var class="vars">$i</var>]) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$base_rows</var>[<var class="vars">$i</var>])
          &amp;&amp; <var class="funcs">count</var>(<var class="vars">$base_rows</var>[<var class="vars">$i</var>]) === <var class="vars">$col_length</var>) {
           <var class="vars">$index</var> = -1;
           <var class="vars">$base_values</var> = <var class="funcs">array_values</var>(<var class="vars">$base_rows</var>[<var class="vars">$i</var>]);
           <var class="keywords">for</var> (<var class="vars">$j</var> = 0; <var class="vars">$j</var> &lt; <var class="vars">$except_row_count</var>; <var class="vars">$j</var>++) {
             <var class="keywords">if</var> (<var class="vars">$base_values</var> !== <var class="funcs">array_values</var>(<var class="vars">$except_rows</var>[<var class="vars">$j</var>])) {
               <var class="vars">$index</var> = <var class="vars">$i</var>;
               <var class="keywords">break</var>;
             }
           }
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$index</var>, <var class="vars">$base_rows</var>)) {
             <var class="keywords">foreach</var> (<var class="vars">$base_values</var> <var class="keywords">as</var> <var class="vars">$idx</var> =&gt; <var class="vars">$val</var>) {
               <var class="vars">$subset_row</var>[ <var class="vars">$col_names</var>[<var class="vars">$idx</var>] ] = <var class="vars">$val</var>;
             }
             <var class="vars">$result</var>[] = <var class="vars">$subset_row</var>;
           }
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'In EXCEPT, two rows should be the same numbers'</var>);
           <var class="vars">$result</var> = <var class="keywords">array</var>();
           <var class="keywords">break</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0557"><h2>
<a name="p_function_appendaggregateresult_557">
<var class="function">appendAggregateResult</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records</dd>
<dt>param</dt>
<dd><em>array</em>   results of all aggregate functions</dd>
<dt>return</dt>
<dd><em>array</em>   array which appended the aggregate results to rows</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes all the aggregate functions,
  and append the aggregate results to the rows of the result
</pre>
</div></div><pre id="source-0557"> <var class="keywords">function</var> appendAggregateResult(&amp;<var class="vars">$rows</var>, <var class="vars">$aggregates</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))
      &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$aggregates</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$aggregates</var>))) {
       <var class="vars">$rows_reset</var> = <var class="funcs">reset</var>(<var class="vars">$rows</var>);
       <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$aggregates</var>);
       <var class="vars">$check_col</var> = <var class="funcs">key</var>(<var class="vars">$reset</var>);
       <var class="vars">$agg_count</var> = <var class="funcs">count</var>(<var class="vars">$aggregates</var>);
       <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$rows</var>) !== <var class="vars">$agg_count</var>
        || !<var class="funcs">array_key_exists</var>(<var class="vars">$check_col</var>, <var class="vars">$rows_reset</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to execute the expression on HAVING'</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$agg_appends</var> = <var class="keywords">array</var>();
         <var class="vars">$i</var> = 0;
         <var class="keywords">while</var> (--<var class="vars">$agg_count</var> &gt;= 0) {
           <var class="vars">$agg_shift</var> = <var class="funcs">array_shift</var>(<var class="vars">$aggregates</var>);
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$agg_shift</var>)) {
             <var class="keywords">foreach</var> (<var class="vars">$agg_shift</var> <var class="keywords">as</var> <var class="vars">$agg_col</var> =&gt; <var class="vars">$agg_pairs</var>) {
               <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$agg_col</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$agg_pairs</var>)) {
                 <var class="keywords">foreach</var> (<var class="vars">$agg_pairs</var> <var class="keywords">as</var> <var class="vars">$func</var> =&gt; <var class="vars">$val</var>) {
                   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$func</var>)) {
                     <var class="vars">$func</var> = <var class="funcs">strtoupper</var>(<var class="vars">$func</var>);
                     <var class="vars">$key</var> = <var class="keywords">null</var>;
                     <var class="keywords">if</var> (<var class="vars">$func</var> === <var class="strings">'COUNT_ALL'</var>) {
                       <var class="vars">$key</var> = <var class="funcs">sprintf</var>(<var class="strings">'COUNT(*)#%08u'</var>, <var class="vars">$i</var>);
                     } <var class="keywords">else</var> {
                       <var class="vars">$key</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s(%s)#%08u'</var>, <var class="vars">$func</var>, <var class="vars">$agg_col</var>, <var class="vars">$i</var>);
                     }
                     <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$key</var>] = <var class="vars">$val</var>;
                     <var class="vars">$agg_appends</var>[<var class="vars">$key</var>] = <var class="vars">$val</var>;
                   }
                 }
               }
             }
           }
           <var class="vars">$i</var>++;
         }
         <var class="vars">$result</var> = <var class="vars">$agg_appends</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0558"><h2>
<a name="p_function_assigncols_558">
<var class="function">assignCols</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   a record of target</dd>
<dt>param</dt>
<dd><em>mixed</em>   selected keys as columns</dd>
<dt>param</dt>
<dd><em>array</em>   results of aggregate functions</dd>
<dt>param</dt>
<dd><em>string</em>  the name of column which will be a group</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> A handle using the select syntax for to select the columns
</pre>
</div></div><pre id="source-0558"> <var class="keywords">function</var> assignCols(&amp;<var class="vars">$rows</var>, <var class="vars">$cols</var>, <var class="vars">$aggregates</var> = <var class="keywords">null</var>,
                             <var class="vars">$group</var> = <var class="keywords">null</var>, <var class="vars">$order</var> = <var class="keywords">null</var>){
   <var class="vars">$is_distinct</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isDistinct(<var class="vars">$cols</var>)) {
     <var class="vars">$is_distinct</var> = <var class="keywords">true</var>;
     <var class="vars">$this</var>-&gt;removeDistinctToken(<var class="vars">$cols</var>);
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isSelectListAllClause(<var class="vars">$cols</var>)) {
     <var class="vars">$this</var>-&gt;removeSelectListAllClauseToken(<var class="vars">$cols</var>);
   }
   <var class="vars">$parsed</var> = <var class="vars">$this</var>-&gt;parseColumns(<var class="vars">$cols</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$parsed</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$parsed</var>) &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$parsed</var>[<var class="strings">'cols'</var>])) {
     <var class="vars">$cols</var> = <var class="vars">$parsed</var>[<var class="strings">'cols'</var>];
     <var class="vars">$cols_order</var> = <var class="vars">$cols</var>;
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$parsed</var>[<var class="strings">'func'</var>]) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$parsed</var>[<var class="strings">'func'</var>])) {
       <var class="vars">$fn</var> = <var class="vars">$parsed</var>[<var class="strings">'func'</var>];
       <var class="keywords">if</var> (<var class="vars">$aggregates</var> == <var class="keywords">null</var>) {
         <var class="vars">$this</var>-&gt;execAllAggregateFunction(<var class="vars">$rows</var>, <var class="vars">$fn</var>);
       } <var class="keywords">else</var> {
         <var class="keywords">foreach</var> (<var class="vars">$fn</var> <var class="keywords">as</var> <var class="vars">$name</var> =&gt; <var class="vars">$col</var>) {
           <var class="vars">$this</var>-&gt;execAggregateFunction(<var class="vars">$rows</var>, <var class="vars">$name</var>, <var class="vars">$col</var>, <var class="vars">$aggregates</var>);
         }
       }
       <var class="vars">$funcs</var> = <var class="vars">$fn</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$funcs</var> = <var class="keywords">array</var>();
     }
     <var class="vars">$cols_order</var> = <var class="vars">$this</var>-&gt;assignColumnsOrder(<var class="vars">$cols_order</var>, <var class="vars">$funcs</var>);
     <var class="vars">$this</var>-&gt;orderColumns(<var class="vars">$rows</var>, <var class="vars">$cols_order</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$parsed</var>[<var class="strings">'as'</var>]) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$parsed</var>[<var class="strings">'as'</var>])) {
       <var class="vars">$as</var> = <var class="vars">$parsed</var>[<var class="strings">'as'</var>];
       <var class="vars">$as_mod</var> = <var class="vars">$this</var>-&gt;replaceAliasNames(<var class="vars">$as</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$as_mod</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$as_mod</var>) &amp;&amp; <var class="vars">$as</var> !== <var class="vars">$as_mod</var>) {
         <var class="vars">$as</var> = <var class="vars">$as</var> + <var class="vars">$as_mod</var>;
       }
       <var class="keywords">foreach</var> (<var class="vars">$as</var> <var class="keywords">as</var> <var class="vars">$field_name</var> =&gt; <var class="vars">$alias_name</var>) {
         <var class="vars">$restored</var> = <var class="vars">$this</var>-&gt;restoreTableAliasName(<var class="vars">$field_name</var>);
         <var class="vars">$as</var>[<var class="vars">$restored</var>] = <var class="vars">$alias_name</var>;
       }
       <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
         <var class="keywords">foreach</var> (<var class="vars">$as</var> <var class="keywords">as</var> <var class="vars">$org</var> =&gt; <var class="vars">$key</var>) {
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$org</var>, <var class="vars">$rows</var>[<var class="vars">$i</var>])) {
             <var class="vars">$tmp</var> = <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$org</var>];
             <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$org</var>]);
             <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$key</var>] = <var class="vars">$tmp</var>;
           }
         }
       }
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$cols</var> = <var class="vars">$cols_order</var>;
         <var class="vars">$cols_order</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$cols</var> <var class="keywords">as</var> <var class="vars">$key</var>) {
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$as</var>)) {
             <var class="vars">$cols_order</var>[] = <var class="vars">$as</var>[<var class="vars">$key</var>];
           } <var class="keywords">else</var> {
             <var class="vars">$cols_order</var>[] = <var class="vars">$key</var>;
           }
         }
         <var class="vars">$this</var>-&gt;orderColumns(<var class="vars">$rows</var>, <var class="vars">$cols_order</var>);
       }
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$rows</var> = <var class="keywords">array</var>();
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$rows</var>) &gt; 1 &amp;&amp; <var class="vars">$order</var> != <var class="keywords">null</var>) {
         <var class="vars">$this</var>-&gt;orderBy(<var class="vars">$rows</var>, <var class="vars">$order</var>);
       }
       <var class="vars">$this</var>-&gt;diffColumns(<var class="vars">$rows</var>, <var class="vars">$cols_order</var>);
       <var class="keywords">if</var> (<var class="vars">$is_distinct</var>) {
         <var class="vars">$this</var>-&gt;applyDistinct(<var class="vars">$rows</var>);
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_onMultiSelect) {
         <var class="vars">$this</var>-&gt;removeCorrelationName(<var class="vars">$rows</var>);
       }
       <var class="vars">$this</var>-&gt;removeDuplicateRows(<var class="vars">$rows</var>, <var class="vars">$cols_order</var>, <var class="vars">$parsed</var>, <var class="vars">$group</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0559"><h2>
<a name="p_function_assigncolsbysimplecount_559">
<var class="function">assignColsBySimpleCount</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   a record of target</dd>
<dt>param</dt>
<dd><em>number</em>  the result value of COUNT function</dd>
<dt>param</dt>
<dd><em>mixed</em>   selected keys as columns</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> A handle using the select syntax as &quot;SELECT COUNT(*)&quot;
</pre>
</div></div><pre id="source-0559"> <var class="keywords">function</var> assignColsBySimpleCount(&amp;<var class="vars">$rows</var>, <var class="vars">$count</var>, <var class="vars">$cols</var>){
   <var class="vars">$rows</var> = <var class="keywords">array</var>();
   <var class="vars">$parsed</var> = <var class="vars">$this</var>-&gt;parseColumns(<var class="vars">$cols</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$parsed</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$parsed</var>) &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$parsed</var>[<var class="strings">'cols'</var>])) {
     <var class="vars">$cols</var> = <var class="vars">$parsed</var>[<var class="strings">'cols'</var>];
     <var class="vars">$func</var> = <var class="strings">'func'</var>;
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$parsed</var>[<var class="vars">$func</var>])
      &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$parsed</var>[<var class="vars">$func</var>]) &amp;&amp; <var class="funcs">is_string</var>(<var class="funcs">reset</var>(<var class="vars">$parsed</var>[<var class="vars">$func</var>]))) {
       <var class="vars">$func_col</var>  = <var class="funcs">reset</var>(<var class="vars">$parsed</var>[<var class="vars">$func</var>]);
       <var class="vars">$func_name</var> = <var class="funcs">key</var>(<var class="vars">$parsed</var>[<var class="vars">$func</var>]);
       <var class="vars">$rows</var> = <var class="vars">$this</var>-&gt;execSimpleCountFunction(<var class="vars">$count</var>, <var class="vars">$func_name</var>, <var class="vars">$func_col</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$rows</var>[0]) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
         <var class="vars">$as</var> = <var class="strings">'as'</var>;
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$parsed</var>[<var class="vars">$as</var>]) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$parsed</var>[<var class="vars">$as</var>])) {
           <var class="vars">$aliases</var> = <var class="vars">$parsed</var>[<var class="vars">$as</var>];
           <var class="vars">$as_mod</var> = <var class="vars">$this</var>-&gt;replaceAliasNames(<var class="vars">$aliases</var>);
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$as_mod</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$as_mod</var>) &amp;&amp; <var class="vars">$aliases</var> !== <var class="vars">$as_mod</var>) {
             <var class="vars">$aliases</var> = <var class="vars">$aliases</var> + <var class="vars">$as_mod</var>;
           }
           <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
           <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
             <var class="keywords">foreach</var> (<var class="vars">$aliases</var> <var class="keywords">as</var> <var class="vars">$org</var> =&gt; <var class="vars">$key</var>) {
               <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$org</var>])) {
                 <var class="vars">$tmp</var> = <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$org</var>];
                 <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$org</var>]);
                 <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$key</var>] = <var class="vars">$tmp</var>;
               }
             }
             <var class="keywords">if</var> (<var class="vars">$i</var> &gt; 1) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to assign the alias name'</var>);
               <var class="vars">$rows</var> = <var class="keywords">array</var>();
               <var class="keywords">break</var>;
             }
           }
         }
       }
     } <var class="keywords">else</var> {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to assign the column'</var>);
     }
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0560"><h2>
<a name="p_function_assigndualcols_560">
<var class="function">assignDualCols</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   a record of target</dd>
<dt>param</dt>
<dd><em>mixed</em>   selected keys as columns</dd>
<dt>param</dt>
<dd><em>array</em>   results of aggregate functions</dd>
<dt>param</dt>
<dd><em>string</em>  the name of column which will be a group</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> A handle using the select syntax for to select-list expression
</pre>
</div></div><pre id="source-0560"> <var class="keywords">function</var> assignDualCols(&amp;<var class="vars">$rows</var>, <var class="vars">$cols</var>, <var class="vars">$aggregates</var> = <var class="keywords">null</var>, <var class="vars">$group</var> = <var class="keywords">null</var>){
   <var class="vars">$is_distinct</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isDistinct(<var class="vars">$cols</var>)) {
     <var class="vars">$is_distinct</var> = <var class="keywords">true</var>;
     <var class="vars">$this</var>-&gt;removeDistinctToken(<var class="vars">$cols</var>);
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isSelectListAllClause(<var class="vars">$cols</var>)) {
     <var class="vars">$this</var>-&gt;removeSelectListAllClauseToken(<var class="vars">$cols</var>);
   }
   <var class="vars">$parsed</var> = <var class="vars">$this</var>-&gt;parseColumns(<var class="vars">$cols</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$parsed</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$parsed</var>) &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$parsed</var>[<var class="strings">'cols'</var>])) {
     <var class="vars">$cols</var> = <var class="vars">$parsed</var>[<var class="strings">'cols'</var>];
     <var class="vars">$cols_order</var> = <var class="vars">$this</var>-&gt;assignColumnsOrder(<var class="vars">$cols</var>);
     <var class="vars">$this</var>-&gt;orderColumns(<var class="vars">$rows</var>, <var class="vars">$cols_order</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$parsed</var>[<var class="strings">'as'</var>]) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$parsed</var>[<var class="strings">'as'</var>])) {
       <var class="vars">$as</var> = <var class="vars">$parsed</var>[<var class="strings">'as'</var>];
       <var class="vars">$as_mod</var> = <var class="vars">$this</var>-&gt;replaceAliasNames(<var class="vars">$as</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$as_mod</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$as_mod</var>) &amp;&amp; <var class="vars">$as</var> !== <var class="vars">$as_mod</var>) {
         <var class="vars">$as</var> = <var class="vars">$as</var> + <var class="vars">$as_mod</var>;
       }
       <var class="vars">$count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$count</var>; <var class="vars">$i</var>++) {
         <var class="keywords">foreach</var> (<var class="vars">$as</var> <var class="keywords">as</var> <var class="vars">$org</var> =&gt; <var class="vars">$key</var>) {
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$org</var>])) {
             <var class="vars">$tmp</var> = <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$org</var>];
             <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$org</var>]);
             <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$key</var>] = <var class="vars">$tmp</var>;
           }
         }
       }
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$cols</var> = <var class="vars">$cols_order</var>;
         <var class="vars">$cols_order</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$cols</var> <var class="keywords">as</var> <var class="vars">$key</var>) {
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$as</var>)) {
             <var class="vars">$cols_order</var>[] = <var class="vars">$as</var>[<var class="vars">$key</var>];
           } <var class="keywords">else</var> {
             <var class="vars">$cols_order</var>[] = <var class="vars">$key</var>;
           }
         }
         <var class="vars">$this</var>-&gt;orderColumns(<var class="vars">$rows</var>, <var class="vars">$cols_order</var>);
       }
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$rows</var> = <var class="keywords">array</var>();
     } <var class="keywords">else</var> {
       <var class="vars">$this</var>-&gt;diffColumns(<var class="vars">$rows</var>, <var class="vars">$cols_order</var>);
       <var class="keywords">if</var> (<var class="vars">$is_distinct</var>) {
         <var class="vars">$this</var>-&gt;applyDistinct(<var class="vars">$rows</var>);
       }
       <var class="vars">$this</var>-&gt;removeDuplicateRows(<var class="vars">$rows</var>, <var class="vars">$cols_order</var>, <var class="vars">$parsed</var>, <var class="vars">$group</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0561"><h2>
<a name="p_function_removeduplicaterows_561">
<var class="function">removeDuplicateRows</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Remove duplicate rows
 Quote:
  If you use a group function in a statement containing no GROUP BY clause,
  it is equivalent to grouping on all rows.
</pre>
</div></div><pre id="source-0561"> <var class="keywords">function</var> removeDuplicateRows(&amp;<var class="vars">$rows</var>, <var class="vars">$cols_order</var>, <var class="vars">$parsed</var>, <var class="vars">$group</var> = <var class="keywords">null</var>){
   <var class="vars">$f</var> = <var class="strings">'func'</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)
    &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$group</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$cols_order</var>)) {
     <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$cols_order</var>) === 1 &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$parsed</var>[<var class="vars">$f</var>])
      &amp;&amp; <var class="funcs">count</var>(<var class="vars">$parsed</var>[<var class="vars">$f</var>]) === 1 &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))) {
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="vars">$values</var> = <var class="keywords">array</var>();
       <var class="vars">$remove</var> = <var class="keywords">true</var>;
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$values</var>)) {
           <var class="keywords">if</var> (<var class="vars">$rows</var>[<var class="vars">$i</var>] === <var class="vars">$values</var>) {
             <var class="keywords">continue</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$remove</var> = <var class="keywords">false</var>;
             <var class="keywords">break</var>;
           }
         }
         <var class="vars">$values</var> = <var class="vars">$rows</var>[<var class="vars">$i</var>];
       }
       <var class="keywords">if</var> (<var class="vars">$remove</var>) {
         <var class="vars">$rows</var> = <var class="funcs">reset</var>(<var class="vars">$rows</var>);
         <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(0, <var class="vars">$rows</var>)) {
           <var class="vars">$rows</var> = <var class="keywords">array</var>(<var class="vars">$rows</var>);
         }
       }
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0562"><h2>
<a name="p_function_diffcolumns_562">
<var class="function">diffColumns</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0562"> <var class="keywords">function</var> diffColumns(&amp;<var class="vars">$rows</var>, <var class="vars">$cols</var>, <var class="vars">$each</var> = <var class="keywords">false</var>){
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$cols</var>)) {
     <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$rows</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$reset</var>)
      &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$reset</var>) &amp;&amp; <var class="funcs">count</var>(<var class="vars">$cols</var>) &lt; <var class="funcs">count</var>(<var class="vars">$reset</var>)) {
       <var class="vars">$diff_keys</var> = <var class="funcs">array_diff</var>(<var class="funcs">array_keys</var>(<var class="vars">$reset</var>), <var class="vars">$cols</var>);
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
         <var class="keywords">if</var> (<var class="vars">$each</var>) {
           <var class="vars">$diff_keys</var> = <var class="funcs">array_diff</var>(<var class="funcs">array_keys</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>]), <var class="vars">$cols</var>);
         }
         <var class="keywords">foreach</var> (<var class="vars">$diff_keys</var> <var class="keywords">as</var> <var class="vars">$key</var>) {
           <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$key</var>]);
         }
       }
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0563"><h2>
<a name="p_function_ordercolumns_563">
<var class="function">orderColumns</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0563"> <var class="keywords">function</var> orderColumns(&amp;<var class="vars">$rows</var>, <var class="vars">$cols_order</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$cols_order</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot assign the columns on orderColumns(%s)'</var>,
                         <var class="vars">$cols_order</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_selectExprCols)) {
         <var class="vars">$selcols</var> = &amp; <var class="vars">$this</var>-&gt;_selectExprCols;
       } <var class="keywords">else</var> {
         <var class="vars">$selcols</var> = <var class="keywords">array</var>();
       }
       <var class="vars">$new_rows</var> = <var class="keywords">array</var>();
       <var class="vars">$rows</var> = <var class="funcs">array_values</var>(<var class="vars">$rows</var>);
       <var class="vars">$count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="vars">$i</var> = 0;
       <var class="keywords">while</var> (--<var class="vars">$count</var> &gt;= 0) {
         <var class="vars">$row</var> = <var class="vars">$rows</var>[<var class="vars">$i</var>];
         <var class="vars">$rows</var>[<var class="vars">$i</var>] = <var class="keywords">null</var>;
         <var class="keywords">foreach</var> (<var class="vars">$cols_order</var> <var class="keywords">as</var> <var class="vars">$col</var>) {
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$col</var>, <var class="vars">$selcols</var>)) {
             <var class="vars">$val</var> = <var class="vars">$this</var>-&gt;execSelectExpr(<var class="vars">$row</var>, <var class="vars">$col</var>);
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
               <var class="vars">$rows</var> = <var class="keywords">array</var>();
               <var class="keywords">break</var> 2;
             }
             <var class="vars">$new_rows</var>[<var class="vars">$i</var>][<var class="vars">$col</var>] = <var class="vars">$val</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$col</var>, <var class="vars">$row</var>)) {
               <var class="vars">$new_rows</var>[<var class="vars">$i</var>][<var class="vars">$col</var>] = <var class="vars">$row</var>[<var class="vars">$col</var>];
             } <var class="keywords">else</var> {
               <var class="vars">$new_rows</var>[<var class="vars">$i</var>][<var class="vars">$col</var>] = <var class="keywords">null</var>;
             }
           }
         }
         <var class="vars">$new_rows</var>[<var class="vars">$i</var>] = <var class="vars">$new_rows</var>[<var class="vars">$i</var>] + <var class="vars">$row</var>;
         <var class="vars">$i</var>++;
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$rows</var> = <var class="keywords">array</var>();
       } <var class="keywords">else</var> {
         <var class="vars">$rows</var> = <var class="vars">$new_rows</var>;
       }
       <var class="keywords">unset</var>(<var class="vars">$selcols</var>, <var class="vars">$new_rows</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0564"><h2>
<a name="p_function_assigncolumnsorder_564">
<var class="function">assignColumnsOrder</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0564"> <var class="keywords">function</var> assignColumnsOrder(<var class="vars">$cols_order</var>, <var class="vars">$funcs</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;_selectExprCols = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_fromSubSelect) {
     <var class="vars">$curmeta</var> = <var class="vars">$this</var>-&gt;_subSelectMeta;
     <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;tableName)) {
       <var class="vars">$this</var>-&gt;tableName = <var class="strings">''</var>;
     }
     <var class="vars">$this</var>-&gt;meta = <var class="keywords">array</var>(<var class="vars">$this</var>-&gt;tableName =&gt; <var class="vars">$curmeta</var>);
     <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;meta;
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_isDualSelect)
           &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onUnionSelect)) {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;tableName)
      || <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot load the meta data'</var>
                     .  <var class="strings">' on assignColumnsOrder()'</var>);
     } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$cols_order</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot assign the columns'</var>
                     .  <var class="strings">' on assignColumnsOrder(%s)'</var>, <var class="vars">$cols_order</var>);
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$meta</var> = <var class="keywords">array</var>();
       <var class="vars">$curmeta</var> = <var class="keywords">array</var>();
     } <var class="keywords">else</var> {
       <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;meta;
       <var class="keywords">unset</var>(<var class="vars">$meta</var>[0]);
       <var class="vars">$curmeta</var> = <var class="vars">$meta</var>[<var class="vars">$this</var>-&gt;tableName];
     }
   } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onUnionSelect)) {
     <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;meta;
     <var class="vars">$curmeta</var> = <var class="keywords">array</var>();
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_unionColNames) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;_unionColNames)) {
       <var class="vars">$curmeta</var> = <var class="vars">$this</var>-&gt;_unionColNames;
     }
   } <var class="keywords">else</var> {
     <var class="vars">$meta</var> = <var class="keywords">array</var>();
     <var class="vars">$curmeta</var> = <var class="keywords">array</var>();
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$cols_keys</var> = <var class="funcs">array_keys</var>(<var class="vars">$cols_order</var>);
     <var class="vars">$cols_order</var> = <var class="funcs">array_values</var>(<var class="vars">$cols_order</var>);
     <var class="keywords">foreach</var> (<var class="vars">$cols_order</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$col</var>) {
       <var class="keywords">if</var> (<var class="vars">$col</var> === <var class="strings">'*'</var>) {
         <var class="vars">$mod_cols</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$curmeta</var>) <var class="keywords">as</var> <var class="vars">$mcol</var>) {
           <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$mcol</var>, <var class="vars">$cols_keys</var>)) {
             <var class="vars">$mod_cols</var>[] = <var class="vars">$mcol</var>;
           }
         }
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$mod_cols</var>)) {
           <var class="funcs">array_splice</var>(<var class="vars">$cols_order</var>, <var class="vars">$i</var>, 0, <var class="vars">$mod_cols</var>);
           <var class="vars">$index</var> = <var class="funcs">array_search</var>(<var class="vars">$col</var>, <var class="vars">$cols_order</var>);
           <var class="keywords">unset</var>(<var class="vars">$cols_order</var>[<var class="vars">$index</var>]);
         }
       } <var class="keywords">else</var> {
         <var class="vars">$colms</var> = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$col</var>);
         <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$colms</var>) === 2 &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$colms</var>[0], <var class="vars">$colms</var>[1])
          &amp;&amp; <var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$colms</var>[0])
          &amp;&amp; (<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$colms</var>[1]) || <var class="vars">$colms</var>[1] === <var class="strings">'*'</var>)) {
           <var class="keywords">list</var>(<var class="vars">$tablename</var>, <var class="vars">$column</var>) = <var class="vars">$colms</var>;
           <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$tablename</var>);
           <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$tname</var>, <var class="vars">$meta</var>)) {
             <var class="vars">$replaced</var> = <var class="keywords">false</var>;
             <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_selectTableAliases)
              &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;_selectTableAliases)) {
               <var class="keywords">foreach</var> (<var class="vars">$this</var>-&gt;_selectTableAliases <var class="keywords">as</var> <var class="vars">$org_name</var> =&gt; <var class="vars">$as_name</var>) {
                 <var class="keywords">if</var> (<var class="vars">$org_name</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$as_name</var> != <var class="keywords">null</var>
                  &amp;&amp; <var class="vars">$tablename</var> === <var class="vars">$as_name</var>) {
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_fromSubSelect) {
                     <var class="vars">$replaced</var> = <var class="keywords">true</var>;
                     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames)) {
                       <var class="keywords">break</var>;
                     }
                   }
                   <var class="vars">$tablename</var> = <var class="vars">$org_name</var>;
                   <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$tablename</var>);
                   <var class="vars">$replaced</var> = <var class="keywords">true</var>;
                   <var class="keywords">break</var>;
                 }
               }
             }
             <var class="keywords">if</var> (!<var class="vars">$replaced</var>) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$tablename</var>);
               <var class="vars">$cols_order</var> = <var class="keywords">array</var>();
               <var class="keywords">break</var>;
             }
           }
           <var class="keywords">if</var> (<var class="vars">$column</var> === <var class="strings">'*'</var>) {
             <var class="vars">$mod_cols</var> = <var class="keywords">array</var>();
             <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$meta</var>[<var class="vars">$tname</var>]) <var class="keywords">as</var> <var class="vars">$tcol</var>) {
               <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$tcol</var>, <var class="vars">$cols_keys</var>)) {
                 <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_onMultiSelect) {
                   <var class="vars">$mod_cols</var>[] = <var class="funcs">sprintf</var>(<var class="strings">'%s.%s'</var>, <var class="vars">$tablename</var>, <var class="vars">$tcol</var>);
                   <var class="comments">//XXX: necessary?</var>
                   <var class="comments">//$mod_cols[] = $tcol;</var>
                 } <var class="keywords">else</var> {
                   <var class="vars">$mod_cols</var>[] = <var class="vars">$tcol</var>;
                 }
               }
             }
             <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$mod_cols</var>)) {
               <var class="funcs">array_splice</var>(<var class="vars">$cols_order</var>, <var class="vars">$i</var>, 0, <var class="vars">$mod_cols</var>);
               <var class="vars">$index</var> = <var class="funcs">array_search</var>(<var class="vars">$col</var>, <var class="vars">$cols_order</var>);
               <var class="keywords">unset</var>(<var class="vars">$cols_order</var>[<var class="vars">$index</var>]);
             }
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_onMultiSelect) {
               <var class="vars">$correlation</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s.%s'</var>, <var class="vars">$tablename</var>, <var class="vars">$column</var>);
               <var class="funcs">array_splice</var>(<var class="vars">$cols_order</var>, <var class="vars">$i</var>, 0, <var class="vars">$correlation</var>);
               <var class="vars">$index</var> = <var class="funcs">array_search</var>(<var class="vars">$col</var>, <var class="vars">$cols_order</var>);
               <var class="keywords">unset</var>(<var class="vars">$cols_order</var>[<var class="vars">$index</var>]);
             } <var class="keywords">else</var> {
               <var class="funcs">array_splice</var>(<var class="vars">$cols_order</var>, <var class="vars">$i</var>, 0, <var class="vars">$column</var>);
               <var class="vars">$index</var> = <var class="funcs">array_search</var>(<var class="vars">$col</var>, <var class="vars">$cols_order</var>);
               <var class="keywords">unset</var>(<var class="vars">$cols_order</var>[<var class="vars">$index</var>]);
             }
           }
         } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$col</var>, <var class="vars">$curmeta</var>)
                 &amp;&amp; <var class="vars">$this</var>-&gt;isExprToken(<var class="vars">$col</var>)) {
           <var class="vars">$do_expr</var> = <var class="keywords">true</var>;
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$funcs</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$funcs</var>)) {
             <var class="keywords">foreach</var> (<var class="vars">$funcs</var> <var class="keywords">as</var> <var class="vars">$func_name</var> =&gt; <var class="vars">$func_args</var>) {
               <var class="vars">$func_name</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s(%s)'</var>, <var class="vars">$func_name</var>, <var class="vars">$func_args</var>);
               <var class="keywords">if</var> (<var class="funcs">strcasecmp</var>(<var class="vars">$col</var>, <var class="vars">$func_name</var>) === 0) {
                 <var class="vars">$do_expr</var> = <var class="keywords">false</var>;
                 <var class="keywords">break</var>;
               }
             }
           }
           <var class="keywords">if</var> (<var class="vars">$do_expr</var>) {
             <var class="vars">$this</var>-&gt;_selectExprCols[<var class="vars">$col</var>] = 1;
           }
         }
       }
     }
     <var class="vars">$result</var> = <var class="funcs">array_values</var>(<var class="funcs">array_unique</var>(<var class="vars">$cols_order</var>));
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0565"><h2>
<a name="p_function_applydistinct_565">
<var class="function">applyDistinct</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the result-set</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Apply DISTINCT for result-set
</pre>
</div></div><pre id="source-0565"> <var class="keywords">function</var> applyDistinct(&amp;<var class="vars">$rows</var>){
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
       <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="keywords">if</var> (<var class="vars">$row_count</var> &gt; 1) {
         <var class="vars">$removes</var> = <var class="keywords">array</var>();
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; ++<var class="vars">$i</var>){
           <var class="keywords">for</var> (<var class="vars">$j</var> = 0; <var class="vars">$j</var> &lt; <var class="vars">$i</var>; <var class="vars">$j</var>++) {
             <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$removes</var>[<var class="vars">$i</var>]) &amp;&amp; <var class="vars">$rows</var>[<var class="vars">$i</var>] === <var class="vars">$rows</var>[<var class="vars">$j</var>]) {
               <var class="vars">$removes</var>[<var class="vars">$i</var>] = 1;
               <var class="keywords">break</var>;
             }
           }
         }
         <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$removes</var>) <var class="keywords">as</var> <var class="vars">$index</var>) {
           <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$index</var>]);
         }
         <var class="vars">$rows</var> = <var class="funcs">array_values</var>(<var class="vars">$rows</var>);
       }
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0566"><h2>
<a name="p_function_removedistincttoken_566">
<var class="function">removeDistinctToken</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the value of SELECT clause</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Remove DISTINCT token for SELECT-LIST clause
</pre>
</div></div><pre id="source-0566"> <var class="keywords">function</var> removeDistinctToken(&amp;<var class="vars">$columns</var>){
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$columns</var>)) {
       <var class="vars">$columns</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$columns</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$columns</var>)) {
       <var class="vars">$shift</var> = <var class="funcs">array_shift</var>(<var class="vars">$columns</var>);
       <var class="keywords">if</var> (0 !== <var class="funcs">strcasecmp</var>(<var class="vars">$shift</var>, <var class="strings">'distinct'</var>)) {
         <var class="funcs">array_unshift</var>(<var class="vars">$shift</var>);
       }
       <var class="vars">$columns</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$columns</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0567"><h2>
<a name="p_function_removeselectlistallclausetoken_567">
<var class="function">removeSelectListAllClauseToken</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the value of SELECT clause</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Remove &quot;ALL&quot; token for SELECT-LIST clause
</pre>
</div></div><pre id="source-0567"> <var class="keywords">function</var> removeSelectListAllClauseToken(&amp;<var class="vars">$columns</var>){
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$columns</var>)) {
       <var class="vars">$columns</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$columns</var>);
     }
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$columns</var>)) {
       <var class="vars">$shift</var> = <var class="funcs">array_shift</var>(<var class="vars">$columns</var>);
       <var class="keywords">if</var> (0 !== <var class="funcs">strcasecmp</var>(<var class="vars">$shift</var>, <var class="strings">'all'</var>)) {
         <var class="funcs">array_unshift</var>(<var class="vars">$shift</var>);
       }
       <var class="vars">$columns</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$columns</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0568"><h2>
<a name="p_function_tohtmltable_568">
<var class="function">toHTMLTable</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the rows of result sets</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$fields</var> = <var class="keywords">array</var>(<var class="strings">'col1'</var> =&gt; <var class="keywords">null</var>, <var class="strings">'col2'</var> =&gt; <var class="keywords">null</var>);
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql(<var class="strings">'table_example_db1'</var>, <var class="strings">'table1'</var>, <var class="vars">$fields</var>);
 <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; 10; <var class="vars">$i</var>++) {
   <var class="vars">$data</var> = <var class="keywords">array</var>(
     <var class="strings">'col1'</var> =&gt; <var class="strings">&quot;col1_value{$i}&quot;</var>,
     <var class="strings">'col2'</var> =&gt; <var class="strings">&quot;col2_value{$i}&quot;</var>
   );
   <var class="vars">$posql</var>-&gt;insert(<var class="strings">'table1'</var>, <var class="vars">$data</var>);
   <var class="keywords">if</var> (<var class="vars">$posql</var>-&gt;isError()) {
     <var class="keywords">die</var>(<var class="vars">$posql</var>-&gt;lastError());
   }
 }
 <var class="vars">$sql</var> = <var class="strings">'SELECT * FROM table1'</var>;
 <var class="vars">$result</var> = <var class="vars">$posql</var>-&gt;query(<var class="vars">$sql</var>);
 <var class="keywords">if</var> (<var class="vars">$posql</var>-&gt;isError()) {
   <var class="keywords">die</var>(<var class="vars">$posql</var>-&gt;lastError());
 }
 <var class="vars">$result</var> = <var class="vars">$result</var>-&gt;fetchAll(<var class="strings">'assoc'</var>);
 <var class="vars">$attrs</var> = <var class="keywords">array</var>(
   <var class="strings">'border'</var> =&gt; 1,
   <var class="strings">'style'</var>  =&gt; <var class="keywords">array</var>(
     <var class="strings">'color'</var>      =&gt; <var class="strings">'#333'</var>,
     <var class="strings">'background'</var> =&gt; <var class="strings">'#FFF'</var>,
     <var class="strings">'margin'</var>     =&gt; <var class="strings">'4px'</var>
   )
 );
 <var class="keywords">print</var> <var class="vars">$posql</var>-&gt;toHTMLTable(<var class="vars">$result</var>, <var class="vars">$sql</var>, <var class="vars">$attrs</var>);</pre></dd>
<dt>param</dt>
<dd><em>mixed</em>   optionally, the caption, or the table attributes</dd>
<dt>param</dt>
<dd><em>mixed</em>   optionally, the table attributes, or the caption</dd>
<dt>return</dt>
<dd><em>string</em>  Created HTML TABLE element</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Creates the HTML TABLE element from rows.
</pre>
</div></div><pre id="source-0568"> <var class="keywords">function</var> toHTMLTable(<var class="vars">$rows</var>, <var class="vars">$caption</var> = <var class="keywords">null</var>, <var class="vars">$attr</var> = <var class="strings">'border=&quot;1&quot;'</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))) {
       <var class="vars">$rows</var> = <var class="keywords">array</var>(<var class="vars">$rows</var>);
     }
     <var class="keywords">switch</var> (<var class="funcs">func_num_args</var>()) {
       <var class="keywords">case</var> 0:
       <var class="keywords">case</var> 1:
           <var class="keywords">break</var>;
       <var class="keywords">case</var> 2:
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$caption</var>)) {
             <var class="vars">$attr</var> = <var class="vars">$caption</var>;
             <var class="vars">$caption</var> = <var class="keywords">null</var>;
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> 3:
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$caption</var>)) {
             <var class="vars">$tmp</var> = <var class="vars">$attr</var>;
             <var class="vars">$attr</var> = <var class="vars">$caption</var>;
             <var class="vars">$caption</var> = <var class="vars">$tmp</var>;
             <var class="keywords">unset</var>(<var class="vars">$tmp</var>);
           }
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
           <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
           <var class="vars">$caption</var> = <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
           <var class="vars">$attr</var> = <var class="funcs">array_splice</var>(<var class="vars">$args</var>, 0);
           <var class="keywords">break</var>;
     }
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$attr</var>)) {
       <var class="vars">$attr</var> = <var class="keywords">array</var>(<var class="vars">$attr</var>);
     }
     <var class="vars">$is_caption</var> = <var class="keywords">true</var>;
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$caption</var>)) {
       <var class="comments">//TODO: check more</var>
       <var class="vars">$eq_count</var> = <var class="funcs">substr_count</var>(<var class="vars">$caption</var>, <var class="strings">'='</var>);
       <var class="vars">$sp_count</var> = <var class="funcs">substr_count</var>(<var class="vars">$caption</var>, <var class="strings">' '</var>);
       <var class="vars">$eq_split</var> = <var class="funcs">explode</var>(<var class="strings">'='</var>, <var class="vars">$caption</var>);
       <var class="keywords">if</var> (<var class="vars">$eq_count</var> === 1) {
         <var class="vars">$eq_left</var> = <var class="funcs">reset</var>(<var class="vars">$eq_split</var>);
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$eq_left</var>)) {
           <var class="vars">$is_caption</var> = <var class="keywords">false</var>;
         }
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$sp_count</var> &gt; 1
               &amp;&amp; <var class="vars">$eq_count</var> &gt; 1) {
         <var class="keywords">if</var> (<var class="vars">$sp_count</var> !== <var class="vars">$eq_count</var>) {
           <var class="vars">$is_caption</var> = <var class="keywords">false</var>;
         }
       }
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$caption</var>)) {
       <var class="vars">$is_caption</var> = <var class="keywords">false</var>;
     }
     <var class="keywords">if</var> (!<var class="vars">$is_caption</var>) {
       <var class="funcs">array_unshift</var>(<var class="vars">$attr</var>, <var class="vars">$caption</var>);
       <var class="vars">$caption</var> = <var class="keywords">null</var>;
     }
     <var class="vars">$caption</var> = (<var class="keywords">string</var>)<var class="vars">$caption</var>;
     <var class="vars">$attr</var> = <var class="vars">$this</var>-&gt;parseHTMLAttributes(<var class="vars">$attr</var>);
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$attr</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$attr</var>)) {
       <var class="vars">$attr</var> = <var class="strings">' '</var> . <var class="funcs">implode</var>(<var class="strings">' '</var>, <var class="vars">$attr</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$attr</var> = <var class="strings">''</var>;
     }
     <var class="vars">$tables</var> = <var class="keywords">array</var>();
     <var class="vars">$tables</var>[] = <var class="funcs">sprintf</var>(<var class="strings">'&lt;table%s&gt;'</var>, <var class="vars">$attr</var>);
     <var class="keywords">if</var> (<var class="vars">$caption</var> != <var class="keywords">null</var>) {
       <var class="vars">$tables</var>[] = <var class="funcs">sprintf</var>(<var class="strings">'&lt;caption&gt;%s&lt;/caption&gt;'</var>,
                           <var class="vars">$this</var>-&gt;escapeHTML(<var class="vars">$caption</var>));
     }
     <var class="vars">$tables</var>[] = <var class="strings">'&lt;tr&gt;'</var>;
     <var class="vars">$row_cols</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>));
     <var class="keywords">foreach</var> (<var class="vars">$row_cols</var> <var class="keywords">as</var> <var class="vars">$col</var>) {
       <var class="vars">$tables</var>[] = <var class="funcs">sprintf</var>(<var class="strings">'&lt;th&gt;%s&lt;/th&gt;'</var>, <var class="vars">$this</var>-&gt;escapeHTML(<var class="vars">$col</var>));
     }
     <var class="vars">$tables</var>[] = <var class="strings">'&lt;/tr&gt;'</var>;
     <var class="vars">$br</var> = <var class="funcs">trim</var>(<var class="funcs">nl2br</var>(<var class="vars">$this</var>-&gt;NL));
     <var class="vars">$rows</var> = <var class="funcs">array_values</var>(<var class="vars">$rows</var>);
     <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
     <var class="vars">$i</var> = 0;
     <var class="keywords">while</var> (--<var class="vars">$row_count</var> &gt;= 0) {
       <var class="vars">$row</var> = <var class="vars">$rows</var>[<var class="vars">$i</var>];
       <var class="vars">$rows</var>[<var class="vars">$i</var>] = <var class="keywords">null</var>;
       <var class="vars">$tables</var>[] = <var class="strings">'&lt;tr&gt;'</var>;
       <var class="keywords">foreach</var> (<var class="vars">$row</var> <var class="keywords">as</var> <var class="vars">$col</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">if</var> (<var class="vars">$val</var> === <var class="strings">''</var>) {
           <var class="vars">$val</var> = <var class="vars">$br</var>;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$val</var> === <var class="keywords">true</var>) {
           <var class="vars">$val</var> = <var class="strings">'&lt;var&gt;TRUE&lt;/var&gt;'</var>;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$val</var> === <var class="keywords">false</var>) {
           <var class="vars">$val</var> = <var class="strings">'&lt;var&gt;FALSE&lt;/var&gt;'</var>;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$val</var> === <var class="keywords">null</var>) {
           <var class="vars">$val</var> = <var class="strings">'&lt;var&gt;NULL&lt;/var&gt;'</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$val</var> = <var class="vars">$this</var>-&gt;escapeHTML(<var class="vars">$val</var>);
         }
         <var class="vars">$tables</var>[] = <var class="funcs">sprintf</var>(<var class="strings">'&lt;td&gt;%s&lt;/td&gt;'</var>, <var class="vars">$val</var>);
       }
       <var class="vars">$tables</var>[] = <var class="strings">'&lt;/tr&gt;'</var>;
       <var class="vars">$i</var>++;
     }
     <var class="vars">$tables</var>[] = <var class="strings">'&lt;/table&gt;'</var>;
     <var class="vars">$result</var> = <var class="funcs">implode</var>(<var class="vars">$this</var>-&gt;NL, <var class="funcs">array_splice</var>(<var class="vars">$tables</var>, 0));
     <var class="keywords">unset</var>(<var class="vars">$tables</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0569"><h2>
<a name="p_class_posql_expr_569">
<var class="class">Posql_Expr</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class processes the expression on WHERE, HAVING, ON, etc. mode
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Expr</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0570"><h2>
<a name="p_function_isvalidexpr_570">
<var class="function">isValidExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the target expression</dd>
<dt>return</dt>
<dd><em>boolean</em> whether it already validated or it has not yet</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Checks whether the expression has already validated or it has not yet
</pre>
</div></div><pre id="source-0570"> <var class="keywords">function</var> isValidExpr(<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$marks</var> = <var class="vars">$this</var>-&gt;getValidMarks();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
     <var class="vars">$result</var> = <var class="funcs">reset</var>(<var class="vars">$expr</var>) === <var class="funcs">reset</var>(<var class="vars">$marks</var>)
             &amp;&amp; <var class="funcs">next</var>(<var class="vars">$expr</var>) === <var class="funcs">next</var>(<var class="vars">$marks</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$mark</var> = <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$marks</var>);
     <var class="vars">$result</var> = <var class="funcs">substr</var>(<var class="vars">$expr</var>, 0, <var class="funcs">strlen</var>(<var class="vars">$mark</var>)) === <var class="vars">$mark</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0571"><h2>
<a name="p_function_getvalidmarks_571">
<var class="function">getValidMarks</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>array</em>    the Mark that use to valid</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Returns the mark to compare that validated the expression
</pre>
</div></div><pre id="source-0571"> <var class="keywords">function</var> getValidMarks(){
   <var class="keywords">static</var> <var class="vars">$marks</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$marks</var>) {
     <var class="vars">$marks</var> = <var class="keywords">array</var>(
       <var class="vars">$this</var>-&gt;getParsedMark(),
       <var class="vars">$this</var>-&gt;NL
     );
   }
   <var class="keywords">return</var> <var class="vars">$marks</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0572"><h2>
<a name="p_function_addvalidmarks_572">
<var class="function">addValidMarks</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the expression</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Adds the mark to compare for valid to the expression
</pre>
</div></div><pre id="source-0572"> <var class="keywords">function</var> addValidMarks(&amp;<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$marks</var> = <var class="vars">$this</var>-&gt;getValidMarks();
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isParsedExpr(<var class="vars">$expr</var>) &amp;&amp; !<var class="vars">$this</var>-&gt;isValidExpr(<var class="vars">$expr</var>)) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;removeParsedMark(<var class="vars">$expr</var>)) {
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
         <var class="funcs">array_splice</var>(<var class="vars">$expr</var>, 0, 0, <var class="vars">$marks</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$expr</var> = <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$marks</var>) . <var class="vars">$expr</var>;
       }
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0573"><h2>
<a name="p_function_removevalidmarks_573">
<var class="function">removeValidMarks</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    the expression</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Removes the mark to compare for valid the expression
</pre>
</div></div><pre id="source-0573"> <var class="keywords">function</var> removeValidMarks(&amp;<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$marks</var> = <var class="vars">$this</var>-&gt;getValidMarks();
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isParsedExpr(<var class="vars">$expr</var>) &amp;&amp; <var class="vars">$this</var>-&gt;isValidExpr(<var class="vars">$expr</var>)) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;removeParsedMark(<var class="vars">$expr</var>)) {
       <var class="funcs">array_shift</var>(<var class="vars">$marks</var>);
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
         <var class="keywords">if</var> (<var class="funcs">reset</var>(<var class="vars">$expr</var>) === <var class="funcs">reset</var>(<var class="vars">$marks</var>)) {
           <var class="funcs">array_shift</var>(<var class="vars">$expr</var>);
           <var class="funcs">array_shift</var>(<var class="vars">$marks</var>);
           <var class="vars">$result</var> = <var class="keywords">empty</var>(<var class="vars">$marks</var>);
         }
       } <var class="keywords">else</var> {
         <var class="vars">$mark</var> = <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$marks</var>);
         <var class="vars">$len</var> = <var class="funcs">strlen</var>(<var class="vars">$mark</var>);
         <var class="keywords">if</var> (<var class="vars">$len</var> &amp;&amp; <var class="funcs">substr</var>(<var class="vars">$expr</var>, 0, <var class="vars">$len</var>) === <var class="vars">$mark</var>) {
           <var class="vars">$expr</var> = <var class="funcs">substr</var>(<var class="vars">$expr</var>, <var class="vars">$len</var>);
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0574"><h2>
<a name="p_function_validcorrelationprefix_574">
<var class="function">validCorrelationPrefix</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   associated array which includes dot yet</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Validate the internal correlation prefix for unique name
</pre>
</div></div><pre id="source-0574"> <var class="keywords">function</var> validCorrelationPrefix(<var class="vars">$target</var>){
   <var class="vars">$this</var>-&gt;initCorrelationPrefix();
   <var class="vars">$prefix</var> = &amp; <var class="vars">$this</var>-&gt;_correlationPrefix;
   <var class="vars">$seed</var> = 0;
   <var class="keywords">foreach</var> (<var class="vars">$target</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$key</var>) &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$val</var>)) {
       <var class="vars">$key</var> = <var class="vars">$val</var>;
     }
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$key</var>)) {
       <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$key</var>, <var class="vars">$prefix</var>) !== <var class="keywords">false</var>) {
         <var class="keywords">do</var> {
           <var class="vars">$new_prefix</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s_%s_%s'</var>,
             <var class="vars">$prefix</var>,
             <var class="vars">$this</var>-&gt;hashValue((<var class="keywords">string</var>)<var class="vars">$seed</var>),
             <var class="vars">$seed</var>
           );
           <var class="vars">$seed</var>++;
         } <var class="keywords">while</var> (<var class="funcs">strpos</var>(<var class="vars">$key</var>, <var class="vars">$new_prefix</var>) !== <var class="keywords">false</var>);
         <var class="vars">$prefix</var> = <var class="vars">$new_prefix</var>;
       }
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$prefix</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0575"><h2>
<a name="p_function_callmethod_575">
<var class="function">callMethod</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0575"> <var class="keywords">function</var> callMethod(<var class="vars">$method</var>, <var class="vars">$args</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var> &gt; 1) {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
     <var class="vars">$method</var> = <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$argn</var> === 1 &amp;&amp; !<var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
     <var class="vars">$args</var> = <var class="keywords">array</var>(<var class="vars">$args</var>);
   }
   <var class="vars">$callable</var> = <var class="vars">$this</var>-&gt;isCallableMethod(<var class="vars">$method</var>, <var class="keywords">true</var>);
   <var class="keywords">if</var> (<var class="vars">$callable</var>) {
     <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="vars">$callable</var>, <var class="vars">$args</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0576"><h2>
<a name="p_function_iscallablemethod_576">
<var class="function">isCallableMethod</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0576"> <var class="keywords">function</var> isCallableMethod(<var class="vars">$method</var>, <var class="vars">$return_callable</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$method</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$method</var>)) {
     <var class="vars">$method</var> = <var class="funcs">strtolower</var>(<var class="vars">$method</var>);
     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;UDF[<var class="vars">$method</var>])) {
       <var class="keywords">if</var> (<var class="vars">$return_callable</var>) {
         <var class="keywords">if</var> (<var class="funcs">is_callable</var>(<var class="vars">$this</var>-&gt;UDF[<var class="vars">$method</var>])) {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;UDF[<var class="vars">$method</var>];
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot call the function(%s)'</var>,
                            <var class="funcs">strtoupper</var>(<var class="vars">$method</var>));
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         }
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
       }
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_object</var>(<var class="vars">$this</var>-&gt;method)) {
       <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="vars">$method</var>, 0, 1) !== <var class="strings">'_'</var>
        &amp;&amp; <var class="funcs">strcasecmp</var>(<var class="funcs">get_class</var>(<var class="vars">$this</var>-&gt;method), <var class="vars">$method</var>) !== 0) {
         <var class="keywords">if</var> (!<var class="funcs">method_exists</var>(<var class="vars">$this</var>-&gt;method, <var class="vars">$method</var>)) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Undefined function (%s)'</var>, <var class="funcs">strtoupper</var>(<var class="vars">$method</var>));
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$return_callable</var>) {
             <var class="vars">$result</var> = <var class="keywords">array</var>(<var class="vars">$this</var>-&gt;method, <var class="vars">$method</var>);
             <var class="keywords">if</var> (!<var class="funcs">is_callable</var>(<var class="vars">$result</var>)) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot call the function(%s)'</var>,
                                <var class="funcs">strtoupper</var>(<var class="vars">$method</var>));
               <var class="vars">$result</var> = <var class="keywords">false</var>;
             }
           } <var class="keywords">else</var> {
             <var class="vars">$result</var> = <var class="keywords">true</var>;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0577"><h2>
<a name="p_function_createinstance_577">
<var class="function">createInstance</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>        the class name of target</dd>
<dt>param</dt>
<dd><em>mixed</em>   (...) zero or more parameters to be passed in</dd>
<dt>return</dt>
<dd><em>object</em>        the new instance of object</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Create new class instance as variable arguments
</pre>
</div></div><pre id="source-0577"> <var class="keywords">function</var> createInstance(<var class="vars">$class</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$class</var> != <var class="keywords">null</var>
    &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$class</var>) &amp;&amp; <var class="vars">$this</var>-&gt;existsClass(<var class="vars">$class</var>)) {
     <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
     <var class="keywords">if</var> (<var class="vars">$argn</var> === 1) {
       <var class="vars">$result</var> = <var class="keywords">new</var> <var class="vars">$class</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
       <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
       <var class="vars">$argn</var>--;
       <var class="vars">$params</var> = <var class="keywords">array</var>();
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$argn</var>; <var class="vars">$i</var>++) {
         <var class="vars">$params</var>[] = <var class="funcs">sprintf</var>(<var class="strings">'$args[%d]'</var>, <var class="vars">$i</var>);
       }
       <var class="vars">$expr</var> = <var class="funcs">sprintf</var>(<var class="strings">'$result=new $class(%s);'</var>, <var class="funcs">implode</var>(<var class="strings">','</var>, <var class="vars">$params</var>));
       <var class="keywords">eval</var>(<var class="vars">$expr</var>);
       <var class="keywords">unset</var>(<var class="vars">$expr</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0578"><h2>
<a name="p_function_expr_578">
<var class="function">expr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   an array variable of target</dd>
<dt>param</dt>
<dd><em>string</em>  expression of PHP syntax</dd>
<dt>return</dt>
<dd><em>boolean</em> results of evaluation code</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Expression for WHERE syntax as PHP language
</pre>
</div></div><pre id="source-0578"> <var class="keywords">function</var> expr(){
   <var class="funcs">extract</var>(<var class="funcs">func_get_arg</var>(0));
   <var class="keywords">return</var> <var class="keywords">eval</var>(<var class="strings">'return '</var> . <var class="funcs">func_get_arg</var>(1) . <var class="strings">';'</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0579"><h2>
<a name="p_function_checkexpr_579">
<var class="function">checkExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   an array variable for extract(), or expression as string</dd>
<dt>param</dt>
<dd><em>mixed</em>   expression of PHP syntax, or array variable for extract()</dd>
<dt>return</dt>
<dd><em>boolean</em> whether it is possible expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Does valid expression safely for WHERE syntax as PHP language
 The error message will be captured by this class
 This method works only checking
</pre>
</div></div><pre id="source-0579"> <var class="keywords">function</var> checkExpr(<var class="vars">$expr</var>, <var class="vars">$meta</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
     <var class="vars">$tmp</var>  = <var class="vars">$expr</var>;
     <var class="vars">$expr</var> = <var class="vars">$meta</var>;
     <var class="vars">$meta</var> = <var class="vars">$tmp</var>;
     <var class="keywords">unset</var>(<var class="vars">$tmp</var>);
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
     <var class="vars">$meta</var> = <var class="keywords">array</var>();
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$expr</var>);
       <var class="vars">$level</var> = 0;
       <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$token</var>) {
         <var class="keywords">switch</var> (<var class="vars">$token</var>) {
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$level</var>++;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="vars">$level</var>--;
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="vars">$level</var> !== 0) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Syntax error, expect () parenthesis'</var>);
       }
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$this</var>-&gt;_checkOnlyExpr = <var class="keywords">true</var>;
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$meta</var>, <var class="vars">$expr</var>);
       <var class="vars">$this</var>-&gt;_checkOnlyExpr = <var class="keywords">null</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0580"><h2>
<a name="p_function_safeexpr_580">
<var class="function">safeExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   an array variable for extract(), or expression as string</dd>
<dt>param</dt>
<dd><em>mixed</em>   expression of PHP syntax, or array variable for extract()</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of evaluation code</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Does expression safely for WHERE syntax as PHP language
 The error message will be captured by this class
 But the execution speed will be slow
</pre>
</div></div><pre id="source-0580"> <var class="keywords">function</var> safeExpr(){
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isPHP5) {
     <var class="funcs">set_error_handler</var>(<var class="keywords">array</var>(<var class="vars">$this</var>, <var class="strings">'errorHandler'</var>), E_ALL);
   } <var class="keywords">else</var> {
     <var class="funcs">set_error_handler</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'errorHandler'</var>));
   }
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="keywords">switch</var> (<var class="funcs">count</var>(<var class="vars">$args</var>)) {
     <var class="keywords">case</var> 1:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_execSafeExpr(<var class="keywords">array</var>(),  <var class="vars">$args</var>[0]);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> 2:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_execSafeExpr(<var class="vars">$args</var>[0], <var class="vars">$args</var>[1]);
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal arguments on expression'</var>);
         <var class="vars">$result</var> = <var class="keywords">false</var>;
         <var class="keywords">break</var>;
   }
   <var class="funcs">restore_error_handler</var>();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0581"><h2>
<a name="p_function__execsafeexpr_581">
<var class="function">_execSafeExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   an array variable for extract()</dd>
<dt>param</dt>
<dd><em>string</em>  expression of PHP syntax</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of evaluation code</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> private method for safeExpr()
</pre>
</div></div><pre id="source-0581"> <var class="keywords">function</var> _execSafeExpr(){
   <var class="keywords">if</var> (<var class="funcs">func_get_arg</var>(0) != <var class="keywords">null</var>) {
     <var class="funcs">extract</var>(<var class="funcs">func_get_arg</var>(0));
   }
   <var class="funcs">ob_start</var>();
   <var class="keywords">eval</var>(<var class="strings">'if(0):return '</var> . <var class="funcs">func_get_arg</var>(1) . <var class="strings">';endif;'</var>);
   <var class="keywords">if</var> (<var class="funcs">ob_get_length</var>()) {
     <var class="vars">$msg</var> = <var class="funcs">ob_get_contents</var>();
     <var class="funcs">ob_end_clean</var>();
     <var class="vars">$msg</var> = <var class="funcs">trim</var>(<var class="vars">$this</var>-&gt;stripTags(<var class="vars">$msg</var>));
     <var class="keywords">if</var> (<var class="funcs">preg_match</var>(<var class="strings">'{\w+\s+error:\s+(.+)\sin[\s\S]*$}isU'</var>, <var class="vars">$msg</var>, <var class="vars">$match</var>)) {
       <var class="vars">$msg</var> = <var class="vars">$match</var>[1];
     }
     <var class="keywords">if</var> (<var class="vars">$msg</var> == <var class="keywords">null</var>) {
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$php_errormsg</var>)) {
         <var class="vars">$msg</var> = <var class="strings">'Fatal error on expression'</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$msg</var> = <var class="vars">$php_errormsg</var>;
       }
     }
     <var class="vars">$this</var>-&gt;pushError(<var class="vars">$msg</var>);
   } <var class="keywords">else</var> {
     <var class="funcs">ob_end_clean</var>();
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_checkOnlyExpr)) {
       <var class="keywords">return</var> <var class="keywords">eval</var>(<var class="strings">'return '</var> . <var class="funcs">func_get_arg</var>(1) . <var class="strings">';'</var>);
     }
     <var class="keywords">return</var> <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="keywords">false</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0582"><h2>
<a name="p_function_optimizeexpr_582">
<var class="function">optimizeExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the expression as string,</dd>
<dt>return</dt>
<dd><em>mixed</em>   the value of expression which was optimized</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> optimizes the expression which worked PHP syntax
 When the engine is executed in the PHP mode,
  and the command was SELECT, this expression is useful
                  or an array which  parsed tokens
</pre>
</div></div><pre id="source-0582"> <var class="keywords">function</var> optimizeExpr(<var class="vars">$expr</var>){
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$expr</var>)) {
     <var class="vars">$expr</var> = <var class="keywords">false</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$expr</var>);
     }
     <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;trimExtra(<var class="vars">$expr</var>, <var class="strings">'%=`*?:/&lt;&gt;^\\,.|&amp;;'</var>);
     <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$expr</var>) || <var class="funcs">strlen</var>(<var class="vars">$expr</var>) === 1) {
       <var class="vars">$expr</var> = (<var class="keywords">bool</var>)<var class="vars">$expr</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$expr</var>)) {
         <var class="keywords">case</var> <var class="strings">''</var>:
         <var class="keywords">case</var> <var class="strings">'null'</var>:
         <var class="keywords">case</var> <var class="strings">'false'</var>:
             <var class="vars">$expr</var> = <var class="keywords">false</var>;
             <var class="keywords">break</var>;
         <var class="keywords">case</var> <var class="strings">'*'</var>:
         <var class="keywords">case</var> <var class="strings">'true'</var>:
         <var class="keywords">case</var> <var class="strings">'0=0'</var>:
         <var class="keywords">case</var> <var class="strings">'0==0'</var>:
         <var class="keywords">case</var> <var class="strings">'1=1'</var>:
         <var class="keywords">case</var> <var class="strings">'1==1'</var>:
             <var class="vars">$expr</var> = <var class="keywords">true</var>;
             <var class="keywords">break</var>;
         <var class="keywords">default</var>:
             <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$expr</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0583"><h2>
<a name="p_function_validexpr_583">
<var class="function">validExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   expression</dd>
<dt>return</dt>
<dd><em>string</em>   validated string of expression or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Validates the expression for safely
</pre>
</div></div><pre id="source-0583"> <var class="keywords">function</var> validExpr(<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">switch</var> (<var class="vars">$this</var>-&gt;getEngine()) {
     <var class="keywords">case</var> <var class="strings">'PHP'</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;validExprByPHP(<var class="vars">$expr</var>);
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'SQL'</var>:
     <var class="comments">//case 'ECMA':</var>
     <var class="comments">//</var>
     <var class="comments">// ECMA/JavaScript engine is likely to be able to implements by</var>
     <var class="comments">//  using the Posql_ECMA class in future.</var>
     <var class="comments">//</var>
     <var class="keywords">default</var>:
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;validExprBySQL(<var class="vars">$expr</var>);
         <var class="keywords">break</var>;
   }
   <var class="comments">//debug(array('expr'=&gt;$expr,'ret'=&gt;$result),'color=navy:***validated***;');</var>
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0584"><h2>
<a name="p_function_validexprbysql_584">
<var class="function">validExprBySQL</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   expression</dd>
<dt>param</dt>
<dd><em>boolean</em>  internal only</dd>
<dt>return</dt>
<dd><em>string</em>   validated string of expression or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Validates the expression which handled as PHP syntax for safely
</pre>
</div></div><pre id="source-0584"> <var class="keywords">function</var> validExprBySQL(<var class="vars">$expr</var>, <var class="vars">$recursive</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isValidExpr(<var class="vars">$expr</var>)) {
     <var class="vars">$result</var> = <var class="vars">$expr</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (!<var class="vars">$recursive</var>) {
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;assignSubQuery(<var class="vars">$expr</var>);
       <var class="vars">$this</var>-&gt;_extraJoinExpr = <var class="keywords">array</var>();
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;replaceExprBySQL(<var class="vars">$expr</var>);
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_isDualSelect)
          &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onJoinParseExpr)
          &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromSubSelect)
          &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onUnionSelect)) {
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;tableName)
            &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
             <var class="vars">$this</var>-&gt;getMeta();
           }
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onCreate)) {
             <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;tableName)
              || <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
               <var class="vars">$table_name</var> = <var class="vars">$this</var>-&gt;getTableName();
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'No such table(%s)'</var>
                             .  <var class="strings">' on validating expression(%s)'</var>
                             .  <var class="strings">' using SQL engine'</var>,
                 <var class="vars">$table_name</var>,
                 <var class="vars">$expr</var>
               );
               <var class="vars">$result</var> = <var class="keywords">false</var>;
             }
           }
         }
       }
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$this</var>-&gt;_extraJoinExpr = <var class="keywords">array</var>();
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectMeta)) {
         <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;_subSelectMeta;
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames)) {
           <var class="vars">$unique_names</var> = &amp; <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames;
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$unique_names</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
             <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$meta</var>) <var class="keywords">as</var> <var class="vars">$meta_identifier</var>) {
               <var class="keywords">foreach</var> (<var class="vars">$unique_names</var> <var class="keywords">as</var> <var class="vars">$subquery</var> =&gt; <var class="vars">$sub_identifier</var>) {
                 <var class="vars">$identifier</var> = <var class="vars">$this</var>-&gt;toCorrelationName(<var class="vars">$sub_identifier</var>,
                                                        <var class="vars">$meta_identifier</var>);
                 <var class="keywords">if</var> (<var class="vars">$identifier</var> != <var class="keywords">null</var>) {
                   <var class="vars">$meta</var>[<var class="vars">$identifier</var>] = 1;
                 }
               }
             }
           }
           <var class="keywords">unset</var>(<var class="vars">$unique_names</var>);
         }
       } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta)) {
         <var class="vars">$org_meta</var> = <var class="vars">$this</var>-&gt;meta;
         <var class="vars">$meta</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$org_meta</var> <var class="keywords">as</var> <var class="vars">$meta_key</var> =&gt; <var class="vars">$meta_div</var>) {
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$meta_div</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta_div</var>)) {
             <var class="keywords">foreach</var> (<var class="vars">$meta_div</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
               <var class="vars">$meta</var>[<var class="vars">$key</var>] = 1;
             }
           }
         }
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onMultiSelect)) {
           <var class="vars">$this</var>-&gt;validCorrelationPrefix(<var class="vars">$meta</var>);
           <var class="keywords">foreach</var> (<var class="vars">$org_meta</var> <var class="keywords">as</var> <var class="vars">$meta_key</var> =&gt; <var class="vars">$meta_div</var>) {
             <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$meta_div</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta_div</var>)) {
               <var class="keywords">foreach</var> (<var class="vars">$meta_div</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
                 <var class="vars">$meta</var>[<var class="vars">$key</var>] = 1;
                 <var class="vars">$meta_key_org</var> = <var class="vars">$this</var>-&gt;decodeKey(<var class="vars">$meta_key</var>);
                 <var class="vars">$extra_key</var> = <var class="vars">$this</var>-&gt;toCorrelationName(<var class="vars">$meta_key_org</var>, <var class="vars">$key</var>);
                 <var class="keywords">if</var> (<var class="vars">$extra_key</var> != <var class="keywords">null</var>) {
                   <var class="vars">$meta</var>[<var class="vars">$extra_key</var>] = 1;
                 }
               }
             }
           }
         }
       } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])
               &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
         <var class="vars">$meta</var> = &amp; <var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName];
       } <var class="keywords">else</var> {
         <var class="vars">$meta</var> = <var class="keywords">array</var>();
       }
       <var class="vars">$callable</var> = <var class="strings">'callmethod'</var>;
       <var class="vars">$is_recursive</var> = <var class="keywords">false</var>;
       <var class="vars">$expr</var>  = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$expr</var>);
       <var class="vars">$open</var>  = <var class="strings">'('</var>;
       <var class="vars">$close</var> = <var class="strings">')'</var>;
       <var class="vars">$level</var> = 0;
       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$expr</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
         <var class="vars">$token</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$expr</var>, <var class="vars">$i</var>);
         <var class="vars">$prev</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$expr</var>, <var class="vars">$i</var> - 1);
         <var class="vars">$next</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$expr</var>, <var class="vars">$i</var> + 1);
         <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$token</var>)) {
           <var class="keywords">case</var> <var class="strings">'('</var>:
               <var class="vars">$level</var>++;
               <var class="keywords">if</var> (<var class="vars">$prev</var> != <var class="keywords">null</var>) {
                 <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="vars">$prev</var>, 0, 1) === <var class="strings">'$'</var>) {
                   <var class="vars">$prev</var> = <var class="funcs">substr</var>(<var class="vars">$prev</var>, 1);
                   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$expr</var>[<var class="vars">$i</var> - 1])) {
                     <var class="vars">$expr</var>[<var class="vars">$i</var> - 1] = <var class="vars">$prev</var>;
                   }
                 }
                 <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isWord(<var class="vars">$prev</var>)) {
                   <var class="keywords">break</var>;
                 }
                 <var class="vars">$func</var> = <var class="funcs">strtolower</var>(<var class="vars">$prev</var>);
                 <var class="keywords">if</var> (<var class="vars">$func</var> === <var class="vars">$callable</var>
                  &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$expr</var>[<var class="vars">$i</var> - 2], <var class="vars">$expr</var>[<var class="vars">$i</var> - 3], <var class="vars">$expr</var>[<var class="vars">$i</var> - 4])
                  &amp;&amp; <var class="vars">$expr</var>[<var class="vars">$i</var> - 2] === <var class="strings">'-&gt;'</var>
                  &amp;&amp; <var class="vars">$expr</var>[<var class="vars">$i</var> - 3] === <var class="strings">'this'</var>
                  &amp;&amp; <var class="vars">$expr</var>[<var class="vars">$i</var> - 4] === <var class="strings">'$'</var>) {
                   <var class="keywords">break</var>;
                 } <var class="keywords">else</var> <var class="keywords">if</var> ((!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onJoinParseExpr)
                         ||  !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onMultiSelect))
                         &amp;&amp; (<var class="vars">$func</var> === <var class="strings">'isset'</var> || <var class="vars">$func</var> === <var class="strings">'empty'</var>)) {
                   <var class="keywords">break</var>;
                 } <var class="keywords">else</var> {
                   <var class="keywords">if</var> (<var class="vars">$func</var> !== <var class="strings">'and'</var> &amp;&amp; <var class="vars">$func</var> !== <var class="strings">'or'</var>
                    &amp;&amp; <var class="vars">$func</var> !== <var class="strings">'xor'</var> &amp;&amp; <var class="vars">$func</var> !== <var class="strings">'is'</var>
                    &amp;&amp; <var class="vars">$func</var> !== <var class="strings">'not'</var> &amp;&amp; <var class="vars">$func</var> !== <var class="strings">'in'</var>) {
                     <var class="vars">$nest</var> = 0;
                     <var class="vars">$idx</var> = <var class="vars">$i</var>;
                     <var class="vars">$args</var> = <var class="keywords">array</var>();
                     <var class="keywords">while</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$idx</var>, <var class="vars">$expr</var>)) {
                       <var class="vars">$arg</var> = <var class="vars">$expr</var>[<var class="vars">$idx</var>];
                       <var class="keywords">switch</var> (<var class="vars">$arg</var>) {
                         <var class="keywords">case</var> <var class="strings">'('</var>:
                             <var class="vars">$nest</var>++;
                             <var class="vars">$prev_idx</var> = <var class="vars">$idx</var> - 1;
                             <var class="keywords">if</var> (<var class="vars">$nest</var> &gt; 1 &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$expr</var>[<var class="vars">$prev_idx</var>])
                              &amp;&amp; <var class="vars">$expr</var>[<var class="vars">$prev_idx</var>] != <var class="keywords">null</var>
                              &amp;&amp; <var class="vars">$this</var>-&gt;isWord(<var class="vars">$expr</var>[<var class="vars">$prev_idx</var>])
                              &amp;&amp; <var class="funcs">strtolower</var>(<var class="vars">$expr</var>[<var class="vars">$prev_idx</var>]) !== <var class="vars">$callable</var>) {
                               <var class="vars">$is_recursive</var> = <var class="keywords">true</var>;
                             }
                             <var class="keywords">break</var>;
                         <var class="keywords">case</var> <var class="strings">')'</var>:
                             <var class="vars">$nest</var>--;
                             <var class="keywords">break</var>;
                         <var class="keywords">case</var> <var class="strings">','</var>:
                         <var class="keywords">default</var>:
                             <var class="keywords">break</var>;
                       }
                       <var class="vars">$args</var>[] = <var class="vars">$arg</var>;
                       <var class="keywords">if</var> (<var class="vars">$nest</var> === 0) {
                         <var class="funcs">array_pop</var>(<var class="vars">$args</var>);
                         <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
                         <var class="keywords">break</var>;
                       }
                       <var class="vars">$idx</var>++;
                     }
                     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$args</var>)) {
                       <var class="funcs">array_unshift</var>(<var class="vars">$args</var>, <var class="strings">','</var>);
                     }
                     <var class="vars">$func</var> = <var class="vars">$this</var>-&gt;toStringToken(<var class="funcs">strtoupper</var>(<var class="vars">$func</var>));
                     <var class="vars">$method</var> = <var class="keywords">array</var>(
                       <var class="strings">'$'</var>, <var class="strings">'this'</var>, <var class="strings">'-&gt;'</var>, <var class="vars">$callable</var>, <var class="strings">'('</var>,
                            <var class="vars">$func</var>, <var class="vars">$args</var>,
                       <var class="strings">')'</var>
                     );
                     <var class="vars">$method</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$method</var>);
                     <var class="funcs">array_splice</var>(<var class="vars">$expr</var>, <var class="vars">$i</var> - 1, <var class="vars">$idx</var> - <var class="vars">$i</var> + 2, <var class="vars">$method</var>);
                     <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$expr</var>);
                   }
                 }
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">')'</var>:
               <var class="vars">$level</var>--;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'new'</var>:
               <var class="keywords">if</var> (!<var class="vars">$recursive</var>) {
                 <var class="keywords">if</var> (<var class="vars">$next</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$this</var>-&gt;isWord(<var class="vars">$next</var>)) {
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;existsClass(<var class="vars">$next</var>)
                    || !<var class="funcs">array_key_exists</var>(<var class="vars">$token</var>, <var class="vars">$meta</var>)) {
                     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported SQL syntax,'</var>
                                   .  <var class="strings">' expect(%s)'</var>, <var class="vars">$token</var>);
                     <var class="vars">$result</var> = <var class="keywords">false</var>;
                     <var class="keywords">break</var> 2;
                   }
                 }
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'&lt;?'</var>:
           <var class="keywords">case</var> <var class="strings">'&lt;%'</var>:
               <var class="vars">$error_token</var> = <var class="strings">'T_OPEN_TAG'</var>;
           <var class="keywords">case</var> <var class="strings">'?&gt;'</var>:
           <var class="keywords">case</var> <var class="strings">'%&gt;'</var>:
               <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$error_token</var>)) {
                 <var class="vars">$error_token</var> = <var class="strings">'T_CLOSE_TAG'</var>;
               }
               <var class="keywords">if</var> (!<var class="vars">$recursive</var>) {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid SQL syntax,'</var>
                               .  <var class="strings">' expect %s'</var>, <var class="vars">$error_token</var>);
                 <var class="vars">$result</var> = <var class="keywords">false</var>;
                 <var class="keywords">break</var> 2;
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'$'</var>:
               <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onJoinParseExpr)) {
                 <var class="keywords">if</var> (!<var class="vars">$recursive</var>) {
                   <var class="keywords">if</var> (<var class="vars">$next</var> == <var class="keywords">null</var> || !<var class="funcs">array_key_exists</var>(<var class="vars">$next</var>, <var class="vars">$meta</var>)) {
                     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Unknown variable name(%s)'</var>
                                   .  <var class="strings">' on expression'</var>, <var class="vars">$next</var>);
                     <var class="vars">$result</var> = <var class="keywords">false</var>;
                     <var class="keywords">break</var> 2;
                   }
                 }
               }
               <var class="keywords">if</var> (!<var class="vars">$recursive</var>) {
                 <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="strings">'{'</var> || <var class="vars">$next</var> === <var class="strings">'}'</var>) {
                   <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid SQL syntax, expect(%s%s)'</var>,
                                    <var class="vars">$token</var>, <var class="vars">$next</var>);
                   <var class="vars">$result</var> = <var class="keywords">false</var>;
                 }
               }
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">if</var> (!<var class="vars">$recursive</var>) {
                 <var class="vars">$lastchar</var> = <var class="funcs">substr</var>(<var class="vars">$prev</var>, -1);
                 <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_uniqueColsByHaving)) {
                   <var class="vars">$unique_cols</var> = <var class="vars">$this</var>-&gt;_uniqueColsByHaving;
                   <var class="keywords">if</var> (<var class="vars">$lastchar</var> !== <var class="strings">'$'</var> &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$unique_cols</var>)
                    &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$token</var>, <var class="vars">$unique_cols</var>)) {
                     <var class="vars">$token</var> = <var class="strings">'$'</var> . <var class="vars">$token</var>;
                     <var class="vars">$expr</var>[<var class="vars">$i</var>] = <var class="vars">$token</var>;
                   }
                   <var class="keywords">unset</var>(<var class="vars">$unique_cols</var>);
                 }
                 <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$token</var>, <var class="vars">$meta</var>)) {
                   <var class="keywords">if</var> (<var class="vars">$lastchar</var> !== <var class="strings">'$'</var> &amp;&amp; <var class="vars">$this</var>-&gt;isWord(<var class="vars">$token</var>)) {
                     <var class="vars">$varname</var> = <var class="vars">$token</var>;
                     <var class="vars">$token</var> = <var class="strings">'$'</var> . <var class="vars">$token</var>;
                     <var class="vars">$expr</var>[<var class="vars">$i</var>] = <var class="vars">$token</var>;
                     <var class="vars">$prev_idx</var> = <var class="vars">$i</var> - 1;
                     <var class="vars">$corr_idx</var> = <var class="vars">$i</var> - 2;
                     <var class="vars">$corr_name</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$expr</var>, <var class="vars">$corr_idx</var>);
                     <var class="keywords">if</var> (<var class="vars">$lastchar</var> === <var class="strings">'.'</var> &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$expr</var>[<var class="vars">$corr_idx</var>])
                      &amp;&amp; <var class="vars">$expr</var>[<var class="vars">$corr_idx</var>] != <var class="keywords">null</var>
                      &amp;&amp; <var class="vars">$this</var>-&gt;isWord(<var class="vars">$expr</var>[<var class="vars">$corr_idx</var>])) {
                       <var class="funcs">array_splice</var>(<var class="vars">$expr</var>, <var class="vars">$corr_idx</var>, 2);
                       <var class="vars">$i</var> = <var class="vars">$corr_idx</var>;
                     }
                     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onMultiSelect)) {
                       <var class="keywords">if</var> (<var class="vars">$corr_name</var> != <var class="keywords">null</var>) {
                         <var class="vars">$corr_dot</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s.%s'</var>, <var class="vars">$corr_name</var>, <var class="vars">$varname</var>);
                         <var class="vars">$corr_org</var> = <var class="vars">$this</var>-&gt;restoreTableAliasName(<var class="vars">$corr_dot</var>);
                         <var class="keywords">if</var> (<var class="vars">$corr_dot</var> !== <var class="vars">$corr_org</var>
                          &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$corr_org</var>, <var class="strings">'.'</var>) !== <var class="keywords">false</var>) {
                           <var class="keywords">list</var>(<var class="vars">$corr_name</var>, <var class="vars">$varname</var>) = <var class="funcs">explode</var>(<var class="strings">'.'</var>,
                                                                <var class="vars">$corr_org</var>);
                         }
                         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames)) {
                           <var class="vars">$unique_names</var> = &amp; <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames;
                           <var class="keywords">if</var> (<var class="vars">$corr_dot</var> !== <var class="vars">$corr_org</var>
                            &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$corr_org</var>, <var class="strings">'.'</var>) !== <var class="keywords">false</var>) {
                             <var class="vars">$corr_split</var> = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$corr_org</var>);
                             <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$corr_split</var>) &gt; 2) {
                               <var class="vars">$corr_split_tail</var> = <var class="funcs">array_pop</var>(<var class="vars">$corr_split</var>);
                               <var class="vars">$corr_split</var> = <var class="keywords">array</var>(
                                 <var class="funcs">implode</var>(<var class="strings">'.'</var>, <var class="vars">$corr_split</var>),
                                 <var class="vars">$corr_split_tail</var>
                               );
                             }
                             <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$corr_split</var>) &gt;= 2) {
                               <var class="keywords">list</var>(<var class="vars">$corr_name</var>, <var class="vars">$varname</var>) = <var class="vars">$corr_split</var>;
                             }
                           }
                           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$unique_names</var>)
                            &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$corr_name</var>, <var class="vars">$unique_names</var>)) {
                             <var class="vars">$corr_name</var> = <var class="vars">$unique_names</var>[<var class="vars">$corr_name</var>];
                           }
                           <var class="keywords">unset</var>(<var class="vars">$unique_names</var>);
                         }
                         <var class="vars">$varname</var> = <var class="vars">$this</var>-&gt;toCorrelationName(<var class="vars">$corr_name</var>,
                                                             <var class="vars">$varname</var>);
                         <var class="vars">$token</var> = <var class="strings">'$'</var> . <var class="vars">$varname</var>;
                         <var class="vars">$expr</var>[<var class="vars">$i</var>] = <var class="vars">$token</var>;
                       }
                       <var class="comments">// Check whether the variable exists for NOTICE</var>
                       <var class="vars">$isset_expr</var> = <var class="keywords">array</var>(
                         <var class="strings">'!'</var>, <var class="strings">'isset'</var>, <var class="strings">'('</var>, <var class="strings">'$'</var>, <var class="vars">$varname</var>, <var class="strings">')'</var>,
                         <var class="strings">'||'</var>
                       );
                       <var class="vars">$this</var>-&gt;removeParsedMark(<var class="vars">$expr</var>);
                       <var class="funcs">array_splice</var>(<var class="vars">$expr</var>, 0, 0, <var class="vars">$isset_expr</var>);
                       <var class="vars">$this</var>-&gt;addParsedMark(<var class="vars">$expr</var>);
                       <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$expr</var>);
                       <var class="funcs">array_unshift</var>(<var class="vars">$this</var>-&gt;_extraJoinExpr, <var class="vars">$isset_expr</var>);
                     }
                   }
                 }
               }
               <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="funcs">end</var>(<var class="vars">$expr</var>) === <var class="strings">'||'</var>) {
         <var class="funcs">array_pop</var>(<var class="vars">$expr</var>);
       }
       <var class="keywords">unset</var>(<var class="vars">$meta</var>);
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$this</var>-&gt;_extraJoinExpr = <var class="keywords">array</var>();
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="vars">$is_recursive</var>) {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;validExprBySQL(<var class="vars">$expr</var>, <var class="keywords">true</var>);
         } <var class="keywords">else</var> {
           <var class="comments">//TODO: optimize the expression</var>
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;addValidMarks(<var class="vars">$expr</var>)) {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$expr</var>);
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0585"><h2>
<a name="p_function_validexprbyphp_585">
<var class="function">validExprByPHP</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   expression</dd>
<dt>return</dt>
<dd><em>string</em>   validated string of expression or false on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Validates the expression which handled as PHP syntax for safely
</pre>
</div></div><pre id="source-0585"> <var class="keywords">function</var> validExprByPHP(<var class="vars">$expr</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;tableName)
    &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
     <var class="vars">$this</var>-&gt;getMeta();
   }
   <var class="vars">$this</var>-&gt;_extraJoinExpr = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_isDualSelect)
      &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromSubSelect)
      &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onUnionSelect)) {
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onCreate)) {
         <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;tableName)
          || <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
           <var class="vars">$table_name</var> = <var class="vars">$this</var>-&gt;getTableName();
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'No such table(%s)'</var>
                             .  <var class="strings">' on validating expression(%s)'</var>
                             .  <var class="strings">' using PHP engine'</var>,
             <var class="vars">$table_name</var>,
             <var class="vars">$expr</var>
           );
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         }
       }
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$this</var>-&gt;checkDisableFunctions();
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectMeta)) {
         <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;_subSelectMeta;
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames)) {
           <var class="vars">$unique_names</var> = &amp; <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames;
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$unique_names</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
             <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$meta</var>) <var class="keywords">as</var> <var class="vars">$meta_identifier</var>) {
               <var class="keywords">foreach</var> (<var class="vars">$unique_names</var> <var class="keywords">as</var> <var class="vars">$subquery</var> =&gt; <var class="vars">$sub_identifier</var>) {
                 <var class="vars">$identifier</var> = <var class="vars">$this</var>-&gt;toCorrelationName(<var class="vars">$sub_identifier</var>,
                                                        <var class="vars">$meta_identifier</var>);
                 <var class="keywords">if</var> (<var class="vars">$identifier</var> != <var class="keywords">null</var>) {
                   <var class="vars">$meta</var>[<var class="vars">$identifier</var>] = 1;
                 }
               }
             }
           }
           <var class="keywords">unset</var>(<var class="vars">$unique_names</var>);
         }
       } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta)) {
         <var class="vars">$org_meta</var> = <var class="vars">$this</var>-&gt;meta;
         <var class="vars">$meta</var> = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$org_meta</var> <var class="keywords">as</var> <var class="vars">$meta_key</var> =&gt; <var class="vars">$meta_div</var>) {
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$meta_div</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta_div</var>)) {
             <var class="keywords">foreach</var> (<var class="vars">$meta_div</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
               <var class="vars">$meta</var>[<var class="vars">$key</var>] = 1;
             }
           }
         }
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onMultiSelect)) {
           <var class="vars">$this</var>-&gt;validCorrelationPrefix(<var class="vars">$meta</var>);
           <var class="keywords">foreach</var> (<var class="vars">$org_meta</var> <var class="keywords">as</var> <var class="vars">$meta_key</var> =&gt; <var class="vars">$meta_div</var>) {
             <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$meta_div</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta_div</var>)) {
               <var class="keywords">foreach</var> (<var class="vars">$meta_div</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
                 <var class="vars">$meta</var>[<var class="vars">$key</var>] = 1;
                 <var class="vars">$meta_key_org</var> = <var class="vars">$this</var>-&gt;decodeKey(<var class="vars">$meta_key</var>);
                 <var class="vars">$extra_key</var> = <var class="vars">$this</var>-&gt;toCorrelationName(<var class="vars">$meta_key_org</var>, <var class="vars">$key</var>);
                 <var class="keywords">if</var> (<var class="vars">$extra_key</var> != <var class="keywords">null</var>) {
                   <var class="vars">$meta</var>[<var class="vars">$extra_key</var>] = 1;
                 }
               }
             }
           }
         }
       } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])
               &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
         <var class="vars">$meta</var> = &amp; <var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName];
       } <var class="keywords">else</var> {
         <var class="vars">$meta</var> = <var class="keywords">array</var>();
       }
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;assignSubQuery(<var class="vars">$expr</var>);
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
         <var class="vars">$tokens</var> = <var class="vars">$expr</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$expr</var>);
       }
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tokens</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parsing the syntax(%s)'</var>, <var class="vars">$expr</var>);
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$tokens</var>)) {
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       } <var class="keywords">else</var> {
         <var class="funcs">array_unshift</var>(<var class="vars">$tokens</var>, <var class="strings">' '</var>);
         <var class="keywords">foreach</var> (<var class="vars">$tokens</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$token</var>) {
           <var class="vars">$h</var> = <var class="vars">$i</var> - 1;
           <var class="vars">$pre</var> = <var class="funcs">substr</var>(<var class="vars">$token</var>, 0, 1);
           <var class="keywords">switch</var> (<var class="vars">$token</var>) {
             <var class="keywords">case</var> <var class="strings">'`'</var>:
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'The backtick(``) operator is disabled'</var>);
                 <var class="vars">$tokens</var> = <var class="keywords">array</var>(<var class="strings">'0'</var>);
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'$'</var>:
                 <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$i</var> + 1])) {
                   <var class="vars">$next</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var> + 1];
                   <var class="keywords">if</var> (<var class="vars">$next</var> === <var class="strings">'{'</var> || <var class="vars">$next</var> === <var class="strings">'}'</var>) {
                     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid SQL syntax, expect(%s%s)'</var>,
                                      <var class="vars">$token</var>, <var class="vars">$next</var>);
                     <var class="vars">$tokens</var> = <var class="keywords">array</var>(<var class="strings">'0'</var>);
                     <var class="keywords">break</var>;
                   }
                 }
                 <var class="keywords">break</var>;
             <var class="keywords">case</var> <var class="strings">'&lt;?'</var>:
             <var class="keywords">case</var> <var class="strings">'&lt;%'</var>:
                 <var class="vars">$error_token</var> = <var class="strings">'T_OPEN_TAG'</var>;
             <var class="keywords">case</var> <var class="strings">'?&gt;'</var>:
             <var class="keywords">case</var> <var class="strings">'%&gt;'</var>:
                 <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$error_token</var>)) {
                   <var class="vars">$error_token</var> = <var class="strings">'T_CLOSE_TAG'</var>;
                 }
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid SQL syntax, expect %s'</var>,
                                  <var class="vars">$error_token</var>);
                 <var class="vars">$tokens</var> = <var class="keywords">array</var>(<var class="strings">'0'</var>);
                 <var class="keywords">break</var>;
             <var class="keywords">default</var>:
                 <var class="keywords">break</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
             <var class="vars">$tokens</var> = <var class="keywords">array</var>(<var class="strings">'0'</var>);
             <var class="keywords">break</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$token</var> === <var class="strings">'='</var> &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;autoAssignEquals)) {
             <var class="vars">$token</var> = <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="strings">'=='</var>;
           } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isWord(<var class="vars">$pre</var>)) {
             <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>])) {
               <var class="vars">$lastchar</var> = <var class="funcs">substr</var>(<var class="vars">$tokens</var>[<var class="vars">$h</var>], -1);
               <var class="keywords">if</var> (<var class="vars">$lastchar</var> === <var class="strings">'$'</var> &amp;&amp; <var class="vars">$token</var> === <var class="strings">'this'</var>) {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Disable variable($this) in expression'</var>);
                 <var class="vars">$tokens</var> = <var class="keywords">array</var>(<var class="strings">'0'</var>);
                 <var class="keywords">break</var>;
               }
               <var class="keywords">if</var> (<var class="vars">$lastchar</var> !== <var class="strings">'$'</var>) {
                 <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_uniqueColsByHaving)) {
                   <var class="vars">$unique_cols</var> = <var class="vars">$this</var>-&gt;_uniqueColsByHaving;
                   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$unique_cols</var>)
                    &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$token</var>, <var class="vars">$unique_cols</var>)) {
                     <var class="vars">$token</var> = <var class="strings">'$'</var> . <var class="vars">$token</var>;
                     <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="vars">$token</var>;
                   }
                   <var class="keywords">unset</var>(<var class="vars">$unique_cols</var>);
                 }
                 <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$token</var>, <var class="vars">$meta</var>)) {
                   <var class="vars">$varname</var> = <var class="vars">$token</var>;
                   <var class="vars">$token</var> = <var class="strings">'$'</var> . <var class="vars">$token</var>;
                   <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="vars">$token</var>;
                   <var class="vars">$prev_idx</var> = <var class="vars">$i</var> - 1;
                   <var class="vars">$corr_idx</var> = <var class="vars">$i</var> - 2;
                   <var class="vars">$corr_name</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$tokens</var>, <var class="vars">$corr_idx</var>);
                   <var class="keywords">if</var> (<var class="vars">$lastchar</var> === <var class="strings">'.'</var> &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$tokens</var>[<var class="vars">$corr_idx</var>])
                    &amp;&amp; <var class="vars">$tokens</var>[<var class="vars">$corr_idx</var>] != <var class="keywords">null</var>
                    &amp;&amp; <var class="vars">$this</var>-&gt;isWord(<var class="vars">$tokens</var>[<var class="vars">$corr_idx</var>])) {
                     <var class="vars">$tokens</var>[<var class="vars">$prev_idx</var>] = <var class="strings">''</var>;
                     <var class="vars">$tokens</var>[<var class="vars">$corr_idx</var>] = <var class="strings">''</var>;
                   }
                   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onMultiSelect)) {
                     <var class="keywords">if</var> (<var class="vars">$corr_name</var> != <var class="keywords">null</var>) {
                       <var class="vars">$corr_dot</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s.%s'</var>, <var class="vars">$corr_name</var>, <var class="vars">$varname</var>);
                       <var class="vars">$corr_org</var> = <var class="vars">$this</var>-&gt;restoreTableAliasName(<var class="vars">$corr_dot</var>);
                       <var class="keywords">if</var> (<var class="vars">$corr_dot</var> !== <var class="vars">$corr_org</var>
                        &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$corr_org</var>, <var class="strings">'.'</var>) !== <var class="keywords">false</var>) {
                         <var class="keywords">list</var>(<var class="vars">$corr_name</var>, <var class="vars">$varname</var>) = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$corr_org</var>);
                       }
                       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames)) {
                         <var class="vars">$unique_names</var> = &amp; <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames;
                         <var class="keywords">if</var> (<var class="vars">$corr_dot</var> !== <var class="vars">$corr_org</var>
                          &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$corr_org</var>, <var class="strings">'.'</var>) !== <var class="keywords">false</var>) {
                           <var class="vars">$corr_split</var> = <var class="funcs">explode</var>(<var class="strings">'.'</var>, <var class="vars">$corr_org</var>);
                           <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$corr_split</var>) &gt; 2) {
                             <var class="vars">$corr_split_tail</var> = <var class="funcs">array_pop</var>(<var class="vars">$corr_split</var>);
                             <var class="vars">$corr_split</var> = <var class="keywords">array</var>(
                               <var class="funcs">implode</var>(<var class="strings">'.'</var>, <var class="vars">$corr_split</var>),
                               <var class="vars">$corr_split_tail</var>
                             );
                           }
                           <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$corr_split</var>) &gt;= 2) {
                             <var class="keywords">list</var>(<var class="vars">$corr_name</var>, <var class="vars">$varname</var>) = <var class="vars">$corr_split</var>;
                           }
                         }
                         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$unique_names</var>)
                          &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$corr_name</var>, <var class="vars">$unique_names</var>)) {
                           <var class="vars">$corr_name</var> = <var class="vars">$unique_names</var>[<var class="vars">$corr_name</var>];
                         }
                         <var class="keywords">unset</var>(<var class="vars">$unique_names</var>);
                       }
                       <var class="vars">$varname</var> = <var class="vars">$this</var>-&gt;toCorrelationName(<var class="vars">$corr_name</var>,
                                                            <var class="vars">$varname</var>);
                       <var class="vars">$token</var> = <var class="strings">'$'</var> . <var class="vars">$varname</var>;
                       <var class="vars">$tokens</var>[<var class="vars">$i</var>] = <var class="vars">$token</var>;
                     }
                     <var class="comments">// Check whether the variable exists for NOTICE</var>
                     <var class="vars">$isset_expr</var> = <var class="keywords">array</var>(
                       <var class="strings">'!'</var>, <var class="strings">'isset'</var>, <var class="strings">'('</var>, <var class="strings">'$'</var>, <var class="vars">$varname</var>, <var class="strings">')'</var>,
                       <var class="strings">'||'</var>
                     );
                     <var class="funcs">array_unshift</var>(<var class="vars">$this</var>-&gt;_extraJoinExpr, <var class="vars">$isset_expr</var>);
                   }
                 }
               }
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isAlphaNum(<var class="vars">$lastchar</var>)) {
                 <var class="vars">$tokens</var>[<var class="vars">$h</var>] .= <var class="strings">' '</var>;
               }
             }
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isDisableFunction(<var class="vars">$token</var>)) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Disable function(%s) in expression'</var>, <var class="vars">$token</var>);
               <var class="vars">$tokens</var> = <var class="keywords">array</var>(<var class="strings">'0'</var>);
               <var class="keywords">break</var>;
             }
           }
         }
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
           <var class="vars">$this</var>-&gt;_extraJoinExpr = <var class="keywords">array</var>();
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_extraJoinExpr)) {
             <var class="keywords">foreach</var> (<var class="vars">$this</var>-&gt;_extraJoinExpr <var class="keywords">as</var> <var class="vars">$isset_expr</var>) {
               <var class="funcs">array_splice</var>(<var class="vars">$tokens</var>, 0, 0, <var class="vars">$isset_expr</var>);
             }
           }
           <var class="keywords">if</var> (<var class="funcs">end</var>(<var class="vars">$tokens</var>) === <var class="strings">'||'</var>) {
             <var class="funcs">array_pop</var>(<var class="vars">$tokens</var>);
           }
           <var class="vars">$tokens</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$tokens</var>);
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_execExpr)) {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;optimizeExpr(<var class="vars">$tokens</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;trimExtra(<var class="vars">$this</var>-&gt;joinWords(<var class="vars">$tokens</var>), <var class="strings">'&amp;|;'</var>);
           }
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;checkExpr(<var class="vars">$result</var>)) {
             <var class="vars">$result</var> = <var class="keywords">false</var>;
           }
         }
       }
       <var class="keywords">unset</var>(<var class="vars">$meta</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0586"><h2>
<a name="p_function_execsubselect_586">
<var class="function">execSubSelect</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the sub-query expression</dd>
<dt>param</dt>
<dd><em>string</em>  the left operator</dd>
<dt>return</dt>
<dd><em>mixed</em>   result of sub-select query</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes the sub-select expression
</pre>
</div></div><pre id="source-0586"> <var class="keywords">function</var> execSubSelect(<var class="vars">$query</var>, <var class="vars">$operator</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$command</var> = <var class="vars">$this</var>-&gt;getQueryCommand(<var class="vars">$query</var>);
     <var class="keywords">if</var> (0 !== <var class="funcs">strcasecmp</var>(<var class="vars">$command</var>, <var class="strings">'select'</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'The sub-query(%s) should be SELECT'</var>, <var class="vars">$command</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$rows</var> = <var class="keywords">array</var>();
       <var class="vars">$clone</var> = <var class="keywords">new</var> Posql;
       <var class="keywords">foreach</var> (<var class="funcs">get_object_vars</var>(<var class="vars">$this</var>) <var class="keywords">as</var> <var class="vars">$prop</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">if</var> (<var class="vars">$prop</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$prop</var>)) {
           <var class="vars">$clone</var>-&gt;{<var class="vars">$prop</var>} = <var class="vars">$val</var>;
         }
       }
       <var class="vars">$stmt</var> = <var class="vars">$clone</var>-&gt;query(<var class="vars">$query</var>);
       <var class="keywords">if</var> (<var class="vars">$clone</var>-&gt;hasError()) {
         <var class="vars">$this</var>-&gt;pushError(<var class="vars">$clone</var>-&gt;lastError());
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isStatementObject(<var class="vars">$stmt</var>)) {
         <var class="vars">$fetch_mode</var> = <var class="strings">'assoc'</var>;
         <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$operator</var>)) {
           <var class="keywords">case</var> <var class="strings">'from'</var>:
               <var class="vars">$this</var>-&gt;_fromSubSelect = <var class="keywords">true</var>;
               <var class="vars">$result</var> = <var class="vars">$stmt</var>-&gt;fetchAll(<var class="vars">$fetch_mode</var>);
               <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$result</var>) || <var class="keywords">empty</var>(<var class="vars">$result</var>)) {
                 <var class="vars">$result</var> = <var class="keywords">array</var>();
               } <var class="keywords">else</var> {
                 <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$result</var>);
                 <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$reset</var>)) {
                   <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid result-set on sub-query'</var>);
                 } <var class="keywords">else</var> {
                   <var class="vars">$this</var>-&gt;_subSelectMeta = <var class="keywords">array</var>();
                   <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$reset</var>) <var class="keywords">as</var> <var class="vars">$column</var>) {
                     <var class="vars">$this</var>-&gt;_subSelectMeta[<var class="vars">$column</var>] = 1;
                   }
                 }
               }
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'exists'</var>:
               <var class="vars">$result</var> = <var class="strings">'0'</var>;
               <var class="keywords">if</var> (<var class="vars">$stmt</var>-&gt;rowCount()) {
                 <var class="vars">$result</var> = <var class="strings">'1'</var>;
               }
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="keywords">if</var> (!<var class="vars">$stmt</var>-&gt;rowCount()) {
                 <var class="vars">$result</var> = <var class="keywords">null</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$row</var> = <var class="vars">$stmt</var>-&gt;fetch(<var class="vars">$fetch_mode</var>);
                 <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$row</var>)) {
                   <var class="vars">$result</var> = <var class="keywords">null</var>;
                 } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$row</var>)) {
                   <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$row</var>) !== 1) {
                     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Operand should contain 1 column'</var>);
                     <var class="vars">$result</var> = <var class="keywords">null</var>;
                   } <var class="keywords">else</var> {
                     <var class="vars">$rows</var> = <var class="keywords">array</var>();
                     <var class="keywords">do</var> {
                       <var class="vars">$rows</var>[] = <var class="vars">$this</var>-&gt;quote(<var class="funcs">reset</var>(<var class="vars">$row</var>));
                     } <var class="keywords">while</var> (<var class="funcs">is_array</var>(<var class="vars">$row</var> = <var class="vars">$stmt</var>-&gt;fetch(<var class="vars">$fetch_mode</var>)));
                     <var class="keywords">if</var> (0 === <var class="funcs">strcasecmp</var>(<var class="vars">$operator</var>, <var class="strings">'in'</var>)
                      || 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$operator</var>, <var class="strings">'any'</var>)
                      || 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$operator</var>, <var class="strings">'some'</var>)
                      || 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$operator</var>, <var class="strings">'all'</var>)) {
                       <var class="vars">$rows</var> = <var class="funcs">array_unique</var>(<var class="vars">$rows</var>);
                     }
                     <var class="vars">$result</var> = <var class="funcs">implode</var>(<var class="strings">','</var>, <var class="vars">$rows</var>);
                   }
                 }
               }
               <var class="keywords">break</var>;
         }
       }
       <var class="vars">$stmt</var> = <var class="keywords">null</var>;
       <var class="keywords">unset</var>(<var class="vars">$stmt</var>, <var class="vars">$rows</var>);
       <var class="vars">$clone</var>-&gt;_setTerminated(<var class="keywords">true</var>);
       <var class="vars">$clone</var> = <var class="keywords">null</var>;
       <var class="keywords">unset</var>(<var class="vars">$clone</var>);
     }
   }
   <var class="keywords">if</var> (<var class="vars">$result</var> === <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="strings">'NULL'</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0587"><h2>
<a name="p_function_assignsubquery_587">
<var class="function">assignSubQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the SQL query, or the parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   executed result, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Assign the sub-query to the result
</pre>
</div></div><pre id="source-0587"> <var class="keywords">function</var> assignSubQuery(<var class="vars">$query</var>){
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$query</var>)) {
     <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$query</var>)) {
     <var class="keywords">while</var> (<var class="keywords">true</var>) {
       <var class="vars">$sub_parsed</var> = <var class="vars">$this</var>-&gt;parseSubQuery(<var class="vars">$query</var>);
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$sub_parsed</var>)
        &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'tokens'</var>, <var class="vars">$sub_parsed</var>)
        &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'offset'</var>, <var class="vars">$sub_parsed</var>)
        &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'length'</var>, <var class="vars">$sub_parsed</var>)
        &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'operator'</var>, <var class="vars">$sub_parsed</var>)) {
         <var class="vars">$sub_tokens</var>   = <var class="vars">$sub_parsed</var>[<var class="strings">'tokens'</var>];
         <var class="vars">$sub_offset</var>   = <var class="vars">$sub_parsed</var>[<var class="strings">'offset'</var>];
         <var class="vars">$sub_length</var>   = <var class="vars">$sub_parsed</var>[<var class="strings">'length'</var>];
         <var class="vars">$sub_operator</var> = <var class="vars">$sub_parsed</var>[<var class="strings">'operator'</var>];
         <var class="vars">$sub_query</var>    = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$sub_tokens</var>);
         <var class="vars">$sub_result</var>   = <var class="vars">$this</var>-&gt;execSubSelect(<var class="vars">$sub_query</var>, <var class="vars">$sub_operator</var>);
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
           <var class="vars">$query</var> = <var class="keywords">array</var>(<var class="strings">'NULL'</var>);
           <var class="keywords">break</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$prev_query</var> = <var class="vars">$query</var>;
           <var class="funcs">array_splice</var>(<var class="vars">$query</var>, <var class="vars">$sub_offset</var>, <var class="vars">$sub_length</var>, <var class="vars">$sub_result</var>);
           <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$query</var>);
           <var class="keywords">if</var> (<var class="vars">$query</var> === <var class="vars">$prev_query</var>) {
             <var class="keywords">break</var>;
           }
         }
       } <var class="keywords">else</var> {
         <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$query</var>)) {
     <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$query</var>);
   }
   <var class="keywords">return</var> <var class="vars">$query</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0588"><h2>
<a name="p_function_execsubqueryfrom_588">
<var class="function">execSubQueryFrom</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the SQL query, or the parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   executed result, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Execute the sub-query for FROM clause
</pre>
</div></div><pre id="source-0588"> <var class="keywords">function</var> execSubQueryFrom(<var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$query</var>)) {
     <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$query</var>)) {
     <var class="vars">$sub_parsed</var> = <var class="vars">$this</var>-&gt;parseSubQuery(<var class="vars">$query</var>);
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$sub_parsed</var>)
      &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'tokens'</var>, <var class="vars">$sub_parsed</var>)) {
       <var class="vars">$tokens</var> = <var class="vars">$sub_parsed</var>[<var class="strings">'tokens'</var>];
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tokens</var>) &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$tokens</var>)) {
         <var class="vars">$sub_query</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$tokens</var>);
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;execSubSelect(<var class="vars">$sub_query</var>, <var class="strings">'from'</var>);
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$result</var>) &amp;&amp; 0 === <var class="funcs">strcasecmp</var>(<var class="vars">$result</var>, <var class="strings">'null'</var>)) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0589"><h2>
<a name="p_function_execmultisubqueryfrom_589">
<var class="function">execMultiSubQueryFrom</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the SQL query, or the parsed tokens</dd>
<dt>return</dt>
<dd><em>mixed</em>   executed result, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Execute any sub-queries for FROM clause
</pre>
</div></div><pre id="source-0589"> <var class="keywords">function</var> execMultiSubQueryFrom(<var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectJoinInfo)
      || <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to compile on sub-query using JOIN'</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$unique_names</var> = &amp; <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames;
       <var class="vars">$unique_names</var> = <var class="vars">$this</var>-&gt;flipArray(<var class="vars">$unique_names</var>);
       <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$query</var>)) {
         <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>);
       }
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$query</var>)
        &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$unique_names</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$unique_names</var>)) {
         <var class="keywords">while</var> (<var class="keywords">true</var>) {
           <var class="vars">$sub_parsed</var> = <var class="vars">$this</var>-&gt;parseSubQuery(<var class="vars">$query</var>, <var class="keywords">true</var>);
           <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$sub_parsed</var>)
            &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'tokens'</var>, <var class="vars">$sub_parsed</var>)
            &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'offset'</var>, <var class="vars">$sub_parsed</var>)
            &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'length'</var>, <var class="vars">$sub_parsed</var>)) {
             <var class="vars">$sub_tokens</var> = <var class="vars">$sub_parsed</var>[<var class="strings">'tokens'</var>];
             <var class="vars">$sub_offset</var> = <var class="vars">$sub_parsed</var>[<var class="strings">'offset'</var>];
             <var class="vars">$sub_length</var> = <var class="vars">$sub_parsed</var>[<var class="strings">'length'</var>];
             <var class="vars">$sub_query</var>  = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$sub_tokens</var>);
             <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$sub_query</var>, <var class="vars">$unique_names</var>)) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to compile on sub-query using JOIN'</var>);
               <var class="keywords">break</var>;
             }
             <var class="vars">$exec_query</var> = <var class="vars">$sub_query</var>;
             <var class="keywords">while</var> (<var class="funcs">substr</var>(<var class="vars">$exec_query</var>, 0, 1) === <var class="strings">'('</var>
                 &amp;&amp; <var class="funcs">substr</var>(<var class="vars">$exec_query</var>,  -1)  === <var class="strings">')'</var>) {
               <var class="vars">$exec_query</var> = <var class="funcs">substr</var>(<var class="vars">$exec_query</var>, 1, -1);
             }
             <var class="vars">$this</var>-&gt;_fromSubSelect = <var class="keywords">null</var>;
             <var class="vars">$sub_result</var> = <var class="vars">$this</var>-&gt;execSubSelect(<var class="vars">$exec_query</var>, <var class="strings">'from'</var>);
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
               <var class="keywords">break</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$unique_name</var> = <var class="vars">$unique_names</var>[<var class="vars">$sub_query</var>];
               <var class="vars">$result</var>[<var class="vars">$unique_name</var>] = <var class="vars">$sub_result</var>;
               <var class="vars">$sub_result</var> = <var class="keywords">null</var>;
               <var class="vars">$prev_query</var> = <var class="vars">$query</var>;
               <var class="funcs">array_splice</var>(<var class="vars">$query</var>, <var class="vars">$sub_offset</var>, <var class="vars">$sub_length</var>, <var class="vars">$unique_name</var>);
               <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$query</var>);
               <var class="keywords">if</var> (<var class="vars">$query</var> === <var class="vars">$prev_query</var>) {
                 <var class="keywords">break</var>;
               }
             }
             <var class="keywords">unset</var>(<var class="vars">$sub_result</var>);
           } <var class="keywords">else</var> {
             <var class="keywords">break</var>;
           }
         }
       }
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="keywords">foreach</var> (<var class="vars">$unique_names</var> <var class="keywords">as</var> <var class="vars">$symbol</var> =&gt; <var class="vars">$identifier</var>) {
           <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$identifier</var>, <var class="vars">$result</var>)) {
             <var class="vars">$result</var>[<var class="vars">$identifier</var>] = <var class="vars">$symbol</var>;
           }
         }
       }
       <var class="keywords">unset</var>(<var class="vars">$unique_names</var>);
     }
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$result</var>)) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0590"><h2>
<a name="p_function_having_590">
<var class="function">having</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records as array</dd>
<dt>param</dt>
<dd><em>mixed</em>   expression as HAVING clause (default = true)</dd>
<dt>param</dt>
<dd><em>mixed</em>   the name of column which was used GROUP BY clause</dd>
<dt>param</dt>
<dd><em>array</em>   results of all aggregate functions</dd>
<dt>return</dt>
<dd><em>array</em>   results of aggregate which were varied by HAVING with rows</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes the expression on HAVING clause
</pre>
</div></div><pre id="source-0590"> <var class="keywords">function</var> having(&amp;<var class="vars">$rows</var>, <var class="vars">$having</var> = <var class="keywords">true</var>, <var class="vars">$groups</var> = <var class="keywords">null</var>, <var class="vars">$aggregates</var> = <var class="keywords">null</var>){
   <var class="vars">$this</var>-&gt;_onHaving = <var class="keywords">true</var>;
   <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
   <var class="keywords">if</var> (<var class="vars">$having</var> === <var class="keywords">false</var> || <var class="vars">$having</var> === <var class="keywords">null</var>) {
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="funcs">is_scalar</var>(<var class="vars">$having</var>)) {
     <var class="vars">$type</var> = <var class="funcs">gettype</var>(<var class="vars">$having</var>);
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal type(%s) of expression on HAVING'</var>, <var class="vars">$type</var>);
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$rows</var>) || !<var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))) {
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$having</var>)) {
       <var class="vars">$having</var> = <var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$having</var>);
     }
     <var class="vars">$restored</var> = <var class="vars">$this</var>-&gt;restoreAliasTokens(<var class="vars">$having</var>);
     <var class="keywords">if</var> (<var class="vars">$restored</var> != <var class="keywords">null</var>) {
       <var class="vars">$having</var> = <var class="vars">$restored</var>;
       <var class="keywords">unset</var>(<var class="vars">$restored</var>);
     }
     <var class="vars">$func_info</var> = <var class="vars">$this</var>-&gt;parseHaving(<var class="vars">$having</var>);
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$rows</var> = <var class="keywords">array</var>();
     } <var class="keywords">else</var> {
       <var class="vars">$rows_cols_org</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>));
       <var class="keywords">if</var> (<var class="vars">$groups</var> == <var class="keywords">null</var> &amp;&amp; <var class="vars">$func_info</var> != <var class="keywords">null</var>) {
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
           <var class="funcs">array_splice</var>(<var class="vars">$rows</var>, 1);
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$aggregates</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$aggregates</var>)) {
             <var class="funcs">array_splice</var>(<var class="vars">$aggregates</var>, 1);
           } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$aggregates</var> == <var class="keywords">null</var>) {
             <var class="vars">$group_single</var> = <var class="keywords">array</var>(<var class="keywords">array</var>(0));
             <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;aggregateByGroups(<var class="vars">$rows</var>, <var class="vars">$group_single</var>);
             <var class="vars">$this</var>-&gt;aggregateAssignByGroups(<var class="vars">$rows</var>, <var class="vars">$aggregates</var>);
           }
         }
       }
       <var class="vars">$appended_cols</var> = <var class="vars">$this</var>-&gt;appendAggregateResult(<var class="vars">$rows</var>, <var class="vars">$aggregates</var>);
       <var class="vars">$rows_cols</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>));
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$func_info</var>) &amp;&amp; <var class="vars">$this</var>-&gt;isEnableHavingInfo(<var class="vars">$func_info</var>)) {
         <var class="vars">$unique_id</var> = 0;
         <var class="vars">$unique_vars</var> = <var class="keywords">array</var>();
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$appended_cols</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$appended_cols</var>)) {
           <var class="vars">$check</var> = <var class="strings">'0000'</var>;
           <var class="vars">$cols</var>  = <var class="strings">'cols'</var>;
           <var class="keywords">foreach</var> (<var class="vars">$func_info</var> <var class="keywords">as</var> <var class="vars">$info</var>) {
             <var class="vars">$unique_format</var> = <var class="strings">'_posql_having_'</var>;
             <var class="vars">$unique_more</var> = <var class="keywords">false</var>;
             <var class="keywords">foreach</var> (<var class="vars">$rows_cols</var> <var class="keywords">as</var> <var class="vars">$key</var>) {
               <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$key</var>, <var class="vars">$check</var>) !== <var class="keywords">false</var>
                || <var class="funcs">strpos</var>(<var class="vars">$key</var>, <var class="vars">$unique_format</var>) !== <var class="keywords">false</var>) {
                 <var class="vars">$unique_more</var> = <var class="keywords">true</var>;
                 <var class="keywords">break</var>;
               }
             }
             <var class="vars">$unique_format</var> .= <var class="strings">'%04d'</var>;
             <var class="keywords">do</var> {
               <var class="vars">$unique_var</var> = <var class="funcs">sprintf</var>(<var class="vars">$unique_format</var>, <var class="vars">$unique_id</var>++);
               <var class="keywords">if</var> (<var class="vars">$unique_more</var>) {
                 <var class="vars">$unique_var</var> .= <var class="funcs">dechex</var>(<var class="vars">$unique_id</var>);
               }
             } <var class="keywords">while</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$unique_var</var>, <var class="vars">$rows_cols</var>));
             <var class="vars">$having</var> = <var class="vars">$this</var>-&gt;replaceHavingTokens(<var class="vars">$having</var>, <var class="vars">$info</var>,
                                                  <var class="vars">$unique_var</var>);
             <var class="vars">$unique_vars</var>[<var class="vars">$unique_var</var>] = <var class="vars">$info</var>[<var class="vars">$cols</var>];
           }
           <var class="vars">$having</var> = <var class="vars">$this</var>-&gt;cleanArray(<var class="vars">$having</var>);
         }
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>)) {
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$unique_vars</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$unique_vars</var>)) {
             <var class="vars">$this</var>-&gt;_uniqueColsByHaving = <var class="keywords">array</var>();
             <var class="keywords">foreach</var> (<var class="vars">$unique_vars</var> <var class="keywords">as</var> <var class="vars">$unique_var</var> =&gt; <var class="vars">$column_name</var>) {
               <var class="vars">$this</var>-&gt;_uniqueColsByHaving[<var class="vars">$unique_var</var>] = <var class="vars">$column_name</var>;
               <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
               <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
                 <var class="vars">$agg_column</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s#%08u'</var>, <var class="vars">$column_name</var>, <var class="vars">$i</var>);
                 <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>])
                  || !<var class="funcs">array_key_exists</var>(<var class="vars">$agg_column</var>, <var class="vars">$rows</var>[<var class="vars">$i</var>])) {
                   <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to compile on HAVING'</var>);
                   <var class="vars">$rows</var> = <var class="keywords">array</var>();
                   <var class="keywords">break</var> 2;
                 }
                 <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$unique_var</var>] = &amp; <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$agg_column</var>];
               }
             }
           }
         }
       }
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>)) {
         <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$having</var>);
         <var class="vars">$this</var>-&gt;_uniqueColsByHaving = <var class="keywords">null</var>;
         <var class="vars">$this</var>-&gt;execHaving(<var class="vars">$rows</var>, <var class="vars">$aggregates</var>, <var class="vars">$expr</var>);
         <var class="comments">//debug($rows,'color=orange:***HAVING***;');</var>
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
           <var class="vars">$rows</var> = <var class="keywords">array</var>();
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;diffColumns(<var class="vars">$rows</var>, <var class="vars">$rows_cols_org</var>, <var class="keywords">true</var>);
         }
       }
     }
   }
   <var class="vars">$this</var>-&gt;_uniqueColsByHaving = <var class="keywords">null</var>;
   <var class="vars">$this</var>-&gt;_onHaving = <var class="keywords">null</var>;
   <var class="keywords">return</var> <var class="vars">$aggregates</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0591"><h2>
<a name="p_function_exechaving_591">
<var class="function">execHaving</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the rows of result sets</dd>
<dt>param</dt>
<dd><em>array</em>   results of all aggregate functions</dd>
<dt>param</dt>
<dd><em>mixed</em>   the expression on HAVING clause</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes the expression for HAVING clause
</pre>
</div></div><pre id="source-0591"> <var class="keywords">function</var> execHaving(&amp;<var class="vars">$rows</var>, &amp;<var class="vars">$aggregates</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$expr</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to parse HAVING clause'</var>);
     <var class="vars">$rows</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))) {
     <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">false</var> || <var class="vars">$expr</var> === <var class="keywords">null</var>) {
       <var class="vars">$rows</var> = <var class="keywords">array</var>();
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$expr</var> !== <var class="keywords">true</var> &amp;&amp; <var class="funcs">is_scalar</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$first</var> = <var class="keywords">true</var>;
       <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
         <var class="vars">$row</var> = <var class="vars">$rows</var>[<var class="vars">$i</var>];
         <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onMultiSelect)) {
           <var class="vars">$row</var> = <var class="vars">$rows</var>[<var class="vars">$i</var>];
         } <var class="keywords">else</var> {
           <var class="vars">$row</var> = <var class="keywords">array</var>();
           <var class="keywords">foreach</var> (<var class="vars">$rows</var>[<var class="vars">$i</var>] <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
             <var class="vars">$key</var> = <var class="vars">$this</var>-&gt;toCorrelationName(<var class="vars">$key</var>);
             <var class="vars">$row</var>[<var class="vars">$key</var>] = <var class="vars">$val</var>;
           }
         }
         <var class="keywords">if</var> (<var class="vars">$first</var>) {
           <var class="vars">$first</var> = <var class="keywords">false</var>;
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$row</var>, <var class="vars">$expr</var>)) {
             <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>], <var class="vars">$aggregates</var>[<var class="vars">$i</var>]);
           }
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
             <var class="vars">$rows</var> = <var class="keywords">array</var>();
             <var class="keywords">break</var>;
           }
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;expr(<var class="vars">$row</var>, <var class="vars">$expr</var>)) {
             <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>], <var class="vars">$aggregates</var>[<var class="vars">$i</var>]);
           }
         }
       }
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)
        &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$aggregates</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$aggregates</var>)) {
         <var class="vars">$rows</var> = <var class="funcs">array_values</var>(<var class="vars">$rows</var>);
         <var class="vars">$aggregates</var> = <var class="funcs">array_values</var>(<var class="vars">$aggregates</var>);
       }
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0592"><h2>
<a name="p_function_execinsertexpr_592">
<var class="function">execInsertExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   A row of result sets</dd>
<dt>param</dt>
<dd><em>mixed</em>   the column, or expression</dd>
<dt>param</dt>
<dd><em>mixed</em>   the value of expression</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes the expression for INSERT query
</pre>
</div></div><pre id="source-0592"> <var class="keywords">function</var> execInsertExpr(<var class="vars">$row</var>, <var class="vars">$key</var>, <var class="vars">$val</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$row</var>)) {
     <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$row</var>[<var class="vars">$key</var>]);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$this</var>-&gt;_curMeta, <var class="vars">$expr</var>);
     }
   } <var class="keywords">else</var> {
     <var class="vars">$result</var> = <var class="vars">$val</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0593"><h2>
<a name="p_function_execupdateexpr_593">
<var class="function">execUpdateExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   A row of result sets</dd>
<dt>param</dt>
<dd><em>mixed</em>   the column, or expression</dd>
<dt>param</dt>
<dd><em>mixed</em>   the value of expression</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes the expression for UPDATE query
  e.g. &quot;UPDATE counter SET count = count + 1&quot;
</pre>
</div></div><pre id="source-0593"> <var class="keywords">function</var> execUpdateExpr(<var class="vars">$row</var>, <var class="vars">$key</var>, <var class="vars">$val</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$this</var>-&gt;_curMeta)) {
     <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$this</var>-&gt;_curMeta[<var class="vars">$key</var>]);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$row</var>, <var class="vars">$expr</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0594"><h2>
<a name="p_function_execselectexpr_594">
<var class="function">execSelectExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   A row of result sets</dd>
<dt>param</dt>
<dd><em>mixed</em>   the column, or expression</dd>
<dt>return</dt>
<dd><em>mixed</em>   results of expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes the expression for SELECT-List clause
</pre>
</div></div><pre id="source-0594"> <var class="keywords">function</var> execSelectExpr(<var class="vars">$row</var>, <var class="vars">$col</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$row</var>)) {
     <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$col</var>);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$row</var>, <var class="vars">$expr</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0595"><h2>
<a name="p_function_execaggregatefunction_595">
<var class="function">execAggregateFunction</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records</dd>
<dt>param</dt>
<dd><em>string</em>  the aggregate function name</dd>
<dt>param</dt>
<dd><em>string</em>  the name of column which executed aggregate function</dd>
<dt>param</dt>
<dd><em>array</em>   array which has the value of aggregate functions result</dd>
<dt>return</dt>
<dd><em>boolean</em> success or failure</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes the aggregate function to the rows of the result
</pre>
</div></div><pre id="source-0595"> <var class="keywords">function</var> execAggregateFunction(&amp;<var class="vars">$rows</var>, <var class="vars">$func</var>, <var class="vars">$col</var>, <var class="vars">$aggregates</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))
      &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$aggregates</var>)
      &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$aggregates</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$aggregates</var>))) {
       <var class="vars">$org_col</var> = <var class="vars">$col</var>;
       <var class="vars">$col</var> = <var class="vars">$this</var>-&gt;replaceAliasName(<var class="vars">$col</var>);
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
         <var class="vars">$agg_count</var> = <var class="funcs">count</var>(<var class="vars">$aggregates</var>);
         <var class="vars">$func_name</var> = <var class="vars">$this</var>-&gt;formatAggregateFunction(<var class="vars">$func</var>, <var class="vars">$org_col</var>);
         <var class="vars">$lfunc_name</var> = <var class="funcs">strtolower</var>(<var class="vars">$func</var>);
         <var class="vars">$reset</var> = <var class="funcs">reset</var>(<var class="vars">$aggregates</var>);
         <var class="vars">$agg_defaults</var> = <var class="vars">$this</var>-&gt;getAggregateDefaults();
         <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$lfunc_name</var>, <var class="vars">$agg_defaults</var>)) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported function(%s)'</var>, <var class="vars">$func</var>);
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$agg_count</var> &lt; <var class="vars">$row_count</var>) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal offset(%d) on aggregate function'</var>,
                              <var class="vars">$agg_count</var>);
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$col</var> === <var class="strings">'*'</var> &amp;&amp; <var class="vars">$lfunc_name</var> === <var class="strings">'count'</var>) {
               <var class="vars">$agg_func</var> = <var class="strings">'count_all'</var>;
               <var class="vars">$col</var> = <var class="funcs">key</var>(<var class="vars">$reset</var>);
             } <var class="keywords">else</var> {
               <var class="vars">$agg_func</var> = <var class="vars">$lfunc_name</var>;
             }
             <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
               <var class="vars">$val</var> = <var class="keywords">null</var>;
               <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$aggregates</var>[<var class="vars">$i</var>][<var class="vars">$col</var>][<var class="vars">$agg_func</var>])) {
                 <var class="vars">$val</var> = <var class="vars">$aggregates</var>[<var class="vars">$i</var>][<var class="vars">$col</var>][<var class="vars">$agg_func</var>];
               }
               <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$func_name</var>] = <var class="vars">$val</var>;
             }
             <var class="vars">$result</var> = <var class="keywords">true</var>;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0596"><h2>
<a name="p_function_execallaggregatefunction_596">
<var class="function">execAllAggregateFunction</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records</dd>
<dt>param</dt>
<dd><em>array</em>   array which has the value of aggregate functions result</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes all the aggregate functions to the rows of the result
</pre>
</div></div><pre id="source-0596"> <var class="keywords">function</var> execAllAggregateFunction(&amp;<var class="vars">$rows</var>, <var class="vars">$funcs</var>){
   <var class="vars">$length</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
   <var class="keywords">if</var> (<var class="vars">$length</var>) {
     <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;aggregateAll(<var class="vars">$rows</var>);
     <var class="keywords">foreach</var> (<var class="vars">$funcs</var> <var class="keywords">as</var> <var class="vars">$funcname</var> =&gt; <var class="vars">$colname</var>) {
       <var class="vars">$lcf</var> = <var class="funcs">strtolower</var>(<var class="vars">$funcname</var>);
       <var class="vars">$org_col</var> = <var class="vars">$colname</var>;
       <var class="vars">$colname</var> = <var class="vars">$this</var>-&gt;replaceAliasName(<var class="vars">$colname</var>);
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="keywords">if</var> (<var class="vars">$colname</var> === <var class="strings">'*'</var>) {
           <var class="keywords">if</var> (<var class="vars">$lcf</var> !== <var class="strings">'count'</var>) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Supplied argument is not valid(%s)'</var>,
                              <var class="vars">$funcname</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$col</var> = <var class="vars">$this</var>-&gt;formatAggregateFunction(<var class="vars">$funcname</var>, <var class="vars">$org_col</var>);
             <var class="vars">$val</var> = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$length</var>, 0);
             <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
               <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$col</var>] = <var class="vars">$val</var>;
             }
           }
         } <var class="keywords">else</var> {
           <var class="vars">$agg</var> = &amp; <var class="vars">$aggregates</var>[<var class="strings">'std'</var>];
           <var class="vars">$col</var> = <var class="vars">$this</var>-&gt;formatAggregateFunction(<var class="vars">$funcname</var>, <var class="vars">$org_col</var>);
           <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$lcf</var>, <var class="vars">$agg</var>)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported function(%s)'</var>, <var class="vars">$funcname</var>);
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$colname</var>, <var class="vars">$agg</var>[<var class="vars">$lcf</var>])) {
               <var class="vars">$val</var> = <var class="vars">$agg</var>[<var class="vars">$lcf</var>][<var class="vars">$colname</var>];
               <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$length</var>; <var class="vars">$i</var>++) {
                 <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$col</var>] = <var class="vars">$val</var>;
               }
             }
           }
           <var class="keywords">unset</var>(<var class="vars">$agg</var>);
         }
       }
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0597"><h2>
<a name="p_function_execsimplecountfunction_597">
<var class="function">execSimpleCountFunction</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  the result value of COUNT function</dd>
<dt>param</dt>
<dd><em>string</em>  the aggregate function name</dd>
<dt>param</dt>
<dd><em>string</em>  the name of column</dd>
<dt>return</dt>
<dd><em>array</em>   the result row which assigned aggregate function</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Returns the assigned result row which executed aggregate function
                  which will be assigned aggregate function
</pre>
</div></div><pre id="source-0597"> <var class="keywords">function</var> execSimpleCountFunction(<var class="vars">$count</var>, <var class="vars">$func</var>, <var class="vars">$col</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$count</var>)
      &amp;&amp; <var class="vars">$func</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$col</var> != <var class="keywords">null</var>
      &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$func</var>) &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$col</var>)) {
       <var class="vars">$func_name</var> = <var class="vars">$this</var>-&gt;formatAggregateFunction(<var class="vars">$func</var>, <var class="vars">$col</var>);
       <var class="vars">$result</var>[] = <var class="keywords">array</var>(<var class="vars">$func_name</var> =&gt; <var class="vars">$count</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0598"><h2>
<a name="p_class_posql_core_598">
<var class="class">Posql_Core</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 The base class to dissociate the methods from PUBLIC and PRIVATE
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Core</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0599"><h2>
<a name="p_function_isdatabase_599">
<var class="function">isDatabase</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   optionally, the file path to check</dd>
<dt>return</dt>
<dd><em>boolean</em>  whether it was database or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether the database format is available
</pre>
</div></div><pre id="source-0599"> <var class="keywords">function</var> isDatabase(<var class="vars">$path</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$path</var> != <var class="keywords">null</var>) {
     <var class="vars">$org_path</var> = <var class="vars">$this</var>-&gt;path;
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$path</var>);
   }
   <var class="vars">$class</var> = <var class="vars">$this</var>-&gt;getClass() . <var class="vars">$this</var>-&gt;getVersion(1);
   <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="vars">$class</var>);
   <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
     <var class="vars">$heads</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
     <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
     <var class="keywords">if</var> (0 === <var class="funcs">strncasecmp</var>(<var class="vars">$heads</var>, <var class="vars">$class</var>, <var class="vars">$length</var>)) {
       <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="vars">$heads</var>, -1) === <var class="vars">$this</var>-&gt;NL
        &amp;&amp; <var class="funcs">rtrim</var>(<var class="vars">$heads</var>) === <var class="funcs">rtrim</var>(<var class="vars">$heads</var>, <var class="vars">$this</var>-&gt;NL)) {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal the end of line character.'</var>
                       .  <var class="strings">' Must be LF (0x0A)'</var>);
       }
     } <var class="keywords">else</var> {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal format or version'</var>);
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     }
   }
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$org_path</var>) &amp;&amp; <var class="vars">$org_path</var> !== <var class="vars">$this</var>-&gt;path) {
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$org_path</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0600"><h2>
<a name="p_function_existstable_600">
<var class="function">existsTable</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   table name</dd>
<dt>return</dt>
<dd><em>boolean</em>  exists or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> It is checked whether the table exists
</pre>
</div></div><pre id="source-0600"> <var class="keywords">function</var> existsTable(<var class="vars">$tablename</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tablename</var>)) {
     <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$tablename</var>);
     <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;getMeta(<var class="vars">$tablename</var>);
     <var class="vars">$result</var> = <var class="vars">$meta</var> !== <var class="keywords">false</var> &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0601"><h2>
<a name="p_function_getmeta_601">
<var class="function">getMeta</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>return</dt>
<dd><em>array</em>   meta data of table or false on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Gets the meta data from database
</pre>
</div></div><pre id="source-0601"> <var class="keywords">function</var> getMeta(<var class="vars">$table</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
     <var class="keywords">while</var> ((<var class="vars">$table</var> != <var class="keywords">null</var> &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>])
         &amp;&amp; <var class="vars">$this</var>-&gt;isLockEx(<var class="vars">$table</var>)) || <var class="vars">$this</var>-&gt;isLockAll()) {
       <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
     }
     <var class="vars">$line</var> = <var class="keywords">null</var>;
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockShAll()) {
       <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
         <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 2);
         <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>, <var class="keywords">true</var>);
         <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       }
       <var class="vars">$this</var>-&gt;unlockAll();
     }
     <var class="keywords">if</var> (<var class="vars">$line</var> != <var class="keywords">null</var>) {
       <var class="vars">$meta</var> = @(<var class="vars">$this</var>-&gt;decode(<var class="vars">$line</var>));
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
         <var class="vars">$meta</var> = <var class="keywords">array</var>(<var class="keywords">array</var>());
       }
       <var class="vars">$this</var>-&gt;meta = <var class="vars">$meta</var>;
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta)) {
         <var class="vars">$this</var>-&gt;meta = <var class="keywords">array</var>(<var class="keywords">array</var>());
       }
       <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(0, <var class="vars">$this</var>-&gt;meta)) {
         <var class="vars">$this</var>-&gt;meta[0] = <var class="keywords">array</var>();
       }
       <var class="vars">$posql_key</var> = <var class="vars">$this</var>-&gt;getClassKey();
       <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$posql_key</var>, <var class="vars">$this</var>-&gt;meta)
        || !<var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>])) {
         <var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>] = <var class="keywords">array</var>();
       }
       <var class="vars">$this</var>-&gt;_primaryKey  = <var class="keywords">null</var>;
       <var class="vars">$this</var>-&gt;_createQuery = <var class="keywords">null</var>;
       <var class="keywords">if</var> (<var class="vars">$tname</var> != <var class="keywords">null</var> &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>][<var class="vars">$tname</var>])
        &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>][<var class="vars">$tname</var>])) {
         <var class="vars">$def</var> = &amp; <var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>][<var class="vars">$tname</var>];
         <var class="vars">$this</var>-&gt;_primaryKey  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$def</var>, <var class="strings">'primary'</var>);
         <var class="vars">$this</var>-&gt;_createQuery = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$def</var>, <var class="strings">'sql'</var>);
         <var class="keywords">unset</var>(<var class="vars">$def</var>);
       }
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_getMetaAll)) {
         <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>]);
       }
       <var class="keywords">if</var> (<var class="vars">$table</var> == <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;meta;
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$this</var>-&gt;meta, <var class="vars">$tname</var>, <var class="keywords">false</var>);
       }
     }
     <var class="keywords">if</var> (<var class="vars">$result</var> === <var class="keywords">false</var>) {
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_onCreate)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot load the meta data(%s)'</var>, <var class="vars">$table</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0602"><h2>
<a name="p_function_getmetadata_602">
<var class="function">getMetaData</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  optionally, table name</dd>
<dt>return</dt>
<dd><em>array</em>   meta data as associate array, or FALSE on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Gets the meta data from the object memory
</pre>
</div></div><pre id="source-0602"> <var class="keywords">function</var> getMetaData(<var class="vars">$table</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta)) {
     <var class="keywords">if</var> (<var class="vars">$table</var> === <var class="keywords">null</var>) {
       <var class="vars">$result</var> = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$this</var>-&gt;meta <var class="keywords">as</var> <var class="vars">$tname</var> =&gt; <var class="vars">$meta</var>) {
         <var class="keywords">if</var> (<var class="vars">$tname</var> == <var class="keywords">null</var>) {
           <var class="keywords">continue</var>;
         }
         <var class="vars">$table_name</var> = <var class="vars">$this</var>-&gt;decodeKey(<var class="vars">$tname</var>);
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$table_name</var>)) {
           <var class="vars">$result</var>[<var class="vars">$table_name</var>] = <var class="vars">$meta</var>;
         }
       }
     } <var class="keywords">else</var> {
       <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$table</var>) &amp;&amp; <var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$table</var>)) {
         <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
         <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$tname</var>, <var class="vars">$this</var>-&gt;meta)) {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>];
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0603"><h2>
<a name="p_function_getmetaassoc_603">
<var class="function">getMetaAssoc</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  optionally, table name</dd>
<dt>return</dt>
<dd><em>array</em>   meta data as associate array, or empty array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Gets the meta data from database as associate array
</pre>
</div></div><pre id="source-0603"> <var class="keywords">function</var> getMetaAssoc(<var class="vars">$table</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;meta)) {
       <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;meta;
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$meta</var>)
        || (<var class="keywords">isset</var>(<var class="vars">$meta</var>[0]) &amp;&amp; <var class="vars">$meta</var>[0] == <var class="keywords">null</var>)
        || (<var class="vars">$meta</var> === <var class="keywords">array</var>(<var class="keywords">array</var>()))) {
         <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;getMeta(<var class="vars">$table</var>);
       }
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$meta</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
         <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$meta</var>))) {
           <var class="vars">$meta</var> = <var class="keywords">array</var>(<var class="vars">$meta</var>);
         }
         <var class="vars">$meta_org</var> = <var class="vars">$meta</var>;
         <var class="vars">$count</var> = <var class="funcs">count</var>(<var class="vars">$meta_org</var>);
         <var class="vars">$meta</var> = <var class="keywords">array</var>();
         <var class="keywords">while</var> (--<var class="vars">$count</var> &gt;= 0) {
           <var class="vars">$meta_div</var> = <var class="funcs">array_shift</var>(<var class="vars">$meta_org</var>);
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$meta_div</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta_div</var>)) {
             <var class="keywords">foreach</var> (<var class="vars">$meta_div</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
               <var class="vars">$meta</var>[<var class="vars">$key</var>] = 1;
             }
           }
         }
       }
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
         <var class="vars">$meta</var> = <var class="keywords">array</var>();
       }
       <var class="vars">$result</var> = <var class="vars">$meta</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0604"><h2>
<a name="p_function_getcreatedefinitionmeta_604">
<var class="function">getCreateDefinitionMeta</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0604"> <var class="keywords">function</var> getCreateDefinitionMeta(<var class="vars">$table</var> = <var class="keywords">null</var>, <var class="vars">$field</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$posql_key</var> = <var class="vars">$this</var>-&gt;getClassKey();
     <var class="vars">$this</var>-&gt;_getMetaAll = <var class="keywords">true</var>;
     <var class="vars">$this</var>-&gt;getMeta();
     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>])) {
       <var class="vars">$metas</var> = &amp; <var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>];
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$metas</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$metas</var>)) {
         <var class="vars">$table</var> = (<var class="keywords">string</var>)<var class="vars">$table</var>;
         <var class="vars">$field</var> = (<var class="keywords">string</var>)<var class="vars">$field</var>;
         <var class="keywords">if</var> (<var class="vars">$table</var> == <var class="keywords">null</var>) {
           <var class="keywords">if</var> (<var class="vars">$field</var> == <var class="keywords">null</var>) {
             <var class="vars">$result</var> = <var class="vars">$metas</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$result</var> = <var class="keywords">array</var>();
             <var class="keywords">foreach</var> (<var class="vars">$metas</var> <var class="keywords">as</var> <var class="vars">$tname</var> =&gt; <var class="vars">$meta</var>) {
               <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$tname</var>)
                &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta</var>) &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$field</var>, <var class="vars">$meta</var>)) {
                 <var class="vars">$result</var>[<var class="vars">$tname</var>] = <var class="vars">$meta</var>[<var class="vars">$field</var>];
               }
             }
           }
         } <var class="keywords">else</var> {
           <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$metas</var>, <var class="vars">$tname</var>);
           <var class="keywords">if</var> (<var class="vars">$field</var> != <var class="keywords">null</var>) {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$result</var>, <var class="vars">$tname</var>);
           }
         }
       }
       <var class="keywords">unset</var>(<var class="vars">$metas</var>);
       <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>]);
     }
     <var class="vars">$this</var>-&gt;_getMetaAll = <var class="keywords">null</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0605"><h2>
<a name="p_function_init_605">
<var class="function">init</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  file path of database</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Initializes class variables
 If file path exists, will registered vacuum() as  the shutdown function
</pre>
</div></div><pre id="source-0605"> <var class="keywords">function</var> init(<var class="vars">$path</var> = <var class="keywords">null</var>){
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inited)) {
     <var class="keywords">if</var> (<var class="funcs">function_exists</var>(<var class="strings">'date_default_timezone_set'</var>)
      &amp;&amp; <var class="funcs">function_exists</var>(<var class="strings">'date_default_timezone_get'</var>)) {
       <var class="comments">// PHP VERSION 5+ will still emit a warning in E_STRICT,</var>
       <var class="comments">//  it handy keep problems</var>
       @<var class="funcs">date_default_timezone_set</var>(@<var class="funcs">date_default_timezone_get</var>());
     }
     <var class="comments">// Alias for compatibility</var>
     <var class="vars">$this</var>-&gt;autoIncrement = &amp; <var class="vars">$this</var>-&gt;auto_increment;
     <var class="vars">$this</var>-&gt;isPHP5 = <var class="funcs">version_compare</var>(PHP_VERSION, 5, <var class="strings">'&gt;='</var>);
     <var class="vars">$this</var>-&gt;isWin  = 0 === <var class="funcs">strncasecmp</var>(PHP_OS, <var class="strings">'win'</var>, 3);
     <var class="vars">$this</var>-&gt;id     = <var class="vars">$this</var>-&gt;getUniqId();
     <var class="vars">$this</var>-&gt;math     = <var class="keywords">new</var> Posql_Math();
     <var class="vars">$this</var>-&gt;ctype    = <var class="keywords">new</var> Posql_CType();
     <var class="vars">$this</var>-&gt;pcharset = <var class="keywords">new</var> Posql_Charset();
     <var class="vars">$this</var>-&gt;unicode  = <var class="keywords">new</var> Posql_Unicode();
     <var class="vars">$this</var>-&gt;ecma     = <var class="keywords">new</var> Posql_ECMA();
     <var class="vars">$this</var>-&gt;archive  = <var class="keywords">new</var> Posql_Archive();
     <var class="vars">$this</var>-&gt;method   = <var class="keywords">new</var> Posql_Method();
     <var class="vars">$this</var>-&gt;pcharset-&gt;_referProperty(<var class="vars">$this</var>);
     <var class="vars">$this</var>-&gt;unicode-&gt;_referProperty(<var class="vars">$this</var>);
     <var class="vars">$this</var>-&gt;ecma-&gt;_referProperty(<var class="vars">$this</var>);
     <var class="vars">$this</var>-&gt;archive-&gt;_referProperty(<var class="vars">$this</var>);
     <var class="vars">$this</var>-&gt;method-&gt;_referObject(<var class="vars">$this</var>);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isWin) {
       <var class="comments">// Note: autoLock should be enabled excluding Windows.</var>
       <var class="comments">//       Because, maybe very slows</var>
       <var class="comments">//       when locking database by using mkdir() on Windows.</var>
       <var class="comments">// @see $autoLock, setAutoLock, getAutoLock</var>
       <var class="vars">$this</var>-&gt;autoLock = <var class="keywords">true</var>;
     }
     <var class="vars">$this</var>-&gt;_inited = <var class="keywords">true</var>;
   }
   <var class="vars">$this</var>-&gt;initCorrelationPrefix();
   <var class="vars">$this</var>-&gt;checkDisableFunctions();
   <var class="keywords">if</var> (<var class="vars">$path</var> != <var class="keywords">null</var>) {
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$path</var>);
   }
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_registered)
    &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;path) &amp;&amp; @<var class="funcs">is_file</var>(<var class="vars">$this</var>-&gt;path)) {
     <var class="funcs">register_shutdown_function</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'terminate'</var>));
     <var class="vars">$this</var>-&gt;_registered = <var class="keywords">true</var>;
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta) || !<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;meta[0])) {
     <var class="vars">$this</var>-&gt;meta = <var class="keywords">array</var>(<var class="keywords">array</var>());
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isEnableId(<var class="vars">$this</var>-&gt;id)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal unique id(%s)'</var>, <var class="vars">$this</var>-&gt;id);
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0606"><h2>
<a name="p_function_terminate_606">
<var class="function">terminate</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>init</dd>
<dt>param</dt>
<dd><em>string</em> optionally, the database filename</dd>
<dt>param</dt>
<dd><em>string</em> optionally, the ID of the Posql&#039;s instance (i.e. Posql-&gt;id)</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> The termination process for the exceptive aborted on script
 Unlocks all that by the instance of this class
 This method will called automatically by register_shutdown_function()
</pre>
</div></div><pre id="source-0606"> <var class="keywords">function</var> terminate(<var class="vars">$path</var> = <var class="keywords">null</var>, <var class="vars">$id</var> = <var class="keywords">null</var>){
   <var class="keywords">if</var> (<var class="vars">$path</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$id</var> != <var class="keywords">null</var>) {
     <var class="comments">// below code is urgent calls which needs arguments</var>
     <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$id</var>) &amp;&amp; <var class="funcs">strlen</var>(<var class="vars">$id</var>) === 8
      &amp;&amp; ((<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;path)
      ||  (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;path) || <var class="funcs">strlen</var>(<var class="vars">$this</var>-&gt;id) !== 8)))) {
       <var class="vars">$this</var>-&gt;setPath(<var class="vars">$path</var>);
       <var class="vars">$this</var>-&gt;id = <var class="vars">$id</var>;
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$path</var>, <var class="vars">$id</var>);
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_terminated)) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;path) &amp;&amp; @<var class="funcs">is_file</var>(<var class="vars">$this</var>-&gt;path)) {
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)
        &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_transactionName)) {
         <var class="comments">// Rollback maybe considered error.</var>
         <var class="vars">$this</var>-&gt;rollBack();
       }
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta)) {
         <var class="vars">$this</var>-&gt;getMeta();
       }
       <var class="vars">$posql_key</var> = <var class="vars">$this</var>-&gt;getClassKey();
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta)
        &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$posql_key</var>, <var class="vars">$this</var>-&gt;meta)) {
         <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>]);
       }
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;autoVacuum)) {
         <var class="vars">$this</var>-&gt;vacuum();
         <var class="vars">$this</var>-&gt;autoVacuum = <var class="keywords">null</var>;
       }
       <var class="vars">$tables</var> = <var class="funcs">array_keys</var>(<var class="vars">$this</var>-&gt;meta);
       <var class="keywords">if</var> (!<var class="funcs">in_array</var>(0, <var class="vars">$tables</var>)) {
         <var class="vars">$tables</var>[] = 0;
       }
       <var class="vars">$didall</var> = <var class="keywords">false</var>;
       <var class="keywords">foreach</var> (<var class="vars">$tables</var> <var class="keywords">as</var> <var class="vars">$table</var>) {
         <var class="vars">$this</var>-&gt;userAbort = @<var class="funcs">ignore_user_abort</var>(1);
         <var class="keywords">if</var> (!<var class="vars">$didall</var> &amp;&amp; <var class="vars">$table</var> == 0) {
           <var class="vars">$this</var>-&gt;unlockAll();
           <var class="vars">$didall</var> = <var class="keywords">true</var>;
         } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$table</var> != <var class="keywords">null</var>) {
           <var class="vars">$org</var> = <var class="vars">$this</var>-&gt;decodeKey(<var class="vars">$table</var>);
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$org</var>)) {
             <var class="vars">$this</var>-&gt;unlock(<var class="vars">$org</var>);
           }
         }
       }
       <var class="keywords">if</var> (!<var class="vars">$didall</var>) {
         <var class="vars">$this</var>-&gt;userAbort = @<var class="funcs">ignore_user_abort</var>(1);
         <var class="vars">$this</var>-&gt;unlockAll();
       }
       <var class="vars">$this</var>-&gt;meta[0] = <var class="keywords">array</var>();
     }
     <var class="comments">// Release all referenced properties, and call destructor</var>
     <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;method-&gt;posql);
     <var class="vars">$props</var> = <var class="keywords">array</var>(
       <var class="strings">'method'</var>, <var class="strings">'archive'</var>, <var class="strings">'ecma'</var>, <var class="strings">'unicode'</var>, <var class="strings">'pcharset'</var>, <var class="strings">'ctype'</var>, <var class="strings">'math'</var>
     );
     <var class="keywords">foreach</var> (<var class="vars">$props</var> <var class="keywords">as</var> <var class="vars">$prop</var>) {
       <var class="keywords">if</var> (<var class="vars">$prop</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">method_exists</var>(<var class="vars">$this</var>-&gt;{<var class="vars">$prop</var>}, <var class="strings">'__destruct'</var>)) {
         <var class="vars">$this</var>-&gt;{<var class="vars">$prop</var>}-&gt;<var class="keywords">__destruct</var>();
       }
     }
     <var class="keywords">foreach</var> (<var class="vars">$props</var> <var class="keywords">as</var> <var class="vars">$prop</var>) {
       <var class="keywords">if</var> (<var class="vars">$prop</var> != <var class="keywords">null</var>) {
         <var class="vars">$this</var>-&gt;{<var class="vars">$prop</var>} = <var class="keywords">null</var>;
         <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;{<var class="vars">$prop</var>});
       }
     }
     <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;autoIncrement, <var class="vars">$this</var>-&gt;id, <var class="vars">$props</var>);
     <var class="vars">$this</var>-&gt;_terminated = <var class="keywords">true</var>;
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0607"><h2>
<a name="p_function_sleep_607">
<var class="function">sleep</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>number</em>  halt time in micro seconds. (default = 100000 = 0.1 sec.)</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Delays the program execution for database locking
</pre>
</div></div><pre id="source-0607"> <var class="keywords">function</var> <var class="funcs">sleep</var>(<var class="vars">$msec</var> = 100000){
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isWin &amp;&amp; !<var class="vars">$this</var>-&gt;isPHP5) {
     <var class="funcs">sleep</var>(1);
   } <var class="keywords">else</var> {
     <var class="funcs">usleep</var>(<var class="vars">$msec</var>);
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0608"><h2>
<a name="p_function_initcorrelationprefix_608">
<var class="function">initCorrelationPrefix</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> initialize the internal correlation prefix
</pre>
</div></div><pre id="source-0608"> <var class="keywords">function</var> initCorrelationPrefix(){
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_correlationPrefix)) {
     <var class="vars">$this</var>-&gt;_correlationPrefix = <var class="keywords">null</var>;
   }
   <var class="vars">$prefix</var> = &amp; <var class="vars">$this</var>-&gt;_correlationPrefix;
   <var class="keywords">if</var> (<var class="vars">$prefix</var> == <var class="keywords">null</var> || !<var class="funcs">is_string</var>(<var class="vars">$prefix</var>)) {
     <var class="vars">$prefix</var> = <var class="vars">$this</var>-&gt;getClassName(<var class="keywords">true</var>);
   }
   <var class="keywords">unset</var>(<var class="vars">$prefix</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0609"><h2>
<a name="p_function_getpath_609">
<var class="function">getPath</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  file path of the database</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the current file path of the database
</pre>
</div></div><pre id="source-0609"> <var class="keywords">function</var> getPath(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;path;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0610"><h2>
<a name="p_function_setpath_610">
<var class="function">setPath</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  file path of the database</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Sets the file path of the database
</pre>
</div></div><pre id="source-0610"> <var class="keywords">function</var> setPath(<var class="vars">$path</var>){
   <var class="vars">$ext</var> = <var class="vars">$this</var>-&gt;toExt();
   <var class="vars">$dir</var> = <var class="funcs">dirname</var>(<var class="vars">$path</var>);
   <var class="keywords">if</var> (<var class="vars">$dir</var> != <var class="keywords">null</var>) {
     <var class="vars">$dir</var> .= <var class="strings">'/'</var>;
   }
   <var class="vars">$path</var> = <var class="vars">$dir</var> . <var class="funcs">basename</var>(<var class="vars">$path</var>, <var class="vars">$ext</var>) . <var class="vars">$ext</var>;
   <var class="vars">$this</var>-&gt;path = <var class="vars">$this</var>-&gt;fullPath(<var class="vars">$path</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0611"><h2>
<a name="p_function_getdatabasename_611">
<var class="function">getDatabaseName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  the database name</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the current database name
</pre>
</div></div><pre id="source-0611"> <var class="keywords">function</var> getDatabaseName(){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$path</var> = <var class="vars">$this</var>-&gt;getPath();
   <var class="keywords">if</var> (<var class="vars">$path</var> != <var class="keywords">null</var>) {
     <var class="vars">$ext</var> = <var class="vars">$this</var>-&gt;toExt();
     <var class="vars">$result</var> = <var class="funcs">basename</var>(<var class="vars">$path</var>, <var class="vars">$ext</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0612"><h2>
<a name="p_function_gettablenames_612">
<var class="function">getTableNames</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>mixed</em>   the tablename of the most recent result</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the tablename of the most recent result
</pre>
</div></div><pre id="source-0612"> <var class="keywords">function</var> getTableNames(){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_selectTableNames)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_selectTableNames;
   } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;tableName)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;decodeKey(<var class="vars">$this</var>-&gt;tableName);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0613"><h2>
<a name="p_function_gettablealiasnames_613">
<var class="function">getTableAliasNames</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>array</em>  the table alias of the most recent result</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the table alias of the most recent result
</pre>
</div></div><pre id="source-0613"> <var class="keywords">function</var> getTableAliasNames(){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;_selectTableAliases)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_selectTableAliases;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0614"><h2>
<a name="p_function_getcolumnaliasnames_614">
<var class="function">getColumnAliasNames</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>array</em>  the column alias of the most recent result</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the column alias of the most recent result
</pre>
</div></div><pre id="source-0614"> <var class="keywords">function</var> getColumnAliasNames(){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;_selectColumnAliases)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_selectColumnAliases;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0615"><h2>
<a name="p_function_gettablename_615">
<var class="function">getTableName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  the tablename of the most recent result</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the tablename of the most recent result
</pre>
</div></div><pre id="source-0615"> <var class="keywords">function</var> getTableName(){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;tableName)
    &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$this</var>-&gt;tableName) &amp;&amp; <var class="vars">$this</var>-&gt;tableName != <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;decodeKey(<var class="vars">$this</var>-&gt;tableName);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0616"><h2>
<a name="p_function_getlastinsertid_616">
<var class="function">getLastInsertId</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>number</em>  the value to inserted &quot;rowid&quot; or NULL</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return the &quot;rowid&quot; of the last row insert
  from this connection to the database.
</pre>
</div></div><pre id="source-0616"> <var class="keywords">function</var> getLastInsertId(){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;<var class="funcs">next</var>)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;sub(<var class="vars">$this</var>-&gt;<var class="funcs">next</var>, 1);
     <var class="keywords">if</var> (<var class="vars">$result</var> &lt; 0) {
       <var class="vars">$result</var> = <var class="strings">'0'</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0617"><h2>
<a name="p_function_gettableinfo_617">
<var class="function">getTableInfo</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name, (or null = all tables)</dd>
<dt>return</dt>
<dd><em>array</em>   the information as array, or FALSE on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Get the table definition and information
</pre>
</div></div><pre id="source-0617"> <var class="keywords">function</var> getTableInfo(<var class="vars">$table</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$infos</var> = <var class="vars">$this</var>-&gt;_getTableInfo(<var class="vars">$table</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$infos</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$infos</var>)) {
     <var class="vars">$encodekey</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$infos</var>))) {
       <var class="vars">$infos</var> = <var class="keywords">array</var>(
         <var class="vars">$encodekey</var> =&gt; <var class="vars">$infos</var>
       );
     }
     <var class="vars">$posql_key</var> = <var class="vars">$this</var>-&gt;getClassKey();
     <var class="vars">$sql_infos</var> = <var class="vars">$this</var>-&gt;getCreateDefinitionMeta(<var class="keywords">null</var>, <var class="strings">'sql'</var>);
     <var class="vars">$defaults</var> = <var class="keywords">array</var>(
       <var class="strings">'lockid'</var>   =&gt; <var class="keywords">null</var>,
       <var class="strings">'lockmode'</var> =&gt; <var class="keywords">null</var>,
       <var class="strings">'nextid'</var>   =&gt; <var class="keywords">null</var>,
       <var class="strings">'lastmod'</var>  =&gt; <var class="keywords">null</var>,
       <var class="strings">'sql'</var>      =&gt; <var class="keywords">null</var>
     );
     <var class="vars">$i</var> = 0;
     <var class="vars">$result</var> = <var class="keywords">array</var>();
     <var class="keywords">foreach</var> (<var class="vars">$infos</var> <var class="keywords">as</var> <var class="vars">$tname</var> =&gt; <var class="vars">$info</var>) {
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$info</var>)) {
         <var class="keywords">break</var>;
       }
       <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$sql_infos</var>[<var class="vars">$tname</var>])) {
         <var class="vars">$info</var>[<var class="strings">'sql'</var>] = <var class="vars">$sql_infos</var>[<var class="vars">$tname</var>];
       }
       <var class="vars">$info</var> = <var class="vars">$info</var> + <var class="vars">$defaults</var>;
       <var class="keywords">if</var> (<var class="funcs">strcasecmp</var>(<var class="vars">$tname</var>, <var class="vars">$posql_key</var>) === 0) {
         <var class="vars">$name</var> = <var class="vars">$this</var>-&gt;getDatabaseName();
         <var class="keywords">if</var> (<var class="vars">$name</var> == <var class="keywords">null</var>) {
           <var class="vars">$name</var> = <var class="vars">$tname</var>;
         }
       } <var class="keywords">else</var> {
         <var class="vars">$name</var> = <var class="vars">$this</var>-&gt;decodeKey(<var class="vars">$tname</var>);
       }
       <var class="vars">$result</var>[<var class="vars">$i</var>] = <var class="keywords">array</var>(
         <var class="strings">'name'</var> =&gt; <var class="vars">$name</var>
       );
       <var class="keywords">foreach</var> (<var class="vars">$info</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$key</var>)) {
           <var class="keywords">case</var> <var class="strings">'lockid'</var>:
               <var class="vars">$key</var> = <var class="strings">'lock_id'</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'lockmode'</var>:
               <var class="vars">$key</var> = <var class="strings">'lock_mode'</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'nextid'</var>:
               <var class="vars">$key</var> = <var class="strings">'next_id'</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'lastmod'</var>:
               <var class="vars">$key</var> = <var class="strings">'last_modified'</var>;
               <var class="vars">$val</var> = <var class="vars">$this</var>-&gt;method-&gt;now(<var class="vars">$val</var>);
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="strings">'sql'</var>:
               <var class="vars">$key</var> = <var class="strings">'sql'</var>;
               <var class="keywords">break</var>;
           <var class="keywords">default</var>:
               <var class="vars">$key</var> = <var class="keywords">null</var>;
               <var class="keywords">break</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$key</var> != <var class="keywords">null</var>) {
           <var class="vars">$result</var>[<var class="vars">$i</var>][<var class="vars">$key</var>] = <var class="vars">$val</var>;
         }
       }
       ++<var class="vars">$i</var>;
     }
     <var class="keywords">if</var> (<var class="vars">$result</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$result</var>)) {
       <var class="vars">$template</var> = <var class="keywords">array</var>(
         <var class="strings">'name'</var>,    <var class="strings">'next_id'</var>,   <var class="strings">'last_modified'</var>,
         <var class="strings">'lock_id'</var>, <var class="strings">'lock_mode'</var>, <var class="strings">'sql'</var>
       );
       <var class="vars">$this</var>-&gt;sortByTemplate(<var class="vars">$result</var>, <var class="vars">$template</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0618"><h2>
<a name="p_function__gettableinfo_618">
<var class="function">_getTableInfo</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name, (or null = all tables)</dd>
<dt>return</dt>
<dd><em>array</em>   the information as array, or FALSE on error</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Returns the information of current tables
</pre>
</div></div><pre id="source-0618"> <var class="keywords">function</var> _getTableInfo(<var class="vars">$table</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$error</var>  = <var class="keywords">false</var>;
   <var class="keywords">while</var> (<var class="vars">$this</var>-&gt;isLockExAll()
       || (<var class="vars">$table</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$this</var>-&gt;isLockEx(<var class="vars">$table</var>))) {
     <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
   }
   <var class="vars">$heads</var> = <var class="keywords">null</var>;
   <var class="vars">$infos</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockShAll()) {
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$heads</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>, <var class="keywords">true</var>);
       <var class="vars">$infos</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>, <var class="keywords">true</var>);
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
     }
     <var class="vars">$this</var>-&gt;unlockAll();
   }
   <var class="keywords">if</var> (<var class="vars">$heads</var> !== <var class="keywords">null</var> &amp;&amp; <var class="vars">$infos</var> !== <var class="keywords">null</var>) {
     <var class="vars">$modes</var> = <var class="keywords">array</var>();
     <var class="vars">$delm</var> = <var class="strings">'@'</var>;
     <var class="vars">$lock</var> = <var class="funcs">substr</var>(<var class="vars">$heads</var>, -10);
     <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$lock</var>, <var class="vars">$delm</var>) === <var class="keywords">false</var>) {
       <var class="vars">$error</var> = <var class="vars">$delm</var>;
     } <var class="keywords">else</var> {
       <var class="keywords">list</var>(<var class="vars">$mode</var>, <var class="vars">$id</var>) = <var class="funcs">explode</var>(<var class="vars">$delm</var>, <var class="vars">$lock</var>);
       <var class="vars">$modes</var>[<var class="vars">$this</var>-&gt;getClassKey()] = <var class="keywords">array</var>(
         <var class="strings">'lockid'</var>   =&gt; <var class="vars">$id</var>,
         <var class="strings">'lockmode'</var> =&gt; <var class="vars">$this</var>-&gt;assignLockMode(<var class="vars">$mode</var>)
       );
       <var class="keywords">if</var> (<var class="vars">$infos</var> != <var class="keywords">null</var>) {
         <var class="vars">$delm</var> = <var class="strings">';'</var>;
         <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$infos</var>, <var class="vars">$delm</var>) === <var class="keywords">false</var>) {
           <var class="vars">$error</var> = <var class="vars">$delm</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$split</var> = <var class="funcs">explode</var>(<var class="vars">$delm</var>, <var class="vars">$infos</var>);
           <var class="keywords">foreach</var> (<var class="vars">$split</var> <var class="keywords">as</var> <var class="vars">$tableinfo</var>) {
             <var class="vars">$tableinfo</var> = <var class="funcs">trim</var>(<var class="vars">$tableinfo</var>);
             <var class="keywords">if</var> (<var class="vars">$tableinfo</var> == <var class="keywords">null</var>) {
               <var class="keywords">continue</var>;
             }
             <var class="vars">$delm</var> = <var class="strings">':'</var>;
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$tableinfo</var>, <var class="vars">$delm</var>) === <var class="keywords">false</var>) {
               <var class="vars">$error</var> = <var class="vars">$delm</var>;
               <var class="keywords">break</var>;
             }
             <var class="keywords">list</var>(<var class="vars">$tablename</var>, <var class="vars">$info</var>) = <var class="funcs">explode</var>(<var class="vars">$delm</var>, <var class="vars">$tableinfo</var>);
             <var class="vars">$delm</var> = <var class="strings">'#'</var>;
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$info</var>, <var class="vars">$delm</var>) === <var class="keywords">false</var>) {
               <var class="vars">$error</var> = <var class="vars">$delm</var>;
               <var class="keywords">break</var>;
             }
             <var class="keywords">list</var>(<var class="vars">$lockinfo</var>, <var class="vars">$inctimes</var>) = <var class="funcs">explode</var>(<var class="vars">$delm</var>, <var class="vars">$info</var>);
             <var class="vars">$delm</var> = <var class="strings">'@'</var>;
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$lockinfo</var>, <var class="vars">$delm</var>) === <var class="keywords">false</var>) {
               <var class="vars">$error</var> = <var class="vars">$delm</var>;
               <var class="keywords">break</var>;
             }
             <var class="keywords">list</var>(<var class="vars">$mode</var>, <var class="vars">$id</var>) = <var class="funcs">explode</var>(<var class="vars">$delm</var>, <var class="vars">$lockinfo</var>);
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$inctimes</var>, <var class="vars">$delm</var>) === <var class="keywords">false</var>) {
               <var class="vars">$error</var> = <var class="vars">$delm</var>;
               <var class="keywords">break</var>;
             }
             <var class="keywords">list</var>(<var class="vars">$inc</var>, <var class="vars">$mtime</var>) = <var class="funcs">explode</var>(<var class="vars">$delm</var>, <var class="vars">$inctimes</var>);
             <var class="vars">$modes</var>[<var class="vars">$tablename</var>] = <var class="keywords">array</var>(
               <var class="strings">'lockid'</var>   =&gt; <var class="vars">$id</var>,
               <var class="strings">'lockmode'</var> =&gt; <var class="vars">$this</var>-&gt;assignLockMode(<var class="vars">$mode</var>),
               <var class="strings">'nextid'</var>   =&gt; <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$inc</var>, 0),
               <var class="strings">'lastmod'</var>  =&gt; <var class="vars">$mtime</var> - 0
             );
           }
         }
       }
     }
     <var class="keywords">if</var> (<var class="vars">$error</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Database might be broken: char(%s)'</var>, <var class="vars">$error</var>);
       <var class="vars">$result</var> = <var class="keywords">false</var>;
     } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$modes</var>)) {
       <var class="keywords">if</var> (<var class="vars">$table</var> == <var class="keywords">null</var>) {
         <var class="vars">$result</var> = <var class="vars">$modes</var>;
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$table</var>)) {
           <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
           <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$tname</var>, <var class="vars">$modes</var>)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$table</var>);
             <var class="vars">$result</var> = <var class="keywords">false</var>;
           } <var class="keywords">else</var> {
             <var class="vars">$result</var> = <var class="vars">$modes</var>[<var class="vars">$tname</var>];
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0619"><h2>
<a name="p_function_getlastmod_619">
<var class="function">getLastMod</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>return</dt>
<dd><em>int</em>     last modified time, or FALSE on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Gets the last modified time as unix timestamp from the headers of table
</pre>
</div></div><pre id="source-0619"> <var class="keywords">function</var> <var class="funcs">getLastMod</var>(<var class="vars">$table</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$info</var> = <var class="vars">$this</var>-&gt;_getTableInfo(<var class="vars">$table</var>);
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$info</var>[<var class="strings">'lastmod'</var>])) {
     <var class="vars">$result</var> = <var class="vars">$info</var>[<var class="strings">'lastmod'</var>];
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0620"><h2>
<a name="p_function_setlastmod_620">
<var class="function">setLastMod</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>return</dt>
<dd><em>boolean</em> success or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Sets the last modified time as unix timestamp into the table
</pre>
</div></div><pre id="source-0620"> <var class="keywords">function</var> setLastMod(<var class="vars">$table</var>){
   <var class="keywords">static</var> <var class="vars">$length</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$length</var> === <var class="keywords">null</var>) {
     <var class="vars">$length</var> = <var class="funcs">strlen</var>(<var class="funcs">sprintf</var>(<var class="strings">'0@%08x#%010u@'</var>, 0, 0));
   }
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">while</var> (<var class="vars">$this</var>-&gt;isLockAll()
       || (<var class="vars">$table</var> != <var class="keywords">null</var> &amp;&amp; <var class="vars">$this</var>-&gt;isLockEx(<var class="vars">$table</var>))) {
     <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
   }
   <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockExAll()) {
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
       <var class="vars">$head</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
       <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
       <var class="vars">$ltnm</var> = <var class="vars">$tname</var> . <var class="strings">':'</var>;
       <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$ltnm</var>);
       <var class="vars">$plus</var> = <var class="vars">$length</var>;
       <var class="keywords">if</var> (<var class="vars">$pos</var> === <var class="keywords">false</var>) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed in setLastMod(%s)'</var>, <var class="vars">$table</var>);
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$seekpos</var> = <var class="funcs">strlen</var>(<var class="vars">$head</var>) + <var class="vars">$pos</var> + <var class="funcs">strlen</var>(<var class="vars">$ltnm</var>) + <var class="vars">$plus</var>;
         <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$seekpos</var>);
         <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$fp</var>, <var class="funcs">sprintf</var>(<var class="strings">'%010u'</var>, <var class="funcs">time</var>()));
         <var class="vars">$result</var> = <var class="keywords">true</var>;
       }
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
     }
     <var class="vars">$this</var>-&gt;unlockAll();
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0621"><h2>
<a name="p_function_getnextid_621">
<var class="function">getNextId</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>return</dt>
<dd><em>number</em>  next sequence id, or false</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Gets the next sequence id from the table
</pre>
</div></div><pre id="source-0621"> <var class="keywords">function</var> getNextId(<var class="vars">$table</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$info</var> = <var class="vars">$this</var>-&gt;_getTableInfo(<var class="vars">$table</var>);
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$info</var>[<var class="strings">'nextid'</var>])) {
     <var class="vars">$result</var> = <var class="vars">$info</var>[<var class="strings">'nextid'</var>];
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0622"><h2>
<a name="p_function_setnextid_622">
<var class="function">setNextId</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>number</em>  next sequence id</dd>
<dt>return</dt>
<dd><em>boolean</em> success or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Sets the next sequence id into the table
</pre>
</div></div><pre id="source-0622"> <var class="keywords">function</var> setNextId(<var class="vars">$table</var>, <var class="vars">$next</var>, <var class="vars">$unlock</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">while</var> (<var class="vars">$this</var>-&gt;isLockAll() || <var class="vars">$this</var>-&gt;isLockEx(<var class="vars">$table</var>)) {
     <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
   }
   <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockExAll()) {
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
       <var class="vars">$head</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
       <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
       <var class="vars">$ltnm</var> = <var class="vars">$tname</var> . <var class="strings">':'</var>;
       <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$ltnm</var>);
       <var class="keywords">if</var> (<var class="vars">$pos</var> === <var class="keywords">false</var>) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed in setNexId(%s)'</var>, <var class="vars">$table</var>);
         <var class="vars">$result</var> = <var class="keywords">false</var>;
       } <var class="keywords">else</var> {
         <var class="vars">$seekpos</var> = <var class="funcs">strlen</var>(<var class="vars">$head</var>) + <var class="vars">$pos</var> + <var class="funcs">strlen</var>(<var class="vars">$ltnm</var>) + 10;
         <var class="funcs">fseek</var>(<var class="vars">$fp</var>, <var class="vars">$seekpos</var>);
         <var class="vars">$puts</var> = <var class="funcs">sprintf</var>(<var class="strings">'#%010.0f@%010u'</var>, <var class="vars">$next</var>, <var class="funcs">time</var>());
         <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$fp</var>, <var class="vars">$puts</var>);
         <var class="vars">$result</var> = <var class="keywords">true</var>;
       }
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
     }
     <var class="vars">$this</var>-&gt;unlockAll();
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0623"><h2>
<a name="p_function_touniqid_623">
<var class="function">toUniqId</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  input value of number</dd>
<dt>return</dt>
<dd><em>string</em>  hex number of 8 digit</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns string as the hexadecimal number of eight digit for lock key
</pre>
</div></div><pre id="source-0623"> <var class="keywords">function</var> toUniqId(<var class="vars">$id</var>){
   <var class="keywords">if</var> (<var class="vars">$id</var> == <var class="keywords">null</var> || !<var class="funcs">is_string</var>(<var class="vars">$id</var>)
    || <var class="funcs">strlen</var>(<var class="vars">$id</var>) !== 8  || !<var class="vars">$this</var>-&gt;ctype-&gt;isXdigit(<var class="vars">$id</var>)) {
     <var class="vars">$id</var> = <var class="funcs">sprintf</var>(<var class="strings">'%08x'</var>, <var class="vars">$id</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$id</var>) !== 8) {
     <var class="vars">$id</var> = <var class="funcs">str_repeat</var>(<var class="strings">'0'</var>, 8);
   }
   <var class="keywords">return</var> <var class="vars">$id</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0624"><h2>
<a name="p_function_getuniqid_624">
<var class="function">getUniqId</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  hex number of 8 digit</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns unique id as the hexadecimal number of eight digit
</pre>
</div></div><pre id="source-0624"> <var class="keywords">function</var> getUniqId(){
   <var class="vars">$id</var> = <var class="vars">$this</var>-&gt;toUniqId(<var class="funcs">crc32</var>(<var class="funcs">uniqid</var>(<var class="funcs">mt_rand</var>(), <var class="keywords">true</var>)));
   <var class="keywords">return</var> <var class="vars">$id</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0625"><h2>
<a name="p_function_getid_625">
<var class="function">getId</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the unique id of instance object
</pre>
</div></div><pre id="source-0625"> <var class="keywords">function</var> getId(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;id;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0626"><h2>
<a name="p_function_isenableid_626">
<var class="function">isEnableId</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>toUniqId, getUniqId</dd>
<dt>param</dt>
<dd><em>string</em>  the target id as string</dd>
<dt>return</dt>
<dd><em>boolean</em> whether the id was enabled</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether the id is enabled
</pre>
</div></div><pre id="source-0626"> <var class="keywords">function</var> isEnableId(<var class="vars">$id</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$id</var>) &amp;&amp; <var class="funcs">strlen</var>(<var class="vars">$id</var>) === 8 &amp;&amp; <var class="vars">$this</var>-&gt;ctype-&gt;isXdigit(<var class="vars">$id</var>)) {
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0627"><h2>
<a name="p_function_isstatementobject_627">
<var class="function">isStatementObject</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>object</em>  the target object to check</dd>
<dt>return</dt>
<dd><em>boolean</em> whether the object is instance of statement class</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Check whether the object is instance of Posql_Statement
</pre>
</div></div><pre id="source-0627"> <var class="keywords">function</var> isStatementObject(<var class="vars">$object</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_object</var>(<var class="vars">$object</var>)
    &amp;&amp; <var class="funcs">strcasecmp</var>(<var class="funcs">get_class</var>(<var class="vars">$object</var>), <var class="strings">'Posql_Statement'</var>) === 0) {
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0628"><h2>
<a name="p_function_getclass_628">
<var class="function">getClass</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em> whether the name of all lowercase or not</dd>
<dt>return</dt>
<dd><em>string</em>  class name</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns this class name
 </pre>
</div></div><pre id="source-0628"> <var class="keywords">function</var> getClass(<var class="vars">$tolower</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$class</var>;
   <var class="keywords">if</var> (!<var class="vars">$class</var>) {
     <var class="vars">$class</var> = <var class="funcs">strtolower</var>(<var class="keywords">__CLASS__</var>);
     <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$class</var>, <var class="strings">'_'</var>)) {
       <var class="vars">$class</var> = <var class="funcs">explode</var>(<var class="strings">'_'</var>, <var class="vars">$class</var>);
       <var class="vars">$class</var> = <var class="funcs">reset</var>(<var class="vars">$class</var>);
     }
     <var class="vars">$class</var> = <var class="keywords">array</var>(
       0 =&gt; @<var class="funcs">ucfirst</var>(<var class="vars">$class</var>),
       1 =&gt; <var class="vars">$class</var>
     );
   }
   <var class="vars">$key</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$tolower</var>) {
     <var class="vars">$key</var> = 1;
   }
   <var class="keywords">return</var> <var class="vars">$class</var>[<var class="vars">$key</var>];
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0629"><h2>
<a name="p_function_getclassname_629">
<var class="function">getClassName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em> whether the name of all lowercase or not</dd>
<dt>return</dt>
<dd><em>string</em>  class name</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Alias of getClass()
</pre>
</div></div><pre id="source-0629"> <var class="keywords">function</var> getClassName(<var class="vars">$tolower</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getClass(<var class="vars">$tolower</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0630"><h2>
<a name="p_function_getclasskey_630">
<var class="function">getClassKey</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  the key name of this class</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the name of this class as private fields key
 This is used for an internal process of Posql
</pre>
</div></div><pre id="source-0630"> <var class="keywords">function</var> getClassKey(){
   <var class="keywords">static</var> <var class="vars">$classkey</var>;
   <var class="keywords">if</var> (!<var class="vars">$classkey</var>) {
     <var class="vars">$classkey</var> = <var class="funcs">sprintf</var>(<var class="strings">'.%s'</var>, <var class="vars">$this</var>-&gt;getClass());
   }
   <var class="keywords">return</var> <var class="vars">$classkey</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0631"><h2>
<a name="p_function_gettransactionkey_631">
<var class="function">getTransactionKey</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  the key to use on transaction</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Generate the key to use on transaction
</pre>
</div></div><pre id="source-0631"> <var class="keywords">function</var> getTransactionKey(){
   <var class="vars">$key</var> = <var class="funcs">sprintf</var>(<var class="strings">'.trans-%s.'</var>, <var class="vars">$this</var>-&gt;id);
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$key</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0632"><h2>
<a name="p_function_getversion_632">
<var class="function">getVersion</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em> whether to get only the major version or not</dd>
<dt>return</dt>
<dd><em>string</em>  class version</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns this class version
 </pre>
</div></div><pre id="source-0632"> <var class="keywords">function</var> getVersion(<var class="vars">$major</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$versions</var>;
   <var class="keywords">if</var> (!<var class="vars">$versions</var>) {
     <var class="vars">$version</var> = <var class="strings">'2.17'</var>;
     <var class="vars">$pos</var> = <var class="funcs">strpos</var>(<var class="vars">$version</var>, <var class="strings">'.'</var>);
     <var class="keywords">if</var> (<var class="vars">$pos</var> === <var class="keywords">false</var>) {
       <var class="vars">$versions</var> = <var class="keywords">array</var>(
         0 =&gt; <var class="vars">$version</var>,
         1 =&gt; <var class="vars">$version</var>
       );
     } <var class="keywords">else</var> {
       <var class="vars">$versions</var> = <var class="keywords">array</var>(
         0 =&gt; <var class="vars">$version</var>,
         1 =&gt; <var class="funcs">substr</var>(<var class="vars">$version</var>, 0, <var class="vars">$pos</var>)
       );
     }
   }
   <var class="vars">$key</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$major</var>) {
     <var class="vars">$key</var> = 1;
   }
   <var class="keywords">return</var> <var class="vars">$versions</var>[<var class="vars">$key</var>];
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0633"><h2>
<a name="p_function_getheader_633">
<var class="function">getHeader</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  headers as string</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Returns the file headers of database.
 Includes the string valid for access directly to it
</pre>
</div></div><pre id="source-0633"> <var class="keywords">function</var> getHeader(){
   <var class="keywords">static</var> <var class="vars">$header</var>;
   <var class="keywords">if</var> (!<var class="vars">$header</var>) {
     <var class="vars">$header</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s%0.2f format&lt;'</var>
                    .  <var class="strings">'?php exit;__halt_compiler();?'</var>
                    .  <var class="strings">'&gt;#LOCK='</var>,
       <var class="vars">$this</var>-&gt;getClass(),
       <var class="vars">$this</var>-&gt;getVersion()
     );
   }
   <var class="keywords">return</var> <var class="vars">$header</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0634"><h2>
<a name="p_function_gettabledelimiters_634">
<var class="function">getTableDelimiters</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em> whether or not to get as list of array</dd>
<dt>return</dt>
<dd><em>array</em>   the table delimiters</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the table delimiters on format of Posql database
</pre>
</div></div><pre id="source-0634"> <var class="keywords">function</var> getTableDelimiters(<var class="vars">$list</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>(
     <var class="vars">$this</var>-&gt;DELIM_CACHE =&gt; 0,
     <var class="vars">$this</var>-&gt;DELIM_INDEX =&gt; 1,
     <var class="vars">$this</var>-&gt;DELIM_TABLE =&gt; 2,
     <var class="vars">$this</var>-&gt;DELIM_VIEW  =&gt; 3
   );
   <var class="keywords">if</var> (<var class="vars">$list</var>) {
     <var class="vars">$result</var> = <var class="funcs">array_flip</var>(<var class="vars">$result</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0635"><h2>
<a name="p_function_getextraaliasmessage_635">
<var class="function">getExtraAliasMessage</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  the extra alias message</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return the extra alias message for DESCRIBE command
</pre>
</div></div><pre id="source-0635"> <var class="keywords">function</var> getExtraAliasMessage(){
   <var class="keywords">return</var> <var class="strings">'alias for rowid'</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0636"><h2>
<a name="p_function_getengine_636">
<var class="function">getEngine</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>$engine</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether the name of all lowercase or all uppercase</dd>
<dt>return</dt>
<dd><em>string</em>   the operation mode of SQL Expression</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Gets the operation mode of SQL Expression as the engine
</pre>
</div></div><pre id="source-0636"> <var class="keywords">function</var> getEngine(<var class="vars">$tolower</var> = <var class="keywords">false</var>){
   <var class="vars">$engine</var> = <var class="vars">$this</var>-&gt;engine;
   <var class="keywords">if</var> (<var class="vars">$tolower</var>) {
     <var class="vars">$engine</var> = <var class="funcs">strtolower</var>(<var class="vars">$engine</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$engine</var> = <var class="funcs">strtoupper</var>(<var class="vars">$engine</var>);
   }
   <var class="keywords">return</var> <var class="vars">$engine</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0637"><h2>
<a name="p_function_setengine_637">
<var class="function">setEngine</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>$engine</dd>
<dt>param</dt>
<dd><em>string</em>   the operation mode of SQL Expression as string</dd>
<dt>return</dt>
<dd><em>string</em>   the previous operation mode, or FALSE on error</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Sets the operation mode of SQL Expression as the engine
                  supported modes are &quot;SQL&quot; or &quot;PHP&quot; now
</pre>
</div></div><pre id="source-0637"> <var class="keywords">function</var> setEngine(<var class="vars">$engine</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$engine</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'An illegal argument,'</var>
                   .  <var class="strings">' and only the string is available'</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$engine</var> = <var class="funcs">strtolower</var>(<var class="vars">$engine</var>);
     <var class="keywords">switch</var> (<var class="vars">$engine</var>) {
       <var class="keywords">case</var> <var class="strings">'sql'</var>:
            <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getEngine();
            <var class="vars">$this</var>-&gt;engine = <var class="vars">$engine</var>;
            <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'php'</var>:
            <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getEngine();
            <var class="vars">$this</var>-&gt;engine = <var class="vars">$engine</var>;
            <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'js'</var>: <var class="comments">// so enjoyable if implements in the future.</var>
       <var class="keywords">case</var> <var class="strings">'ecma'</var>:
       <var class="keywords">default</var>:
            <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported the expression engine(%s)'</var>,
                             <var class="vars">$engine</var>);
            <var class="vars">$result</var> = <var class="keywords">false</var>;
            <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0638"><h2>
<a name="p_function_setdeadlocktimeout_638">
<var class="function">setDeadLockTimeout</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>getDeadLockTimeout, $deadLockTimeout</dd>
<dt>param</dt>
<dd><em>number</em>  the value of maximal minutes</dd>
<dt>return</dt>
<dd><em>boolean</em> success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Set the value of maximal minutes as timeout for the dead lock
</pre>
</div></div><pre id="source-0638"> <var class="keywords">function</var> setDeadLockTimeout(<var class="vars">$timeout</var> = 10){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$timeout</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_numeric</var>(<var class="vars">$timeout</var>)
    &amp;&amp; <var class="vars">$timeout</var> &gt;= 1 &amp;&amp; <var class="vars">$timeout</var> &lt;= <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var>) {
     <var class="vars">$this</var>-&gt;deadLockTimeout = (<var class="keywords">int</var>) <var class="vars">$timeout</var>;
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'The deadLockTimeout should be larger than 1'</var>
                   .  <var class="strings">' in the numerical value(%s)'</var>, <var class="vars">$timeout</var>);
     <var class="vars">$result</var> = <var class="keywords">false</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0639"><h2>
<a name="p_function_setautoincrement_639">
<var class="function">setAutoIncrement</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>getAutoIncrement, $autoIncrement, $auto_increment</dd>
<dt>param</dt>
<dd><em>number</em>  the value of auto_increment</dd>
<dt>return</dt>
<dd><em>boolean</em> success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Set the value of auto_increment that will be used as &quot;rowid&quot;.
 This value should be larger than 1 in the numerical value.
</pre>
</div></div><pre id="source-0639"> <var class="keywords">function</var> setAutoIncrement(<var class="vars">$auto_increment</var> = 1){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$auto_increment</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_numeric</var>(<var class="vars">$auto_increment</var>)
    &amp;&amp; <var class="vars">$auto_increment</var> &gt;= 1 &amp;&amp; <var class="vars">$auto_increment</var> &lt;= <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var>) {
     <var class="vars">$this</var>-&gt;autoIncrement = (<var class="keywords">int</var>) <var class="vars">$auto_increment</var>;
     <var class="vars">$result</var> = <var class="keywords">true</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'The auto_increment should be larger than 1'</var>
                   .  <var class="strings">' in the numerical value(%s)'</var>, <var class="vars">$auto_increment</var>);
     <var class="vars">$result</var> = <var class="keywords">false</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0640"><h2>
<a name="p_function_setdefaultdatatype_640">
<var class="function">setDefaultDataType</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>getDefaultDataType, $defaultDataType</dd>
<dt>param</dt>
<dd><em>string</em>  the type for supplements which omitted data type</dd>
<dt>return</dt>
<dd><em>mixed</em>   it will return the old data type on success,</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Set the type for supplements which omitted data type.
 This type adjust by the &quot;CREATE TABLE&quot; and &quot;DESCRIBE&quot; commands.
                   or FALSE that settings had an error
</pre>
</div></div><pre id="source-0640"> <var class="keywords">function</var> setDefaultDataType(<var class="vars">$type</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$type</var>) &amp;&amp; <var class="funcs">strlen</var>(<var class="vars">$type</var>) &lt; <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var>) {
     <var class="vars">$type</var> = <var class="funcs">trim</var>(<var class="vars">$type</var>);
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;defaultDataType;
     <var class="vars">$this</var>-&gt;defaultDataType = <var class="vars">$type</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0641"><h2>
<a name="p_function_setext_641">
<var class="function">setExt</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>$ext, Posql_Config</dd>
<dt>param</dt>
<dd><em>string</em>  the value of the database extension</dd>
<dt>return</dt>
<dd><em>mixed</em>   it will return the old value of extension on success,</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Sets the value of the database extension
                   or FALSE that settings had an error
</pre>
</div></div><pre id="source-0641"> <var class="keywords">function</var> setExt(<var class="vars">$ext</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$ext</var> == <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;ext;
     <var class="vars">$this</var>-&gt;ext = <var class="keywords">null</var>;
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$ext</var>)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;ext;
     <var class="vars">$this</var>-&gt;ext = <var class="vars">$this</var>-&gt;toExt(<var class="vars">$ext</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$ext</var> = <var class="funcs">is_array</var>(<var class="vars">$ext</var>) ? <var class="funcs">implode</var>(<var class="strings">','</var>, <var class="vars">$ext</var>) : <var class="funcs">strval</var>(<var class="vars">$ext</var>);
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal the value of the argument as extension(%s)'</var>,
                      <var class="vars">$ext</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0642"><h2>
<a name="p_function_setmax_642">
<var class="function">setMax</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>$MAX, Posql_Config</dd>
<dt>param</dt>
<dd><em>number</em>  the value of miximum bytes</dd>
<dt>return</dt>
<dd><em>mixed</em>   it will return the old value of maximum on success,</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Sets the value of maximum bytes which handle the size of associable all
                    or FALSE that settings had an error
</pre>
</div></div><pre id="source-0642"> <var class="keywords">function</var> setMax(<var class="vars">$max</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$max</var>) &amp;&amp; <var class="vars">$max</var> &gt; 0) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var>;
     <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var> = <var class="vars">$max</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal the value of the argument as MAX(%s)'</var>, <var class="vars">$max</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0643"><h2>
<a name="p_function_setencoder_643">
<var class="function">setEncoder</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>encode(), $encoder, Posql_Config</dd>
<dt>param</dt>
<dd><em>mixed</em>   the serializing function</dd>
<dt>return</dt>
<dd><em>mixed</em>   it will return the old value of serializer on success,</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Applies the serializing function of the given argument
 The function is must able to serializing all PHP&#039;s values
                   or FALSE on error
</pre>
</div></div><pre id="source-0643"> <var class="keywords">function</var> setEncoder(<var class="vars">$encoder</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_callable</var>(<var class="vars">$encoder</var>)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;encoder;
     <var class="vars">$this</var>-&gt;encoder = <var class="vars">$encoder</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$e</var> = <var class="funcs">implode</var>(<var class="strings">'::'</var>, (<var class="keywords">array</var>) <var class="vars">$encoder</var>);
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot call the encoder function(%s)'</var>, <var class="vars">$e</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0644"><h2>
<a name="p_function_setdecoder_644">
<var class="function">setDecoder</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>decode(), $decoder, Posql_Config</dd>
<dt>param</dt>
<dd><em>mixed</em>   the unserializing function</dd>
<dt>return</dt>
<dd><em>mixed</em>   it will return the old value of unserializer on success,</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Applies the unserializing function of the given argument
 The function is must able to unserializing to PHP&#039;s value
                   or FALSE on error
</pre>
</div></div><pre id="source-0644"> <var class="keywords">function</var> setDecoder(<var class="vars">$decoder</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_callable</var>(<var class="vars">$decoder</var>)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;decoder;
     <var class="vars">$this</var>-&gt;decoder = <var class="vars">$decoder</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$e</var> = <var class="funcs">implode</var>(<var class="strings">'::'</var>, (<var class="keywords">array</var>) <var class="vars">$decoder</var>);
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot call the decoder function(%s)'</var>, <var class="vars">$e</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0645"><h2>
<a name="p_function__setregistered_645">
<var class="function">_setRegistered</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0645"> <var class="keywords">function</var> _setRegistered(<var class="vars">$registered</var>){
   <var class="vars">$this</var>-&gt;_registered = (<var class="keywords">bool</var>)<var class="vars">$registered</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0646"><h2>
<a name="p_function__getregistered_646">
<var class="function">_getRegistered</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0646"> <var class="keywords">function</var> _getRegistered(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;_registered;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0647"><h2>
<a name="p_function__setterminated_647">
<var class="function">_setTerminated</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0647"> <var class="keywords">function</var> _setTerminated(<var class="vars">$terminated</var>){
   <var class="vars">$this</var>-&gt;_terminated = (<var class="keywords">bool</var>)<var class="vars">$terminated</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0648"><h2>
<a name="p_function__getterminated_648">
<var class="function">_getTerminated</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0648"> <var class="keywords">function</var> _getTerminated(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;_terminated;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0649"><h2>
<a name="p_function__setlockedtables_649">
<var class="function">_setLockedTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0649"> <var class="keywords">function</var> _setLockedTables(<var class="vars">$tables</var>){
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tables</var>)) {
     <var class="vars">$this</var>-&gt;_lockedTables = <var class="vars">$tables</var>;
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0650"><h2>
<a name="p_function__getlockedtables_650">
<var class="function">_getLockedTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0650"> <var class="keywords">function</var> _getLockedTables(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;_lockedTables;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0651"><h2>
<a name="p_function__addmap_651">
<var class="function">_addMap</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   a record of target</dd>
<dt>return</dt>
<dd><em>array</em>   array of adjusted callback</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Using the query of INSERT that for array_map() function
</pre>
</div></div><pre id="source-0651"> <var class="keywords">function</var> _addMap(<var class="vars">$put</var>){
   <var class="vars">$add</var> = <var class="keywords">array</var>();
   <var class="vars">$increment</var> = <var class="keywords">false</var>;
   <var class="keywords">foreach</var> (<var class="vars">$this</var>-&gt;_curMeta <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">switch</var> (<var class="vars">$key</var>) {
       <var class="keywords">case</var> <var class="strings">'rowid'</var>:
       <var class="keywords">case</var> <var class="vars">$this</var>-&gt;_primaryKey:
           <var class="vars">$add</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;<var class="funcs">next</var>;
           <var class="vars">$increment</var> = <var class="keywords">true</var>;
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'ctime'</var>:
       <var class="keywords">case</var> <var class="strings">'utime'</var>:
           <var class="vars">$add</var>[<var class="vars">$key</var>] = <var class="funcs">time</var>();
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_execExpr)) {
             <var class="vars">$add</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$put</var>, <var class="vars">$key</var>, <var class="vars">$val</var>);
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$put</var>)) {
               <var class="vars">$add</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;execInsertExpr(<var class="vars">$put</var>, <var class="vars">$key</var>, <var class="vars">$val</var>);
             } <var class="keywords">else</var> {
               <var class="vars">$add</var>[<var class="vars">$key</var>] = <var class="vars">$val</var>;
             }
           }
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">if</var> (<var class="vars">$increment</var>) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;autoIncrement) {
       <var class="vars">$this</var>-&gt;<var class="funcs">next</var> = <var class="vars">$this</var>-&gt;math-&gt;add(
                       (<var class="keywords">int</var>)<var class="vars">$this</var>-&gt;autoIncrement,
                       <var class="vars">$this</var>-&gt;<var class="funcs">next</var>
       );
       <var class="comments">//XXX: warn the message</var>
       <var class="comments">// The maximum value of "rowid" is 9,999,999,999 now.</var>
       <var class="comments">// It is necessary to warn because this value exceeds</var>
       <var class="comments">//  integer of PHP.</var>
       <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$this</var>-&gt;<var class="funcs">next</var>) &gt; 10) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Over the auto increment value(%s)'</var>,
                           <var class="vars">$this</var>-&gt;<var class="funcs">next</var>);
         <var class="vars">$this</var>-&gt;<var class="funcs">next</var> = 1;
       }
     }
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;tableName . <var class="vars">$this</var>-&gt;DELIM_TABLE . <var class="vars">$this</var>-&gt;encode(<var class="vars">$add</var>)
                                                   . <var class="vars">$this</var>-&gt;NL;
   <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$result</var>) &gt; <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var>) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Over the maximum length'</var>);
     <var class="vars">$result</var> = <var class="keywords">null</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0652"><h2>
<a name="p_function__upmap_652">
<var class="function">_upMap</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   a record of target</dd>
<dt>return</dt>
<dd><em>array</em>   array of adjusted callback</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Using the query of UPDATE that for array_map() function
</pre>
</div></div><pre id="source-0652"> <var class="keywords">function</var> _upMap(<var class="vars">$row</var>){
   <var class="keywords">foreach</var> (<var class="vars">$row</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
     <var class="keywords">switch</var> (<var class="vars">$key</var>) {
       <var class="keywords">case</var> <var class="strings">'utime'</var>:
           <var class="vars">$row</var>[<var class="vars">$key</var>] = <var class="funcs">time</var>();
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_execExpr)) {
             <var class="vars">$row</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$this</var>-&gt;_curMeta, <var class="vars">$key</var>, <var class="vars">$val</var>);
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$this</var>-&gt;_curMeta)) {
               <var class="vars">$row</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;execUpdateExpr(<var class="vars">$row</var>, <var class="vars">$key</var>, <var class="vars">$val</var>);
             } <var class="keywords">else</var> {
               <var class="vars">$row</var>[<var class="vars">$key</var>] = <var class="vars">$val</var>;
             }
           }
           <var class="keywords">break</var>;
     }
   }
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;tableName . <var class="vars">$this</var>-&gt;DELIM_TABLE . <var class="vars">$this</var>-&gt;encode(<var class="vars">$row</var>)
                                                   . <var class="vars">$this</var>-&gt;NL;
   <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$result</var>) &gt; <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var>) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Over the maximum length(%.0f)'</var>, <var class="funcs">strlen</var>(<var class="vars">$result</var>));
     <var class="vars">$result</var> = <var class="keywords">null</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0653"><h2>
<a name="p_function__uprestoremap_653">
<var class="function">_upRestoreMap</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   a record of target</dd>
<dt>return</dt>
<dd><em>array</em>   array of adjusted callback</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Restores the updated records on error
 This method to used by array_map() function
</pre>
</div></div><pre id="source-0653"> <var class="keywords">function</var> _upRestoreMap(<var class="vars">$row</var>){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;tableName . <var class="vars">$this</var>-&gt;DELIM_TABLE . <var class="vars">$this</var>-&gt;encode(<var class="vars">$row</var>)
                                                   . <var class="vars">$this</var>-&gt;NL;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0654"><h2>
<a name="p_function__queryformatcallback_654">
<var class="function">_queryFormatCallback</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Callback function for queryf()
</pre>
</div></div><pre id="source-0654"> <var class="keywords">function</var> _queryFormatCallback(<var class="vars">$match</var>, <var class="vars">$set_args</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$args</var> = <var class="keywords">array</var>(), <var class="vars">$q</var> = <var class="strings">&quot;'&quot;</var>;
   <var class="keywords">if</var> (<var class="vars">$set_args</var>) {
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$match</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$match</var>))) {
       <var class="vars">$args</var> = <var class="funcs">reset</var>(<var class="vars">$match</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$args</var> = (<var class="keywords">array</var>) <var class="vars">$match</var>;
     }
     <var class="keywords">return</var>;
   }
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="vars">$length</var> = <var class="keywords">null</var>;
   <var class="vars">$quotes</var> = <var class="keywords">null</var>;
   <var class="vars">$escaped</var> = <var class="keywords">false</var>;
   <var class="vars">$recursive</var> = <var class="keywords">false</var>;
   <var class="vars">$format</var> = <var class="funcs">end</var>(<var class="vars">$match</var>);
   <var class="vars">$format_index</var> = <var class="funcs">key</var>(<var class="vars">$match</var>);
   <var class="vars">$quotes_index</var> = 1;
   <var class="vars">$length_index</var> = 3;
   <var class="funcs">reset</var>(<var class="vars">$match</var>);
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$match</var>[<var class="vars">$length_index</var>])
    &amp;&amp; <var class="funcs">is_numeric</var>(<var class="vars">$match</var>[<var class="vars">$length_index</var>])) {
     <var class="vars">$length</var> = (<var class="keywords">int</var>) <var class="vars">$match</var>[<var class="vars">$length_index</var>];
   }
   <var class="keywords">switch</var> (<var class="vars">$format</var>) {
     <var class="keywords">case</var> <var class="strings">'%'</var>:
     <var class="keywords">case</var> <var class="strings">'%%'</var>:
         <var class="vars">$result</var> = <var class="strings">'%'</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'a'</var>:
         <var class="vars">$arg</var> = <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
         <var class="keywords">switch</var> (<var class="keywords">true</var>) {
           <var class="keywords">case</var> <var class="funcs">is_int</var>(<var class="vars">$arg</var>):
           <var class="keywords">case</var> <var class="funcs">is_float</var>(<var class="vars">$arg</var>):
               <var class="vars">$match</var>[<var class="vars">$format_index</var>] = <var class="strings">'n'</var>;
               <var class="funcs">array_unshift</var>(<var class="vars">$args</var>, <var class="vars">$arg</var>);
               <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_queryFormatCallback(<var class="vars">$match</var>);
               <var class="vars">$recursive</var> = <var class="keywords">true</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="funcs">is_bool</var>(<var class="vars">$arg</var>):
               <var class="vars">$result</var> = <var class="vars">$arg</var> ? <var class="strings">'TRUE'</var> : <var class="strings">'FALSE'</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="funcs">is_string</var>(<var class="vars">$arg</var>):
               <var class="vars">$quotes</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$match</var>, <var class="vars">$quotes_index</var>);
               <var class="keywords">if</var> (<var class="vars">$quotes</var> == <var class="keywords">null</var>) {
                 <var class="vars">$match</var>[<var class="vars">$format_index</var>] = <var class="strings">'q'</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$match</var>[<var class="vars">$format_index</var>] = <var class="strings">'s'</var>;
               }
               <var class="funcs">array_unshift</var>(<var class="vars">$args</var>, <var class="vars">$arg</var>);
               <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_queryFormatCallback(<var class="vars">$match</var>);
               <var class="vars">$recursive</var> = <var class="keywords">true</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="funcs">is_null</var>(<var class="vars">$arg</var>):
               <var class="vars">$result</var> = <var class="strings">'NULL'</var>;
               <var class="keywords">break</var>;
           <var class="keywords">case</var> <var class="funcs">is_array</var>(<var class="vars">$arg</var>):
           <var class="keywords">case</var> <var class="funcs">is_object</var>(<var class="vars">$arg</var>):
           <var class="keywords">default</var>:
               <var class="vars">$error</var> = <var class="funcs">gettype</var>(<var class="vars">$arg</var>);
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Must be scaler type'</var>
                             .  <var class="strings">' on variable(%s)'</var>, <var class="vars">$error</var>);
               <var class="vars">$result</var> = <var class="strings">'NULL'</var>;
               <var class="keywords">break</var>;
         }
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'B'</var>:
         <var class="vars">$result</var> = (<var class="keywords">string</var>)<var class="funcs">array_shift</var>(<var class="vars">$args</var>);
         <var class="vars">$result</var> = <var class="vars">$q</var> . <var class="funcs">base64_encode</var>(<var class="vars">$result</var>) . <var class="vars">$q</var>;
         <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="strings">'base64_decode(%s)'</var>, <var class="vars">$result</var>);
         <var class="vars">$escaped</var> = <var class="keywords">true</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'n'</var>:
         <var class="vars">$result</var> = <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
         <var class="keywords">if</var> (!<var class="funcs">is_numeric</var>(<var class="vars">$result</var>)) {
           <var class="vars">$result</var> = <var class="strings">'0'</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;math-&gt;format(<var class="vars">$result</var>);
           <var class="keywords">if</var> (<var class="vars">$result</var> &gt;= <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var>) {
             <var class="keywords">if</var> (<var class="funcs">ord</var>(<var class="vars">$result</var>) !== <var class="funcs">ord</var>(<var class="vars">$q</var>)) {
               <var class="vars">$result</var> = <var class="vars">$q</var> . <var class="vars">$result</var> . <var class="vars">$q</var>;
             }
             <var class="vars">$quotes</var> = <var class="vars">$q</var>;
           }
         }
         <var class="vars">$escaped</var> = <var class="keywords">true</var>;
         <var class="keywords">break</var>;
     <var class="keywords">case</var> <var class="strings">'q'</var>:
         <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$quotes_index</var>, <var class="vars">$match</var>)) {
           <var class="keywords">if</var> (<var class="vars">$match</var>[<var class="vars">$quotes_index</var>] == <var class="keywords">null</var>) {
             <var class="vars">$match</var>[<var class="vars">$quotes_index</var>] = <var class="vars">$q</var>;
           }
         }
     <var class="keywords">case</var> <var class="strings">'s'</var>:
         <var class="vars">$quotes</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$match</var>, <var class="vars">$quotes_index</var>);
         <var class="vars">$result</var> = <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
         <var class="keywords">if</var> (<var class="vars">$quotes</var> == <var class="keywords">null</var>) {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;escapeString(<var class="vars">$result</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;escapeString(<var class="vars">$result</var>, <var class="vars">$quotes</var>);
         }
         <var class="vars">$escaped</var> = <var class="keywords">true</var>;
         <var class="keywords">break</var>;
     <var class="keywords">default</var>:
         <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="vars">$format</var>, <var class="funcs">array_shift</var>(<var class="vars">$args</var>));
         <var class="keywords">break</var>;
   }
   <var class="keywords">if</var> (!<var class="vars">$recursive</var>) {
     <var class="keywords">if</var> (<var class="vars">$length</var> !== <var class="keywords">null</var> &amp;&amp; <var class="funcs">strlen</var>(<var class="vars">$result</var>) &gt; <var class="vars">$length</var>) {
       <var class="vars">$marker</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$match</var>, 2);
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;truncatePad(<var class="vars">$result</var>, <var class="vars">$length</var>,
                                    <var class="vars">$marker</var>, <var class="vars">$quotes</var>, <var class="vars">$escaped</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0655"><h2>
<a name="p_function_formatquerystring_655">
<var class="function">formatQueryString</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>queryf</dd>
<dt>param</dt>
<dd><em>string</em>       the SQL statement as formatted as sprintf()</dd>
<dt>param</dt>
<dd><em>mixed</em>  (...) zero or more parameters to be passed to the function</dd>
<dt>return</dt>
<dd><em>string</em>       formatted statement as string</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Format the SQL statement based on format of sprintf().
</pre>
</div></div><pre id="source-0655"> <var class="keywords">function</var> formatQueryString(<var class="vars">$query</var>){
   <var class="keywords">static</var> <var class="vars">$opted</var> = <var class="keywords">false</var>, <var class="vars">$pattern</var> = <var class="strings">'
   {(?:
       ([\'&quot;])?
       %
       \'?(\.+|\s|(?!-)[^.\'\s%0-9aBnqs]*)
       ((?!0)[0-9]*)
       (?(1)([as])\1|([%aBnqs]))
     |
       %
       (?:[0-9]+[$]|)[+-]?
       (?:[0\s]|\'.|)-?
       (?:[0-9]*|)
       (?:\.[0-9]+|)
       [%bcdeufFosxX]
    )
   }uUx'</var>;
   <var class="keywords">if</var> (!<var class="vars">$opted</var>) {
     <var class="vars">$pattern</var> = <var class="funcs">preg_replace</var>(<var class="strings">'{\s+|x$}'</var>, <var class="strings">''</var>, <var class="vars">$pattern</var>);
     <var class="vars">$opted</var> = <var class="keywords">true</var>;
   }
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var> &gt; 1) {
     <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$args</var>))) {
       <var class="vars">$args</var> = <var class="funcs">array_shift</var>(<var class="vars">$args</var>);
     }
     <var class="vars">$this</var>-&gt;_queryFormatCallback(<var class="vars">$args</var>, <var class="keywords">true</var>);
     <var class="vars">$result</var> = <var class="funcs">preg_replace_callback</var>(<var class="vars">$pattern</var>,
                <var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'_queryFormatCallback'</var>), <var class="vars">$query</var>);
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$query</var>) &amp;&amp; <var class="funcs">is_string</var>(<var class="funcs">reset</var>(<var class="vars">$query</var>))) {
     <var class="vars">$result</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>,
                                          <var class="strings">'formatQueryString'</var>), <var class="vars">$query</var>);
   } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$query</var>)) {
     <var class="vars">$result</var> = <var class="vars">$query</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$error_type</var> = <var class="funcs">gettype</var>(<var class="vars">$query</var>);
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal types in arguments on formatQueryString(%s)'</var>,
                      <var class="vars">$error_type</var>);
     <var class="vars">$result</var> = <var class="keywords">false</var>;
   }
   <var class="comments">//debug($result, '//___formatted___//');</var>
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0656"><h2>
<a name="p_function_mergedefaults_656">
<var class="function">mergeDefaults</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>note</dt>
<dd>below are the extra columns</dd>
<dt>param</dt>
<dd><em>array</em>   an array of target</dd>
<dt>return</dt>
<dd><em>array</em>   an array which merged with extra columns</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Merges an array these always will be appended as extra columns
 ----------------------------------------------------------------------
  rowid - works like SQLite&#039;s &quot;ROWID&quot; as unique key and auto increment
  ctime - created time as unix time
  utime - updated time as unix time
 ----------------------------------------------------------------------
 </pre>
</div></div><pre id="source-0656"> <var class="keywords">function</var> mergeDefaults(<var class="vars">$array</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="vars">$time</var> = <var class="funcs">time</var>();
   <var class="vars">$defaults</var> = <var class="keywords">array</var>(
     <var class="strings">'rowid'</var> =&gt; 0,
     <var class="strings">'ctime'</var> =&gt; <var class="vars">$time</var>,
     <var class="strings">'utime'</var> =&gt; <var class="vars">$time</var>
   );
   <var class="vars">$result</var> = <var class="funcs">array_merge</var>((<var class="keywords">array</var>)<var class="vars">$array</var>, <var class="vars">$defaults</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0657"><h2>
<a name="p_function_encode_657">
<var class="function">encode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>  input values</dd>
<dt>return</dt>
<dd><em>string</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> applies serializing to the given function
 Substitute the function name for $encoder if you modify it
</pre>
</div></div><pre id="source-0657"> <var class="keywords">function</var> encode(<var class="vars">$value</var>){
   <var class="keywords">return</var> <var class="funcs">base64_encode</var>(<var class="funcs">call_user_func</var>(<var class="vars">$this</var>-&gt;encoder, <var class="vars">$value</var>));
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0658"><h2>
<a name="p_function_decode_658">
<var class="function">decode</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  input values</dd>
<dt>return</dt>
<dd><em>array</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> applies unserializing to the given function
</pre>
</div></div><pre id="source-0658"> <var class="keywords">function</var> decode(<var class="vars">$value</var>){
   <var class="keywords">return</var> <var class="funcs">call_user_func</var>(<var class="vars">$this</var>-&gt;decoder, <var class="funcs">base64_decode</var>(<var class="vars">$value</var>));
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0659"><h2>
<a name="p_function_encodekey_659">
<var class="function">encodeKey</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  input values</dd>
<dt>return</dt>
<dd><em>string</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Encodes for table name as base 64
 </pre>
</div></div><pre id="source-0659"> <var class="keywords">function</var> encodeKey(<var class="vars">$table</var>){
   <var class="keywords">return</var> <var class="funcs">base64_encode</var>(<var class="vars">$table</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0660"><h2>
<a name="p_function_decodekey_660">
<var class="function">decodeKey</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  input values</dd>
<dt>return</dt>
<dd><em>string</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Decodes for table name as base 64
 </pre>
</div></div><pre id="source-0660"> <var class="keywords">function</var> decodeKey(<var class="vars">$table</var>){
   <var class="keywords">return</var> <var class="funcs">base64_decode</var>(<var class="vars">$table</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0661"><h2>
<a name="p_function_getselectdefaultarguments_661">
<var class="function">getSelectDefaultArguments</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>Posql_Parser::parseSelectArguments, Posql::select</dd>
<dt>param</dt>
<dd><em>mixed</em>    index of target arguments</dd>
<dt>return</dt>
<dd><em>mixed</em>    default value to associate</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Returns the default value of arguments on SELECT method
</pre>
</div></div><pre id="source-0661"> <var class="keywords">function</var> getSelectDefaultArguments(<var class="vars">$index</var> = <var class="keywords">null</var>){
   <var class="keywords">static</var> <var class="vars">$args</var> = <var class="keywords">array</var>(
     <var class="strings">'from'</var>   =&gt; <var class="keywords">null</var>,
     <var class="strings">'select'</var> =&gt; <var class="strings">'*'</var>,  <var class="strings">'where'</var>  =&gt; <var class="keywords">true</var>,
     <var class="strings">'group'</var>  =&gt; <var class="keywords">null</var>, <var class="strings">'having'</var> =&gt; <var class="keywords">true</var>,
     <var class="strings">'order'</var>  =&gt; <var class="keywords">null</var>, <var class="strings">'limit'</var>  =&gt; <var class="keywords">null</var>
   );
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$index</var> === <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="vars">$args</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="funcs">is_int</var>(<var class="vars">$index</var>)) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getValue(<var class="funcs">array_values</var>(<var class="vars">$args</var>), <var class="vars">$index</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$args</var>, <var class="vars">$index</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0662"><h2>
<a name="p_function_getaggregatedefaults_662">
<var class="function">getAggregateDefaults</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em>  whether &quot;count_all&quot; is included or not</dd>
<dt>return</dt>
<dd><em>array</em>    the array which has default values</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Returns the array which has default values for aggregate functions
 </pre>
</div></div><pre id="source-0662"> <var class="keywords">function</var> getAggregateDefaults(<var class="vars">$with_count_all</var> = <var class="keywords">false</var>){
   <var class="keywords">static</var> <var class="vars">$defaults</var> = <var class="keywords">array</var>(
     <var class="strings">'avg'</var>   =&gt; <var class="keywords">null</var>,
     <var class="strings">'count'</var> =&gt; 0,
     <var class="strings">'max'</var>   =&gt; <var class="keywords">null</var>,
     <var class="strings">'min'</var>   =&gt; <var class="keywords">null</var>,
     <var class="strings">'sum'</var>   =&gt; <var class="keywords">null</var>
   );
   <var class="vars">$result</var> = <var class="vars">$defaults</var>;
   <var class="keywords">if</var> (<var class="vars">$with_count_all</var>) {
     <var class="vars">$result</var>[<var class="strings">'count_all'</var>] = 0;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0663"><h2>
<a name="p_function_getaggregateextract_663">
<var class="function">getAggregateExtract</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>boolean</em>  whether &quot;count_all&quot; is included or not</dd>
<dt>return</dt>
<dd><em>array</em>    array to generate variable with extract() function</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Returns the array to generate variable with extract() function
</pre>
</div></div><pre id="source-0663"> <var class="keywords">function</var> getAggregateExtract(<var class="vars">$with_count_all</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;getAggregateDefaults(<var class="vars">$with_count_all</var>);
   <var class="keywords">foreach</var> (<var class="vars">$aggregates</var> <var class="keywords">as</var> <var class="vars">$name</var> =&gt; <var class="vars">$val</var>) {
     <var class="vars">$result</var>[<var class="vars">$name</var>] = <var class="vars">$name</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0664"><h2>
<a name="p_function_aggregateall_664">
<var class="function">aggregateAll</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records</dd>
<dt>return</dt>
<dd><em>array</em>   array of result of all aggregate functions</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes the all aggregate functions to result rows
</pre>
</div></div><pre id="source-0664"> <var class="keywords">function</var> aggregateAll(&amp;<var class="vars">$rows</var>){
   <var class="vars">$std</var> = <var class="keywords">array</var>();
   <var class="vars">$all</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))) {
     <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
     <var class="vars">$cols</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>));
     <var class="vars">$funcs</var> = <var class="funcs">array_keys</var>(<var class="vars">$this</var>-&gt;getAggregateDefaults());
     <var class="keywords">foreach</var> (<var class="vars">$funcs</var> <var class="keywords">as</var> <var class="vars">$func</var>) {
       <var class="keywords">foreach</var> (<var class="vars">$cols</var> <var class="keywords">as</var> <var class="vars">$col</var>) {
         <var class="vars">$std</var>[<var class="vars">$func</var>][<var class="vars">$col</var>] = <var class="keywords">null</var>;
         <var class="vars">$all</var>[<var class="vars">$func</var>][<var class="vars">$col</var>] = <var class="keywords">null</var>;
       }
     }
     <var class="funcs">extract</var>(<var class="vars">$this</var>-&gt;getAggregateExtract());
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
       <var class="keywords">foreach</var> (<var class="vars">$rows</var>[<var class="vars">$i</var>] <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">if</var> (<var class="vars">$val</var> !== <var class="keywords">null</var>) {
           <var class="vars">$std</var>[<var class="vars">$count</var>][<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$std</var>[<var class="vars">$count</var>][<var class="vars">$key</var>], 1);
           <var class="keywords">if</var> (<var class="vars">$val</var> &gt; <var class="vars">$std</var>[<var class="vars">$max</var>][<var class="vars">$key</var>]) {
             <var class="vars">$std</var>[<var class="vars">$max</var>][<var class="vars">$key</var>] = <var class="vars">$val</var>;
           }
           <var class="keywords">if</var> (!<var class="vars">$i</var> || <var class="vars">$val</var> &lt; <var class="vars">$std</var>[<var class="vars">$min</var>][<var class="vars">$key</var>]) {
             <var class="vars">$std</var>[<var class="vars">$min</var>][<var class="vars">$key</var>] = <var class="vars">$val</var>;
           }
           <var class="vars">$std</var>[<var class="vars">$sum</var>][<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$std</var>[<var class="vars">$sum</var>][<var class="vars">$key</var>], <var class="vars">$val</var>);
         }
         <var class="vars">$all</var>[<var class="vars">$count</var>][<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$all</var>[<var class="vars">$count</var>][<var class="vars">$key</var>], 1);
         <var class="keywords">if</var> (<var class="vars">$val</var> &gt; <var class="vars">$all</var>[<var class="vars">$max</var>][<var class="vars">$key</var>]) {
           <var class="vars">$all</var>[<var class="vars">$max</var>][<var class="vars">$key</var>] = <var class="vars">$val</var>;
         }
         <var class="keywords">if</var> (!<var class="vars">$i</var> || <var class="vars">$val</var> &lt; <var class="vars">$all</var>[<var class="vars">$min</var>][<var class="vars">$key</var>]) {
           <var class="vars">$all</var>[<var class="vars">$min</var>][<var class="vars">$key</var>] = <var class="vars">$val</var>;
         }
         <var class="vars">$all</var>[<var class="vars">$sum</var>][<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$all</var>[<var class="vars">$sum</var>][<var class="vars">$key</var>], <var class="vars">$val</var>);
       }
     }
     <var class="keywords">foreach</var> (<var class="vars">$cols</var> <var class="keywords">as</var> <var class="vars">$col</var>) {
       <var class="vars">$std</var>[<var class="vars">$avg</var>][<var class="vars">$col</var>] = <var class="vars">$this</var>-&gt;math-&gt;div(<var class="vars">$std</var>[<var class="vars">$sum</var>][<var class="vars">$col</var>],
                                           <var class="vars">$std</var>[<var class="vars">$count</var>][<var class="vars">$col</var>],
                                           4);
       <var class="vars">$all</var>[<var class="vars">$avg</var>][<var class="vars">$col</var>] = <var class="vars">$this</var>-&gt;math-&gt;div(<var class="vars">$all</var>[<var class="vars">$sum</var>][<var class="vars">$col</var>],
                                           <var class="vars">$all</var>[<var class="vars">$count</var>][<var class="vars">$col</var>],
                                           4);
     }
   }
   <var class="vars">$result</var> = <var class="keywords">array</var>(
     <var class="strings">'std'</var> =&gt; <var class="vars">$std</var>,
     <var class="strings">'all'</var> =&gt; <var class="vars">$all</var>
   );
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0665"><h2>
<a name="p_function_aggregatebygroups_665">
<var class="function">aggregateByGroups</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records</dd>
<dt>param</dt>
<dd><em>array</em>   array with index of row which has a group</dd>
<dt>return</dt>
<dd><em>array</em>   array of result of all aggregate functions</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes all aggregate functions for the rows which has groups
</pre>
</div></div><pre id="source-0665"> <var class="keywords">function</var> aggregateByGroups(&amp;<var class="vars">$rows</var>, <var class="vars">$groups</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))) {
       <var class="vars">$agg</var> = <var class="keywords">array</var>();
       <var class="vars">$agg_defaults</var> = <var class="vars">$this</var>-&gt;getAggregateDefaults(<var class="keywords">true</var>);
       <var class="funcs">extract</var>(<var class="vars">$this</var>-&gt;getAggregateExtract(<var class="keywords">true</var>));
       <var class="vars">$rows_cols</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>));
       <var class="keywords">foreach</var> (<var class="vars">$groups</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$array</var>) {
         <var class="vars">$agg</var>[<var class="vars">$i</var>] = <var class="keywords">array</var>();
         <var class="keywords">foreach</var> (<var class="vars">$rows_cols</var> <var class="keywords">as</var> <var class="vars">$col</var>) {
           <var class="vars">$agg</var>[<var class="vars">$i</var>][<var class="vars">$col</var>] = <var class="vars">$agg_defaults</var>;
           <var class="keywords">foreach</var> (<var class="vars">$array</var> <var class="keywords">as</var> <var class="vars">$index</var>) {
             <var class="vars">$val</var> = &amp; <var class="vars">$rows</var>[<var class="vars">$index</var>][<var class="vars">$col</var>];
             <var class="vars">$agi</var> = &amp; <var class="vars">$agg</var>[<var class="vars">$i</var>][<var class="vars">$col</var>];
             <var class="keywords">if</var> (<var class="vars">$val</var> !== <var class="keywords">null</var>) {
               <var class="vars">$agi</var>[<var class="vars">$count</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$agi</var>[<var class="vars">$count</var>], 1);
               <var class="keywords">if</var> (<var class="vars">$val</var> &gt; <var class="vars">$agi</var>[<var class="vars">$max</var>]) {
                 <var class="vars">$agi</var>[<var class="vars">$max</var>] = <var class="vars">$val</var>;
               }
               <var class="keywords">if</var> (<var class="vars">$agi</var>[<var class="vars">$min</var>] === <var class="keywords">null</var>
                || <var class="vars">$agi</var>[<var class="vars">$min</var>]  &gt;  <var class="vars">$val</var>) {
                 <var class="vars">$agi</var>[<var class="vars">$min</var>] = <var class="vars">$val</var>;
               }
               <var class="vars">$agi</var>[<var class="vars">$sum</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$agi</var>[<var class="vars">$sum</var>], <var class="vars">$val</var>);
             }
             <var class="vars">$agi</var>[<var class="vars">$count_all</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$agi</var>[<var class="vars">$count_all</var>], 1);
           }
           <var class="vars">$agi</var>[<var class="vars">$avg</var>] = <var class="vars">$this</var>-&gt;math-&gt;div(<var class="vars">$agi</var>[<var class="vars">$sum</var>], <var class="vars">$agi</var>[<var class="vars">$count</var>], 4);
         }
         <var class="vars">$result</var>[] = <var class="vars">$agg</var>[<var class="vars">$i</var>];
       }
       <var class="keywords">unset</var>(<var class="vars">$val</var>, <var class="vars">$agi</var>);
     }
   }
   <var class="comments">//debug($result,"color=green:Groups;");</var>
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0666"><h2>
<a name="p_function_aggregateassignbygroups_666">
<var class="function">aggregateAssignByGroups</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records</dd>
<dt>param</dt>
<dd><em>array</em>   array which was grouped by aggregate functions</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Executes all aggregate functions for the rows which has not groups
</pre>
</div></div><pre id="source-0666"> <var class="keywords">function</var> aggregateAssignByGroups(&amp;<var class="vars">$rows</var>, &amp;<var class="vars">$groups</var>){
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$rows</var>)   &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)   &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))
      &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$groups</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$groups</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$groups</var>))) {
       <var class="vars">$agg_defaults</var> = <var class="vars">$this</var>-&gt;getAggregateDefaults(<var class="keywords">true</var>);
       <var class="funcs">extract</var>(<var class="vars">$this</var>-&gt;getAggregateExtract(<var class="keywords">true</var>));
       <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="vars">$rows_cols</var> = <var class="funcs">array_keys</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>));
       <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
         <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$groups</var>)) {
           <var class="vars">$groups</var>[<var class="vars">$i</var>] = <var class="keywords">array</var>();
           <var class="keywords">foreach</var> (<var class="vars">$rows_cols</var> <var class="keywords">as</var> <var class="vars">$col</var>) {
             <var class="vars">$groups</var>[<var class="vars">$i</var>][<var class="vars">$col</var>] = <var class="vars">$agg_defaults</var>;
             <var class="vars">$agi</var> = &amp; <var class="vars">$groups</var>[<var class="vars">$i</var>][<var class="vars">$col</var>];
             <var class="vars">$val</var> = &amp; <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$col</var>];
             <var class="keywords">if</var> (<var class="vars">$val</var> !== <var class="keywords">null</var>) {
               <var class="vars">$agi</var>[<var class="vars">$count</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$agi</var>[<var class="vars">$count</var>], 1);
               <var class="keywords">if</var> (<var class="vars">$val</var> &gt; <var class="vars">$agi</var>[<var class="vars">$max</var>]) {
                 <var class="vars">$agi</var>[<var class="vars">$max</var>] = <var class="vars">$val</var>;
               }
               <var class="keywords">if</var> (<var class="vars">$agi</var>[<var class="vars">$min</var>] === <var class="keywords">null</var>
                || <var class="vars">$agi</var>[<var class="vars">$min</var>]  &gt;  <var class="vars">$val</var>) {
                 <var class="vars">$agi</var>[<var class="vars">$min</var>] = <var class="vars">$val</var>;
               }
             }
             <var class="vars">$agi</var>[<var class="vars">$count_all</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$agi</var>[<var class="vars">$count_all</var>], 1);
             <var class="vars">$agi</var>[<var class="vars">$sum</var>] = <var class="vars">$this</var>-&gt;math-&gt;add(<var class="vars">$agi</var>[<var class="vars">$sum</var>], <var class="vars">$val</var>);
             <var class="vars">$agi</var>[<var class="vars">$avg</var>] = <var class="vars">$agi</var>[<var class="vars">$sum</var>];
           }
         }
       }
       <var class="keywords">unset</var>(<var class="vars">$val</var>, <var class="vars">$agi</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0667"><h2>
<a name="p_function_formataggregatefunction_667">
<var class="function">formatAggregateFunction</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the function name which should be parsed in</dd>
<dt>param</dt>
<dd><em>string</em>  the name of column as the argument of function</dd>
<dt>return</dt>
<dd><em>string</em>  the formatted result as string</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Format the aggregate function to correspond with result rows
</pre>
</div></div><pre id="source-0667"> <var class="keywords">function</var> formatAggregateFunction(<var class="vars">$funcname</var>, <var class="vars">$column</var>) {
   <var class="vars">$result</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s(%s)'</var>, <var class="vars">$funcname</var>, <var class="vars">$column</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0668"><h2>
<a name="p_function_groupby_668">
<var class="function">groupBy</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records as array</dd>
<dt>param</dt>
<dd><em>string</em>  the name of column which will be a group, or expression</dd>
<dt>return</dt>
<dd><em>array</em>   array of result of all aggregate functions</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Grouping function to use it by select method for each items
</pre>
</div></div><pre id="source-0668"> <var class="keywords">function</var> groupBy(&amp;<var class="vars">$rows</var>, <var class="vars">$groups</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$parsed</var> = <var class="vars">$this</var>-&gt;parseGroupBy(<var class="vars">$groups</var>);
     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="strings">'fields'</var>, <var class="vars">$parsed</var>)
      &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'is_expr'</var>, <var class="vars">$parsed</var>)) {
       <var class="vars">$group_count</var> = <var class="funcs">count</var>(<var class="vars">$parsed</var>[<var class="strings">'fields'</var>]);
       <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$parsed</var>[<var class="strings">'is_expr'</var>]) === <var class="vars">$group_count</var>) {
         <var class="keywords">if</var> (<var class="vars">$group_count</var> === 1) {
           <var class="vars">$fields</var> = <var class="funcs">array_shift</var>(<var class="vars">$parsed</var>[<var class="strings">'fields'</var>]);
           <var class="vars">$is_expr</var> = <var class="funcs">array_shift</var>(<var class="vars">$parsed</var>[<var class="strings">'is_expr'</var>]);
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_groupBy(<var class="vars">$rows</var>, <var class="vars">$fields</var>, <var class="vars">$is_expr</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_multiGroupBy(<var class="vars">$rows</var>, <var class="vars">$parsed</var>[<var class="strings">'fields'</var>],
                                                 <var class="vars">$parsed</var>[<var class="strings">'is_expr'</var>]);
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0669"><h2>
<a name="p_function__groupby_669">
<var class="function">_groupBy</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records as array</dd>
<dt>param</dt>
<dd><em>string</em>  the name of column which will be a group, or expression</dd>
<dt>param</dt>
<dd><em>boolean</em> whether the grouping value is the expression</dd>
<dt>return</dt>
<dd><em>array</em>   array of result of all aggregate functions</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Grouping function to use it by select method for one item
</pre>
</div></div><pre id="source-0669"> <var class="keywords">function</var> _groupBy(&amp;<var class="vars">$rows</var>, <var class="vars">$group_col</var>, <var class="vars">$is_expr</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$uniqs</var> = <var class="keywords">array</var>();
     <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
     <var class="keywords">if</var> (<var class="vars">$is_expr</var>) {
       <var class="vars">$group_expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$group_col</var>);
       <var class="vars">$first</var> = <var class="keywords">true</var>;
       <var class="keywords">for</var> (<var class="vars">$i</var> = <var class="vars">$row_count</var> - 1; <var class="vars">$i</var> &gt;= 0; --<var class="vars">$i</var>) {
         <var class="vars">$val</var> = <var class="keywords">null</var>;
         <var class="keywords">if</var> (<var class="vars">$first</var>) {
           <var class="vars">$val</var> = <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rows</var>[<var class="vars">$i</var>], <var class="vars">$group_expr</var>);
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
             <var class="keywords">break</var>;
           }
           <var class="vars">$first</var> = <var class="keywords">false</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$val</var> = <var class="vars">$this</var>-&gt;expr(<var class="vars">$rows</var>[<var class="vars">$i</var>], <var class="vars">$group_expr</var>);
         }
         <var class="vars">$uniqs</var>[ <var class="vars">$this</var>-&gt;hashValue(<var class="vars">$val</var>) ][] = <var class="vars">$i</var>;
       }
     } <var class="keywords">else</var> {
       <var class="vars">$group_col</var> = <var class="vars">$this</var>-&gt;replaceAliasName(<var class="vars">$group_col</var>);
       <var class="keywords">for</var> (<var class="vars">$i</var> = <var class="vars">$row_count</var> - 1; <var class="vars">$i</var> &gt;= 0; --<var class="vars">$i</var>) {
         <var class="keywords">foreach</var> (<var class="vars">$rows</var>[<var class="vars">$i</var>] <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
           <var class="keywords">if</var> (<var class="vars">$key</var> === <var class="vars">$group_col</var>) {
             <var class="vars">$uniqs</var>[ <var class="vars">$this</var>-&gt;hashValue(<var class="vars">$val</var>) ][] = <var class="vars">$i</var>;
           }
         }
         <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$uniqs</var>)) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the column(%s) on GROUP BY clause'</var>,
                            <var class="vars">$group_col</var>);
           <var class="vars">$rows</var> = <var class="keywords">array</var>();
           <var class="keywords">break</var>;
         }
       }
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_groupByResolve(<var class="vars">$rows</var>, <var class="vars">$uniqs</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0670"><h2>
<a name="p_function__multigroupby_670">
<var class="function">_multiGroupBy</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   result records as array</dd>
<dt>param</dt>
<dd><em>array</em>   column names, or expression as array</dd>
<dt>param</dt>
<dd><em>array</em>   whether the grouping value is the expression</dd>
<dt>return</dt>
<dd><em>array</em>   array of result of all aggregate functions</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Grouping function to use by SELECT for two or more items
</pre>
</div></div><pre id="source-0670"> <var class="keywords">function</var> _multiGroupBy(&amp;<var class="vars">$rows</var>, <var class="vars">$groups</var>, <var class="vars">$is_exprs</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$groups</var>) === <var class="funcs">count</var>(<var class="vars">$is_exprs</var>)) {
       <var class="vars">$firsts</var> = <var class="keywords">array</var>();
       <var class="vars">$exprs</var> = <var class="keywords">array</var>();
       <var class="keywords">foreach</var> (<var class="vars">$is_exprs</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$is_expr</var>) {
         <var class="vars">$firsts</var>[<var class="vars">$i</var>] = <var class="keywords">true</var>;
         <var class="keywords">if</var> (<var class="vars">$is_expr</var>) {
           <var class="vars">$exprs</var>[<var class="vars">$i</var>] = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$groups</var>[<var class="vars">$i</var>]);
         } <var class="keywords">else</var> {
           <var class="vars">$exprs</var>[<var class="vars">$i</var>] = <var class="keywords">null</var>;
         }
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
           <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$rows</var> = <var class="keywords">array</var>();
       } <var class="keywords">else</var> {
         <var class="vars">$uniqs</var> = <var class="keywords">array</var>();
         <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
         <var class="keywords">for</var> (<var class="vars">$i</var> = <var class="vars">$row_count</var> - 1; <var class="vars">$i</var> &gt;= 0; --<var class="vars">$i</var>) {
           <var class="vars">$hash</var> = <var class="keywords">array</var>();
           <var class="keywords">foreach</var> (<var class="vars">$groups</var> <var class="keywords">as</var> <var class="vars">$j</var> =&gt; <var class="vars">$group</var>) {
             <var class="keywords">if</var> (<var class="vars">$is_exprs</var>[<var class="vars">$j</var>]) {
               <var class="keywords">if</var> (<var class="vars">$firsts</var>[<var class="vars">$j</var>]) {
                 <var class="vars">$hash</var>[] = <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rows</var>[<var class="vars">$i</var>], <var class="vars">$exprs</var>[<var class="vars">$j</var>]);
                 <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                   <var class="keywords">break</var>;
                 }
                 <var class="vars">$firsts</var>[<var class="vars">$j</var>] = <var class="keywords">false</var>;
               } <var class="keywords">else</var> {
                 <var class="vars">$hash</var>[] = <var class="vars">$this</var>-&gt;expr(<var class="vars">$rows</var>[<var class="vars">$i</var>], <var class="vars">$exprs</var>[<var class="vars">$j</var>]);
               }
             } <var class="keywords">else</var> {
               <var class="vars">$key</var> = <var class="vars">$this</var>-&gt;findIdentifier(<var class="vars">$group</var>, <var class="vars">$rows</var>[<var class="vars">$i</var>]);
               <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$key</var>, <var class="vars">$rows</var>[<var class="vars">$i</var>])) {
                 <var class="vars">$this</var>-&gt;pushError(<var class="strings">'No such column(%s)'</var>
                               .  <var class="strings">' on GROUP BY clause'</var>, <var class="vars">$group</var>);
                 <var class="keywords">break</var>;
               }
               <var class="vars">$hash</var>[] = <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$key</var>];
             }
           }
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
             <var class="vars">$rows</var> = <var class="keywords">array</var>();
             <var class="keywords">break</var>;
           }
           <var class="vars">$uniqs</var>[ <var class="vars">$this</var>-&gt;hashValue(<var class="vars">$hash</var>) ][] = <var class="vars">$i</var>;
         }
       }
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;_groupByResolve(<var class="vars">$rows</var>, <var class="vars">$uniqs</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0671"><h2>
<a name="p_function__groupbyresolve_671">
<var class="function">_groupByResolve</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0671"> <var class="keywords">function</var> _groupByResolve(&amp;<var class="vars">$rows</var>, <var class="vars">$uniqs</var>){
   <var class="vars">$result</var> = <var class="keywords">null</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$diffs</var>  = <var class="keywords">array</var>();
     <var class="vars">$groups</var> = <var class="keywords">array</var>();
     <var class="keywords">foreach</var> (<var class="vars">$uniqs</var> <var class="keywords">as</var> <var class="vars">$hashed</var> =&gt; <var class="vars">$array</var>) {
       <var class="vars">$diffs</var>[ <var class="funcs">end</var>(<var class="vars">$array</var>) ] = 1;
       <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$array</var>) &gt; 1) {
         <var class="funcs">array_unshift</var>(<var class="vars">$groups</var>, <var class="vars">$array</var>);
         <var class="keywords">unset</var>(<var class="vars">$uniqs</var>[<var class="vars">$hashed</var>]);
       }
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$uniqs</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$groups</var>)) {
       <var class="keywords">foreach</var> (<var class="vars">$uniqs</var> <var class="keywords">as</var> <var class="vars">$hashed</var> =&gt; <var class="vars">$array</var>) {
         <var class="funcs">array_unshift</var>(<var class="vars">$groups</var>, <var class="vars">$array</var>);
         <var class="keywords">unset</var>(<var class="vars">$uniqs</var>[<var class="vars">$hashed</var>]);
       }
     }
     <var class="keywords">unset</var>(<var class="vars">$uniqs</var>);
     <var class="vars">$groups_idx</var> = <var class="vars">$groups</var>;
     <var class="vars">$groups</var> = <var class="vars">$this</var>-&gt;aggregateByGroups(<var class="vars">$rows</var>, <var class="vars">$groups_idx</var>);
     <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
       <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$i</var>, <var class="vars">$diffs</var>)) {
         <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$i</var>]);
       }
     }
     <var class="vars">$push</var> = <var class="keywords">array</var>();
     <var class="vars">$groups_count</var> = <var class="funcs">count</var>(<var class="vars">$groups_idx</var>);
     <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$groups_count</var>; <var class="vars">$i</var>++) {
       <var class="vars">$pop</var> = <var class="funcs">array_pop</var>(<var class="vars">$groups_idx</var>[<var class="vars">$i</var>]);
       <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$pop</var>, <var class="vars">$rows</var>)) {
         <var class="vars">$row</var> = <var class="vars">$rows</var>[<var class="vars">$pop</var>];
         <var class="keywords">unset</var>(<var class="vars">$rows</var>[<var class="vars">$pop</var>]);
         <var class="vars">$push</var>[] = <var class="vars">$row</var>;
       }
     }
     <var class="keywords">while</var> (<var class="vars">$row</var> = <var class="funcs">array_pop</var>(<var class="vars">$push</var>)) {
       <var class="funcs">array_unshift</var>(<var class="vars">$rows</var>, <var class="vars">$row</var>);
     }
     <var class="vars">$rows</var> = <var class="funcs">array_values</var>(<var class="vars">$rows</var>);
     <var class="vars">$this</var>-&gt;aggregateAssignByGroups(<var class="vars">$rows</var>, <var class="vars">$groups</var>);
     <var class="vars">$result</var> = <var class="vars">$groups</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0672"><h2>
<a name="p_function_orderby_672">
<var class="function">orderBy</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   the result records</dd>
<dt>param</dt>
<dd><em>mixed</em>   the value of column name,</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> The sorting function to used by SELECT command
                   ascending order of object or descending order
</pre>
</div></div><pre id="source-0672"> <var class="keywords">function</var> orderBy(&amp;<var class="vars">$rows</var>, <var class="vars">$orders</var>){
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; <var class="vars">$orders</var> != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$orders</var>) || !<var class="funcs">is_string</var>(<var class="funcs">key</var>(<var class="vars">$orders</var>))) {
       <var class="vars">$orders</var> = <var class="vars">$this</var>-&gt;parseOrderByTokens(<var class="vars">$orders</var>);
     }
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$orders</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$orders</var>) &amp;&amp; <var class="funcs">is_string</var>(<var class="funcs">key</var>(<var class="vars">$orders</var>))
      &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$rows</var>)   &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)   &amp;&amp; <var class="funcs">is_array</var>(<var class="funcs">reset</var>(<var class="vars">$rows</var>))) {
       <var class="vars">$params</var> = <var class="keywords">array</var>();
       <var class="vars">$args</var>   = <var class="keywords">array</var>();
       <var class="vars">$index</var>  = 0;
       <var class="vars">$reset</var>  = <var class="funcs">reset</var>(<var class="vars">$rows</var>);
       <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
       <var class="keywords">foreach</var> (<var class="vars">$orders</var> <var class="keywords">as</var> <var class="vars">$col</var> =&gt; <var class="vars">$sort</var>) {
         <var class="vars">$identifier</var> = <var class="vars">$this</var>-&gt;findIdentifier(<var class="vars">$col</var>, <var class="vars">$reset</var>);
         <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$identifier</var>) &amp;&amp; <var class="vars">$identifier</var> != <var class="keywords">null</var>
          &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$identifier</var>, <var class="vars">$reset</var>)) {
           <var class="vars">$col</var> = <var class="vars">$identifier</var>;
         }
         <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$col</var>)) {
           <var class="vars">$col</var> = <var class="strings">''</var>;
         }
         <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$col</var>, <var class="vars">$reset</var>)) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the column(%s)'</var>
                          . <var class="strings">' on ORDER BY clause'</var>, <var class="vars">$col</var>);
           <var class="keywords">break</var>;
         }
         <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; <var class="vars">$row_count</var>; <var class="vars">$i</var>++) {
           <var class="vars">$params</var>[<var class="vars">$col</var>][<var class="vars">$i</var>] = &amp; <var class="vars">$rows</var>[<var class="vars">$i</var>][<var class="vars">$col</var>];
         }
         <var class="vars">$args</var>[<var class="vars">$index</var>++] = &amp; <var class="vars">$params</var>[<var class="vars">$col</var>];
         <var class="vars">$args</var>[<var class="vars">$index</var>++] = <var class="vars">$sort</var>;
       }
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$args</var>[<var class="vars">$index</var>] = &amp; <var class="vars">$rows</var>;
         <var class="funcs">call_user_func_array</var>(<var class="strings">'array_multisort'</var>, <var class="vars">$args</var>);
       }
       <var class="keywords">unset</var>(<var class="vars">$args</var>, <var class="vars">$params</var>);
     }
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0673"><h2>
<a name="p_function_assignlimitoffset_673">
<var class="function">assignLimitOffset</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>    the result records</dd>
<dt>param</dt>
<dd><em>mixed</em>    the argument given as LIMIT phrase of SELECT command</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Assign the LIMIT and OFFSET phrases for the SELECT command
</pre>
</div></div><pre id="source-0673"> <var class="keywords">function</var> assignLimitOffset(&amp;<var class="vars">$rows</var>, <var class="vars">$limit</var>){
   <var class="vars">$offset</var> = <var class="strings">'offset'</var>;
   <var class="vars">$length</var> = <var class="strings">'length'</var>;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$limit</var>) || !<var class="funcs">array_key_exists</var>(<var class="vars">$offset</var>, <var class="vars">$limit</var>)) {
     <var class="vars">$limit</var> = <var class="vars">$this</var>-&gt;parseLimitTokens(<var class="vars">$limit</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$offset</var>, <var class="vars">$limit</var>)
    &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$length</var>, <var class="vars">$limit</var>)) {
     <var class="keywords">if</var> (<var class="vars">$limit</var>[<var class="vars">$length</var>] === 0) {
       <var class="vars">$rows</var> = <var class="keywords">array</var>();
     } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$limit</var>[<var class="vars">$length</var>] != <var class="keywords">null</var>) {
       <var class="vars">$rows</var> = <var class="funcs">array_slice</var>(<var class="vars">$rows</var>, <var class="vars">$limit</var>[<var class="vars">$offset</var>], <var class="vars">$limit</var>[<var class="vars">$length</var>]);
     } <var class="keywords">else</var> {
       <var class="vars">$rows</var> = <var class="funcs">array_slice</var>(<var class="vars">$rows</var>, <var class="vars">$limit</var>[<var class="vars">$offset</var>]);
     }
   } <var class="keywords">else</var> {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'illegal the value of arguments on LIMIT clause'</var>);
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0674"><h2>
<a name="p_function__emitdisablefunctions_674">
<var class="function">_emitDisableFunctions</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>private</dd>
</dl>
</div></div><pre id="source-0674"> <var class="keywords">function</var> &amp;_emitDisableFunctions(){
   <var class="keywords">return</var> <var class="vars">$this</var>-&gt;disableFuncs;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0675"><h2>
<a name="p_function_getdisablefunctions_675">
<var class="function">getDisableFunctions</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>array</em>  the list of to disable functions</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Returns the list of to disable functions as array
</pre>
</div></div><pre id="source-0675"> <var class="keywords">function</var> getDisableFunctions(){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;checkDisableFunctions();
   <var class="vars">$df</var> = <var class="vars">$this</var>-&gt;_emitDisableFunctions();
   <var class="vars">$result</var> = <var class="funcs">array_keys</var>((<var class="keywords">array</var>)<var class="vars">$df</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0676"><h2>
<a name="p_function_setdisablefunctions_676">
<var class="function">setDisableFunctions</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>  name of function to disable as array, or string</dd>
<dt>return</dt>
<dd><em>number</em> number of affected functions</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Sets the name of function to disable for using in expression
 To reset the setting, it calls by an empty argument
</pre>
</div></div><pre id="source-0676"> <var class="keywords">function</var> setDisableFunctions(<var class="vars">$func</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = 0;
   <var class="vars">$df</var> = &amp; <var class="vars">$this</var>-&gt;_emitDisableFunctions();
   <var class="vars">$argn</var> = <var class="funcs">func_num_args</var>();
   <var class="keywords">if</var> (<var class="vars">$argn</var> === 0) {
     <var class="vars">$result</var> = <var class="funcs">count</var>(<var class="vars">$df</var>);
     <var class="vars">$df</var> = <var class="keywords">array</var>();
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$argn</var> &gt; 1) {
       <var class="vars">$func</var> = <var class="funcs">func_get_args</var>();
       <var class="vars">$func</var> = <var class="vars">$this</var>-&gt;toOneArray(<var class="vars">$func</var>);
     }
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$func</var>)) {
       <var class="vars">$func</var> = (<var class="keywords">array</var>) <var class="vars">$this</var>-&gt;splitEnableName(<var class="vars">$func</var>);
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$func</var>)) {
       <var class="vars">$func</var> = <var class="funcs">array_keys</var>(<var class="vars">$func</var>);
     }
     <var class="keywords">foreach</var> ((<var class="keywords">array</var>)<var class="vars">$func</var> <var class="keywords">as</var> <var class="vars">$fn</var>) {
       <var class="vars">$fn</var> = <var class="funcs">strtolower</var>(<var class="vars">$fn</var>);
       <var class="keywords">if</var> (<var class="vars">$fn</var> != <var class="keywords">null</var> &amp;&amp; !<var class="funcs">array_key_exists</var>(<var class="vars">$fn</var>, <var class="vars">$df</var>)) {
         <var class="vars">$df</var>[<var class="vars">$fn</var>] = ++<var class="vars">$result</var>;
       }
     }
   }
   <var class="vars">$this</var>-&gt;checkDisableFunctions();
   <var class="keywords">unset</var>(<var class="vars">$df</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0677"><h2>
<a name="p_function_isdisablefunction_677">
<var class="function">isDisableFunction</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the name of function to check</dd>
<dt>return</dt>
<dd><em>boolean</em> whether the function is disabled</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Checks whether the function is disabled
</pre>
</div></div><pre id="source-0677"> <var class="keywords">function</var> isDisableFunction(<var class="vars">$func_name</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$func_name</var>)) {
     <var class="vars">$df</var> = <var class="vars">$this</var>-&gt;_emitDisableFunctions();
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$df</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$df</var>)
      &amp;&amp; (<var class="keywords">isset</var>(<var class="vars">$df</var>[<var class="vars">$func_name</var>]) || <var class="funcs">array_key_exists</var>(<var class="vars">$func_name</var>, <var class="vars">$df</var>))) {
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     }
     <var class="keywords">unset</var>(<var class="vars">$df</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0678"><h2>
<a name="p_function_checkdisablefunctions_678">
<var class="function">checkDisableFunctions</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Normalizes to the format to which the disabled functions are effective
</pre>
</div></div><pre id="source-0678"> <var class="keywords">function</var> checkDisableFunctions(){
   <var class="vars">$df</var> = &amp; <var class="vars">$this</var>-&gt;_emitDisableFunctions();
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$df</var>)) {
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$df</var>)) {
       <var class="vars">$df</var> = (<var class="keywords">array</var>) <var class="vars">$this</var>-&gt;splitEnableName(<var class="vars">$df</var>);
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$df</var>)) {
       <var class="vars">$df</var> = <var class="vars">$this</var>-&gt;flipArray(<var class="vars">$df</var>);
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$df</var>);
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0679"><h2>
<a name="p_class_posql_cache_679">
<var class="class">Posql_Cache</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 This class handles the query cache
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Cache</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0680"><h2>
<a name="p_function_getquerycachetablename_680">
<var class="function">getQueryCacheTableName</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>string</em>  the table name of query cache</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Gets table name which used for queries cache
</pre>
</div></div><pre id="source-0680"> <var class="keywords">function</var> getQueryCacheTableName(){
   <var class="keywords">static</var> <var class="vars">$table_name</var> = <var class="strings">'_posql_query_cache'</var>;
   <var class="keywords">return</var> <var class="vars">$table_name</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0681"><h2>
<a name="p_function_applyquerycache_681">
<var class="function">applyQueryCache</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>string</em>  query</dd>
<dt>return</dt>
<dd><em>mixed</em>   the result-rows from the cache table, or FALSE on failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Applies the query cache with specified statement
</pre>
</div></div><pre id="source-0681"> <var class="keywords">function</var> applyQueryCache(<var class="vars">$table</var>, <var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;useQueryCache) {
     <var class="vars">$is_manip</var> = <var class="vars">$this</var>-&gt;isManip(<var class="vars">$query</var>);
     <var class="keywords">if</var> (<var class="vars">$is_manip</var>) {
       <var class="vars">$this</var>-&gt;useQueryCache = <var class="keywords">false</var>;
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;query(<var class="vars">$query</var>);
       <var class="vars">$this</var>-&gt;useQueryCache = <var class="keywords">true</var>;
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;loadQueryCache(<var class="vars">$table</var>, <var class="vars">$query</var>, <var class="keywords">null</var>, <var class="keywords">true</var>);
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$result</var>)) {
         <var class="vars">$this</var>-&gt;useQueryCache = <var class="keywords">false</var>;
         <var class="vars">$stmt</var> = <var class="vars">$this</var>-&gt;query(<var class="vars">$query</var>);
         <var class="vars">$this</var>-&gt;useQueryCache = <var class="keywords">true</var>;
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;toArrayResult(<var class="vars">$stmt</var>);
         <var class="vars">$stmt</var> = <var class="keywords">null</var>;
         <var class="keywords">unset</var>(<var class="vars">$stmt</var>);
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isFunctionInStatement(<var class="vars">$query</var>)) {
           <var class="vars">$count</var> = <var class="vars">$this</var>-&gt;countQueryCache(<var class="vars">$table</var>, <var class="vars">$query</var>, <var class="keywords">true</var>);
           <var class="keywords">if</var> (<var class="funcs">is_numeric</var>(<var class="vars">$count</var>) &amp;&amp; <var class="vars">$count</var> &gt;= <var class="vars">$this</var>-&gt;queryCacheMaxRows) {
             <var class="vars">$caches</var> = <var class="vars">$this</var>-&gt;loadQueryCache(<var class="vars">$table</var>, <var class="vars">$query</var>, <var class="keywords">true</var>);
             <var class="vars">$this</var>-&gt;orderBy(<var class="vars">$caches</var>, <var class="strings">'time, rows'</var>);
             <var class="vars">$i</var> = 0;
             <var class="keywords">while</var> (<var class="vars">$count</var> &gt;= <var class="vars">$this</var>-&gt;queryCacheMaxRows) {
               <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$caches</var>[<var class="vars">$i</var>], <var class="vars">$caches</var>[<var class="vars">$i</var>][<var class="strings">'query'</var>])) {
                 <var class="vars">$this</var>-&gt;removeQueryCache(<var class="vars">$caches</var>[<var class="vars">$i</var>][<var class="strings">'query'</var>], <var class="keywords">null</var>, 1);
               } <var class="keywords">else</var> {
                 <var class="vars">$this</var>-&gt;removeQueryCache(<var class="keywords">null</var>, <var class="keywords">true</var>, 1);
               }
               <var class="vars">$i</var>++;
               <var class="vars">$count</var>--;
             }
           }
           <var class="keywords">if</var> (<var class="vars">$count</var> &gt;= 1) {
             <var class="vars">$this</var>-&gt;removeQueryCache(<var class="vars">$query</var>, <var class="keywords">null</var>, 1);
           }
           <var class="vars">$this</var>-&gt;saveQueryCache(<var class="vars">$table</var>, <var class="vars">$query</var>, <var class="vars">$result</var>);
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0682"><h2>
<a name="p_function_clearquerycache_682">
<var class="function">clearQueryCache</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>number</em>  number of affected rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Clears all query caches from database
</pre>
</div></div><pre id="source-0682"> <var class="keywords">function</var> clearQueryCache(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;removeQueryCache(<var class="keywords">null</var>, <var class="keywords">true</var>, -1);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0683"><h2>
<a name="p_function__validquerycacheexpr_683">
<var class="function">_validQueryCacheExpr</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   query</dd>
<dt>param</dt>
<dd><em>string</em>   table name</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether or not the expression is simple comparing</dd>
<dt>return</dt>
<dd><em>string</em>   valid expression</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Validates the specified expression for the query cache
</pre>
</div></div><pre id="source-0683"> <var class="keywords">function</var> _validQueryCacheExpr(<var class="vars">$query</var>, <var class="vars">$table</var>, <var class="vars">$compare_only</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="strings">''</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;useQueryCache) {
     <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>));
     <var class="keywords">if</var> (<var class="vars">$compare_only</var>) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;formatQueryString(<var class="strings">'$%s===%a'</var>,
         <var class="strings">'query'</var>, <var class="vars">$query</var>
       );
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;formatQueryString(<var class="strings">'$%s===%a&amp;&amp;$%s&gt;%a'</var>,
         <var class="strings">'query'</var>, <var class="vars">$query</var>,
         <var class="strings">'time'</var>, <var class="vars">$this</var>-&gt;<var class="funcs">getLastMod</var>(<var class="vars">$table</var>)
       );
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0684"><h2>
<a name="p_function_removequerycache_684">
<var class="function">removeQueryCache</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  query</dd>
<dt>param</dt>
<dd><em>string</em>  expression</dd>
<dt>param</dt>
<dd><em>number</em>  deleted limit value</dd>
<dt>return</dt>
<dd><em>number</em>  number of affected rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Removes the records for the query cache by specified expression
</pre>
</div></div><pre id="source-0684"> <var class="keywords">function</var> removeQueryCache(<var class="vars">$query</var>, <var class="vars">$expr</var> = <var class="keywords">null</var>, <var class="vars">$limit</var> = -1){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$table</var> = <var class="vars">$this</var>-&gt;getQueryCacheTableName();
     <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
     <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">null</var>) {
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;_validQueryCacheExpr(<var class="vars">$query</var>, <var class="keywords">null</var>, <var class="keywords">true</var>);
     }
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockExAll()) {
       <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
         <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 2);
         <var class="keywords">if</var> (<var class="vars">$up</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
           <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$up</var>, 2);
           <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_CACHE;
           <var class="vars">$first</var> = <var class="keywords">true</var>;
           <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
             <var class="vars">$remove</var> = <var class="keywords">false</var>;
             <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
               <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
               <var class="keywords">if</var> (<var class="vars">$key</var> === <var class="vars">$tname</var>) {
                 <var class="vars">$rec</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
                 <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rec</var>)) {
                   <var class="keywords">if</var> (<var class="vars">$first</var>) {
                     <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">true</var> || <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="vars">$remove</var> = <var class="keywords">true</var>;
                     }
                     <var class="vars">$first</var> = <var class="keywords">false</var>;
                   } <var class="keywords">else</var> {
                     <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">true</var> || <var class="vars">$this</var>-&gt;expr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="vars">$remove</var> = <var class="keywords">true</var>;
                     }
                   }
                 }
               }
             }
             <var class="keywords">if</var> (<var class="vars">$remove</var>) {
               <var class="vars">$line</var> = <var class="funcs">str_repeat</var>(<var class="strings">' '</var>, <var class="funcs">strlen</var>(<var class="funcs">trim</var>(<var class="vars">$line</var>))) . <var class="vars">$this</var>-&gt;NL;
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$up</var>, <var class="vars">$line</var>)) {
                 <var class="vars">$result</var>++;
                 <var class="keywords">if</var> (<var class="vars">$limit</var> &gt;= 1 &amp;&amp; <var class="vars">$result</var> &gt;= <var class="vars">$limit</var>) {
                   <var class="keywords">break</var>;
                 }
               }
             } <var class="keywords">else</var> {
               <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$up</var>);
             }
           }
           <var class="funcs">fclose</var>(<var class="vars">$up</var>);
         }
         <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       }
       <var class="vars">$this</var>-&gt;unlockAll();
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0685"><h2>
<a name="p_function_savequerycache_685">
<var class="function">saveQueryCache</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>string</em>  query</dd>
<dt>param</dt>
<dd><em>array</em>   a new result-set</dd>
<dt>return</dt>
<dd><em>number</em>  number of affected rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Insert a new result-set for the query cache
</pre>
</div></div><pre id="source-0685"> <var class="keywords">function</var> saveQueryCache(<var class="vars">$table</var>, <var class="vars">$query</var>, <var class="vars">$rows</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;useQueryCache) {
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$cache_table_name</var> = <var class="vars">$this</var>-&gt;getQueryCacheTableName();
       <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$cache_table_name</var>);
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockExAll()) {
         <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'a'</var>)) {
           <var class="vars">$row</var> = <var class="keywords">array</var>(
             <var class="strings">'time'</var>  =&gt; <var class="funcs">time</var>(),
             <var class="strings">'query'</var> =&gt; <var class="vars">$this</var>-&gt;joinWords(<var class="vars">$this</var>-&gt;splitSyntax(<var class="vars">$query</var>)),
             <var class="strings">'rows'</var>  =&gt; <var class="vars">$this</var>-&gt;encode(<var class="vars">$rows</var>)
           );
           <var class="vars">$puts</var> = <var class="vars">$tname</var> . <var class="vars">$this</var>-&gt;DELIM_CACHE . <var class="vars">$this</var>-&gt;encode(<var class="vars">$row</var>)
                                               . <var class="vars">$this</var>-&gt;NL;
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$fp</var>, <var class="vars">$puts</var>)) {
             <var class="vars">$result</var>++;
           }
           <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
           <var class="keywords">unset</var>(<var class="vars">$row</var>, <var class="vars">$puts</var>);
         }
         <var class="keywords">unset</var>(<var class="vars">$rows</var>);
         <var class="vars">$this</var>-&gt;unlockAll();
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0686"><h2>
<a name="p_function_countquerycache_686">
<var class="function">countQueryCache</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   table name</dd>
<dt>param</dt>
<dd><em>string</em>   query</dd>
<dt>return</dt>
<dd><em>number</em>   row count of specified expression</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Count the row numbers for the query cache tables
</pre>
</div></div><pre id="source-0686"> <var class="keywords">function</var> countQueryCache(<var class="vars">$table</var>, <var class="vars">$query</var>, <var class="vars">$expr</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;useQueryCache) {
     <var class="vars">$cache_table_name</var> = <var class="vars">$this</var>-&gt;getQueryCacheTableName();
     <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$cache_table_name</var>);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">null</var>) {
         <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;_validQueryCacheExpr(<var class="vars">$query</var>, <var class="vars">$table</var>);
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockShAll()) {
         <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
           <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 3);
           <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_CACHE;
           <var class="vars">$first</var> = <var class="keywords">true</var>;
           <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
             <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
               <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
               <var class="keywords">if</var> (<var class="vars">$key</var> === <var class="vars">$tname</var>) {
                 <var class="vars">$rec</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
                 <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rec</var>)) {
                   <var class="keywords">if</var> (<var class="vars">$first</var>) {
                     <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">true</var> || <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="vars">$result</var>++;
                     }
                     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                       <var class="vars">$result</var> = 0;
                       <var class="keywords">break</var>;
                     }
                     <var class="vars">$first</var> = <var class="keywords">false</var>;
                   } <var class="keywords">else</var> {
                     <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">true</var> || <var class="vars">$this</var>-&gt;expr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="vars">$result</var>++;
                     }
                   }
                 }
               }
             }
           }
           <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
         }
         <var class="vars">$this</var>-&gt;unlockAll();
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0687"><h2>
<a name="p_function_loadquerycache_687">
<var class="function">loadQueryCache</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   table name</dd>
<dt>param</dt>
<dd><em>string</em>   query</dd>
<dt>param</dt>
<dd><em>string</em>   expression</dd>
<dt>param</dt>
<dd><em>boolean</em>  whether or not to get only rows</dd>
<dt>return</dt>
<dd><em>array</em>    result-set which passed condition</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Load the row from the query cache tables by the condition specification
</pre>
</div></div><pre id="source-0687"> <var class="keywords">function</var> loadQueryCache(<var class="vars">$table</var>, <var class="vars">$query</var>, <var class="vars">$expr</var> = <var class="keywords">null</var>, <var class="vars">$rows_only</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;useQueryCache) {
     <var class="vars">$cache_table_name</var> = <var class="vars">$this</var>-&gt;getQueryCacheTableName();
     <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$cache_table_name</var>);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">null</var>) {
         <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;_validQueryCacheExpr(<var class="vars">$query</var>, <var class="vars">$table</var>);
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockShAll()) {
         <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
           <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 3);
           <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_CACHE;
           <var class="vars">$rows_key</var> = <var class="strings">'rows'</var>;
           <var class="vars">$first</var> = <var class="keywords">true</var>;
           <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
             <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
               <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
               <var class="keywords">if</var> (<var class="vars">$key</var> === <var class="vars">$tname</var>) {
                 <var class="vars">$rec</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
                 <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rec</var>)) {
                   <var class="keywords">if</var> (<var class="vars">$first</var>) {
                     <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">true</var> || <var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$rows_key</var>, <var class="vars">$rec</var>)) {
                         <var class="keywords">if</var> (<var class="vars">$rows_only</var>) {
                           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$rec</var>[<var class="vars">$rows_key</var>]);
                           <var class="keywords">break</var>;
                         } <var class="keywords">else</var> {
                           <var class="vars">$rec</var>[<var class="vars">$rows_key</var>] = <var class="funcs">strlen</var>(<var class="vars">$rec</var>[<var class="vars">$rows_key</var>]);
                           <var class="vars">$result</var>[] = <var class="vars">$rec</var>;
                         }
                       }
                     }
                     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                       <var class="vars">$result</var> = <var class="keywords">array</var>();
                       <var class="keywords">break</var>;
                     }
                     <var class="vars">$first</var> = <var class="keywords">false</var>;
                   } <var class="keywords">else</var> {
                     <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">true</var> || <var class="vars">$this</var>-&gt;expr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$rows_key</var>, <var class="vars">$rec</var>)) {
                         <var class="keywords">if</var> (<var class="vars">$rows_only</var>) {
                           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$rec</var>[<var class="vars">$rows_key</var>]);
                           <var class="keywords">break</var>;
                         } <var class="keywords">else</var> {
                           <var class="vars">$rec</var>[<var class="vars">$rows_key</var>] = <var class="funcs">strlen</var>(<var class="vars">$rec</var>[<var class="vars">$rows_key</var>]);
                           <var class="vars">$result</var>[] = <var class="vars">$rec</var>;
                         }
                       }
                     }
                   }
                 }
               }
             }
           }
           <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
         }
         <var class="vars">$this</var>-&gt;unlockAll();
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0688"><h2>
<a name="p_class_posql_scan_688">
<var class="class">Posql_Scan</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 The base class to scan the tables and optimize statement
</pre>
<dl>
<dt>name</dt>
<dd>Posql_Scan</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0689"><h2>
<a name="p_function_applyoptimizeexplan_689">
<var class="function">applyOptimizeExplan</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>array</em>   parsed select arguments</dd>
<dt>return</dt>
<dd><em>array</em>   result-set</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Applies the optimized explan for table scanning
</pre>
</div></div><pre id="source-0689"> <var class="keywords">function</var> applyOptimizeExplan(<var class="vars">$args</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid arguments on SELECT(%s)'</var>, <var class="vars">$args</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$defaults</var> = <var class="vars">$this</var>-&gt;getSelectDefaultArguments();
       <var class="keywords">foreach</var> (<var class="vars">$defaults</var> <var class="keywords">as</var> <var class="vars">$clause</var> =&gt; <var class="vars">$val</var>) {
         <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$clause</var>, <var class="vars">$args</var>)) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid arguments on SELECT(%s)'</var>, <var class="vars">$clause</var>);
         }
       }
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$table_name</var> = <var class="funcs">reset</var>(<var class="vars">$args</var>);
         <var class="vars">$columns</var>    = <var class="funcs">next</var>(<var class="vars">$args</var>);
         <var class="vars">$expr</var>       = <var class="funcs">next</var>(<var class="vars">$args</var>);
         <var class="vars">$group</var>      = <var class="funcs">next</var>(<var class="vars">$args</var>);
         <var class="vars">$having</var>     = <var class="funcs">next</var>(<var class="vars">$args</var>);
         <var class="vars">$order</var>      = <var class="funcs">next</var>(<var class="vars">$args</var>);
         <var class="vars">$limit</var>      = <var class="funcs">end</var>(<var class="vars">$args</var>);
         <var class="vars">$this</var>-&gt;_getMetaAll = <var class="keywords">true</var>;
         <var class="vars">$this</var>-&gt;getMeta(<var class="vars">$table_name</var>);
         <var class="vars">$this</var>-&gt;_getMetaAll = <var class="keywords">null</var>;
         <var class="vars">$posql_key</var> = <var class="vars">$this</var>-&gt;getClassKey();
         <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;meta)
          &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="vars">$posql_key</var>, <var class="vars">$this</var>-&gt;meta)) {
           <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>]);
         }
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isSimpleLimitOnce(<var class="vars">$args</var>)) {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;scanFullTablesOnce(<var class="vars">$table_name</var>, <var class="vars">$expr</var>);
           } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isSimplePrimaryKeySpecify(<var class="vars">$args</var>)) {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;scanFullTablesOnce(<var class="vars">$table_name</var>, <var class="vars">$expr</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;scanFullTables(<var class="vars">$table_name</var>, <var class="vars">$expr</var>);
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0690"><h2>
<a name="p_function_scanfulltables_690">
<var class="function">scanFullTables</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>mixed</em>   expression as WHERE clause</dd>
<dt>return</dt>
<dd><em>array</em>   result-set</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Scan all tables (TABLE ACCESS FULL)
</pre>
</div></div><pre id="source-0690"> <var class="keywords">function</var> scanFullTables(<var class="vars">$table_name</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_bool</var>(<var class="vars">$expr</var>)) {
     <var class="vars">$valid_expr</var> = <var class="vars">$expr</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$valid_expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$expr</var>);
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$table_key</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table_name</var>);
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 3);
       <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
       <var class="vars">$first</var> = <var class="keywords">true</var>;
       <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
         <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
         <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
           <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
           <var class="keywords">if</var> (<var class="vars">$key</var> === <var class="vars">$table_key</var>) {
             <var class="vars">$rec</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
             <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rec</var>)) {
               <var class="keywords">if</var> (<var class="vars">$valid_expr</var> === <var class="keywords">true</var>) {
                 <var class="vars">$result</var>[] = <var class="vars">$rec</var>;
               } <var class="keywords">else</var> {
                 <var class="keywords">if</var> (<var class="vars">$first</var>) {
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rec</var>, <var class="vars">$valid_expr</var>)) {
                     <var class="vars">$result</var>[] = <var class="vars">$rec</var>;
                   }
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                     <var class="vars">$result</var> = <var class="keywords">array</var>();
                     <var class="keywords">break</var>;
                   }
                   <var class="vars">$first</var> = <var class="keywords">false</var>;
                 } <var class="keywords">else</var> {
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;expr(<var class="vars">$rec</var>, <var class="vars">$valid_expr</var>)) {
                     <var class="vars">$result</var>[] = <var class="vars">$rec</var>;
                   }
                 }
               }
             }
           }
         }
       }
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0691"><h2>
<a name="p_function_scanfulltablesonce_691">
<var class="function">scanFullTablesOnce</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>mixed</em>   expression as WHERE clause</dd>
<dt>return</dt>
<dd><em>array</em>   result-set</dd>
<dt>access</dt>
<dd>private</dd>
</dl>
<pre class="desc"> Scan all tables (TABLE ACCESS FULL) once
</pre>
</div></div><pre id="source-0691"> <var class="keywords">function</var> scanFullTablesOnce(<var class="vars">$table_name</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_bool</var>(<var class="vars">$expr</var>)) {
     <var class="vars">$valid_expr</var> = <var class="vars">$expr</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$valid_expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$expr</var>);
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$table_key</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table_name</var>);
     <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 3);
       <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
       <var class="vars">$first</var> = <var class="keywords">true</var>;
       <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
         <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
         <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
           <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
           <var class="keywords">if</var> (<var class="vars">$key</var> === <var class="vars">$table_key</var>) {
             <var class="vars">$rec</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
             <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rec</var>)) {
               <var class="keywords">if</var> (<var class="vars">$valid_expr</var> === <var class="keywords">true</var>) {
                 <var class="vars">$result</var>[] = <var class="vars">$rec</var>;
                 <var class="keywords">break</var>;
               } <var class="keywords">else</var> {
                 <var class="keywords">if</var> (<var class="vars">$first</var>) {
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rec</var>, <var class="vars">$valid_expr</var>)) {
                     <var class="vars">$result</var>[] = <var class="vars">$rec</var>;
                     <var class="keywords">break</var>;
                   }
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                     <var class="vars">$result</var> = <var class="keywords">array</var>();
                     <var class="keywords">break</var>;
                   }
                   <var class="vars">$first</var> = <var class="keywords">false</var>;
                 } <var class="keywords">else</var> {
                   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;expr(<var class="vars">$rec</var>, <var class="vars">$valid_expr</var>)) {
                     <var class="vars">$result</var>[] = <var class="vars">$rec</var>;
                     <var class="keywords">break</var>;
                   }
                 }
               }
             }
           }
         }
       }
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0692"><h2>
<a name="p_class_posql_692">
<var class="class">Posql</var>
</a>
</h2><div class="class"><div>
<pre class="desc">
 Posql:
   The tiny text-base database engine (DBMS) written by pure PHP
   that does not need any additional extension library,
   it is designed compatible with SQL-92,
   and only uses all-in-one file as database.
 Supports the basic SQL-92 and SQL-99 syntax.
 It is concluded by all one file as one database.
 The database logic design does not use the file quite temporarily.
 This database is inherited class from the MiniPod.
 PHP versions 4 and 5
</pre>
<dl>
<dt>name</dt>
<dd>Posql</dd>
<dt>package</dt>
<dd>Posql</dd>
<dt>author</dt>
<dd>polygon planet </dd>
<dt>link</dt>
<dd><a href="http://sourceforge.jp/projects/posql/" target="_blank" title="open in blanks window">http://sourceforge.jp/projects/posql/</a></dd>
<dt>link</dt>
<dd><a href="http://sourceforge.net/projects/posql/" target="_blank" title="open in blanks window">http://sourceforge.net/projects/posql/</a></dd>
<dt>license</dt>
<dd>Dual licensed under the MIT and GPL licenses</dd>
<dt>copyright</dt>
<dd>Copyright (c) 2010 polygon planet</dd>
<dt>version</dt>
<dd>$Id: posql.php,v 2.17 2010/03/28 23:11:38 polygon Exp $</dd>
</dl>
</div></div><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0693"><h2>
<a name="p_function_posql_693">
<var class="function">Posql</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  filename as database</dd>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>array</em>   regulated value of field as an array</dd>
<dt>return</dt>
<dd><em>void</em></dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> constructor
</pre>
</div></div><pre id="source-0693"> <var class="keywords">function</var> Posql(<var class="vars">$path</var> = <var class="keywords">null</var>, <var class="vars">$table</var> = <var class="keywords">null</var>, <var class="vars">$fields</var> = <var class="keywords">array</var>()){
   <var class="vars">$this</var>-&gt;init(<var class="vars">$path</var>);
   <var class="keywords">if</var> (<var class="funcs">func_num_args</var>()) {
     <var class="vars">$this</var>-&gt;open(<var class="vars">$path</var>, <var class="vars">$table</var>, <var class="vars">$fields</var>);
   }
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0694"><h2>
<a name="p_function___destruct_694">
<var class="function">__destruct</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Destructor for PHP Version 5+
</pre>
</div></div><pre id="source-0694"> <var class="keywords">function</var> <var class="keywords">__destruct</var>(){
   <var class="vars">$this</var>-&gt;terminate();
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0695"><h2>
<a name="p_function_open_695">
<var class="function">open</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  file path of database</dd>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>array</em>   regulated value of field as an array</dd>
<dt>return</dt>
<dd><em>boolean</em> success or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Opens the database as a file
 To switched for calling createTable() and createDatabase() by the arguments
</pre>
</div></div><pre id="source-0695"> <var class="keywords">function</var> open(<var class="vars">$path</var>, <var class="vars">$table</var> = <var class="keywords">null</var>, <var class="vars">$fields</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;setPath(<var class="vars">$path</var>);
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;canLockDatabase()) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot open and lock database(%s)'</var>, <var class="vars">$path</var>);
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (!@<var class="funcs">is_file</var>(<var class="vars">$this</var>-&gt;path)) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;createDatabase(<var class="vars">$this</var>-&gt;path);
     } <var class="keywords">else</var> {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;isDatabase();
     }
     <var class="keywords">if</var> (<var class="vars">$result</var> &amp;&amp; <var class="vars">$table</var> &amp;&amp; <var class="vars">$fields</var>) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;createTable(<var class="vars">$table</var>, <var class="vars">$fields</var>);
       <var class="keywords">if</var> (!<var class="vars">$result</var> &amp;&amp; !<var class="vars">$this</var>-&gt;hasError()) {
         <var class="vars">$result</var> = <var class="keywords">true</var>;
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$result</var>) {
     <var class="vars">$this</var>-&gt;init();
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0696"><h2>
<a name="p_function_createdatabase_696">
<var class="function">createDatabase</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  filename of database</dd>
<dt>param</dt>
<dd><em>number</em>  file permission (default = 0666)</dd>
<dt>return</dt>
<dd><em>boolean</em> success or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Creates database as one file
</pre>
</div></div><pre id="source-0696"> <var class="keywords">function</var> createDatabase(<var class="vars">$path</var>, <var class="vars">$perms</var> = 0666){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$warn_error</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_ifExistsClause !== <var class="strings">'if_not_exists'</var>) {
     <var class="vars">$warn_error</var> = <var class="keywords">true</var>;
   }
   <var class="vars">$this</var>-&gt;setPath(<var class="vars">$path</var>);
   <var class="funcs">clearstatcache</var>();
   <var class="keywords">if</var> (@<var class="funcs">is_file</var>(<var class="vars">$this</var>-&gt;path)) {
     <var class="keywords">if</var> (<var class="vars">$warn_error</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Already exists the database(%s)'</var>, <var class="vars">$this</var>-&gt;getPath());
     }
   } <var class="keywords">else</var> {
     <var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'a'</var>);
     <var class="keywords">if</var> (!<var class="vars">$fp</var>) {
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; <var class="vars">$warn_error</var>) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to create database(%s),'</var>
                       .  <var class="strings">' confirm directory permission'</var>, <var class="vars">$this</var>-&gt;getPath());
       }
     } <var class="keywords">else</var> {
       <var class="vars">$meta</var> = <var class="keywords">array</var>(<var class="keywords">array</var>());
       <var class="vars">$head</var> = <var class="funcs">implode</var>(<var class="vars">$this</var>-&gt;NL,
         <var class="keywords">array</var>(
           <var class="vars">$this</var>-&gt;getHeader() . <var class="vars">$this</var>-&gt;LOCK_NONE . <var class="strings">'@'</var> . <var class="vars">$this</var>-&gt;toUniqId(0),
           <var class="strings">''</var>,
           <var class="vars">$this</var>-&gt;encode(<var class="vars">$meta</var>),
           <var class="strings">''</var>
         )
       );
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$fp</var>, <var class="vars">$head</var>)) {
         <var class="vars">$this</var>-&gt;meta = <var class="vars">$meta</var>;
         <var class="vars">$result</var> = <var class="keywords">true</var>;
       }
       <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       <var class="vars">$mask</var> = @<var class="funcs">umask</var>(0);
       @<var class="funcs">chmod</var>(<var class="vars">$this</var>-&gt;path, <var class="vars">$perms</var>);
       @<var class="funcs">umask</var>(<var class="vars">$mask</var>);
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0697"><h2>
<a name="p_function_createtable_697">
<var class="function">createTable</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>array</em>   regulated value of field as an array</dd>
<dt>param</dt>
<dd><em>string</em>  optionally, specify the name of primary key</dd>
<dt>return</dt>
<dd><em>boolean</em> success or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Creates definition of table in a file
</pre>
</div></div><pre id="source-0697"> <var class="keywords">function</var> createTable(<var class="vars">$table</var>, <var class="vars">$fields</var> = <var class="keywords">array</var>(), <var class="vars">$primary_key</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$this</var>-&gt;_onCreate   = <var class="keywords">true</var>;
   <var class="vars">$this</var>-&gt;_getMetaAll = <var class="keywords">true</var>;
   <var class="vars">$this</var>-&gt;getMeta();
   <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$table</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Only string type is enabled as arguments(%s)'</var>, <var class="vars">$table</var>);
     <var class="vars">$table</var> = <var class="keywords">null</var>;
   }
   <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>])) {
     <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_useQuery)
      &amp;&amp; <var class="vars">$this</var>-&gt;_ifExistsClause !== <var class="strings">'if_not_exists'</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Already exists the table(%s)'</var>, <var class="vars">$table</var>);
     }
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$table</var>)) {
       <var class="vars">$error_token</var> = (<var class="keywords">string</var>)<var class="vars">$table</var>;
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid table name(%s)'</var>, <var class="vars">$error_token</var>);
     } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$fields</var>)
             || !<var class="vars">$this</var>-&gt;isAssoc(<var class="vars">$fields</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Only associatable array is enabled'</var>);
     } <var class="keywords">else</var> {
       <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$fields</var>) <var class="keywords">as</var> <var class="vars">$field</var>) {
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isEnableName(<var class="vars">$field</var>)) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid field name(%s)'</var>, <var class="vars">$field</var>);
           <var class="keywords">break</var>;
         }
       }
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$primary_key</var>)
          || !<var class="funcs">array_key_exists</var>(<var class="vars">$primary_key</var>, <var class="vars">$fields</var>)) {
           <var class="vars">$primary_key</var> = <var class="keywords">null</var>;
         }
         <var class="vars">$fields</var> = <var class="vars">$this</var>-&gt;mergeDefaults(<var class="vars">$fields</var>);
         <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;encode(<var class="vars">$fields</var>);
         <var class="keywords">if</var> (<var class="funcs">strlen</var>(<var class="vars">$meta</var>) &gt; <var class="vars">$this</var>-&gt;<var class="funcs">MAX</var>) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Over the maximum length on fields'</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>] = <var class="vars">$fields</var>;
           <var class="vars">$posql_key</var> = <var class="vars">$this</var>-&gt;getClassKey();
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>])) {
             <var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>] = <var class="keywords">array</var>();
           }
           <var class="vars">$create_query</var> = <var class="keywords">null</var>;
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_useQuery) &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;lastQuery)
            &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;lastMethod) &amp;&amp; <var class="vars">$this</var>-&gt;lastMethod === <var class="strings">'create'</var>) {
             <var class="vars">$create_query</var> = <var class="vars">$this</var>-&gt;lastQuery;
           }
           <var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>][<var class="vars">$tname</var>] = <var class="keywords">array</var>(
             <var class="strings">'sql'</var>     =&gt; <var class="vars">$create_query</var>,
             <var class="strings">'primary'</var> =&gt; <var class="vars">$primary_key</var>
           );
           <var class="vars">$this</var>-&gt;tableName = <var class="vars">$tname</var>;
           <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;encode(<var class="vars">$this</var>-&gt;meta);
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockExAll()) {
             <var class="vars">$lock</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s:%d@%s#%010.0f@%010u;'</var>,
               <var class="vars">$tname</var>, 0, <var class="vars">$this</var>-&gt;toUniqId(0), 1, <var class="funcs">time</var>());
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;appendFileLine(<var class="vars">$this</var>-&gt;getPath(), <var class="vars">$lock</var>, 2)
              &amp;&amp; <var class="vars">$this</var>-&gt;replaceFileLine(<var class="vars">$this</var>-&gt;getPath(), <var class="vars">$meta</var>, 3)) {
               <var class="vars">$result</var> = <var class="keywords">true</var>;
             }
             <var class="vars">$this</var>-&gt;unlockAll();
           }
         }
       }
     }
   }
   <var class="vars">$posql_key</var> = <var class="vars">$this</var>-&gt;getClassKey();
   <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>])) {
     <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>]);
   }
   <var class="vars">$this</var>-&gt;_onCreate   = <var class="keywords">null</var>;
   <var class="vars">$this</var>-&gt;_getMetaAll = <var class="keywords">null</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0698"><h2>
<a name="p_function_createfunction_698">
<var class="function">createFunction</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>    the name of the function used in SQL statements</dd>
<dt>param</dt>
<dd><em>callback</em>  callback function to handle the defined SQL function</dd>
<dt>return</dt>
<dd><em>boolean</em>   success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Registers a &quot;regular&quot; User Defined Function(UDF) for use in SQL statements
</pre>
</div></div><pre id="source-0698"> <var class="keywords">function</var> createFunction(<var class="vars">$funcname</var>, <var class="vars">$callback</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$funcname</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_string</var>(<var class="vars">$funcname</var>)
    &amp;&amp; <var class="vars">$callback</var> != <var class="keywords">null</var> &amp;&amp; <var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;UDF) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$this</var>-&gt;UDF)) {
     <var class="keywords">if</var> (!<var class="funcs">is_callable</var>(<var class="vars">$callback</var>)) {
       <var class="vars">$msg</var> = (<var class="keywords">string</var>)<var class="vars">$callback</var>;
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$callback</var>)) {
         <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$callback</var>[0]) &amp;&amp; <var class="funcs">is_object</var>(<var class="vars">$callback</var>[0])) {
           <var class="vars">$callback</var>[0] = <var class="funcs">get_class</var>(<var class="vars">$callback</var>[0]);
         }
         <var class="vars">$msg</var> = <var class="funcs">implode</var>(<var class="strings">'::'</var>, <var class="vars">$callback</var>);
       }
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot call the function(%s)'</var>, <var class="vars">$msg</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$this</var>-&gt;UDF[<var class="vars">$funcname</var>] = <var class="vars">$callback</var>;
       <var class="vars">$result</var> = <var class="keywords">true</var>;
     }
   } <var class="keywords">else</var> {
     <var class="vars">$funcname</var> = (<var class="keywords">string</var>)<var class="vars">$funcname</var>;
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to create function(%s)'</var>, <var class="vars">$funcname</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0699"><h2>
<a name="p_function_dropdatabase_699">
<var class="function">dropDatabase</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  filename as the database</dd>
<dt>param</dt>
<dd><em>boolean</em> whether do force drops or waits for locking</dd>
<dt>return</dt>
<dd><em>boolean</em> success or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Drops the database as one file
 When deleted it is not able to restore by physical deletion
</pre>
</div></div><pre id="source-0699"> <var class="keywords">function</var> dropDatabase(<var class="vars">$path</var> = <var class="keywords">null</var>, <var class="vars">$force</var> = <var class="keywords">false</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$path</var>) {
     <var class="vars">$this</var>-&gt;setPath(<var class="vars">$path</var>);
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isDatabase()) {
     <var class="keywords">while</var> (!<var class="vars">$force</var> &amp;&amp; <var class="vars">$this</var>-&gt;isLockAll()) {
       <var class="vars">$this</var>-&gt;<var class="funcs">sleep</var>();
     }
     <var class="vars">$result</var> = @<var class="funcs">unlink</var>(<var class="vars">$this</var>-&gt;path);
     <var class="keywords">if</var> (!<var class="vars">$result</var>) {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_ifExistsClause !== <var class="strings">'if_exists'</var>) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot dropDatabase(%s)'</var>, <var class="vars">$this</var>-&gt;path);
       }
     } <var class="keywords">else</var> {
       <var class="vars">$this</var>-&gt;autoVacuum = <var class="keywords">false</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0700"><h2>
<a name="p_function_droptable_700">
<var class="function">dropTable</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>return</dt>
<dd><em>boolean</em> success or not</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Drops the table and all it records
</pre>
</div></div><pre id="source-0700"> <var class="keywords">function</var> dropTable(<var class="vars">$table</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$warn_error</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_useQuery)
    &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;lastMethod)
    &amp;&amp; <var class="vars">$this</var>-&gt;lastMethod === <var class="strings">'drop'</var>
    &amp;&amp; <var class="vars">$this</var>-&gt;_ifExistsClause !== <var class="strings">'if_exists'</var>) {
     <var class="vars">$warn_error</var> = <var class="keywords">true</var>;
   }
   <var class="vars">$this</var>-&gt;_getMetaAll = <var class="keywords">true</var>;
   <var class="vars">$this</var>-&gt;getMeta();
   <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
   <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>])) {
     <var class="keywords">if</var> (<var class="vars">$warn_error</var>) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$table</var>);
     }
     <var class="vars">$result</var> = <var class="keywords">false</var>;
   } <var class="keywords">else</var> {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockExAll()) {
       <var class="keywords">if</var> ((<var class="vars">$rp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>))
        &amp;&amp; (<var class="vars">$wp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>))) {
         <var class="vars">$head</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$rp</var>);
         <var class="vars">$lock</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$rp</var>);
         <var class="vars">$pos</var> = <var class="funcs">ftell</var>(<var class="vars">$rp</var>);
         <var class="vars">$re</var> = <var class="funcs">sprintf</var>(<var class="strings">'|%s:\d@\w{8}#\d+@\d+;|'</var>, <var class="funcs">preg_quote</var>(<var class="vars">$tname</var>));
         <var class="keywords">if</var> (!<var class="funcs">preg_match</var>(<var class="vars">$re</var>, <var class="vars">$lock</var>, <var class="vars">$match</var>)) {
           <var class="keywords">if</var> (<var class="vars">$warn_error</var>) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Already dropped the table(%s)'</var>, <var class="vars">$table</var>);
           }
           <var class="funcs">fclose</var>(<var class="vars">$rp</var>);
           <var class="funcs">fclose</var>(<var class="vars">$wp</var>);
           <var class="vars">$result</var> = <var class="keywords">false</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;meta;
           <var class="keywords">unset</var>(<var class="vars">$meta</var>[<var class="vars">$tname</var>]);
           <var class="vars">$posql_key</var> = <var class="vars">$this</var>-&gt;getClassKey();
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$meta</var>[<var class="vars">$posql_key</var>][<var class="vars">$tname</var>])) {
             <var class="keywords">unset</var>(<var class="vars">$meta</var>[<var class="vars">$posql_key</var>][<var class="vars">$tname</var>]);
           }
           <var class="funcs">fseek</var>(<var class="vars">$wp</var>, <var class="funcs">strlen</var>(<var class="vars">$head</var>) + <var class="funcs">strpos</var>(<var class="vars">$lock</var>, <var class="vars">$match</var>[0]));
           <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="funcs">str_repeat</var>(<var class="strings">' '</var>, <var class="funcs">strlen</var>(<var class="vars">$match</var>[0])));
           <var class="funcs">fseek</var>(<var class="vars">$wp</var>, <var class="vars">$pos</var>);
           <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$this</var>-&gt;encode(<var class="vars">$meta</var>));
           <var class="funcs">fseek</var>(<var class="vars">$rp</var>, <var class="funcs">ftell</var>(<var class="vars">$wp</var>));
           <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$rp</var>)) {
             <var class="vars">$c</var> = <var class="funcs">fgetc</var>(<var class="vars">$rp</var>);
             <var class="keywords">if</var> (<var class="vars">$c</var> === <var class="vars">$this</var>-&gt;NL || <var class="vars">$c</var> === <var class="keywords">false</var>) {
               <var class="keywords">break</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="strings">' '</var>);
             }
           }
           <var class="funcs">fseek</var>(<var class="vars">$wp</var>, <var class="funcs">ftell</var>(<var class="vars">$rp</var>));
           <var class="vars">$tnamep</var> = <var class="vars">$tname</var> . <var class="vars">$this</var>-&gt;DELIM_TABLE;
           <var class="vars">$tlen</var> = <var class="funcs">strlen</var>(<var class="vars">$tnamep</var>);
           <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$rp</var>)) {
             <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$rp</var>);
             <var class="vars">$trim</var> = <var class="funcs">trim</var>(<var class="vars">$line</var>);
             <var class="vars">$sub</var> = <var class="funcs">substr</var>(<var class="vars">$trim</var>, 0, <var class="vars">$tlen</var>);
             <var class="keywords">if</var> (<var class="vars">$sub</var> === <var class="vars">$tnamep</var>) {
               <var class="vars">$put</var> = <var class="funcs">str_repeat</var>(<var class="strings">' '</var>, <var class="funcs">strlen</var>(<var class="vars">$trim</var>)) . <var class="vars">$this</var>-&gt;NL;
               <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$put</var>);
             } <var class="keywords">else</var> {
               <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$wp</var>);
             }
           }
           <var class="funcs">fclose</var>(<var class="vars">$rp</var>);
           <var class="funcs">fclose</var>(<var class="vars">$wp</var>);
           <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>]);
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>][<var class="vars">$tname</var>])) {
             <var class="keywords">unset</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$posql_key</var>][<var class="vars">$tname</var>]);
           }
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
       }
       <var class="vars">$this</var>-&gt;vacuum();
       <var class="vars">$this</var>-&gt;unlockAll();
     }
   }
   <var class="vars">$this</var>-&gt;_getMetaAll = <var class="keywords">null</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0701"><h2>
<a name="p_function_altertable_701">
<var class="function">alterTable</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>access</dt>
<dd>public</dd>
</dl>
</div></div><pre id="source-0701"> <var class="keywords">function</var> alterTable(<var class="vars">$table</var>, <var class="vars">$action</var>){
   <var class="comments">//TODO: Implements or emulate</var>
   <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not implemented command (ALTER TABLE)'</var>);
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0702"><h2>
<a name="p_function_insert_702">
<var class="function">insert</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>array</em>   add data as the array</dd>
<dt>return</dt>
<dd><em>number</em>  number of affected rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Inserts the records to table of the database
</pre>
</div></div><pre id="source-0702"> <var class="keywords">function</var> insert(<var class="vars">$table</var>, <var class="vars">$rows</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$table</var> != <var class="keywords">null</var> &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
     <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(0, <var class="vars">$rows</var>)) {
       <var class="vars">$rows</var> = <var class="keywords">array</var>(<var class="vars">$rows</var>);
     }
     <var class="vars">$rows</var> = <var class="funcs">array_map</var>(<var class="keywords">array</var>(<var class="vars">$this</var>, <var class="strings">'mergeDefaults'</var>), <var class="vars">$rows</var>);
     <var class="vars">$this</var>-&gt;_curMeta = <var class="vars">$this</var>-&gt;getMeta(<var class="vars">$table</var>);
     <var class="vars">$this</var>-&gt;<var class="funcs">next</var> = <var class="vars">$this</var>-&gt;getNextId(<var class="vars">$table</var>);
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()
      &amp;&amp; <var class="vars">$this</var>-&gt;_curMeta !== <var class="keywords">false</var> &amp;&amp; <var class="vars">$this</var>-&gt;<var class="funcs">next</var> !== <var class="keywords">false</var>) {
       <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>])) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Cannot insert to the table(%s)'</var>, <var class="vars">$table</var>);
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockEx(<var class="vars">$table</var>)) {
           <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'a'</var>)) {
             <var class="keywords">do</var> {
               <var class="vars">$repeat</var> = <var class="keywords">false</var>;
               <var class="vars">$nextid</var> = <var class="vars">$this</var>-&gt;getNextId(<var class="vars">$table</var>);
               <var class="vars">$new_rows</var> = <var class="funcs">array_map</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'_addMap'</var>), <var class="vars">$rows</var>);
               <var class="keywords">if</var> (1 !== <var class="vars">$this</var>-&gt;math-&gt;comp(<var class="vars">$this</var>-&gt;<var class="funcs">next</var>, <var class="vars">$nextid</var>)) {
                 <var class="comments">// 1 ::= $this-&gt;next &gt; $nextid</var>
                 <var class="vars">$repeat</var> = <var class="keywords">true</var>;
               }
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                 <var class="vars">$repeat</var> = <var class="keywords">false</var>;
               }
             } <var class="keywords">while</var> (<var class="vars">$repeat</var>);
             <var class="keywords">unset</var>(<var class="vars">$rows</var>);
             <var class="vars">$this</var>-&gt;_execExpr = <var class="keywords">false</var>;
             <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$fp</var>, <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$new_rows</var>))) {
                 <var class="vars">$result</var> = <var class="funcs">count</var>(<var class="vars">$new_rows</var>);
               }
             }
             <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
             <var class="keywords">unset</var>(<var class="vars">$new_rows</var>);
             <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
               <var class="vars">$this</var>-&gt;setNextId(<var class="vars">$table</var>, <var class="vars">$this</var>-&gt;<var class="funcs">next</var>);
             }
           }
           <var class="vars">$this</var>-&gt;unlock(<var class="vars">$table</var>);
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0703"><h2>
<a name="p_function_update_703">
<var class="function">update</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>array</em>   update data as an array</dd>
<dt>param</dt>
<dd><em>mixed</em>   expression of PHP syntax, default = true (update all)</dd>
<dt>return</dt>
<dd><em>number</em>  number of affected rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Updates the database to the given arguments condition and expression
 At that time, &quot;utime&quot; will always be updated
</pre>
</div></div><pre id="source-0703"> <var class="keywords">function</var> update(<var class="vars">$table</var>, <var class="vars">$row</var> = <var class="keywords">array</var>(), <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$row</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid type of the records(%s). Must an array.'</var>, <var class="vars">$row</var>);
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$this</var>-&gt;getMeta(<var class="vars">$table</var>);
     <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
     <var class="keywords">if</var> (!<var class="funcs">is_bool</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$expr</var>);
     }
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>])) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$table</var>);
     }
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockExAll()) {
       <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
         <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 2);
         <var class="keywords">if</var> (<var class="vars">$up</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
           <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$up</var>, 2);
           <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
           <var class="vars">$ups</var> = <var class="keywords">array</var>();
           <var class="vars">$first</var> = <var class="keywords">true</var>;
           <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
             <var class="vars">$isup</var> = <var class="keywords">false</var>;
             <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
             <var class="vars">$trim</var> = <var class="funcs">trim</var>(<var class="vars">$line</var>);
             <var class="keywords">if</var> (<var class="vars">$trim</var> == <var class="keywords">null</var>) {
               <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$up</var>, <var class="vars">$line</var>);
               <var class="keywords">continue</var>;
             } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
               <var class="keywords">list</var>(<var class="vars">$tkey</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
               <var class="keywords">if</var> (<var class="vars">$tkey</var> === <var class="vars">$tname</var>) {
                 <var class="vars">$rec</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
                 <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rec</var>)) {
                   <var class="keywords">if</var> (<var class="vars">$first</var>) {
                     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="vars">$isup</var> = <var class="keywords">true</var>;
                     }
                     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                       <var class="keywords">break</var>;
                     }
                     <var class="vars">$first</var> = <var class="keywords">false</var>;
                   } <var class="keywords">else</var> {
                     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;expr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="vars">$isup</var> = <var class="keywords">true</var>;
                     }
                   }
                 }
               }
             }
             <var class="keywords">if</var> (<var class="vars">$isup</var>) {
               <var class="vars">$put</var> = <var class="funcs">str_repeat</var>(<var class="strings">' '</var>, <var class="funcs">strlen</var>(<var class="vars">$trim</var>)) . <var class="vars">$this</var>-&gt;NL;
               <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$up</var>, <var class="vars">$put</var>)) {
                 <var class="vars">$result</var>++;
               }
               <var class="vars">$ups</var>[] = <var class="vars">$rec</var>;
             } <var class="keywords">else</var> {
               <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$up</var>);
             }
           }
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$ups</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inDelete)) {
             <var class="vars">$this</var>-&gt;_curMeta = <var class="vars">$row</var>;
             <var class="vars">$this</var>-&gt;tableName = <var class="vars">$tname</var>;
             <var class="vars">$maps</var> = <var class="funcs">array_map</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'_upMap'</var>), <var class="vars">$ups</var>);
             <var class="vars">$this</var>-&gt;_execExpr = <var class="keywords">false</var>;
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
               <var class="vars">$maps</var> = <var class="funcs">array_map</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'_upRestoreMap'</var>), <var class="vars">$ups</var>);
               <var class="vars">$result</var> = 0;
             }
             <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$up</var>, <var class="funcs">implode</var>(<var class="strings">''</var>, <var class="vars">$maps</var>));
           }
           <var class="keywords">unset</var>(<var class="vars">$maps</var>, <var class="vars">$ups</var>);
           <var class="funcs">fclose</var>(<var class="vars">$up</var>);
           <var class="keywords">if</var> (<var class="vars">$result</var>) {
             <var class="vars">$this</var>-&gt;setLastMod(<var class="vars">$table</var>);
           }
         }
         <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
       }
       <var class="vars">$this</var>-&gt;unlockAll();
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0704"><h2>
<a name="p_function_delete_704">
<var class="function">delete</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>mixed</em>   expression of WHERE clause, default = false (not delete)</dd>
<dt>return</dt>
<dd><em>number</em>  number of affected rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Deletes the row of the database in the condition specification
</pre>
</div></div><pre id="source-0704"> <var class="keywords">function</var> delete(<var class="vars">$table</var>, <var class="vars">$expr</var> = <var class="keywords">false</var>){
   <var class="vars">$this</var>-&gt;_inDelete = <var class="keywords">true</var>;
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;update(<var class="vars">$table</var>, <var class="keywords">array</var>(), <var class="vars">$expr</var>);
   <var class="vars">$this</var>-&gt;_inDelete = <var class="keywords">null</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0705"><h2>
<a name="p_function_replace_705">
<var class="function">replace</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>array</em>   a replacement associative array</dd>
<dt>return</dt>
<dd><em>number</em>  number of affected rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Replace the records to table of the database
 if conflicts to the primary key.
 This method supports &quot;REPLACE INTO ...&quot; syntax.
</pre>
</div></div><pre id="source-0705"> <var class="keywords">function</var> replace(<var class="vars">$table</var>, <var class="vars">$row</var> = <var class="keywords">array</var>()){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$table</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$row</var>)) {
     <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(0, <var class="vars">$row</var>)) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Array of one dimension must be given REPLACE.'</var>);
     }
     <var class="vars">$expr</var> = <var class="keywords">null</var>;
     <var class="vars">$meta</var> = <var class="keywords">null</var>;
     <var class="vars">$insert_only</var> = <var class="keywords">false</var>;
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;getMeta(<var class="vars">$table</var>);
       <var class="keywords">if</var> (!<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;_primaryKey) || <var class="vars">$this</var>-&gt;_primaryKey == <var class="keywords">null</var>) {
         <var class="vars">$insert_only</var> = <var class="keywords">true</var>;
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (!<var class="funcs">array_key_exists</var>(<var class="vars">$this</var>-&gt;_primaryKey, <var class="vars">$row</var>)) {
           <var class="vars">$insert_only</var> = <var class="keywords">true</var>;
         } <var class="keywords">else</var> {
           <var class="vars">$expr</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s = %s'</var>,
             <var class="vars">$this</var>-&gt;_primaryKey,
             <var class="vars">$this</var>-&gt;quote(<var class="vars">$row</var>[<var class="vars">$this</var>-&gt;_primaryKey])
           );
           <var class="vars">$row_exists</var> = <var class="vars">$this</var>-&gt;<var class="funcs">count</var>(<var class="vars">$table</var>, <var class="vars">$expr</var>);
           <var class="keywords">if</var> (!<var class="vars">$row_exists</var>) {
             <var class="vars">$insert_only</var> = <var class="keywords">true</var>;
           }
         }
       }
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (<var class="vars">$insert_only</var>) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;insert(<var class="vars">$table</var>, <var class="vars">$row</var>);
       } <var class="keywords">else</var> {
         <var class="keywords">if</var> (<var class="vars">$expr</var> == <var class="keywords">null</var> || <var class="vars">$meta</var> == <var class="keywords">null</var>
          || !<var class="funcs">is_array</var>(<var class="vars">$meta</var>) || !<var class="keywords">isset</var>(<var class="vars">$this</var>-&gt;_primaryKey)
          || !<var class="funcs">array_key_exists</var>(<var class="vars">$this</var>-&gt;_primaryKey, <var class="vars">$row</var>)) {
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to REPLACE INTO the table.'</var>);
         } <var class="keywords">else</var> {
           <var class="vars">$row</var> = <var class="vars">$row</var> + <var class="vars">$meta</var>;
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_execExpr) {
             <var class="keywords">foreach</var> (<var class="vars">$row</var> <var class="keywords">as</var> <var class="vars">$key</var> =&gt; <var class="vars">$val</var>) {
               <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;isValidExpr(<var class="vars">$val</var>)) {
                 <var class="vars">$val</var> = <var class="vars">$this</var>-&gt;quote(<var class="vars">$val</var>);
                 <var class="vars">$row</var>[<var class="vars">$key</var>] = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$val</var>);
               }
             }
           }
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="strings">'rowid'</var>, <var class="vars">$row</var>)) {
             <var class="vars">$row</var>[<var class="strings">'rowid'</var>] = <var class="vars">$row</var>[<var class="vars">$this</var>-&gt;_primaryKey];
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid the records, expect (rowid).'</var>);
           }
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
             <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;update(<var class="vars">$table</var>, <var class="vars">$row</var>, <var class="vars">$expr</var>) * 2;
           }
         }
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0706"><h2>
<a name="p_function_select_706">
<var class="function">select</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   table name</dd>
<dt>param</dt>
<dd><em>string</em>   the list of columns (e.g. &quot;foo,bar&quot;)</dd>
<dt>param</dt>
<dd><em>mixed</em>    expression as WHERE clause, default=true (select all)</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide the group</dd>
<dt>param</dt>
<dd><em>mixed</em>    expression as HAVING clause, default=true (select all)</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide the order</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide limit value</dd>
<dt>return</dt>
<dd><em>object</em>   Posql_Statement object which has the result-set</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Select the row from the database in the condition specification
</pre>
</div></div><pre id="source-0706"> <var class="keywords">function</var> select(<var class="vars">$table</var>, <var class="vars">$columns</var> = <var class="strings">'*'</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>,
                         <var class="vars">$group</var> = <var class="keywords">null</var>,  <var class="vars">$having</var> = <var class="keywords">true</var>,
                         <var class="vars">$order</var> = <var class="keywords">null</var>,  <var class="vars">$limit</var>  = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$table</var>) &amp;&amp; <var class="funcs">func_num_args</var>() === 1) {
     <var class="vars">$args</var> = <var class="vars">$table</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   }
   <var class="vars">$args</var> = <var class="vars">$this</var>-&gt;parseSelectArguments(<var class="vars">$args</var>, <var class="keywords">true</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$args</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
     <var class="vars">$table</var>   = <var class="funcs">reset</var>(<var class="vars">$args</var>);
     <var class="vars">$tbl_key</var> = <var class="funcs">key</var>(<var class="vars">$args</var>);
     <var class="vars">$columns</var> = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$expr</var>    = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$group</var>   = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$having</var>  = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$order</var>   = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$limit</var>   = <var class="funcs">end</var>(<var class="vars">$args</var>);
   }
   <var class="vars">$this</var>-&gt;applyAliasNames(<var class="vars">$table</var>, <var class="vars">$columns</var>);
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isSimpleCount(<var class="vars">$args</var>)) {
     <var class="vars">$count</var> = <var class="vars">$this</var>-&gt;<var class="funcs">count</var>(<var class="vars">$table</var>, <var class="vars">$expr</var>);
     <var class="vars">$this</var>-&gt;assignColsBySimpleCount(<var class="vars">$result</var>, <var class="vars">$count</var>, <var class="vars">$columns</var>);
   } <var class="keywords">else</var> {
     <var class="comments">//Fix Bug: Cannot get the result on SELECT statement.</var>
     <var class="comments">//         When getMeta() not called.</var>
     <var class="comments">// Thanks 5974</var>
     <var class="vars">$this</var>-&gt;getMeta();
     <var class="vars">$table</var> = <var class="vars">$this</var>-&gt;replaceTableAlias(<var class="vars">$table</var>);
     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tbl_key</var>)) {
       <var class="vars">$args</var>[<var class="vars">$tbl_key</var>] = <var class="vars">$table</var>;
     }
     <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
     <var class="comments">/*
     if (!is_bool($expr)) {
       $expr = $this-&gt;validExpr($expr);
     }
     */</var>
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$tname</var>])) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$table</var>);
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockSh(<var class="vars">$table</var>)) {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;applyOptimizeExplan(<var class="vars">$args</var>);
         <var class="vars">$this</var>-&gt;unlock(<var class="vars">$table</var>);
         <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$result</var>)) {
           <var class="keywords">if</var> (<var class="vars">$group</var> != <var class="keywords">null</var>) {
             <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;groupBy(<var class="vars">$result</var>, <var class="vars">$group</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$aggregates</var> = <var class="keywords">null</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$having</var> !== <var class="keywords">true</var>) {
             <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;having(<var class="vars">$result</var>, <var class="vars">$having</var>,
                                         <var class="vars">$group</var>, <var class="vars">$aggregates</var>);
           }
           <var class="keywords">if</var> (<var class="vars">$columns</var> == <var class="keywords">null</var>) {
             <var class="vars">$result</var> = <var class="keywords">array</var>();
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;assignCols(<var class="vars">$result</var>, <var class="vars">$columns</var>,
                               <var class="vars">$aggregates</var>, <var class="vars">$group</var>, <var class="vars">$order</var>);
           }
           <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$result</var>) &gt; 1 &amp;&amp; <var class="vars">$limit</var> != <var class="keywords">null</var>) {
             <var class="vars">$this</var>-&gt;assignLimitOffset(<var class="vars">$result</var>, <var class="vars">$limit</var>);
           }
         }
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromStatement)) {
     <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Statement(<var class="vars">$this</var>, <var class="vars">$result</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0707"><h2>
<a name="p_function_multiselect_707">
<var class="function">multiSelect</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>    tables (e.g. &quot;table1 JOIN table2&quot;)</dd>
<dt>param</dt>
<dd><em>string</em>   for choice columns</dd>
<dt>param</dt>
<dd><em>mixed</em>    expression as WHERE clause, default = true (select all)</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide the group</dd>
<dt>param</dt>
<dd><em>mixed</em>    expression as HAVING clause, default = true (select all)</dd>
<dt>param</dt>
<dd><em>string</em>   value to decide the order</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide limit value</dd>
<dt>return</dt>
<dd><em>object</em>   Posql_Statement object which has the result-set</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Selects each rows by using JOIN from the database
  in the condition specification
</pre>
</div></div><pre id="source-0707"> <var class="keywords">function</var> multiSelect(<var class="vars">$tables</var>,
                      <var class="vars">$columns</var> = <var class="strings">'*'</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>,
                      <var class="vars">$group</var> = <var class="keywords">null</var>,  <var class="vars">$having</var> = <var class="keywords">true</var>,
                      <var class="vars">$order</var> = <var class="keywords">null</var>,  <var class="vars">$limit</var>  = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tables</var>) &amp;&amp; <var class="funcs">func_num_args</var>() === 1) {
     <var class="vars">$args</var> = <var class="vars">$tables</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   }
   <var class="vars">$args</var> = <var class="vars">$this</var>-&gt;parseSelectArguments(<var class="vars">$args</var>, <var class="keywords">true</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$args</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
     <var class="vars">$tables</var>  = <var class="funcs">reset</var>(<var class="vars">$args</var>);
     <var class="vars">$columns</var> = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$expr</var>    = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$group</var>   = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$having</var>  = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$order</var>   = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$limit</var>   = <var class="funcs">end</var>(<var class="vars">$args</var>);
   }
   <var class="vars">$this</var>-&gt;applyAliasNames(<var class="vars">$tables</var>, <var class="vars">$columns</var>);
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isSimpleCount(<var class="vars">$args</var>, <var class="keywords">true</var>)) {
     <var class="vars">$count</var> = <var class="vars">$this</var>-&gt;multiCount(<var class="vars">$tables</var>, <var class="vars">$expr</var>);
     <var class="vars">$this</var>-&gt;assignColsBySimpleCount(<var class="vars">$result</var>, <var class="vars">$count</var>, <var class="vars">$columns</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$this</var>-&gt;getMeta();
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tables</var>)) {
         <var class="vars">$tables</var> = <var class="vars">$this</var>-&gt;parseJoinTables(<var class="vars">$tables</var>);
       }
       <var class="vars">$tnames</var> = <var class="keywords">array</var>();
       <var class="vars">$tables</var> = <var class="funcs">array_values</var>(<var class="vars">$tables</var>);
       <var class="keywords">foreach</var> (<var class="vars">$tables</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$table</var>) {
         <var class="vars">$oname</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$table</var>, <var class="strings">'table_name'</var>);
         <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$oname</var>);
         <var class="keywords">if</var> (<var class="vars">$i</var> === 0) {
           <var class="vars">$this</var>-&gt;tableName = <var class="vars">$tname</var>;
         }
         <var class="vars">$tnames</var>[<var class="vars">$tname</var>] = 1;
       }
       <var class="keywords">if</var> (!<var class="funcs">is_bool</var>(<var class="vars">$expr</var>)) {
         <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">true</var>;
         <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$expr</var>);
         <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">null</var>;
       }
       <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$this</var>-&gt;tableName);
       }
       <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockShAll()) {
           <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
             <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 3);
             <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
             <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
               <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
               <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
                 <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
                 <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tnames</var>[<var class="vars">$key</var>])) {
                   <var class="vars">$rec</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
                   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rec</var>)) {
                     <var class="vars">$result</var>[<var class="vars">$key</var>][] = <var class="vars">$rec</var>;
                   }
                 }
               }
             }
             <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
           }
           <var class="vars">$this</var>-&gt;unlockAll();
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$result</var>)) {
             <var class="vars">$this</var>-&gt;joinTables(<var class="vars">$result</var>, <var class="vars">$tables</var>, <var class="vars">$expr</var>);
             <var class="keywords">if</var> (<var class="vars">$group</var> != <var class="keywords">null</var>) {
               <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;groupBy(<var class="vars">$result</var>, <var class="vars">$group</var>);
             } <var class="keywords">else</var> {
               <var class="vars">$aggregates</var> = <var class="keywords">null</var>;
             }
             <var class="keywords">if</var> (<var class="vars">$having</var> !== <var class="keywords">true</var>) {
               <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">true</var>;
               <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;having(<var class="vars">$result</var>, <var class="vars">$having</var>,
                                           <var class="vars">$group</var>, <var class="vars">$aggregates</var>);
               <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">null</var>;
             }
             <var class="keywords">if</var> (<var class="vars">$columns</var> === <var class="strings">'*'</var>) {
               <var class="vars">$this</var>-&gt;removeCorrelations(<var class="vars">$result</var>);
             } <var class="keywords">else</var> {
               <var class="keywords">if</var> (<var class="vars">$columns</var> == <var class="keywords">null</var>) {
                 <var class="vars">$result</var> = <var class="keywords">array</var>();
               } <var class="keywords">else</var> {
                 <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">true</var>;
                 <var class="vars">$this</var>-&gt;assignCols(<var class="vars">$result</var>, <var class="vars">$columns</var>,
                                   <var class="vars">$aggregates</var>, <var class="vars">$group</var>, <var class="vars">$order</var>);
                 <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">null</var>;
               }
             }
             <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$result</var>) &gt; 1 &amp;&amp; <var class="vars">$limit</var> != <var class="keywords">null</var>) {
               <var class="vars">$this</var>-&gt;assignLimitOffset(<var class="vars">$result</var>, <var class="vars">$limit</var>);
             }
           }
         }
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromStatement)) {
     <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Statement(<var class="vars">$this</var>, <var class="vars">$result</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0708"><h2>
<a name="p_function_subselect_708">
<var class="function">subSelect</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>select</dd>
<dt>param</dt>
<dd><em>array</em>    result set which was executed by sub-query</dd>
<dt>param</dt>
<dd><em>string</em>   the list of columns (e.g. &quot;foo,bar&quot;)</dd>
<dt>param</dt>
<dd><em>mixed</em>    expression as WHERE clause, default=true (select all)</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide the group</dd>
<dt>param</dt>
<dd><em>mixed</em>    expression as HAVING clause, default=true (select all)</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide the order</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide limit value</dd>
<dt>return</dt>
<dd><em>object</em>   Posql_Statement object which has the result-set</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Execute simple sub-select query for FROM clause
</pre>
</div></div><pre id="source-0708"> <var class="keywords">function</var> subSelect(<var class="vars">$rows</var>,  <var class="vars">$columns</var> = <var class="strings">'*'</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>,
                            <var class="vars">$group</var> = <var class="keywords">null</var>,  <var class="vars">$having</var> = <var class="keywords">true</var>,
                            <var class="vars">$order</var> = <var class="keywords">null</var>,  <var class="vars">$limit</var>  = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="funcs">func_num_args</var>() === 1) {
     <var class="vars">$args</var> = <var class="vars">$rows</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   }
   <var class="vars">$args</var> = <var class="vars">$this</var>-&gt;parseSelectArguments(<var class="vars">$args</var>, <var class="keywords">true</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$args</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
     <var class="vars">$rows</var>    = <var class="funcs">reset</var>(<var class="vars">$args</var>);
     <var class="vars">$columns</var> = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$expr</var>    = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$group</var>   = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$having</var>  = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$order</var>   = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$limit</var>   = <var class="funcs">end</var>(<var class="vars">$args</var>);
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="funcs">is_bool</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$expr</var>);
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rows</var>) &amp;&amp; !<var class="keywords">empty</var>(<var class="vars">$rows</var>)) {
         <var class="vars">$result</var> = <var class="keywords">array</var>();
         <var class="vars">$first</var> = <var class="keywords">true</var>;
         <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
         <var class="keywords">while</var> (--<var class="vars">$row_count</var> &gt;= 0) {
           <var class="vars">$row</var> = <var class="funcs">array_shift</var>(<var class="vars">$rows</var>);
           <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$row</var>)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid result-set using subquery'</var>);
             <var class="keywords">break</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$first</var>) {
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$row</var>, <var class="vars">$expr</var>)) {
               <var class="vars">$result</var>[] = <var class="vars">$row</var>;
             }
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
               <var class="keywords">break</var>;
             }
             <var class="vars">$first</var> = <var class="keywords">false</var>;
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;expr(<var class="vars">$row</var>, <var class="vars">$expr</var>)) {
               <var class="vars">$result</var>[] = <var class="vars">$row</var>;
             }
           }
         }
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
           <var class="vars">$result</var> = <var class="keywords">array</var>();
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$group</var> != <var class="keywords">null</var>) {
             <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;groupBy(<var class="vars">$result</var>, <var class="vars">$group</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$aggregates</var> = <var class="keywords">null</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$having</var> !== <var class="keywords">true</var>) {
             <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;having(<var class="vars">$result</var>, <var class="vars">$having</var>,
                                         <var class="vars">$group</var>, <var class="vars">$aggregates</var>);
           }
           <var class="keywords">if</var> (<var class="vars">$columns</var> == <var class="keywords">null</var>) {
             <var class="vars">$result</var> = <var class="keywords">array</var>();
           } <var class="keywords">else</var> {
             <var class="vars">$this</var>-&gt;assignCols(<var class="vars">$result</var>, <var class="vars">$columns</var>,
                               <var class="vars">$aggregates</var>, <var class="vars">$group</var>, <var class="vars">$order</var>);
           }
           <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$result</var>) &gt; 1 &amp;&amp; <var class="vars">$limit</var> != <var class="keywords">null</var>) {
             <var class="vars">$this</var>-&gt;assignLimitOffset(<var class="vars">$result</var>, <var class="vars">$limit</var>);
           }
         }
       }
     }
   }
   <var class="keywords">unset</var>(<var class="vars">$rows</var>);
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromStatement)) {
     <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Statement(<var class="vars">$this</var>, <var class="vars">$result</var>);
   }
   <var class="vars">$this</var>-&gt;_subSelectMeta = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;_fromSubSelect = <var class="keywords">null</var>;
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0709"><h2>
<a name="p_function_multisubselect_709">
<var class="function">multiSubSelect</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>multiSelect, subSelect</dd>
<dt>param</dt>
<dd><em>array</em>    result set which was executed by sub-query</dd>
<dt>param</dt>
<dd><em>string</em>   for choice columns</dd>
<dt>param</dt>
<dd><em>mixed</em>    expression as WHERE clause, default = true (select all)</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide the group</dd>
<dt>param</dt>
<dd><em>mixed</em>    expression as HAVING clause, default = true (select all)</dd>
<dt>param</dt>
<dd><em>string</em>   value to decide the order</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide limit value</dd>
<dt>return</dt>
<dd><em>object</em>   Posql_Statement object which has the result-set</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Execute sub-select query which has multiple rows for FROM clause
</pre>
</div></div><pre id="source-0709"> <var class="keywords">function</var> multiSubSelect(<var class="vars">$tables</var>,
                         <var class="vars">$columns</var> = <var class="strings">'*'</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>,
                         <var class="vars">$group</var> = <var class="keywords">null</var>,  <var class="vars">$having</var> = <var class="keywords">true</var>,
                         <var class="vars">$order</var> = <var class="keywords">null</var>,  <var class="vars">$limit</var>  = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$tables</var>) &amp;&amp; <var class="funcs">func_num_args</var>() === 1) {
     <var class="vars">$args</var> = <var class="vars">$tables</var>;
   } <var class="keywords">else</var> {
     <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   }
   <var class="vars">$args</var> = <var class="vars">$this</var>-&gt;parseSelectArguments(<var class="vars">$args</var>, <var class="keywords">true</var>);
   <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$args</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$args</var>)) {
     <var class="vars">$tables</var>  = <var class="funcs">reset</var>(<var class="vars">$args</var>);
     <var class="vars">$columns</var> = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$expr</var>    = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$group</var>   = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$having</var>  = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$order</var>   = <var class="funcs">next</var>(<var class="vars">$args</var>);
     <var class="vars">$limit</var>   = <var class="funcs">end</var>(<var class="vars">$args</var>);
   }
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tables</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid result-set using subquery'</var>);
   }
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$tnames</var> = <var class="keywords">array</var>();
     <var class="keywords">foreach</var> (<var class="funcs">array_keys</var>(<var class="vars">$tables</var>) <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$identifier</var>) {
       <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$identifier</var>);
       <var class="keywords">if</var> (<var class="vars">$i</var> === 0) {
         <var class="vars">$this</var>-&gt;tableName = <var class="vars">$tname</var>;
       }
       <var class="vars">$tnames</var>[<var class="vars">$tname</var>] = 1;
     }
     <var class="vars">$this</var>-&gt;applyAliasNames(<var class="vars">$this</var>-&gt;_subSelectJoinInfo, <var class="vars">$columns</var>);
     <var class="keywords">if</var> (!<var class="funcs">is_bool</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">true</var>;
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$expr</var>);
       <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">null</var>;
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$tables</var>)) {
         <var class="vars">$result</var> = <var class="keywords">array</var>();
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockShAll()) {
           <var class="vars">$i</var> = 0;
           <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
           <var class="vars">$table_count</var> = <var class="funcs">count</var>(<var class="vars">$tables</var>);
           <var class="keywords">while</var> (--<var class="vars">$table_count</var> &gt;= 0) {
             <var class="funcs">reset</var>(<var class="vars">$tables</var>);
             <var class="vars">$key</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="funcs">key</var>(<var class="vars">$tables</var>));
             <var class="vars">$rows</var> = <var class="funcs">array_shift</var>(<var class="vars">$tables</var>);
             <var class="keywords">if</var> (<var class="funcs">is_string</var>(<var class="vars">$rows</var>) &amp;&amp; <var class="vars">$rows</var> === <var class="strings">'&lt;=&gt;'</var>) {
               <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
                 <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 3);
                 <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
                   <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
                   <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
                     <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
                     <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tnames</var>[<var class="vars">$key</var>])) {
                       <var class="vars">$row</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
                       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$row</var>)) {
                         <var class="vars">$result</var>[<var class="vars">$key</var>][] = <var class="vars">$row</var>;
                       }
                     }
                   }
                 }
                 <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
               }
             } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rows</var>)) {
               <var class="vars">$row_count</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
               <var class="keywords">while</var> (--<var class="vars">$row_count</var> &gt;= 0) {
                 <var class="vars">$row</var> = <var class="funcs">array_shift</var>(<var class="vars">$rows</var>);
                 <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$row</var>)) {
                   <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Invalid result-set using subquery'</var>);
                   <var class="keywords">break</var> 2;
                 }
                 <var class="vars">$result</var>[<var class="vars">$key</var>][] = <var class="vars">$row</var>;
               }
             }
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
               <var class="keywords">break</var>;
             }
             <var class="vars">$i</var>++;
           }
           <var class="vars">$this</var>-&gt;unlockAll();
         }
         <var class="keywords">unset</var>(<var class="vars">$rows</var>);
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
           <var class="vars">$result</var> = <var class="keywords">array</var>();
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;joinTables(<var class="vars">$result</var>, <var class="vars">$this</var>-&gt;_subSelectJoinInfo, <var class="vars">$expr</var>);
           <var class="keywords">if</var> (<var class="vars">$group</var> != <var class="keywords">null</var>) {
             <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;groupBy(<var class="vars">$result</var>, <var class="vars">$group</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$aggregates</var> = <var class="keywords">null</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$having</var> !== <var class="keywords">true</var>) {
             <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">true</var>;
             <var class="vars">$aggregates</var> = <var class="vars">$this</var>-&gt;having(<var class="vars">$result</var>, <var class="vars">$having</var>,
                                         <var class="vars">$group</var>, <var class="vars">$aggregates</var>);
             <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">null</var>;
           }
           <var class="keywords">if</var> (<var class="vars">$columns</var> === <var class="strings">'*'</var>) {
             <var class="vars">$this</var>-&gt;removeCorrelations(<var class="vars">$result</var>);
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (<var class="vars">$columns</var> == <var class="keywords">null</var>) {
               <var class="vars">$result</var> = <var class="keywords">array</var>();
             } <var class="keywords">else</var> {
               <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">true</var>;
               <var class="vars">$this</var>-&gt;assignCols(<var class="vars">$result</var>, <var class="vars">$columns</var>,
                                 <var class="vars">$aggregates</var>, <var class="vars">$group</var>, <var class="vars">$order</var>);
               <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">null</var>;
             }
             <var class="keywords">if</var> (<var class="funcs">count</var>(<var class="vars">$result</var>) &gt; 1 &amp;&amp; <var class="vars">$limit</var> != <var class="keywords">null</var>) {
               <var class="vars">$this</var>-&gt;assignLimitOffset(<var class="vars">$result</var>, <var class="vars">$limit</var>);
             }
           }
         }
       }
     }
   }
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromStatement)) {
     <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Statement(<var class="vars">$this</var>, <var class="vars">$result</var>);
   }
   <var class="vars">$this</var>-&gt;_subSelectMeta = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;_fromSubSelect = <var class="keywords">null</var>;
   <var class="vars">$this</var>-&gt;_subSelectJoinUniqueNames = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;_subSelectJoinInfo = <var class="keywords">array</var>();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0710"><h2>
<a name="p_function_selectdual_710">
<var class="function">selectDual</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the list of select statement as expression</dd>
<dt>param</dt>
<dd><em>mixed</em>    the WHERE clause as the expression</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide the group</dd>
<dt>param</dt>
<dd><em>mixed</em>    expression as HAVING clause</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide the order</dd>
<dt>param</dt>
<dd><em>mixed</em>    value to decide limit value</dd>
<dt>return</dt>
<dd><em>object</em>   Posql_Statement object which has the result-set</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> A simple SELECT statement
 There is no FROM clause with a table name in there
</pre>
</div></div><pre id="source-0710"> <var class="keywords">function</var> selectDual(<var class="vars">$select</var> = <var class="keywords">null</var>, <var class="vars">$expr</var>  = <var class="keywords">true</var>,
                     <var class="vars">$group</var>  = <var class="keywords">null</var>, <var class="vars">$having</var> = <var class="keywords">true</var>,
                     <var class="vars">$order</var>  = <var class="keywords">null</var>, <var class="vars">$limit</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="vars">$this</var>-&gt;_isDualSelect = <var class="keywords">true</var>;
   <var class="keywords">if</var> (<var class="vars">$select</var> !== <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="keywords">array</var>(<var class="keywords">array</var>());
     <var class="vars">$this</var>-&gt;assignDualCols(<var class="vars">$result</var>, <var class="vars">$select</var>);
   }
   <var class="vars">$this</var>-&gt;_isDualSelect = <var class="keywords">null</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="keywords">array</var>();
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromStatement)) {
     <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Statement(<var class="vars">$this</var>, <var class="vars">$result</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0711"><h2>
<a name="p_function_count_711">
<var class="function">count</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name</dd>
<dt>param</dt>
<dd><em>mixed</em>   expression as WHERE clause, default = true (count all)</dd>
<dt>return</dt>
<dd><em>number</em>  number of the counted rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Count all of the records, it returns the number of the counted rows
</pre>
</div></div><pre id="source-0711"> <var class="keywords">function</var> <var class="funcs">count</var>(<var class="vars">$table</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="vars">$result</var> = 0;
   <var class="vars">$table</var> = <var class="vars">$this</var>-&gt;replaceTableAlias(<var class="vars">$table</var>);
   <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;tableName = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
   <var class="keywords">if</var> (<var class="vars">$table</var> != <var class="keywords">null</var>) {
     <var class="vars">$this</var>-&gt;getMeta(<var class="vars">$table</var>);
     <var class="keywords">if</var> (!<var class="funcs">is_bool</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$expr</var>);
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockSh(<var class="vars">$table</var>)) {
         <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
           <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 3);
           <var class="keywords">if</var> (<var class="vars">$expr</var> === <var class="keywords">true</var>) {
             <var class="vars">$top</var> = <var class="vars">$tname</var> . <var class="vars">$this</var>-&gt;DELIM_TABLE;
             <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
               <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>, <var class="keywords">true</var>);
               <var class="keywords">if</var> (<var class="vars">$line</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$top</var>) === 0) {
                 ++<var class="vars">$result</var>;
               }
             }
           } <var class="keywords">else</var> {
             <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
             <var class="vars">$first</var> = <var class="keywords">true</var>;
             <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
               <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
               <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
                 <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
                 <var class="keywords">if</var> (<var class="vars">$key</var> === <var class="vars">$tname</var>) {
                   <var class="vars">$rec</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
                   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rec</var>)) {
                     <var class="keywords">if</var> (<var class="vars">$first</var>) {
                       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                         ++<var class="vars">$result</var>;
                       }
                       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                         <var class="vars">$result</var> = 0;
                         <var class="keywords">break</var>;
                       }
                       <var class="vars">$first</var> = <var class="keywords">false</var>;
                     } <var class="keywords">else</var> {
                       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;expr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                         ++<var class="vars">$result</var>;
                       }
                     }
                   }
                 }
               }
             }
           }
           <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
         }
         <var class="vars">$this</var>-&gt;unlock(<var class="vars">$table</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0712"><h2>
<a name="p_function_multicount_712">
<var class="function">multiCount</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   table names</dd>
<dt>param</dt>
<dd><em>mixed</em>   expression as WHERE clause, default = true (count all)</dd>
<dt>return</dt>
<dd><em>number</em>  number of the counted rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Count all of the records from multi-tables,
  it returns the number of the counted rows
</pre>
</div></div><pre id="source-0712"> <var class="keywords">function</var> multiCount(<var class="vars">$tables</var>, <var class="vars">$expr</var> = <var class="keywords">true</var>){
   <var class="vars">$result</var> = 0;
   <var class="vars">$this</var>-&gt;getMeta();
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; <var class="vars">$tables</var> != <var class="keywords">null</var>) {
     <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$tables</var>)) {
       <var class="vars">$tables</var> = <var class="vars">$this</var>-&gt;parseJoinTables(<var class="vars">$tables</var>);
     }
     <var class="vars">$tnames</var> = <var class="keywords">array</var>();
     <var class="vars">$tables</var> = <var class="funcs">array_values</var>(<var class="vars">$tables</var>);
     <var class="keywords">foreach</var> (<var class="vars">$tables</var> <var class="keywords">as</var> <var class="vars">$i</var> =&gt; <var class="vars">$table</var>) {
       <var class="vars">$oname</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$table</var>, <var class="strings">'table_name'</var>);
       <var class="vars">$tname</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$oname</var>);
       <var class="keywords">if</var> (<var class="vars">$i</var> === 0) {
         <var class="vars">$this</var>-&gt;tableName = <var class="vars">$tname</var>;
         <var class="vars">$tablename</var> = <var class="vars">$oname</var>;
       }
       <var class="vars">$tnames</var>[<var class="vars">$tname</var>] = 1;
     }
     <var class="keywords">if</var> (!<var class="funcs">is_bool</var>(<var class="vars">$expr</var>)) {
       <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">true</var>;
       <var class="vars">$expr</var> = <var class="vars">$this</var>-&gt;validExpr(<var class="vars">$expr</var>);
       <var class="vars">$this</var>-&gt;_onMultiSelect = <var class="keywords">null</var>;
     }
     <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta[<var class="vars">$this</var>-&gt;tableName])) {
       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the table(%s)'</var>, <var class="vars">$this</var>-&gt;tableName);
     }
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockShAll()) {
         <var class="vars">$rows</var> = <var class="keywords">array</var>();
         <var class="keywords">if</var> (<var class="vars">$fp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
           <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$fp</var>, 3);
           <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
           <var class="vars">$first</var> = <var class="keywords">true</var>;
           <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$fp</var>)) {
             <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$fp</var>);
             <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>)) {
               <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$buf</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
               <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$tnames</var>[<var class="vars">$key</var>])) {
                 <var class="vars">$rec</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$buf</var>);
                 <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$rec</var>)) {
                   <var class="keywords">if</var> (<var class="vars">$first</var>) {
                     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;safeExpr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="vars">$rows</var>[<var class="vars">$key</var>][] = <var class="vars">$rec</var>;
                     }
                     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
                       <var class="vars">$result</var> = 0;
                       <var class="keywords">break</var>;
                     }
                     <var class="vars">$first</var> = <var class="keywords">false</var>;
                   } <var class="keywords">else</var> {
                     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;expr(<var class="vars">$rec</var>, <var class="vars">$expr</var>)) {
                       <var class="vars">$rows</var>[<var class="vars">$key</var>][] = <var class="vars">$rec</var>;
                     }
                   }
                 }
               }
             }
           }
           <var class="funcs">fclose</var>(<var class="vars">$fp</var>);
         }
         <var class="vars">$this</var>-&gt;unlockAll();
         <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError() || <var class="keywords">empty</var>(<var class="vars">$rows</var>)) {
           <var class="vars">$result</var> = 0;
         } <var class="keywords">else</var> {
           <var class="vars">$this</var>-&gt;joinTables(<var class="vars">$rows</var>, <var class="vars">$tables</var>, <var class="vars">$expr</var>);
           <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
             <var class="vars">$result</var> = <var class="funcs">count</var>(<var class="vars">$rows</var>);
           }
         }
         <var class="keywords">unset</var>(<var class="vars">$rows</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0713"><h2>
<a name="p_function_vacuum_713">
<var class="function">vacuum</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em> success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Optimizes the database
 Extra spaces and null string(\0) in file are removed
</pre>
</div></div><pre id="source-0713"> <var class="keywords">function</var> vacuum(){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;lockExAll()) {
     <var class="keywords">if</var> (<var class="vars">$rp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>)) {
       <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$rp</var>, 1);
       <var class="keywords">if</var> (<var class="vars">$wp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>)) {
         <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$wp</var>, 1);
         <var class="vars">$pos</var> = <var class="funcs">ftell</var>(<var class="vars">$rp</var>);
         <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$rp</var>);
         <var class="vars">$move</var> = <var class="keywords">true</var>;
         <var class="keywords">if</var> (<var class="funcs">trim</var>(<var class="vars">$line</var>) == <var class="keywords">null</var>) {
           <var class="vars">$move</var> = <var class="keywords">false</var>;
           <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;_inTransaction) {
             <var class="vars">$move</var> = <var class="keywords">true</var>;
           }
         }
         <var class="funcs">fseek</var>(<var class="vars">$rp</var>, <var class="vars">$pos</var>);
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;meta)
          &amp;&amp; <var class="vars">$this</var>-&gt;meta === <var class="keywords">array</var>(<var class="keywords">array</var>())) {
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="vars">$move</var>) {
             <var class="funcs">fseek</var>(<var class="vars">$rp</var>, -1, SEEK_CUR);
             <var class="funcs">fseek</var>(<var class="vars">$wp</var>, -1, SEEK_CUR);
           }
           <var class="vars">$nl</var>  = <var class="vars">$this</var>-&gt;base16Encode(<var class="vars">$this</var>-&gt;NL, <var class="strings">'\x'</var>);
           <var class="vars">$re</var>  = <var class="funcs">sprintf</var>(<var class="strings">'&lt;[%s]{2,}&gt;'</var>, <var class="vars">$nl</var>);
           <var class="vars">$rm</var>  = <var class="keywords">array</var>(<var class="strings">' '</var>, <var class="strings">&quot;\t&quot;</var>, <var class="strings">&quot;\x00&quot;</var>);
           <var class="vars">$buf</var> = <var class="keywords">null</var>;
           <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$rp</var>)) {
             <var class="vars">$buf</var> = <var class="funcs">fread</var>(<var class="vars">$rp</var>, 0x2000);
             <var class="vars">$buf</var> = <var class="funcs">str_replace</var>(<var class="vars">$rm</var>, <var class="strings">''</var>, <var class="vars">$buf</var>);
             <var class="vars">$buf</var> = <var class="funcs">preg_replace</var>(<var class="vars">$re</var>, <var class="vars">$this</var>-&gt;NL, <var class="vars">$buf</var>);
             <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$buf</var>);
           }
           <var class="keywords">if</var> (<var class="keywords">isset</var>(<var class="vars">$buf</var>) &amp;&amp; <var class="funcs">substr</var>(<var class="vars">$buf</var>, -1) !== <var class="vars">$this</var>-&gt;NL) {
             <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$this</var>-&gt;NL);
           }
           <var class="funcs">ftruncate</var>(<var class="vars">$wp</var>, <var class="funcs">ftell</var>(<var class="vars">$wp</var>));
           <var class="vars">$result</var> = <var class="keywords">true</var>;
         }
         <var class="funcs">fclose</var>(<var class="vars">$wp</var>);
       }
       <var class="funcs">fclose</var>(<var class="vars">$rp</var>);
     }
     <var class="vars">$this</var>-&gt;unlockAll();
   }
   <var class="comments">//debug($result,'color=navy:***vacuum()ed***;');</var>
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0714"><h2>
<a name="p_function_describe_714">
<var class="function">describe</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  table name, (or null = all tables)</dd>
<dt>return</dt>
<dd><em>array</em>   the information as array</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Get the table definition and information
 Note:
   This function is experimental SQL command.
   Note that there is a possibility
    that the specification changes in the future.
</pre>
</div></div><pre id="source-0714"> <var class="keywords">function</var> describe(<var class="vars">$table</var> = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">array</var>();
   <var class="keywords">if</var> (<var class="vars">$table</var> == <var class="keywords">null</var>) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getTableInfo();
   } <var class="keywords">else</var> <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$table</var>)) {
     <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Only string can be given as argument'</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$meta</var> = <var class="vars">$this</var>-&gt;getMeta();
     <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
       <var class="vars">$meta</var> = <var class="funcs">array_filter</var>(<var class="vars">$meta</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$meta</var>) &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$meta</var>)) {
         <var class="vars">$database</var> = <var class="vars">$this</var>-&gt;getDatabaseName();
         <var class="vars">$table_key</var> = <var class="vars">$this</var>-&gt;encodeKey(<var class="vars">$table</var>);
         <var class="keywords">if</var> (<var class="funcs">strtolower</var>(<var class="vars">$table</var>) === <var class="strings">'database'</var>
          || <var class="funcs">strcasecmp</var>(<var class="vars">$table</var>, <var class="vars">$database</var>) === 0) {
           <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getTableInfo();
         } <var class="keywords">else</var> {
           <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$table_key</var>, <var class="vars">$meta</var>)) {
             <var class="vars">$meta</var> = <var class="vars">$meta</var>[<var class="vars">$table_key</var>];
             <var class="vars">$defs</var> = <var class="vars">$this</var>-&gt;getCreateDefinitionMeta(<var class="vars">$table</var>);
             <var class="vars">$create_sql</var>  = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$defs</var>, <var class="strings">'sql'</var>);
             <var class="vars">$primary_key</var> = <var class="vars">$this</var>-&gt;getValue(<var class="vars">$defs</var>, <var class="strings">'primary'</var>);
             <var class="vars">$definition</var>  = <var class="keywords">array</var>();
             <var class="keywords">if</var> (<var class="vars">$create_sql</var> != <var class="keywords">null</var>) {
               <var class="vars">$definition</var> = <var class="vars">$this</var>-&gt;parseCreateTableQuerySimple(<var class="vars">$create_sql</var>);
             }
             <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError() &amp;&amp; <var class="funcs">is_array</var>(<var class="vars">$definition</var>)) {
               <var class="vars">$result</var> = <var class="keywords">array</var>();
               <var class="keywords">foreach</var> (<var class="vars">$meta</var> <var class="keywords">as</var> <var class="vars">$name</var> =&gt; <var class="vars">$default</var>) {
                 <var class="vars">$type</var>  = <var class="strings">''</var>;
                 <var class="vars">$key</var>   = <var class="strings">''</var>;
                 <var class="vars">$extra</var> = <var class="strings">''</var>;
                 <var class="keywords">if</var> (<var class="funcs">array_key_exists</var>(<var class="vars">$name</var>, <var class="vars">$definition</var>)
                  &amp;&amp; <var class="funcs">array_key_exists</var>(<var class="strings">'type'</var>, <var class="vars">$definition</var>[<var class="vars">$name</var>])) {
                   <var class="vars">$type</var> = <var class="vars">$definition</var>[<var class="vars">$name</var>][<var class="strings">'type'</var>];
                 } <var class="keywords">else</var> {
                   <var class="vars">$type</var> = <var class="vars">$this</var>-&gt;defaultDataType;
                 }
                 <var class="keywords">if</var> (<var class="vars">$name</var> === <var class="strings">'rowid'</var>) {
                   <var class="vars">$key</var>   = <var class="strings">'primary'</var>;
                   <var class="vars">$extra</var> = <var class="strings">'auto_increment'</var>;
                 } <var class="keywords">else</var> <var class="keywords">if</var> (<var class="vars">$name</var> === <var class="vars">$primary_key</var>) {
                   <var class="vars">$extra</var> = <var class="vars">$this</var>-&gt;getExtraAliasMessage();
                 }
                 <var class="vars">$result</var>[] = <var class="keywords">array</var>(
                   <var class="strings">'name'</var>    =&gt; <var class="vars">$name</var>,
                   <var class="strings">'type'</var>    =&gt; <var class="vars">$type</var>,
                   <var class="strings">'key'</var>     =&gt; <var class="vars">$key</var>,
                   <var class="strings">'default'</var> =&gt; <var class="vars">$default</var>,
                   <var class="strings">'extra'</var>   =&gt; <var class="vars">$extra</var>
                 );
               }
             }
           }
         }
       }
     }
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromStatement)) {
     <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Statement(<var class="vars">$this</var>, <var class="vars">$result</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0715"><h2>
<a name="p_function_exec_715">
<var class="function">exec</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>query</dd>
<dt>param</dt>
<dd><em>string</em>  the manipulative SQL query</dd>
<dt>return</dt>
<dd><em>number</em>  the number of affected rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Executes the SQL query which is data manipulation
</pre>
</div></div><pre id="source-0715"> <var class="keywords">function</var> <var class="funcs">exec</var>(<var class="vars">$query</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isManip(<var class="vars">$query</var>)) {
     <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isMultiQuery(<var class="vars">$query</var>)) {
       <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;multiQuery(<var class="vars">$query</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$parsed</var> = <var class="vars">$this</var>-&gt;parseQueryImplements(<var class="vars">$query</var>);
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$parsed</var>)) {
         <var class="funcs">reset</var>(<var class="vars">$parsed</var>);
         <var class="vars">$type</var> = <var class="funcs">key</var>(<var class="vars">$parsed</var>);
         <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;lastMethod)) {
           <var class="vars">$type</var> = <var class="vars">$this</var>-&gt;lastMethod;
         }
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildQuery(<var class="vars">$parsed</var>, <var class="vars">$type</var>);
       }
     }
     <var class="vars">$result</var> = (<var class="keywords">int</var>)<var class="vars">$result</var>;
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0716"><h2>
<a name="p_function_query_716">
<var class="function">query</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>setEngine, getEngine</dd>
<dt>param</dt>
<dd><em>string</em> SQL query</dd>
<dt>return</dt>
<dd><em>mixed</em>  results of the query</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Executes the SQL query
 Uses PHP&#039;s expression on &quot;PHP&quot; Engine
  e.g. &quot;SELECT strlen(&#039;foo&#039;)&quot;
 Uses SQL standard expression on &quot;SQL&quot; Engine
  e.g. &quot;SELECT LENGTH(&#039;foo&#039;)&quot;
</pre>
</div></div><pre id="source-0716"> <var class="keywords">function</var> query(<var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;isMultiQuery(<var class="vars">$query</var>)) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;multiQuery(<var class="vars">$query</var>);
   } <var class="keywords">else</var> {
     <var class="vars">$parsed</var> = <var class="vars">$this</var>-&gt;parseQueryImplements(<var class="vars">$query</var>);
     <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$parsed</var>)) {
       <var class="funcs">reset</var>(<var class="vars">$parsed</var>);
       <var class="vars">$type</var> = <var class="funcs">key</var>(<var class="vars">$parsed</var>);
       <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;lastMethod)) {
         <var class="vars">$type</var> = <var class="vars">$this</var>-&gt;lastMethod;
       }
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;useQueryCache) {
         <var class="vars">$table</var> = <var class="vars">$this</var>-&gt;getTableNameFromTokens(<var class="vars">$parsed</var>, <var class="vars">$type</var>);
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;applyQueryCache(<var class="vars">$table</var>, <var class="vars">$query</var>);
       } <var class="keywords">else</var> {
         <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;buildQuery(<var class="vars">$parsed</var>, <var class="vars">$type</var>);
       }
       <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$result</var>) &amp;&amp; <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_fromStatement)) {
         <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Statement(<var class="vars">$this</var>, <var class="vars">$result</var>, <var class="vars">$query</var>);
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0717"><h2>
<a name="p_function_queryf_717">
<var class="function">queryf</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>       the SQL query as formatted as sprintf()</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql;
 <var class="vars">$sql</var> = <var class="strings">&quot;SELECT * FROM %s WHERE strlen(%s) == %5n OR %s = %q&quot;</var>;
 <var class="vars">$ret</var> = <var class="vars">$posql</var>-&gt;queryf(<var class="vars">$sql</var>, <var class="strings">&quot;foo&quot;</var>, <var class="strings">&quot;bar&quot;</var>, 123456789, <var class="strings">&quot;baz&quot;</var>, <var class="strings">&quot;value&quot;</var>);
 <var class="comments">// to  "SELECT * FROM foo WHERE strlen(bar) == 12345 OR baz = 'value'"</var></pre></dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql;
 <var class="vars">$sql</var> = <var class="strings">&quot;INSERT INTO foo (cols1, cols2) VALUES (%10n, %.10q)&quot;</var>;
 <var class="vars">$ret</var> = <var class="vars">$posql</var>-&gt;queryf(<var class="vars">$sql</var>, <var class="strings">&quot;123456789123456789&quot;</var>, <var class="funcs">str_repeat</var>(<var class="strings">&quot;abc&quot;</var>, 100));
 <var class="comments">// to  "INSERT INTO foo (cols1, cols2) VALUES ('1234567891', 'abcabca...')"</var></pre></dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="comments">// example: handle binary data</var>
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql;
 <var class="vars">$path</var> = <var class="strings">&quot;http://php.net/images/php.gif&quot;</var>;
 <var class="vars">$type</var> = <var class="strings">&quot;image/gif&quot;</var>;
 <var class="vars">$name</var> = <var class="strings">&quot;hoge.gif&quot;</var>;
 <var class="vars">$sql</var> = <var class="strings">&quot;INSERT INTO image (name, type, data) VALUES(%q, %q, %B)&quot;</var>;
 <var class="vars">$ret</var> = <var class="vars">$posql</var>-&gt;queryf(<var class="vars">$sql</var>, <var class="vars">$name</var>, <var class="vars">$type</var>, <var class="funcs">file_get_contents</var>(<var class="vars">$path</var>));
 <var class="comments">// it will be like convert below</var>
 <var class="comments">// "INSERT ... VALUES('hoge.gif', 'image/gif', base64_decode('R0lGO...'))"</var></pre></dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql;
 <var class="vars">$sql</var> = <var class="strings">&quot;INSERT INTO foo (cols2) VALUES (%q)&quot;</var>;
 <var class="vars">$ret</var> = <var class="vars">$posql</var>-&gt;queryf(<var class="vars">$sql</var>, <var class="strings">&quot;I'm feeling happy!&quot;</var>);
 <var class="comments">// to  "INSERT INTO foo (cols2) VALUES ('I\'m feeling happy!')"</var></pre></dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="comments">// using %a (auto) type</var>
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql;
 <var class="vars">$sql</var> = <var class="strings">&quot;SELECT %a, %a, %a %% 2, '%a' LIKE %a ESCAPE %a&quot;</var>;
 <var class="vars">$ret</var> = <var class="vars">$posql</var>-&gt;queryf(<var class="vars">$sql</var>, <var class="keywords">null</var>, <var class="keywords">true</var>, -1100.19, <var class="strings">&quot;hoge&quot;</var>, <var class="strings">&quot;%o%&quot;</var>, <var class="strings">&quot;|&quot;</var>);
 <var class="comments">// to "SELECT NULL, TRUE, -1100.19 % 2, 'hoge' LIKE '%o%' ESCAPE '|'"</var></pre></dd>
<dt>param</dt>
<dd><em>mixed</em>  (...) zero or more parameters to be passed to the function</dd>
<dt>return</dt>
<dd><em>mixed</em>        results of the query</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Executes the SQL query based on format of sprintf()
 The format was enhanced somewhat like below.
 ------------------------------------------------------------------
 1. An optional precision specifier that acts as a cutoff point,
    setting a maximum character limit to the string
 2. A type specifier that says
    what type the argument data should be treated as
 ---------------
 Extended types:
 ---------------
  a - Distinguished by native PHP type automatically.
      It will process as the suitable type of the argument.
  B - the argument is handled as binary string.
      It will convert as base64, and the data will be put on SQL
      so that the decipherment is done when the query is executed.
  n - the argument is treated as number(int or float).
      It is only cast to the type of number.
  s - it is the same as the type of sprintf()
      when the quotation mark is included in the string,
      it will escaped for SQL injection.
  q - the argument is treated as and presented as a string
      that enclosed by the single quotes(&#039;&#039;).
 ------------------------------------------------------------------
</pre>
</div></div><pre id="source-0717"> <var class="keywords">function</var> queryf(<var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="vars">$args</var> = <var class="funcs">func_get_args</var>();
   <var class="vars">$query</var> = <var class="funcs">call_user_func_array</var>(<var class="keywords">array</var>(&amp;<var class="vars">$this</var>, <var class="strings">'formatQueryString'</var>), <var class="vars">$args</var>);
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;query(<var class="vars">$query</var>);
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0718"><h2>
<a name="p_function_multiquery_718">
<var class="function">multiQuery</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>mixed</em>   the SQL query as array or string</dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql(<var class="strings">&quot;foo.db&quot;</var>);
 <var class="vars">$sql</var>  = <var class="strings">&quot;CREATE TABLE foo (cols1 DEFAULT 0);\n&quot;</var>;<var class="comments">// adds ";\n"</var>
 <var class="vars">$sql</var> .= <var class="strings">&quot;INSERT INTO foo (cols1) VALUES(1);\n&quot;</var>;
 <var class="vars">$sql</var> .= <var class="strings">&quot;INSERT INTO foo (cols1) VALUES(2);\n&quot;</var>;
 <var class="vars">$ret</var> = <var class="vars">$posql</var>-&gt;multiQuery(<var class="vars">$sql</var>);
 <var class="funcs">var_dump</var>(<var class="vars">$ret</var>);</pre></dd>
<dt>example</dt>
<dd><pre class="example">
 <var class="vars">$posql</var> = <var class="keywords">new</var> Posql(<var class="strings">&quot;foo.db&quot;</var>);
 <var class="vars">$sql</var> = <var class="keywords">array</var>();
 <var class="vars">$sql</var>[] = <var class="strings">&quot;CREATE TABLE bar (cols1 DEFAULT 0)&quot;</var>;
 <var class="vars">$sql</var>[] = <var class="strings">&quot;INSERT INTO bar (cols1) VALUES(1)&quot;</var>;
 <var class="vars">$sql</var>[] = <var class="strings">&quot;INSERT INTO bar (cols1) VALUES(2)&quot;</var>;
 <var class="vars">$ret</var> = <var class="vars">$posql</var>-&gt;multiQuery(<var class="vars">$sql</var>);
 <var class="funcs">var_dump</var>(<var class="vars">$ret</var>);</pre></dd>
<dt>return</dt>
<dd><em>number</em>  number of affected rows</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Executes the SQL query that has multielement
 If the argument was given as string,
 it have use for the semicolon (;) in the end of line
</pre>
</div></div><pre id="source-0718"> <var class="keywords">function</var> multiQuery(<var class="vars">$query</var>){
   <var class="vars">$result</var> = 0;
   <var class="keywords">if</var> (!<var class="funcs">is_array</var>(<var class="vars">$query</var>)) {
     <var class="vars">$query</var> = <var class="vars">$this</var>-&gt;parseMultiQuery(<var class="vars">$query</var>);
   }
   <var class="keywords">if</var> (<var class="funcs">is_array</var>(<var class="vars">$query</var>)) {
     <var class="vars">$len</var> = <var class="funcs">count</var>(<var class="vars">$query</var>);
     <var class="keywords">while</var> (--<var class="vars">$len</var> &gt;= 0) {
       <var class="vars">$sql</var> = <var class="funcs">array_shift</var>(<var class="vars">$query</var>);
       <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$sql</var>)) {
         <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Must be given only one dimensional array'</var>);
         <var class="keywords">break</var>;
       }
       <var class="comments">/*
       debug($sql, 'SQL@multiQuery');
       */</var>
       <var class="vars">$result</var> += (<var class="keywords">int</var>)<var class="vars">$this</var>-&gt;<var class="funcs">exec</var>(<var class="vars">$sql</var>);
       <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
         <var class="comments">//XXX: rollBack(); Should do?</var>
         <var class="comments">//$this-&gt;pushError('Cannot executes query(%s)', $sql);</var>
         <var class="keywords">break</var>;
       }
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0719"><h2>
<a name="p_function_quote_719">
<var class="function">quote</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the string to be quoted</dd>
<dt>param</dt>
<dd><em>mixed</em>   the type (not implemented)</dd>
<dt>return</dt>
<dd><em>string</em>  quoted string that is safe to pass into an SQL statement</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Quotes a string for use in a query.
 The type argument is not implemented.
 but it will be automatically distinguished.
</pre>
</div></div><pre id="source-0719"> <var class="keywords">function</var> quote(<var class="vars">$string</var>, <var class="vars">$type</var> = <var class="keywords">null</var>){
   <var class="vars">$string</var> = <var class="vars">$this</var>-&gt;formatQueryString(<var class="strings">'%a'</var>, <var class="vars">$string</var>);
   <var class="keywords">return</var> <var class="vars">$string</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0720"><h2>
<a name="p_function_prepare_720">
<var class="function">prepare</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>  the SQL statement</dd>
<dt>return</dt>
<dd><em>object</em>  the instance of Posql_Statement object</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Prepares a statement for execution and returns a statement object
</pre>
</div></div><pre id="source-0720"> <var class="keywords">function</var> prepare(<var class="vars">$query</var>){
   <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Statement(<var class="vars">$this</var>, <var class="keywords">null</var>, <var class="vars">$query</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0721"><h2>
<a name="p_function_transaction_721">
<var class="function">transaction</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>param</dt>
<dd><em>string</em>   the transaction command</dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Operates a transaction
 Note:
   Posql does not support nested transaction.
 Mode:
  - BEGIN    : Initialize and starts the transaction block.
  - START    : Alias for BEGIN.
  - COMMIT   : A present transaction is committed.
  - END      : Alias for COMMIT.
  - ROLLBACK : A present transaction is rolls backed.
</pre>
</div></div><pre id="source-0721"> <var class="keywords">function</var> transaction(<var class="vars">$mode</var>){
   <var class="vars">$result</var> = <var class="keywords">false</var>;
   <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;hasError()) {
     <var class="keywords">if</var> (!<var class="funcs">is_string</var>(<var class="vars">$mode</var>)) {
       <var class="vars">$mode</var> = <var class="funcs">gettype</var>(<var class="vars">$mode</var>);
     } <var class="keywords">else</var> {
       <var class="vars">$mode</var> = <var class="funcs">trim</var>(<var class="vars">$mode</var>);
     }
     <var class="keywords">switch</var> (<var class="funcs">strtolower</var>(<var class="vars">$mode</var>)) {
       <var class="keywords">case</var> <var class="strings">'begin'</var>:
       <var class="keywords">case</var> <var class="strings">'start'</var>:
           <var class="keywords">if</var> (!<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported the nested transaction'</var>);
           } <var class="keywords">else</var> {
             <var class="keywords">if</var> (!<var class="vars">$this</var>-&gt;lockExAllTables()) {
               <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Failed to begin the transaction'</var>);
             }
             <var class="keywords">if</var> (<var class="vars">$this</var>-&gt;hasError()) {
               <var class="vars">$this</var>-&gt;unlockAllTables();
             } <var class="keywords">else</var> {
               <var class="vars">$this</var>-&gt;lockDatabase();
               <var class="vars">$rp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>);
               <var class="keywords">if</var> (<var class="vars">$rp</var>) {
                 <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$rp</var>, 1);
                 <var class="vars">$wp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>);
                 <var class="keywords">if</var> (<var class="vars">$wp</var>) {
                   <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$wp</var>, 1);
                   <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$wp</var>)) {
                     <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$wp</var>);
                   }
                   <var class="vars">$trans_name</var> = <var class="vars">$this</var>-&gt;getTransactionKey();
                   <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
                   <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$rp</var>)) {
                     <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$rp</var>, <var class="keywords">true</var>);
                     <var class="keywords">if</var> (<var class="vars">$line</var> != <var class="keywords">null</var>) {
                       <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$trans_name</var>) === 0) {
                         <var class="keywords">break</var>;
                       } <var class="keywords">else</var> {
                         <var class="vars">$line</var> = <var class="vars">$trans_name</var> . <var class="vars">$delim</var> . <var class="vars">$this</var>-&gt;encode(<var class="vars">$line</var>);
                         <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$line</var> . <var class="vars">$this</var>-&gt;NL);
                       }
                     }
                   }
                   <var class="funcs">fclose</var>(<var class="vars">$wp</var>);
                   <var class="vars">$this</var>-&gt;_inTransaction = <var class="keywords">true</var>;
                   <var class="vars">$this</var>-&gt;_transactionName = <var class="vars">$trans_name</var>;
                   <var class="vars">$result</var> = <var class="keywords">true</var>;
                 }
                 <var class="funcs">fclose</var>(<var class="vars">$rp</var>);
               }
             }
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'commit'</var>:
       <var class="keywords">case</var> <var class="strings">'end'</var>:
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)
            || <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_transactionName)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Unable to commit the transaction'</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$rp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>);
             <var class="keywords">if</var> (<var class="vars">$rp</var>) {
               <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$rp</var>, 3);
               <var class="vars">$wp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>);
               <var class="keywords">if</var> (<var class="vars">$wp</var>) {
                 <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$wp</var>, 3);
                 <var class="vars">$trans_name</var> = <var class="vars">$this</var>-&gt;_transactionName;
                 <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
                 <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$rp</var>)) {
                   <var class="vars">$wrote</var> = <var class="keywords">false</var>;
                   <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$rp</var>, <var class="keywords">true</var>);
                   <var class="keywords">if</var> (<var class="vars">$line</var> != <var class="keywords">null</var> &amp;&amp; <var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>) !== <var class="keywords">false</var>) {
                     <var class="keywords">list</var>(<var class="vars">$key</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
                     <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$key</var>, <var class="vars">$trans_name</var>) === 0) {
                       <var class="vars">$line</var> = <var class="funcs">str_repeat</var>(<var class="strings">' '</var>, <var class="funcs">strlen</var>(<var class="vars">$line</var>)) . <var class="vars">$this</var>-&gt;NL;
                       <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$line</var>);
                       <var class="vars">$wrote</var> = <var class="keywords">true</var>;
                     }
                   }
                   <var class="keywords">if</var> (!<var class="vars">$wrote</var>) {
                     <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$wp</var>);
                   }
                 }
                 <var class="funcs">fclose</var>(<var class="vars">$wp</var>);
                 <var class="vars">$result</var> = <var class="keywords">true</var>;
               }
               <var class="funcs">fclose</var>(<var class="vars">$rp</var>);
             }
             <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; 2; <var class="vars">$i</var>++) {
               <var class="vars">$this</var>-&gt;vacuum();
             }
             <var class="vars">$this</var>-&gt;_inTransaction = <var class="keywords">null</var>;
             <var class="vars">$this</var>-&gt;_transactionName = <var class="keywords">null</var>;
             <var class="vars">$this</var>-&gt;unlockDatabase();
             <var class="vars">$this</var>-&gt;unlockAllTables();
           }
           <var class="keywords">break</var>;
       <var class="keywords">case</var> <var class="strings">'rollback'</var>:
           <var class="keywords">if</var> (<var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_inTransaction)
            || <var class="keywords">empty</var>(<var class="vars">$this</var>-&gt;_transactionName)) {
             <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Unable to rollback the transaction'</var>);
           } <var class="keywords">else</var> {
             <var class="vars">$rp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>);
             <var class="keywords">if</var> (<var class="vars">$rp</var>) {
               <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$rp</var>, 1);
               <var class="vars">$wp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r+'</var>);
               <var class="keywords">if</var> (<var class="vars">$wp</var>) {
                 <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$wp</var>, 1);
                 <var class="vars">$ap</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'a'</var>);
                 <var class="keywords">if</var> (<var class="vars">$ap</var>) {
                   <var class="vars">$tp</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fopen</var>(<var class="strings">'r'</var>);
                   <var class="keywords">if</var> (<var class="vars">$tp</var>) {
                     <var class="vars">$this</var>-&gt;fseekLine(<var class="vars">$tp</var>, 3);
                     <var class="vars">$trans_name</var> = <var class="vars">$this</var>-&gt;_transactionName;
                     <var class="vars">$delim</var> = <var class="vars">$this</var>-&gt;DELIM_TABLE;
                     <var class="vars">$end_symbol</var> = <var class="strings">'EOT'</var>;
                     <var class="vars">$end_point</var> = <var class="funcs">sprintf</var>(<var class="strings">'%s:%s;%s'</var>,
                       <var class="vars">$trans_name</var>,
                       <var class="vars">$end_symbol</var>,
                       <var class="vars">$this</var>-&gt;NL
                     );
                     <var class="vars">$end_point_trim</var> = <var class="funcs">trim</var>(<var class="vars">$end_point</var>);
                     <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$ap</var>, <var class="vars">$end_point</var>);
                     <var class="vars">$transaction_exists</var> = <var class="keywords">false</var>;
                     <var class="vars">$nl_length</var> = (-<var class="funcs">strlen</var>(<var class="vars">$this</var>-&gt;NL));
                     <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$tp</var>)) {
                       <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$tp</var>, <var class="keywords">true</var>);
                       <var class="keywords">if</var> (<var class="vars">$line</var> != <var class="keywords">null</var>) {
                         <var class="keywords">if</var> (<var class="vars">$line</var> === <var class="vars">$end_point_trim</var>) {
                           <var class="keywords">break</var>;
                         }
                         <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$line</var>, <var class="vars">$delim</var>) !== <var class="keywords">false</var>) {
                           <var class="keywords">list</var>(<var class="vars">$key</var>, <var class="vars">$data</var>) = <var class="funcs">explode</var>(<var class="vars">$delim</var>, <var class="vars">$line</var>);
                           <var class="keywords">if</var> (<var class="funcs">strpos</var>(<var class="vars">$key</var>, <var class="vars">$trans_name</var>) === 0) {
                             <var class="vars">$transaction_exists</var> = <var class="keywords">true</var>;
                             <var class="vars">$data</var> = <var class="vars">$this</var>-&gt;decode(<var class="vars">$data</var>);
                             <var class="keywords">if</var> (<var class="funcs">substr</var>(<var class="vars">$data</var>, <var class="vars">$nl_length</var>) !== <var class="vars">$this</var>-&gt;NL) {
                               <var class="vars">$data</var> .= <var class="vars">$this</var>-&gt;NL;
                             }
                             <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$ap</var>, <var class="vars">$data</var>);
                           }
                         }
                       }
                     }
                     <var class="keywords">if</var> (!<var class="vars">$transaction_exists</var>) {
                       <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not exists the transaction data'</var>);
                     }
                     <var class="keywords">while</var> (!<var class="funcs">feof</var>(<var class="vars">$rp</var>)) {
                       <var class="vars">$line</var> = <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$rp</var>, <var class="keywords">true</var>);
                       <var class="keywords">if</var> (<var class="vars">$line</var> != <var class="keywords">null</var>) {
                         <var class="keywords">if</var> (<var class="vars">$line</var> === <var class="vars">$end_point_trim</var>) {
                           <var class="vars">$size</var> = <var class="funcs">strlen</var>(<var class="vars">$line</var>);
                           <var class="vars">$line</var> = <var class="funcs">str_repeat</var>(<var class="strings">' '</var>, <var class="vars">$size</var>) . <var class="vars">$this</var>-&gt;NL;
                           <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$line</var>);
                           <var class="keywords">break</var>;
                         }
                         <var class="vars">$size</var> = <var class="funcs">strlen</var>(<var class="vars">$line</var>);
                         <var class="vars">$line</var> = <var class="funcs">str_repeat</var>(<var class="strings">' '</var>, <var class="vars">$size</var>) . <var class="vars">$this</var>-&gt;NL;
                         <var class="vars">$this</var>-&gt;<var class="funcs">fputs</var>(<var class="vars">$wp</var>, <var class="vars">$line</var>);
                       } <var class="keywords">else</var> {
                         <var class="vars">$this</var>-&gt;<var class="funcs">fgets</var>(<var class="vars">$wp</var>);
                       }
                     }
                     <var class="funcs">fclose</var>(<var class="vars">$tp</var>);
                     <var class="vars">$result</var> = <var class="keywords">true</var>;
                   }
                   <var class="funcs">fclose</var>(<var class="vars">$ap</var>);
                 }
                 <var class="funcs">fclose</var>(<var class="vars">$wp</var>);
               }
               <var class="funcs">fclose</var>(<var class="vars">$rp</var>);
             }
             <var class="keywords">for</var> (<var class="vars">$i</var> = 0; <var class="vars">$i</var> &lt; 2; <var class="vars">$i</var>++) {
               <var class="vars">$this</var>-&gt;vacuum();
             }
             <var class="vars">$this</var>-&gt;_inTransaction = <var class="keywords">null</var>;
             <var class="vars">$this</var>-&gt;_transactionName = <var class="keywords">null</var>;
             <var class="vars">$this</var>-&gt;unlockDatabase();
             <var class="vars">$this</var>-&gt;unlockAllTables();
           }
           <var class="keywords">break</var>;
       <var class="keywords">default</var>:
           <var class="vars">$this</var>-&gt;pushError(<var class="strings">'Not supported transaction command(%s)'</var>, <var class="vars">$mode</var>);
           <var class="keywords">break</var>;
     }
   }
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0722"><h2>
<a name="p_function_begintransaction_722">
<var class="function">beginTransaction</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>transaction</dd>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Initialize and starts the transaction block
</pre>
</div></div><pre id="source-0722"> <var class="keywords">function</var> beginTransaction(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;transaction(<var class="strings">'begin'</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0723"><h2>
<a name="p_function_commit_723">
<var class="function">commit</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>transaction</dd>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Commits a transaction
</pre>
</div></div><pre id="source-0723"> <var class="keywords">function</var> commit(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;transaction(<var class="strings">'commit'</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0724"><h2>
<a name="p_function_rollback_724">
<var class="function">rollBack</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>transaction</dd>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>boolean</em>  success or failure</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Rolls back a transaction
</pre>
</div></div><pre id="source-0724"> <var class="keywords">function</var> rollBack(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;transaction(<var class="strings">'rollback'</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0725"><h2>
<a name="p_function_lastinsertid_725">
<var class="function">lastInsertId</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>getLastInsertId</dd>
<dt>param</dt>
<dd><em>void</em></dd>
<dt>return</dt>
<dd><em>number</em>  the value to inserted &quot;rowid&quot; or NULL</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return the &quot;rowid&quot; of the last row insert
  from this connection to the database.
 This method implemented for PDO with compatibility
</pre>
</div></div><pre id="source-0725"> <var class="keywords">function</var> lastInsertId(){
   <var class="vars">$result</var> = <var class="vars">$this</var>-&gt;getLastInsertId();
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }</pre><div class="rewind">
<a href="#index" title="goto index">index</a>
</div></div>
<hr>
<div id="block-0726"><h2>
<a name="p_function_getpager_726">
<var class="function">getPager</var>
</a>
</h2><div class="function"><div>
<dl>
<dt>see</dt>
<dd>Posql_Pager</dd>
<dt>param</dt>
<dd><em>number</em>  number of total items</dd>
<dt>param</dt>
<dd><em>number</em>  current page number</dd>
<dt>param</dt>
<dd><em>number</em>  number of items per page</dd>
<dt>param</dt>
<dd><em>number</em>  number of page links for each window</dd>
<dt>return</dt>
<dd><em>object</em>  the pager object</dd>
<dt>access</dt>
<dd>public</dd>
</dl>
<pre class="desc"> Return the Pager object which has each pages information
                 - totalPages  : number of total pages
                 - currentPage : number of current page
                 - range       : number of page links for each window
                 - pages       : array with number of pages
                 - startPage   : number of start page
                 - endPage     : number of end page
                 - prev        : number of previous page
                 - next        : number of next page
                 - offset      : number offset of SELECT statement
                 - limit       : number limit of SELECT statement
</pre>
</div></div><pre id="source-0726"> <var class="keywords">function</var> getPager(<var class="vars">$total_count</var> = <var class="keywords">null</var>, <var class="vars">$curpage</var> = <var class="keywords">null</var>,
                   <var class="vars">$perpage</var>     = <var class="keywords">null</var>, <var class="vars">$range</var>   = <var class="keywords">null</var>){
   <var class="vars">$result</var> = <var class="keywords">new</var> Posql_Pager();
   <var class="vars">$result</var>-&gt;setPager(<var class="vars">$total_count</var>, <var class="vars">$curpage</var>, <var class="vars">$perpage</var>, <var class="vars">$range</var>);
   <var class="keywords">return</var> <var class="vars">$result</var>;
 }
}</pre></div>
<!--*********************** OTHER Document ***********************-->

<div class="rewind">
 <a href="#index" title="goto the index">index</a>
</div>
<hr>
<h2 id="other_document">Other documents and manuals</h2>

<p>
 The main documents and the manuals are included in the following links.
</p>

<div>
 <ul>
  <li>
   <strong>
    <a id="posql_sql_reference"
       href="posql.sql.manual.html" title="Posql SQL Reference">
     Posql SQL Reference
    </a>
   </strong>
   <span>
    - Reference to supported SQL syntax by Posql
   </span>
  </li>
  <li>
   <strong>
    <a id="posql_api_reference"
       href="posql.api.manual.html" title="Posql API Reference">
     Posql API Reference
    </a>
   </strong>
   <span>
    - Reference to methods of class Posql as API
   </span>
  </li>
 </ul>
</div>

<!--************************* FOOTER *************************-->

<hr>
<p class="footer">
 <a href="http://sourceforge.jp/projects/posql/"
    target="_blank" title="open in blanks window">
  Posql Project Page
 </a>
 <br>Last modified: 2010/03/28
 <span>Written by</span>
 <span>
  <a href="http://feel.happy.nu/"
     title="website of author(Japanese)">polygon planet</a>
 </span>
</p>

</body>
</html>